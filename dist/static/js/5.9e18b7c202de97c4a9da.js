webpackJsonp([5],{"7BHT":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("4YfN"),n=s.n(a),r=s("lC5x"),i=s.n(r),c=s("J0Oq"),o=s.n(c),l=s("gyMJ"),d=s("AjrE"),u=s("nTTB"),m=s("sBeU"),p=s("Zebl"),v=s("b8UZ"),f={data:function(){return{addComment:{topicId:"",content:"",userId:""},addReply:{topicId:"",content:"",toId:"",userId:"",commentId:""},inputComment:"",showReplyInputId:"",comments:"",articleid:""}},methods:{commentArticle:function(){var t=this;return o()(i.a.mark(function e(){var s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.addComment.content){e.next=4;break}t.$message.error("评论内容不能为空"),e.next=14;break;case 4:if(t.isLogin){e.next=8;break}t.$message.error("登录后才能评论哦"),e.next=14;break;case 8:return t.addComment.userId=t.loginUserId,t.addComment.topicId=t.articleid,e.next=12,Object(l.e)(t.addComment);case 12:1===(s=e.sent).status&&(t.$message({message:s.message,type:"success"}),t.addComment.content="");case 14:case"end":return e.stop()}},e,t)}))()},replyFun:function(t,e){this.inputComment="回复"+t.nickName+" ",this.showReplyInputId=e,this.addReply.topicId=this.articleid,this.addReply.toId=t.userId,this.addReply.userId=this.loginUserId,this.addReply.commentId=e,this.addReply.content=""},cancelReplyFun:function(){this.showReplyInputId=""},addReplyFun:function(){var t=this;return o()(i.a.mark(function e(){var s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLogin){e.next=3;break}return t.$message.error("登录后才能评论哦"),e.abrupt("return");case 3:if(t.addReply.content){e.next=6;break}return t.$message({message:"回复内容不能为空",type:"error"}),e.abrupt("return");case 6:return e.next=8,Object(l.t)(t.addReply);case 8:1===(s=e.sent).status?(t.$message({message:s.message,type:"success"}),t.cancelReplyFun()):t.$message({message:s.message,type:"error"});case 10:case"end":return e.stop()}},e,t)}))()},delComment:function(t){var e=this;this.$confirm("删除该评论以及该评论的所有回复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(o()(i.a.mark(function s(){return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(l.g)(t);case 2:1===s.sent.status?e.$message({message:"删除评论成功",type:"success"}):e.$message.error("删除失败");case 4:case"end":return s.stop()}},s,e)}))).catch(function(){e.$message({type:"info",message:"已取消删除"})})},delReply:function(t){var e=this;this.$confirm("确定删除该回复?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(o()(i.a.mark(function s(){return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(l.h)(t);case 2:1===s.sent.status?e.$message({message:"删除评论成功",type:"success"}):e.$message.error("删除失败");case 4:case"end":return s.stop()}},s,e)}))).catch(function(){e.$message({type:"info",message:"已取消删除"})})}},computed:n()({},Object(v.b)(["loginUserId","isLogin","articleComment"])),mounted:function(){this.articleid=this.$route.params.id,this.$store.dispatch("getArticleComment",{articleid:this.articleid})}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form",{ref:"form",attrs:{model:t.addComment}},[a("el-form-item",[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入评论内容"},model:{value:t.addComment.content,callback:function(e){t.$set(t.addComment,"content",e)},expression:"addComment.content"}})],1),t._v(" "),a("el-form-item",[a("div",{staticClass:"fr"},[a("el-button",[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.commentArticle()}}},[t._v("评论")])],1)])],1)],1)]),t._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("ul",t._l(t.articleComment,function(e,n){return a("li",{staticClass:"comment-item"},[a("div",{staticClass:"firstComment clearfix"},[a("img",{staticClass:"userTou fl",attrs:{src:s("jv0K"),alt:""}}),t._v(" "),a("div",{staticClass:"comment-txt fl"},[a("span",{staticClass:"comment-user"},[a("router-link",{attrs:{tag:"a",to:"/personalcenter/"+e.userId}},[t._v(t._s(e.nickName))]),t._v("：")],1),t._v(" "),a("span",{staticClass:"comment-content"},[t._v(t._s(e.content))]),t._v(" "),a("span",{staticClass:"comment-time"},[t._v(t._s(e.updataDate))]),t._v(" "),a("span",{staticClass:"comment-op"},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(s){return t.replyFun(e,e.id)}}},[t._v("回复")]),t._v(" "),a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(s){return t.delComment(e.id)}}},[t._v("删除")])])])]),t._v(" "),a("ul",{staticClass:"reply-list"},t._l(e.reply,function(n,r){return a("li",{staticClass:"reply-item"},[a("div",{staticClass:"firstComment clearfix"},[a("img",{staticClass:"userTou fl",attrs:{src:s("jv0K"),alt:""}}),t._v(" "),a("div",{staticClass:"comment-txt fl"},[a("span",{staticClass:"comment-user"},[a("router-link",{attrs:{tag:"a",to:"/personalcenter/"+n.userId}},[t._v(t._s(n.nickName))]),t._v("\n                                  回复\n                                  "),a("router-link",{attrs:{tag:"a",to:"/personalcenter/"+n.toId}},[t._v(t._s(n.toName))]),t._v("：")],1),t._v(" "),a("span",{staticClass:"comment-content"},[t._v(t._s(n.content))]),t._v(" "),a("span",{staticClass:"comment-time"},[t._v(t._s(n.updataDate))]),t._v(" "),a("span",{staticClass:"reply-op"},[t.loginUserId===n.userId?a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.delReply(n.id)}}},[t._v("删除")]):t._e(),t._v(" "),a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(s){return t.replyFun(n,e.id)}}},[t._v("回复")])])])])])}),0),t._v(" "),t.showReplyInputId===e.id?a("div",{staticClass:"input-reply input-wrapper clearfix"},[a("el-input",{staticClass:"gray-bg-input",attrs:{type:"textarea",rows:1,autofocus:"",placeholder:t.inputComment},model:{value:t.addReply.content,callback:function(e){t.$set(t.addReply,"content",e)},expression:"addReply.content"}}),t._v(" "),a("div",{staticClass:"btn-control fr mg-top-10"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.cancelReplyFun()}}},[t._v("取消")]),t._v(" "),a("el-button",{staticClass:"btn",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.addReplyFun()}}},[t._v("确定")])],1)],1):t._e()])}),0)])])],1)],1)},staticRenderFns:[]};var g=s("C7Lr")(f,_,!1,function(t){s("iCUv")},null,null).exports,C={components:{AboutUs:d.a,PersonalProfile:u.a,NewestComment:m.a,ArticleCategory:p.a,Comment:g},data:function(){return{userId:"",articleId:"",articleDetail:""}},methods:{init:function(){var t=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.articleId=t.$route.params.id,e.next=3,Object(l.c)(t.articleId);case 3:t.articleDetail=e.sent,t.userId=t.articleDetail.userId,t.$store.dispatch("setEnterUserId",t.userId);case 6:case"end":return e.stop()}},e,t)}))()}},computed:n()({},Object(v.b)(["loginUserId","enterUserId"])),created:function(){this.init()},watch:{$route:function(t,e){this.init()}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"articledetail"},[s("el-row",{staticClass:"mg-top-15",attrs:{gutter:20}},[s("el-col",{attrs:{span:6,offset:1}},[s("div",{staticClass:"grid-content bg-purple"},[s("PersonalProfile")],1),t._v(" "),s("div",{staticClass:"grid-content bg-purple mg-top-15"},[s("ArticleCategory")],1),t._v(" "),s("div",{staticClass:"grid-content bg-purple mg-top-15"},[s("NewestComment")],1),t._v(" "),s("div",{staticClass:"grid-content bg-purple mg-top-15"},[s("AboutUs")],1)]),t._v(" "),s("el-col",{attrs:{span:16}},[s("div",{staticClass:"grid-content bg-purple"},[s("div",{staticClass:"articledetail-main"},[s("div",{staticClass:"articledetail-header"},[s("h2",[t._v("标题："+t._s(t.articleDetail.title))]),t._v(" "),s("div",{staticClass:"articledetail-header-txt"},[s("span",[t._v("发表时间："+t._s(t.articleDetail.publishTime))]),t._v(" "),t.userId!=t.loginUserId?s("span",[t._v("作者："+t._s(t.articleDetail.nickName))]):t._e(),t._v(" "),s("span",[t._v("阅读量："+t._s(t.articleDetail.clickNum))]),t._v(" "),s("span",[t._v("所属版块："+t._s(t.articleDetail.plateName))]),t._v(" "),t.userId==t.loginUserId?s("router-link",{staticClass:"editArticle",attrs:{to:"/editarticle/"+t.articleId,tag:"span"}},[t._v("编辑")]):t._e()],1)]),t._v(" "),s("div",{staticClass:"articledetail-content"},[s("div",{domProps:{innerHTML:t._s(t.articleDetail.content)}})]),t._v(" "),s("div",{staticClass:"xian"}),t._v(" "),s("div",{staticClass:"articledetail-comment"},[s("Comment")],1)])])])],1)],1)},staticRenderFns:[]};var y=s("C7Lr")(C,h,!1,function(t){s("9UKs")},null,null);e.default=y.exports},"9UKs":function(t,e){},iCUv:function(t,e){}});
//# sourceMappingURL=5.9e18b7c202de97c4a9da.js.map