{"version":3,"sources":["webpack:///./static/kindeditor/kindeditor-all.js","webpack:///src/pages/EditArticle/EditArticle.vue","webpack:///./src/pages/EditArticle/EditArticle.vue?162c","webpack:///./src/pages/EditArticle/EditArticle.vue"],"names":["oldInitSettings","window","undefined","KindEditor","console","log","_VERSION","_ua","navigator","userAgent","toLowerCase","_IE","indexOf","_NEWIE","_GECKO","_WEBKIT","_OPERA","_MOBILE","_IOS","test","_QUIRKS","document","compatMode","_IERANGE","getSelection","_matches","exec","_V","_TIME","Date","getTime","_round","Math","round","K","DEBUG","VERSION","IE","GECKO","WEBKIT","OPERA","V","TIME","each","_each","isArray","_isArray","isFunction","_isFunction","inArray","_inArray","inString","_inString","trim","_trim","addUnit","_addUnit","removeUnit","_removeUnit","escape","_escape","unescape","_unescape","toCamel","_toCamel","toHex","_toHex","toMap","_toMap","toArray","_toArray","undef","_undef","invalidUrl","_invalidUrl","addParam","_addParam","extend","_extend","json","_json","_INLINE_TAG_MAP","_BLOCK_TAG_MAP","_SINGLE_TAG_MAP","_STYLE_TAG_MAP","_CONTROL_TAG_MAP","_PRE_TAG_MAP","_NOSPLIT_TAG_MAP","_AUTOCLOSE_TAG_MAP","_FILL_ATTR_MAP","basePath","_getBasePath","options","designMode","fullscreenMode","filterMode","wellFormatMode","shadowMode","loadStyleMode","themesPath","langPath","pluginsPath","themeType","langType","urlType","newlineTag","resizeType","syncType","pasteType","dialogAlignType","useContextmenu","fullscreenShortcut","bodyClass","indentChar","cssPath","cssData","minWidth","minHeight","minChangeSize","zIndex","items","noDisableItems","colorTable","fontSizeTable","htmlTags","font","span","div","table","td,th","a","embed","img","p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6","pre","hr","br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del","iframe","layout","_INPUT_KEY_MAP","_CURSORMOVE_KEY_MAP","_CHANGE_KEY_MAP","key","val","_EVENT_PROPS","split","KEvent","init","el","event","self","this","doc","ownerDocument","target","srcElement","nodeType","parentNode","relatedTarget","fromElement","toElement","pageX","clientX","d","documentElement","body","scrollLeft","clientLeft","pageY","clientY","scrollTop","clientTop","which","charCode","keyCode","metaKey","ctrlKey","button","preventDefault","ev","returnValue","stopPropagation","cancelBubble","stop","_eventExpendo","_eventId","_eventData","_readyFinished","attachEvent","events","ctrl","_ctrl","ready","_ready","formatUrl","_formatUrl","formatHtml","_formatHtml","getCssList","_getCssList","getAttrList","_getAttrList","mediaType","_mediaType","mediaAttrs","_mediaAttrs","mediaEmbed","_mediaEmbed","mediaImg","_mediaImg","clearMsWord","_clearMsWord","tmpl","_tmpl","_getSetAttrDiv","createElement","setAttribute","_GET_SET_ATTRIBUTE","className","query","_query","queryAll","_queryAll","KNode","node","length","i","len","constructor","_getDoc","name","_getNodeName","type","win","_getWin","fn","call","bind","_bind","unbind","_unbind","fire","_fire","hasAttr","_getAttr","attr","outer","k","v","_setAttr","removeAttr","_removeAttr","get","eq","hasClass","cls","_hasClass","addClass","removeClass","replace","RegExp","html","innerHTML","_setHtml","text","innerText","textContent","hasVal","_hasVal","value","css","style","_computedCss","width","offsetWidth","height","offsetHeight","opacity","filter","data","pos","x","y","getBoundingClientRect","box","_getScrollPos","left","top","offsetLeft","offsetTop","offsetParent","clone","bool","cloneNode","append","expr","appendChild","_get","appendTo","before","insertBefore","after","nextSibling","replaceWith","nodes","newNode","replaceChild","push","empty","child","firstChild","next","removeChild","remove","keepChilds","show","_originDisplay","hide","display","isSingle","isInline","isBlock","isStyle","isControl","contains","otherNode","_contains","parent","children","list","nodeValue","first","last","index","sibling","previousSibling","prev","scan","order","walk","n","lastChild","prototype","_K","root","charAt","substr","childNodes","id","arguments","NodeClass","_START_TO_START","_START_TO_END","_END_TO_END","_END_TO_START","_BOOKMARK_ID","KRange","startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestor","getParents","parents","parentA","parentB","parentsA","parentsB","lenA","lenB","setStart","offset","_updateCollapsed","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNode","selectNodeContents","knode","collapse","toStart","compareBoundaryPoints","how","range","rangeA","rangeB","arr","nodeA","nodeB","nodeC","posA","posB","cmp","compareEndPoints","diff","cloneRange","toString","rng","cloneContents","_copyAndDelete","deleteContents","extractContents","insertNode","c","sc","so","ec","eo","nodeCount","nodeName","splitText","surroundContents","hasControlRange","createRange","e","createControlRange","addElement","down","createTextRange","setEndPoint","_getEndRange","downPos","isStart","right","up","upPos","enlarge","toBlock","enlargePos","shrink","createBookmark","serialize","endNode","startNode","start","end","moveToBookmark","bookmark","RangeClass","_range","START_TO_START","START_TO_END","END_TO_END","END_TO_START","KCmd","sel","_getSel","selection","forceReset","_getRng","select","hasDummy","hasU200b","dummy","moveToElementText","ex","focus","createTextNode","removeAllRanges","addRange","scrollTo","wrap","wrapper","copyWrapper","ancestor","_inPreElement","_wrapNode","map","tempRange","needSplit","_hasAttrOrCss","frag","dummyParent","ksc","_removeAttrOrCss","kscp","sb","_isEmptyNode","sa","startBefore","startDummy","endDummy","nodeList","cmpStart","startAfter","endAfter","commonNode","find","cNode","tagName","state","queryCommandState","lc","_nativeCommandValue","h1,h2,h3,h4,h5,h6,p,div,pre,address","*","toggle","bold","strong","b","italic","em","underline","u","strikethrough","s","forecolor","hilitecolor","fontsize","fontname","fontfamily","removeformat","inserthtml","quickMode","insertHtml","createDocumentFragment","item","outerHTML","pasteHTML","temp","getElementById","newRange","_toRange","pasteHtml","print","insertimage","url","title","border","align","createlink","setAttr","_nativeCommand","unlink","queryCommandSupported","CmdClass","cmd","_cmd","KWidget","z","_alignEl","alignEl","position","z-index","autoPos","src","autoScroll","scrollPos","diffX","diffY","updateProp","w","h","clientWidth","clientHeight","docEl","_docElement","draggable","moveEl","moveFn","_drag","WidgetClass","widget","_widget","_direction","getElementsByTagName","dir","KEdit","beforeGetHtml","beforeSetHtml","afterSetHtml","isDocumentDomain","location","protocol","host","domain","srcScript","iframeSrc","encodeURIComponent","_iframeDoc","open","write","_getInitHtml","close","contentWindow","afterChange","click","_mousedownHandler","blur","mousedown","keydown","_elementVal","disabled","contentEditable","removeAttribute","afterCreate","textarea","tabIndex","isNaN","parseInt","setWidth","setHeight","setTimeout","isFull","design","input","timeoutHandler","keyup","altKey","mouseup","contextmenu","EditClass","edit","_edit","iframeDoc","KToolbar","hover","method","disableMode","noDisableItemMap","_itemMap","mouseover","mouseout","_selectToolbar","unselect","enable","disable","disableAll","getAttribute","ToolbarClass","toolbar","_toolbar","KMenu","centerLineMode","addItem","centerDiv","itemDiv","leftDiv","rightDiv","iconClass","checked","beforeRemove","MenuClass","menu","_menu","KColorPicker","colors","selectedColor","_cells","cellPadding","cellSpacing","row","insertRow","cell","insertCell","colSpan","_addAttr","j","color","noColor","ColorPickerClass","colorpicker","_colorpicker","KUploadButton","fieldName","extraParams","afterError","str","alert","hiddenElements","form","join","fileBox","submit","tempForm","afterUpload","UploadButtonClass","uploadbutton","_uploadbutton","KDialog","previewBtn","yesBtn","noBtn","closeBtn","showMask","contentDiv","iframeMask","headerDiv","closeIcon","clickEl","beforeDrag","bodyDiv","footerDiv","btn","_createButton","mask","docWidth","max","scrollWidth","docHeight","scrollHeight","isLoading","setMaskIndex","msg","loading","hideLoading","DialogClass","dialog","_dialog","tabs","_tabs","loadScript","_loadScript","loadStyle","_loadStyle","ajax","_ajax","_language","KEditor","lang","mixed","_lang","loadPlugin","_pluginStatus","_plugins","handler","_handlers","clickToolbar","updateState","addContextmenu","_contextmenus","create","isCreated","overflow","container","toolbarDiv","editDiv","statusbar","_scrollPos","_fullscreenExecuted","htmlList","menuName","hideMenu","editHeight","_removeBookmarkTag","_removeTempTag","_docMousedownFn","_bindContextmenuEvent","_bindNewlineEvent","_bindTabEvent","_bindFocusEvent","addBookmark","readonlyMode","readonly","initContent","_undoStack","pop","_fullscreenResizeHandler","initResize","resize","dialogs","hideDialog","fullHtml","isEmpty","isDirty","selectedHtml","count","mode","changeFlag","apply","appendHtml","sync","checkSize","abs","_firstAddBookmark","_addBookmarkToStack","undo","_undoToRedo","_redoStack","redo","fullscreen","isReadonly","createMenu","hideContextmenu","createDialog","firstDialog","parentDialog","errorDialog","_instances","_eachEditor","splice","EditorClass","editor","_editor","_create","instances","plugin","_plugin","shortcutKeys","selectall","hasForm","resetBtn","loaded","blocks","heights","h1","h2","h3","H4","p","curVal","getSelectedLink","getSelectedImage","_getImageFromRange","getSelectedFlash","getSelectedMedia","getSelectedAnchor","uName","toUpperCase","cond","getSelectedTable","getSelectedRow","getSelectedCell","pasting","white-space","execCommand","movePastedData","full","tag","$0","$1","$2","$3","imgAttrs","styles","attrs","code","href","match","_addClassToTag","Object","obj","hasOwnProperty","delimiter","unit","hex","Array","slice","defaultVal","param","proto","childProto","cx","lastIndex","charCodeAt","eval","els","substring","lastIndexOf","_bindEvent","addEventListener","_useCapture","_unbindEvent","removeEventListener","detachEvent","_getId","_setId","_removeId","kevent","shiftKey","readyFunc","readyState","toplevel","frameElement","doScroll","ieReadyFunc","reg","_formatCss","pathname","m","getRealPath","path","parts","paths","part","getRelativePath","depth","prefix","wellFormatted","fontSizeList","htmlTagMap","script","tagStack","$4","$5","$6","startNewline","startSlash","endSlash","endNewline","attrMap","fontStyleMap","fontStyle","styleMap","_mediaClass","srcTag","blankPath","Function","exprList","mergedResults","stripslashes","cmpTag","tagA","tagB","byId","byClass","getElementsByClassName","querySelectorAll","byAttr","matches","getElementsByName","byName","re","results","subResults","l","isChild","lenth","parentWindow","defaultView","camelKey","getComputedStyle","getPropertyValue","currentStyle","_VALUE_TAG_MAP","_docHeight","_docWidth","scrollX","scrollY","isCopy","isDelete","splitTextNode","centerNode","center","copyRange","incStart","incEnd","textNode","removeNodes","extractNodes","nextNode","childFlag","testRange","_moveToElementText","_getStartEnd","parentElement","pointRange","duplicate","startPos","nodeRange","moveStart","prevNode","kchild","tr2td","cells","queryCommandValue","rangeCount","getRangeAt","_singleKeyMap","newMap","_hasAttrOrCssByKey","mapKey","_removeAttrOrCssByKey","allFlag","_getInnerNode","inner","_mergeWrapper","lastA","childA","merged","_mergeAttrs","nodeWrapper","iframeFix","docs","mousemove","moveListener","upListener","selectListener","releaseCapture","setCapture","kdoc","contentDocument","arg","afterSelect","liList","ul","li","tab","selectedIndex","panel","head","charset","onload","onreadystatechange","_chopQuery","link","links","absoluteUrl","rel","dataType","xhr","XMLHttpRequest","ActiveXObject","status","responseText","params","setRequestHeader","send","_parseLangKey","ns","maxWidth","shift","prevItem","visibility","menuHeight","brSkipTagMap","pSkipTagMap","getAncestorTagName","afterTab","afterFocus","afterBlur","stack","fromStack","toStack","setOption","se","source","preview","cut","copy","paste","plainpaste","wordpaste","justifyleft","justifycenter","justifyright","justifyfull","insertorderedlist","insertunorderedlist","indent","outdent","subscript","superscript","formatblock","image","multiimage","flash","media","tablecell","emoticons","about","filemanager","baidumap","lineheight","clearhtml","pagebreak","quickformat","insertfile","template","anchor","yes","no","editImage","deleteImage","editFlash","deleteFlash","editMedia","deleteMedia","editLink","deleteLink","editAnchor","deleteAnchor","tableprop","tablecellprop","tableinsert","tabledelete","tablecolinsertleft","tablecolinsertright","tablerowinsertabove","tablerowinsertbelow","tablerowmerge","tablecolmerge","tablerowsplit","tablecolsplit","tablecoldelete","tablerowdelete","pleaseSelectFile","invalidImg","invalidMedia","invalidWidth","invalidHeight","invalidBorder","invalidRows","invalidCols","invalidPadding","invalidSpacing","invalidJson","uploadSuccess","cutError","copyError","pasteError","ajaxLoading","uploadLoading","uploadError","plainpaste.comment","wordpaste.comment","code.pleaseInput","link.url","link.linkType","link.newWindow","link.selfWindow","flash.url","flash.width","flash.height","flash.upload","flash.viewServer","media.url","media.width","media.height","media.autostart","media.upload","media.viewServer","image.remoteImage","image.localImage","image.remoteUrl","image.localUrl","image.size","image.width","image.height","image.resetSize","image.align","image.defaultAlign","image.leftAlign","image.rightAlign","image.imgTitle","image.upload","image.viewServer","multiimage.uploadDesc","multiimage.startUpload","multiimage.clearAll","multiimage.insertAll","multiimage.queueLimitExceeded","multiimage.fileExceedsSizeLimit","multiimage.zeroByteFile","multiimage.invalidFiletype","multiimage.unknownError","multiimage.pending","multiimage.uploadError","filemanager.emptyFolder","filemanager.moveup","filemanager.viewType","filemanager.viewImage","filemanager.listImage","filemanager.orderType","filemanager.fileName","filemanager.fileSize","filemanager.fileType","insertfile.url","insertfile.title","insertfile.upload","insertfile.viewServer","table.cells","table.rows","table.cols","table.size","table.width","table.height","table.percent","table.px","table.space","table.padding","table.spacing","table.align","table.textAlign","table.verticalAlign","table.alignDefault","table.alignLeft","table.alignCenter","table.alignRight","table.alignTop","table.alignMiddle","table.alignBottom","table.alignBaseline","table.border","table.borderWidth","table.borderColor","table.backgroundColor","map.address","map.search","baidumap.address","baidumap.search","baidumap.insertDynamicMap","anchor.name","formatblock.formatBlock","h4","fontname.fontName","SimSun","NSimSun","FangSong_GB2312","KaiTi_GB2312","SimHei","Microsoft YaHei","Arial","Arial Black","Times New Roman","Courier New","Tahoma","Verdana","lineheight.lineHeight","1","1.5","2","2.5","3","template.selectTemplate","template.replaceContent","template.fileList","1.html","2.html","3.html","nameBox","delete","autoHeightMode","resetHeight","scroll","overflowY","mapWidth","mapHeight","address","search","insertDynamicMap","centerObj","getCenter","lng","lat","checkbox","zoom","searchBtn","addressBox","geocoder","getZoom","maptype","getMapTypeId","div,hr,br,tbody,tr,p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6","pleaseInput","emoticonsPath","allowPreview","allowPreviewEmoticons","currentPageNum","previewDiv","previewImg","rows","cols","startNum","pages","ceil","colsHalf","floor","wrapperDiv","elements","bindCellEvent","num","createEmoticonsTable","pageNum","parentDiv","removeEvent","pageDiv","bindPageEvent","createPageTable","fileManagerJson","imgPath","bindTitle","filename","filesize","datetime","is_dir","filemanagerDialog","dirName","viewType","clickFn","moveup","viewImage","listImage","orderType","fileName","fileSize","fileType","moveupLink","viewTypeBox","orderTypeBox","reloadPage","func","showLoading","elList","bindEvent","result","createFunc","fileUrl","current_url","dirPath","current_dir_path","is_photo","createCommon","changeFunc","createView","createList","moveup_dir_path","change","fileList","file_list","iconUrl","cell0","has_file","emptyFolder","photoDiv","allowFlashUpload","allowFileManager","formatUploadUrl","extraFileUploadParams","filePostName","uploadJson","upload","viewServer","urlBox","widthBox","heightBox","quality","viewServerBtn","error","message","afterSelectFile","allowImageUpload","allowImageRemote","imageTabIndex","fillDescAfterUploadImage","imageDialog","imageUrl","imageWidth","imageHeight","imageTitle","imageAlign","showRemote","showLocal","remoteUrl","size","resetSize","imgTitle","localUrl","dialogWidth","dialogHeight","localUrlBox","titleBox","alignBox","refreshBtn","add","remoteImage","localImage","originalWidth","originalHeight","setSize","tempImg","allowFileUpload","fileDialog","fileTitle","lineHeight","linkType","typeBox","Option","newWindow","selfWindow","allowMediaUpload","autostart","autostartBox","loop","KSWFUpload","showError","progressbars","uploadDesc","startButtonValue","settings","debug","upload_url","uploadUrl","flash_url","flashUrl","file_post_name","button_placeholder","button_image_url","buttonImageUrl","button_width","buttonWidth","button_height","buttonHeight","button_cursor","SWFUpload","CURSOR","HAND","file_types","fileTypes","file_types_description","fileTypesDesc","file_upload_limit","fileUploadLimit","file_size_limit","fileSizeLimit","post_params","postParams","file_queued_handler","file","fileIconUrl","appendFile","file_queue_error_handler","errorCode","errorName","QUEUE_ERROR","QUEUE_LIMIT_EXCEEDED","queueLimitExceeded","FILE_EXCEEDS_SIZE_LIMIT","fileExceedsSizeLimit","ZERO_BYTE_FILE","zeroByteFile","INVALID_FILETYPE","invalidFiletype","unknownError","upload_start_handler","upload_progress_handler","bytesLoaded","bytesTotal","percent","progressbar","bar","upload_error_handler","filestatus","FILE_STATUS","ERROR","errorMessage","upload_success_handler","serverData","swfu","startUpload","getUrlList","COMPLETE","removeFile","fileId","cancelUpload","removeFiles","statusDiv","pendingMessage","destroy","swfupload","element","imageSizeLimit","imageUploadLimit","imageFileTypes","multiImageDialog","uploadLimit","sizeLimit","insertAll","clearAll","pending","urlList","initSWFUpload","customSettings","eventQueue","movieName","movieCount","movieElement","initSettings","loadFlash","displayDebugInfo","version","UPLOAD_ERROR","HTTP_ERROR","MISSING_UPLOAD_URL","IO_ERROR","SECURITY_ERROR","UPLOAD_LIMIT_EXCEEDED","UPLOAD_FAILED","SPECIFIED_FILE_ID_NOT_FOUND","FILE_VALIDATION_FAILED","FILE_CANCELLED","UPLOAD_STOPPED","QUEUED","IN_PROGRESS","CANCELLED","BUTTON_ACTION","SELECT_FILE","SELECT_FILES","START_UPLOAD","ARROW","WINDOW_MODE","WINDOW","TRANSPARENT","OPAQUE","completeURL","hostname","port","indexSlash","ensureDefault","settingName","defaultValue","debug_enabled","return_upload_start_handler","returnUploadStart","debugMessage","custom_settings","prevent_swf_caching","preserve_relative_urls","targetElement","tempParent","button_placeholder_id","getFlashHTML","getMovieElement","classid","button_window_mode","getFlashVars","paramString","buildParamString","httpSuccessString","http_success","use_query_string","requeue_on_error","assume_success_timeout","file_queue_limit","button_text","button_text_top_padding","button_text_left_padding","button_text_style","button_action","button_disabled","paramStringPairs","ex1","ex2","swfupload_loaded_handler","file_dialog_start_handler","upload_complete_handler","debug_handler","addSetting","default_value","getSetting","callFlash","functionName","argumentArray","returnString","CallFunction","__flash__argumentsToXML","post","unescapeFilePostParams","selectFile","selectFiles","fileID","triggerErrorEvent","stopUpload","getStats","setStats","statsObject","getFile","addFileParam","removeFileParam","setUploadURL","setPostParams","paramsObject","addPostParam","removePostParam","setFileTypes","types","description","setFileSizeLimit","setFileUploadLimit","setFileQueueLimit","fileQueueLimit","setFilePostName","setUseQueryString","useQueryString","setRequeueOnError","requeueOnError","setHTTPSuccess","http_status_codes","setAssumeSuccessTimeout","timeout_seconds","setDebugEnabled","debugEnabled","setButtonImageURL","buttonImageURL","setButtonDimensions","movie","setButtonText","setButtonTextPadding","setButtonTextStyle","setButtonDisabled","isDisabled","setButtonAction","buttonAction","setButtonCursor","cursor","queueEvent","handlerName","executeNextEvent","f","uk","unescapedPost","String","fromCharCode","testExternalInterface","flashReady","cleanUp","instance","flashEx","fileDialogStart","fileQueued","fileQueueError","fileDialogComplete","numFilesSelected","numFilesQueued","numFilesInQueue","uploadStart","uploadProgress","bytesComplete","responseReceived","uploadComplete","exceptionMessage","exceptionValues","Console","writeLine","documentForm","fontFamily","margin","queue","queueSettings","queue_cancelled_flag","queue_upload_count","user_upload_complete_handler","user_upload_start_handler","uploadCompleteHandler","uploadStartHandler","queue_complete_handler","cancelQueue","stats","files_queued","pagebreakHtml","tail","comment","blockMap","getFirstChild","subList","_setColor","pickerList","_initColorPicker","dialogDiv","colorBox","removePicker","picker","_getCellIndex","rowSpanCount","rowSpan","cellIndex","prop","isInsert","px","space","padding","spacing","alignDefault","alignLeft","alignCenter","alignRight","borderWidth","borderColor","backgroundColor","rowsBox","colsBox","widthType","widthTypeBox","heightType","heightTypeBox","paddingBox","spacingBox","borderBox","bgColor","tableWidth","tableHeight","cellprop","textAlign","verticalAlign","alignTop","alignMiddle","alignBottom","alignBaseline","textAlignBox","verticalAlignBox","background-color","text-align","vertical-align","border-width","border-style","border-color","cellWidth","cellHeight","insert","colinsert","newRow","newCell","colinsertleft","colinsertright","rowinsert","rowIndex","rowinsertabove","rowinsertbelow","rowmerge","nextRowIndex","nextRow","nextCell","deleteCell","colmerge","nextCellIndex","rowsplit","colsplit","coldelete","rowdelete","deleteRow","htmlPath","getFilePath","selectTemplate","replaceContent","selectBox","helpers_extends","__webpack_require__","extends_default","api","vuex_esm","EditArticle","content","computed","methods","kind","onSubmit","asyncToGenerator_default","regenerator_default","mark","_callee","_context","_this","plateName","$message","duration","abrupt","loginUserId","sent","$router","reqArticle","_this2","_callee2","_context2","articleid"],"mappings":"gDAwpRA,IAaAA,iBA5pRA,SAAAC,OAAAC,WACA,IAAAD,OAAAE,WAAA,CAKAF,OAAAG,UACAH,OAAAG,YAEAA,QAAAC,MACAD,QAAAC,IAAA,cAEA,IAAAC,SAAA,sBACAC,IAAAC,UAAAC,UAAAC,cACAC,IAAAJ,IAAAK,QAAA,gBAAAL,IAAAK,QAAA,SACAC,QAAA,GAAAN,IAAAK,QAAA,SAAAL,IAAAK,QAAA,cACAE,OAAAP,IAAAK,QAAA,iBAAAL,IAAAK,QAAA,SACAG,QAAAR,IAAAK,QAAA,kBACAI,OAAAT,IAAAK,QAAA,YACAK,QAAAV,IAAAK,QAAA,aACAM,KAAA,mBAAAC,KAAAZ,KACAa,QAAA,cAAAC,SAAAC,WACAC,UAAAtB,OAAAuB,aACAC,SAAA,4CAAAC,KAAAnB,KACAoB,GAAAF,kBAAA,OACAG,OAAA,IAAAC,MAAAC,UAkJAC,OAAAC,KAAAC,MACAC,GACAC,OAAA,EACAC,QAAA9B,SACA+B,GAAA1B,IACA2B,MAAAxB,OACAyB,OAAAxB,QACAyB,MAAAxB,OACAyB,EAAAd,GACAe,KAAAd,MACAe,KAAAC,MACAC,QAAAC,SACAC,WAAAC,YACAC,QAAAC,SACAC,SAAAC,UACAC,KAAAC,MACAC,QAAAC,SACAC,WAAAC,YACAC,OAAAC,QACAC,SAAAC,UACAC,QAAAC,SACAC,MAAAC,OACAC,MAAAC,OACAC,QAAAC,SACAC,MAAAC,OACAC,WAAAC,YACAC,SAAAC,UACAC,OAAAC,QACAC,KAAAC,OAEAC,gBAAAb,OAAA,0KACAc,eAAAd,OAAA,6OACAe,gBAAAf,OAAA,8EACAgB,eAAAhB,OAAA,qEACAiB,iBAAAjB,OAAA,mCACAkB,aAAAlB,OAAA,oBACAmB,iBAAAnB,OAAA,uCACAoB,mBAAApB,OAAA,oDACAqB,eAAArB,OAAA,gKAcAlC,EAAAwD,SAAAC,eACAzD,EAAA0D,SACAC,YAAA,EACAC,gBAAA,EACAC,YAAA,EACAC,gBAAA,EACAC,YAAA,EACAC,eAAA,EACAR,SAAAxD,EAAAwD,SACAS,WAAAjE,EAAAwD,SAAA,UACAU,SAAAlE,EAAAwD,SAAA,QACAW,YAAAnE,EAAAwD,SAAA,WACAY,UAAA,UACAC,SAAA,QACAC,QAAA,GACAC,WAAA,IACAC,WAAA,EACAC,SAAA,OACAC,UAAA,EACAC,gBAAA,OACAC,gBAAA,EACAC,oBAAA,EACAC,UAAA,aACAC,WAAA,KACAC,QAAA,GACAC,QAAA,GACAC,SAAA,IACAC,UAAA,IACAC,cAAA,GACAC,OAAA,OACAC,OACA,wFACA,0EACA,uFACA,yEACA,yEACA,0FACA,6EACA,sCAEAC,gBAAA,uBACAC,aACA,8DACA,8DACA,8DACA,8DAEAC,eAAA,wDACAC,UACAC,MAAA,wDACAC,MACA,oFACA,kFAEAC,KACA,2EACA,6EACA,mEAEAC,OACA,yFACA,oFACA,0FACA,uCAEAC,SACA,6EACA,sFACA,4EAEAC,GAAA,qCACAC,OAAA,gIACAC,KAAA,iGACAC,2CACA,0GACA,iGAEAC,KAAA,cACAC,IAAA,kCACAC,oDAAA,cACEC,QAAA,uEAEFC,OAAA,oIAOAC,eAAAvE,OAAA,uEAEAwE,oBAAAxE,OAAA,UAEAyE,mBACAjG,MAAA+F,eAAA,SAAAG,EAAAC,GACCF,gBAAAC,GAAAC,IAEDnG,MAAAgG,oBAAA,SAAAE,EAAAC,GACAF,gBAAAC,GAAAC,IAmBA,IAAAC,aAAA,oUAEAC,MAAA,KAMAnE,QAAAoE,QACAC,KAAA,SAAAC,EAAAC,GACA,IAAAC,EAAAC,KAAAC,EAAAJ,EAAAK,eAAAL,EAAA/H,UAAA+H,EAcA,GAbAE,EAAAD,QACAzG,MAAAoG,aAAA,SAAAF,EAAAC,GACAO,EAAAP,GAAAM,EAAAN,KAEAO,EAAAI,SACAJ,EAAAI,OAAAJ,EAAAK,YAAAH,GAEA,IAAAF,EAAAI,OAAAE,WACAN,EAAAI,OAAAJ,EAAAI,OAAAG,aAEAP,EAAAQ,eAAAR,EAAAS,cACAT,EAAAQ,cAAAR,EAAAS,cAAAT,EAAAI,OAAAJ,EAAAU,UAAAV,EAAAS,aAEA,MAAAT,EAAAW,OAAA,MAAAX,EAAAY,QAAA,CACA,IAAAC,EAAAX,EAAAY,gBAAAC,EAAAb,EAAAa,KACAf,EAAAW,MAAAX,EAAAY,SAAAC,KAAAG,YAAAD,KAAAC,YAAA,IAAAH,KAAAI,YAAAF,KAAAE,YAAA,GACAjB,EAAAkB,MAAAlB,EAAAmB,SAAAN,KAAAO,WAAAL,KAAAK,WAAA,IAAAP,KAAAQ,WAAAN,KAAAM,WAAA,GAWA,QATArB,EAAAsB,QAAAtB,EAAAuB,UAAA,IAAAvB,EAAAuB,SAAAvB,EAAAuB,SAAAvB,EAAAwB,WACAxB,EAAAsB,MAAAtB,EAAAuB,UAAAvB,EAAAwB,UAEAxB,EAAAyB,SAAAzB,EAAA0B,UACA1B,EAAAyB,QAAAzB,EAAA0B,SAEA1B,EAAAsB,OAAAtB,EAAA2B,SAAA/K,YACAoJ,EAAAsB,MAAA,EAAAtB,EAAA2B,OAAA,IAAA3B,EAAA2B,OAAA,IAAA3B,EAAA2B,OAAA,KAEA3B,EAAAsB,OACA,SACAtB,EAAAsB,MAAA,GACA,MACA,SACA,SACA,QACAtB,EAAAsB,MAAA,GACA,MACA,SACA,QACAtB,EAAAsB,MAAA,IACA,MACA,QACAtB,EAAAsB,MAAA,IACA,MACA,QACAtB,EAAAsB,MAAA,IACA,MACE,QACFtB,EAAAsB,MAAA,IAGAtB,EAAAsB,OAAA,IAAAtB,EAAAsB,OAAA,MACGtB,EAAAsB,OAAA,KAGHM,eAAE,WACF,IAAAC,EAAA5B,KAAAF,MACA8B,EAAAD,eACAC,EAAAD,iBAEGC,EAAAC,aAAA,GAGHC,gBAAE,WACF,IAAAF,EAAA5B,KAAAF,MACA8B,EAAAE,gBACAF,EAAAE,kBAECF,EAAAG,cAAA,GAGDC,KAAA,WACAhC,KAAA2B,iBACA3B,KAAA8B,qBAGA,IAAAG,cAAA,cAAA5J,MAAA6J,SAAA,EAAAC,cAoIAC,gBAAA,EA4CE1L,OAAA2L,aACF3L,OAAA2L,YAAA,sBACAhJ,MAAA8I,WAAA,SAAA5C,EAAA+C,GACAA,EAAAzC,sBAMAlH,EAAA4J,KAAAC,MACA7J,EAAA8J,MAAAC,OAuXA/J,EAAAgK,UAAAC,WACAjK,EAAAkK,WAAAC,YACAnK,EAAAoK,WAAAC,YACArK,EAAAsK,YAAAC,aACAvK,EAAAwK,UAAAC,WACAzK,EAAA0K,WAAAC,YACA3K,EAAA4K,WAAAC,YACA7K,EAAA8K,SAAAC,UACA/K,EAAAgL,YAAAC,aACAjL,EAAAkL,KAAAC,MAcA,IAAEC,eAAAjM,SAAAkM,cAAA,OACFD,eAAAE,aAAA,iBACA,IAAAC,mBAAA,MAAAH,eAAAI,UA2MAxL,EAAAyL,MAAAC,OACA1L,EAAA2L,SAAAC,UAmGAhJ,QAAAiJ,OACA5E,KAAA,SAAA6E,GAIA,IAHE,IAEFC,EAAA,EACAC,EAAA,EAAiBC,GAFjBH,EAAAlL,SAAAkL,UAEiBC,OAAiBC,EAAAC,EAAAD,IAClCF,EAAAE,KAJE3E,KAKF2E,GAAAF,EAAAE,GAAAE,cAAAL,MAAAC,EAAAE,GAAA,GAAAF,EAAAE,GACAD,KANE1E,KASA0E,SATA1E,KAUFC,IAAA6E,QAVE9E,KAUF,IAVEA,KAWF+E,KAAAC,aAXEhF,KAWF,IAXEA,KAYFiF,KAZEjF,KAYF0E,OAAA,EAZE1E,KAYF,GAAAK,SAAA,KAZEL,KAaCkF,IAAAC,QAbDnF,KAaC,KAEH5G,KAAE,SAAAgM,GAEF,IADA,IACAT,EAAA,EAAAA,EADA3E,KACA0E,OAAAC,IACA,QAAAS,EAAAC,KAFArF,KAEA2E,KAFA3E,KAEA2E,IACG,OAHH3E,KAMA,OANAA,MAQAsF,KAAA,SAAAL,EAAAG,GAIE,OAHFpF,KAAA5G,KAAA,WACAmM,MAAAvF,KAAAiF,EAAAG,KAEEpF,MAEFwF,OAAA,SAAAP,EAAAG,GAIE,OAHFpF,KAAA5G,KAAA,WACAqM,QAAAzF,KAAAiF,EAAAG,KAEEpF,MAEF0F,KAAA,SAAAT,GACA,OAAAjF,KAAA0E,OAAA,EACA1E,MAEA2F,MAAA3F,KAAA,GAAAiF,GACAjF,OAEA4F,QAAI,SAAArG,GACJ,QAAAS,KAAA0E,OAAA,MAGAmB,SAAA7F,KAAA,GAAAT,IAEAuG,KAAA,SAAAvG,EAAAC,GACA,IAAAO,EAAAC,KACA,OAAAT,IAAA5I,UACGuM,aAAAnD,EAAAgG,SAED,iBAAAxG,GACFlG,MAAAkG,EAAA,SAAAyG,EAAAC,GACAlG,EAAA+F,KAAAE,EAAAC,KAEGlG,GAEDP,IAAA7I,UAEF,QADA6I,EAAAO,EAAA2E,OAAA,OAAAmB,SAAA9F,EAAA,GAAAR,IACA,GAAAC,GAEAO,EAAA3G,KAAA,WACA8M,SAAAlG,KAAAT,EAAAC,KAEAO,IAEAoG,WAAA,SAAA5G,GAIA,OAHAS,KAAA5G,KAAA,WACAgN,YAAApG,KAAAT,KAEAS,MAEAqG,IAAA,SAAA1B,GACA,OAAA3E,KAAA0E,OAAA,EACA,KAEA1E,KAAA2E,GAAA,IAEA2B,GAAA,SAAA3B,GACA,OAAA3E,KAAA0E,OAAA,EACA,KAEA1E,KAAA2E,GAAA,IAAAH,MAAAxE,KAAA2E,IAAA,MAEA4B,SAAA,SAAAC,GACA,QAAAxG,KAAA0E,OAAA,IAGA+B,UAAAzG,KAAA,GAAAwG,IAEAE,SAAA,SAAAF,GAMA,OALExG,KAAA5G,KAAA,WACFqN,UAAAzG,KAAAwG,KACAxG,KAAAmE,UAAApK,MAAAiG,KAAAmE,UAAA,IAAAqC,MAGAxG,MAEA2G,YAAA,SAAAH,GAME,OALFxG,KAAA5G,KAAA,WACAqN,UAAAzG,KAAAwG,KACAxG,KAAAmE,UAAApK,MAAAiG,KAAAmE,UAAAyC,QAAA,IAAAC,OAAA,UAAAL,EAAA,oBAGExG,MAEF8G,KAAA,SAAAtH,GAEA,OAAAA,IAAA7I,UADAqJ,KAEA0E,OAAA,MAFA1E,KAEAiF,KACA,GAEAnC,YALA9C,KAKA,GAAA+G,YALA/G,KAOA5G,KAAA,WACA4N,SAAAhH,KAAAR,KARAQ,OAYAiH,KAAA,WAEA,OADAjH,KACA0E,OAAA,EACA,GAEAtN,IAJA4I,KAIA,GAAAkH,UAJAlH,KAIA,GAAAmH,aAEAC,OAAA,WACA,QAAApH,KAAA0E,OAAA,IAGA2C,QAAArH,KAAA,KAEAR,IAAI,SAAAA,GAEJ,OAAAA,IAAA7I,UADAqJ,KAEE0E,OAAA,EACF,GAHA1E,KAKAoH,SALApH,KAKA,GAAAsH,MALAtH,KAKA8F,KAAA,UALA9F,KAOA5G,KAAA,WACAiO,QAAArH,MACAA,KAAAsH,MAAA9H,EAEI0G,SAAAlG,KAAA,QAAAR,KAXJQ,OAiBAuH,IAAA,SAAAhI,EAAAC,GACA,IAAAO,EAAAC,KACA,OAAAT,IAAA5I,UACAqM,YAAAjD,EAAA+F,KAAA,UAEG,iBAAAvG,GACHlG,MAAAkG,EAAA,SAAAyG,EAAAC,GACElG,EAAAwH,IAAAvB,EAAAC,KAEFlG,GAEAP,IAAA7I,UACAoJ,EAAA2E,OAAA,EACA,GAEA3E,EAAA,GAAAyH,MAAA/M,SAAA8E,KAAAkI,aAAA1H,EAAA,GAAAR,IAAA,IAEEQ,EAAA3G,KAAA,WACF4G,KAAAwH,MAAA/M,SAAA8E,IAAAC,IAEAO,IAEA2H,MAAA,SAAAlI,GAEA,OAAAA,IAAA7I,UADAqJ,KAEA0E,OAAA,EACA,EAHA1E,KAKA,GAAA2H,YALA3H,KAOAuH,IAAA,QAAAtN,SAAAuF,KAEAoI,OAAI,SAAApI,GAEJ,OAAAA,IAAA7I,UADAqJ,KAEG0E,OAAA,EACH,EAHA1E,KAKA,GAAA6H,aALA7H,KAOAuH,IAAA,SAAAtN,SAAAuF,KAEAsI,QAAA,SAAAtI,GAQA,OAPAQ,KAAA5G,KAAA,WACA4G,KAAAwH,MAAAM,UAAAnR,UACAqJ,KAAAwH,MAAAO,OAAA,GAAAvI,EAAA,wBAAAA,EAAA,IAEAQ,KAAAwH,MAAAM,QAAA,GAAAtI,EAAA,GAAAA,IAGAQ,MAEAgI,KAAA,SAAAzI,EAAAC,GAGA,OADAD,EAAA,mBAAAA,EACAC,IAAA7I,UAFAqJ,KAGA0E,OAAA,EACA,KAJA1E,KAMA,GAAAT,IAEAS,KAAA5G,KAAA,WACA4G,KAAAT,GAAAC,IATAQ,OAaAiI,IAAA,WACA,IAAAxD,EAAAzE,KAAA,GAAAkI,EAAA,EAAAC,EAAA,EACA,GAAA1D,EACE,GAAAA,EAAA2D,sBAAA,CACF,IAAAC,EAAA5D,EAAA2D,wBACAH,EAAAK,cAJAtI,KAIAC,KACAiI,EAAAG,EAAAE,KAAAN,EAAAC,EACAC,EAAAE,EAAAG,IAAAP,EAAAE,OAEE,KAAA1D,GACFyD,GAAAzD,EAAAgE,WACAN,GAAA1D,EAAAiE,UACAjE,IAAAkE,aAIA,OAAAT,EAAA1P,OAAA0P,GAAAC,EAAA3P,OAAA2P,KAEAS,MAAA,SAAAC,GACA,OAAA7I,KAAA0E,OAAA,EACA,IAAAF,UAEA,IAAAA,MAAAxE,KAAA,GAAA8I,UAAAD,KAEAE,OAAA,SAAAC,GAMA,OALAhJ,KAAA5G,KAAA,WACA4G,KAAAiJ,aACGjJ,KAAAiJ,YAAAC,KAAAF,MAGHhJ,MAEAmJ,SAAA,SAAAH,GAIA,OAHAhJ,KAAA5G,KAAA,WACA8P,KAAIF,GAAAC,YAAAjJ,QAEJA,MAEAoJ,OAAA,SAAAJ,GAIA,OAHEhJ,KAAA5G,KAAA,WACF4G,KAAAM,WAAA+I,aAAAH,KAAAF,GAAAhJ,QAEAA,MAEAsJ,MAAA,SAAAN,GAQA,OAPAhJ,KAAA5G,KAAA,WACA4G,KAAAuJ,YACGvJ,KAAAM,WAAA+I,aAAAH,KAAAF,GAAAhJ,KAAAuJ,aAEDvJ,KAAAM,WAAA2I,YAAAC,KAAAF,MAGFhJ,MAEAwJ,YAAA,SAAAR,GACA,IAAAS,KAOA,OANAzJ,KAAA5G,KAAA,SAAAuL,EAAAF,GACAgB,QAAAhB,GACA,IAAAiF,EAAAR,KAAAF,GACAvE,EAAAnE,WAAAqJ,aAAAD,EAAAjF,GACAgF,EAAAG,KAAAF,KAEG/Q,EAAA8Q,IAEHI,MAAE,WAaF,OAZA7J,KACA5G,KAAA,SAAAuL,EAAAF,GAEA,IADA,IAAAqF,EAAArF,EAAAsF,WACAD,GAAA,CACA,IAAArF,EAAAnE,WACA,OAEA,IAAA0J,EAAAF,EAAAP,YACAO,EAAAxJ,WAAA2J,YAAAH,GACAA,EAAAE,KATAhK,MAcAkK,OAAA,SAAAC,GACA,IAAApK,EAAAC,KAkBA,OAjBAD,EAAA3G,KAAA,SAAAuL,EAAAF,GACG,GAAAA,EAAAnE,WAAA,CAIH,GADEmF,QAAAhB,GACF0F,EAEA,IADA,IAAAL,EAAArF,EAAAsF,WACAD,GAAA,CACA,IAAAE,EAAAF,EAAAP,YACA9E,EAAAnE,WAAA+I,aAAAS,EAAArF,GACAqF,EAAAE,EAGAvF,EAAAnE,WAAA2J,YAAAxF,UACE1E,EAAA4E,MAEF5E,EAAA2E,OAAA,EACA3E,GAEAqK,KAAA,SAAA5K,GAKA,OAHAA,IAAA7I,YACE6I,EAFFQ,KAEEqK,gBAAA,IAEF,QAJArK,KAIAuH,IAAA,WAJAvH,UAOAuH,IAAA,UAAA/H,IAEA8K,KAAA,WAEA,OADAtK,KACA0E,OAAA,EADA1E,WAIAqK,eAJArK,KAIA,GAAAwH,MAAA+C,QAJAvK,KAKAuH,IAAA,oBAEAxB,MAAA,WAEE,GADF/F,KACE0E,OAAA,EACF,SAEE,IAAAoC,EAAAtI,EAJFwB,KAIEC,IAAA+D,cAAA,OAIF,OAHAxF,EAAAyK,YALAjJ,KAKA,GAAA8I,WAAA,IACAhC,EAAAhE,YAAAtE,EAAAuI,WACEvI,EAAA,KACFsI,GAEA0D,SAAE,WACF,QAAA5O,gBAAAoE,KAAA+E,OAEA0F,SAAA,WACA,QAAA/O,gBAAAsE,KAAA+E,OAEA2F,QAAE,WACF,QAAA/O,eAAAqE,KAAA+E,OAEA4F,QAAA,WACA,QAAA9O,eAAAmE,KAAA+E,OAEA6F,UAAA,WACE,QAAA9O,iBAAAkE,KAAA+E,OAEF8F,SAAA,SAAAC,GACA,QAAA9K,KAAA0E,OAAA,IAGAqG,UAAA/K,KAAA,GAAAkJ,KAAA4B,KAEAE,OAAA,WACA,GAAAhL,KAAA0E,OAAA,EACA,YAEA,IAAAD,EAAAzE,KAAA,GAAAM,WACE,OAAAmE,EAAA,IAAAD,MAAAC,GAAA,MAEFwG,SAAA,WACA,GAAAjL,KAAA0E,OAAA,EACE,WAAAF,UAGF,IADA,IAAA0G,KAAApB,EAAA9J,KAAA,GAAA+J,WACAD,GACE,GAAAA,EAAAzJ,UAAA,KAAAtG,MAAA+P,EAAAqB,YACFD,EAAAtB,KAAAE,GAEAA,IAAAP,YAEA,WAAA/E,MAAA0G,IAEAE,MAAA,WACA,IAAAF,EAAAlL,KAAAiL,WACA,OAAAC,EAAAxG,OAAA,EAAAwG,EAAA5E,GAAA,SAEA+E,KAAE,WACF,IAAAH,EAAAlL,KAAAiL,WACA,OAAAC,EAAAxG,OAAA,EAAAwG,EAAA5E,GAAA4E,EAAAxG,OAAA,SAEA4G,MAAA,WACA,GAAAtL,KAAA0E,OAAA,EACA,SAGA,IADA,IAAAC,GAAA,EAAA4G,EAAAvL,KAAA,GACAuL,GACA5G,IACA4G,IAAAC,gBAEA,OAAA7G,GAEA8G,KAAA,WACA,GAAAzL,KAAA0E,OAAA,EACA,YAEA,IAAAD,EAAAzE,KAAA,GAAAwL,gBACA,OAAA/G,EAAA,IAAAD,MAAAC,GAAA,MAEAuF,KAAA,WACA,GAAAhK,KAAA0E,OAAA,EACA,YAEA,IAAAD,EAAAzE,KAAA,GAAAuJ,YACA,OAAA9E,EAAA,IAAAD,MAAAC,GAAA,MAEAiH,KAAA,SAAAtG,EAAAuG,GACA,KAAA3L,KAAA0E,OAAA,GAkBA,OAfAiH,MAAAhV,WAAAgV,EACA,SAAAC,EAAAnH,GAEC,IADD,IAAAoH,EAAAF,EAAAlH,EAAAsF,WAAAtF,EAAAqH,UACCD,GAAA,CACD,IAAA7B,EAAA2B,EAAAE,EAAAtC,YAAAsC,EAAAL,gBACA,QAAApG,EAAAyG,GACA,SAEA,QAAAD,EAAAC,GACA,SAEAA,EAAA7B,GAGA4B,CAAA5L,KAAA,IACAA,QAGA3G,MAAA,0MAEAqG,MAAA,cAAAiF,EAAAM,GACAT,MAAAuH,UAAA9G,GAAA,SAAAG,GACA,OAAAA,EAAApF,KAAAsF,KAAAL,EAAAG,GAAApF,KAAA0F,KAAAT,MAGA,IAAA+G,GAAArT,EACAA,EAAA,SAAAqQ,EAAAiD,GACA,GAAAjD,IAAArS,WAAA,OAAAqS,EAAA,CASA,oBAAAA,EAAA,CACAiD,IACAA,EAAA/C,KAAA+C,IAEA,IAAAvH,EAAAsE,EAAAtE,OAIA,GAHA,MAAAsE,EAAAkD,OAAA,KACAlD,IAAAmD,OAAA,IAEAnD,EAAAtE,YAAA,OAAA9M,KAAAoR,GAAA,CACA,IACAxK,GADAyN,IAAA/L,eAAA+L,EAAAnU,UACAkM,cAAA,OAAAkH,KACA1M,EAAAuI,UAAA,kFAAAiC,EACA,QAAArE,EAAA,EAAAC,EAAApG,EAAA4N,WAAA1H,OAAAC,EAAAC,EAAAD,IAAA,CACA,IAAAmF,EAAAtL,EAAA4N,WAAAzH,GACA,2BAAAmF,EAAAuC,IAGAnB,EAAAtB,KAAAE,GAEA,OAAAJ,EAAAwB,GAEA,OAAAxB,EAAAnF,UAAAyE,EAAAiD,IAEA,OAAAjD,KAAAnE,cAAAL,MACAwE,eAGAA,IAAAlO,WAEAvB,SAAAyP,GACAU,EAAAV,GAEAU,EAAA3O,SAAAuR,aAtCA,SAAA5C,EAAAjF,GAIA,OAHAA,EAAA,KACAA,MAEA,IAAAD,MAAAC,KAoCApL,MAAA2S,GAAA,SAAAzM,EAAAC,GACA7G,EAAA4G,GAAAC,IAEA7G,EAAA4T,UAAA/H,MACA9N,OAAAE,WAAA+B,EAGA,IAAA6T,gBAAA,EACAC,cAAA,EACAC,YAAA,EACAC,cAAI,EACJC,aAAA,EA4SArR,QAAAsR,QACAjN,KAAA,SAAAK,GACAD,KACA8M,eAAA7M,EADAD,KAEA+M,YAAA,EAFA/M,KAGAgN,aAAA/M,EAHAD,KAIAiN,UAAA,EAJAjN,KAKAkN,WAAA,EALAlN,KAMAC,OAEAkN,eAAA,WACE,SAAAC,EAAA3I,GAEF,IADA,IAAA4I,KACA5I,GACA4I,EAAAzD,KAAAnF,GACAA,IAAAnE,WAEA,OAAA+M,EAKA,IAHA,IAEEC,EAAAC,EAFFC,EAAAJ,EAAApN,KAAA8M,gBACAW,EAAAL,EAAApN,KAAAgN,cACErI,EAAA,EAAA+I,EAAAF,EAAA9I,OAAAiJ,EAAAF,EAAA/I,SACFC,IACA2I,EAAAE,EAAAE,EAAA/I,GACA4I,EAAAE,EAAAE,EAAAhJ,GACA2I,GAAAC,GAAAD,IAAAC,KAIA,OAAAC,EAAAE,EAAA/I,EAAA,IAEAiJ,SAAE,SAAAnJ,EAAAoJ,GACF,IAAA5N,EAAAD,KAAAC,IAOA,OAPAD,KACA8M,eAAArI,EADAzE,KAEE+M,YAAAc,EAFF7N,KAGAgN,eAAA/M,IAHAD,KAIAgN,aAAAvI,EAJAzE,KAKEiN,UAAAY,GAEFC,iBAAA9N,OAEA+N,OAAA,SAAAtJ,EAAAoJ,GACA,IAAA5N,EAAAD,KAAAC,IAOA,OAPAD,KACEgN,aAAAvI,EADFzE,KAEAiN,UAAAY,EAFA7N,KAGA8M,iBAAA7M,IAHAD,KAIE8M,eAAArI,EAJFzE,KAKA+M,YAAAc,GAEAC,iBAAA9N,OAEAgO,eAAA,SAAAvJ,GACA,OAAAzE,KAAA4N,SAAAnJ,EAAAnE,YAAAN,KAAAC,IAAAtH,EAAA8L,GAAA6G,UAEA2C,cAAA,SAAAxJ,GACA,OAAAzE,KAAA4N,SAAAnJ,EAAAnE,YAAAN,KAAAC,IAAAtH,EAAA8L,GAAA6G,QAAA,IAEA4C,aAAE,SAAAzJ,GACF,OAAAzE,KAAA+N,OAAAtJ,EAAAnE,YAAAN,KAAAC,IAAAtH,EAAA8L,GAAA6G,UAEA6C,YAAA,SAAA1J,GACA,OAAAzE,KAAA+N,OAAAtJ,EAAAnE,YAAAN,KAAAC,IAAAtH,EAAA8L,GAAA6G,QAAA,IAEA8C,WAAE,SAAA3J,GACF,OAAAzE,KAAAgO,eAAAvJ,GAAA0J,YAAA1J,IAEA4J,mBAAA,SAAA5J,GACA,IAAA6J,EAAA3V,EAAA8L,GACA,MAAA6J,EAAArJ,MAAAqJ,EAAA9D,WACA,OAAAxK,KAAAoO,WAAA3J,GAEA,IAAAwG,EAAAqD,EAAArD,WACA,OAAAA,EAAAvG,OAAA,EACA1E,KAAAgO,eAAA/C,EAAA,IAAAkD,YAAAlD,IAAAvG,OAAA,IAEA1E,KAAA4N,SAAAnJ,EAAA,GAAAsJ,OAAAtJ,EAAA,IAEA8J,SAAA,SAAAC,GACA,OAAAA,EACAxO,KAAA+N,OAAA/N,KAAA8M,eAAA9M,KAAA+M,aAEA/M,KAAA4N,SAAA5N,KAAAgN,aAAAhN,KAAAiN,YAEAwB,sBAAA,SAAAC,EAAAC,GACA,IAAAC,EAAA5O,KAAAqG,MAAAwI,EAAAF,EAAAtI,MACA,IAAArO,SAsDA,OAAA4W,EAAAH,sBAAAC,EAAAG,GArDA,IAAAC,KACAA,EAAAtC,iBAAA,eACAsC,EAAArC,eAAA,aACAqC,EAAApC,aAAA,WACAoC,EAAAnC,eAAA,aACA,IAIAoC,EAAAC,EAAAC,EAAAC,EAAAC,EAJAC,EAAAR,EAAAS,iBAAAP,EAAAJ,GAAAG,GACA,OAAAO,EACA,OAAAA,EAmBA,GAhBAV,IAAAlC,iBAAAkC,IAAA/B,gBACAoC,EAAA/O,KAAA8M,eACAoC,EAAAlP,KAAA+M,aAEA2B,IAAAjC,eAAAiC,IAAAhC,cACAqC,EAAA/O,KAAAgN,aACAkC,EAAAlP,KAAAiN,WAEAyB,IAAAlC,iBAAAkC,IAAAjC,gBACAuC,EAAAL,EAAA7B,eACAqC,EAAAR,EAAA5B,aAEA2B,IAAAhC,aAAAgC,IAAA/B,gBACAqC,EAAAL,EAAA3B,aACAmC,EAAAR,EAAA1B,WAEA8B,IAAAC,EAAA,CACA,IAAAM,EAAAJ,EAAAC,EACA,OAAAG,EAAA,IAAAA,EAAA,OAGA,IADAL,EAAAD,EACAC,KAAA3O,aAAAyO,GACAE,IAAA3O,WAEA,GAAA2O,EACA,OAAAtW,EAAAsW,GAAA3D,SAAA4D,GAAA,IAGA,IADAD,EAAAF,EACAE,KAAA3O,aAAA0O,GACEC,IAAA3O,WAEF,OAAA2O,EACAtW,EAAAsW,GAAA3D,SAAA6D,EAAA,MAEAF,EAAAtW,EAAAqW,GAAAhF,SACAiF,EAAApE,SAAAkE,GACE,GAEFE,EAAAtW,EAAAoW,GAAA/E,SACEiF,EAAApE,SAAAmE,IACF,OADE,GAOFO,WAAA,WACA,WAAA1C,OAAA7M,KAAAC,KAAA2N,SAAA5N,KAAA8M,eAAA9M,KAAA+M,aAAAgB,OAAA/N,KAAAgN,aAAAhN,KAAAiN,YAEAuC,SAAA,WACA,IAAAC,EAAAzP,KAAAqG,MACA,OADArO,SAAAyX,EAAAxI,KAAAwI,EAAAD,YACA5I,QAAA,mBAEA8I,cAAA,WACA,OAAAC,eAAA3P,MAAA,OAEA4P,eAAA,WACA,OAAAD,eAAA3P,MAAA,OAEA6P,gBAAA,WACA,OAAIF,eAAA3P,MAAA,OAEJ8P,WAAA,SAAArL,GACA,IAGAsF,EAAA+B,EAAAiE,EAFAC,EADGhQ,KACH8M,eAAAmD,EADGjQ,KACH+M,YACAmD,EAFGlQ,KAEHgN,aAAAmD,EAFGnQ,KAEHiN,UACAmD,EAAA,EA8CA,MA7CA,uBAAA3L,EAAA4L,SAAAlZ,gBACA4S,EAAAtF,EAAAsF,WACA+B,EAAIrH,EAAAqH,UACJsE,EAAA3L,EAAA2H,WAAA1H,QAEK,GAAAsL,EAAA3P,UACL0P,EAAAC,EAAA5D,WAAA6D,KAEID,EAAA3G,aAAA5E,EAAAsL,GACJC,IAAAE,IACAC,GAAAC,IAGAJ,EAAA/G,YAAAxE,GAEA,GAAAuL,EAAA3P,WACA,IAAA4P,GACAD,EAAA1P,WAAA+I,aAAA5E,EAAAuL,GACAA,EAAA1P,aAAA4P,IACAC,GAAAC,IAEAH,GAAAD,EAAA7E,UAAAzG,OACAsL,EAAAzG,YACGyG,EAAA1P,WAAA+I,aAAA5E,EAAAuL,EAAAzG,aAEHyG,EAAA1P,WAAA2I,YAAAxE,IAIAsL,EADAE,EAAA,EACAD,EAAAM,UAAAL,GAEAD,EAEAA,EAAA1P,WAAA+I,aAAA5E,EAAAsL,GACEC,IAAAE,IACFA,EAAAH,EACAI,GAAAF,KAIElG,EA5CC/J,KA6CHgO,eAAAjE,GAAAoE,YAAArC,GA7CG9L,KA+CHoO,WAAA3J,GA/CGzE,KAiDHyO,sBAAA/B,YAjDG1M,KAiDHuP,aAAAxB,OAAAmC,EAAAC,KAAA,EAjDGnQ,UAoDC+N,OAAAmC,EAAAC,IAEJI,iBAAA,SAAA9L,GAEA,OADAA,EAAAwE,YAAAjJ,KAAA6P,mBACA7P,KAAA8P,WAAArL,GAAA2J,WAAA3J,IAEAmG,UAAA,WACA,IACAoF,EADAhQ,KACA8M,eAAAmD,EADAjQ,KACA+M,YACAmD,EAFAlQ,KAEAgN,aAAAmD,EAFAnQ,KAEAiN,UACA,UAAA+C,EAAA3P,UAAA2P,IAAAE,GAAAD,EAAA,IAAAE,GAAAxX,EAAAqX,EAAA5D,WAAA6D,IAAArF,aAEAvE,IAAA,SAAAmK,GACE,IAAAf,EAAAxP,EAAAD,KAAAC,IACF,IAAAjI,SAAA,CACAyX,EAAAxP,EAAAwQ,cACE,IACFhB,EAAA7B,SAJE5N,KAIF8M,eAJE9M,KAIF+M,aACA0C,EAAA1B,OALE/N,KAKFgN,aALEhN,KAKFiN,WACA,MAAAyD,IACA,OAAAjB,EAEA,GAAAe,GATExQ,KASF4K,YAGA,OAFA6E,EAAAxP,EAAAa,KAAA6P,sBACAC,WAXE5Q,KAWF8M,eAAAV,WAXEpM,KAWF+M,cACA0C,EAEA,IAAAd,EAdE3O,KAcFuP,aAAAsB,OAIA,OAHApB,EAAAxP,EAAAa,KAAAgQ,mBACAC,YAAA,eAAAC,aAAArC,EAAA7B,eAAA6B,EAAA5B,cACA0C,EAAAsB,YAAA,aAAAC,aAAArC,EAAA3B,aAAA2B,EAAA1B,YACAwC,GAEA3I,KAAA,WACA,OAAAnO,EAAAqH,KAAA0P,iBAAA3J,SAEA8K,KAAA,WACA,IAAA9Q,EAAAC,KACA,SAAAiR,EAAAxM,EAAAwD,EAAAiJ,GACA,MAAAzM,EAAApE,SAAA,CAGA,IAIAkI,EAAA4I,EAAArH,EAAA+D,EAJA5C,EAAAtS,EAAA8L,GAAAwG,WACA,OAAAA,EAAAvG,OAIIuD,EAAA,IACJM,EAAA0C,EAAA3E,GAAA2B,EAAA,IAEAA,EAAAgD,EAAAvG,SACAyM,EAAAlG,EAAA3E,GAAA2B,IAEAM,GAAA,GAAAA,EAAAtD,OAEA4I,GADE/D,EAAAvB,EAAA,IACF4C,UAAAzG,QAEAyM,GAAA,GAAAA,EAAAlM,OACA6E,EAAAqH,EAAA,GACAtD,EAAA,GAEA/D,IAGKoH,EACLnR,EAAA6N,SAAA9D,EAAA+D,GAEI9N,EAAAgO,OAAAjE,EAAA+D,KAKJ,OAFAoD,EAAKlR,EAAA+M,eAAA/M,EAAAgN,aAAA,GACLkE,EAAAlR,EAAAiN,aAAAjN,EAAAkN,WAAA,GACAlN,GAEAqR,GAAA,WACA,IAAArR,EAAAC,KACA,SAAAqR,EAAA5M,EAAAwD,EAAAiJ,GACA,GAAAzM,EAAApE,WAGA,IAAA4H,EACAiJ,EACAnR,EAAAiO,eAAAvJ,GAEA1E,EAAAmO,aAAAzJ,GAEAwD,GAAAxD,EAAA0G,UAAAzG,SACAwM,EACAnR,EAAAkO,cAAAxJ,GAEA1E,EAAAoO,YAAA1J,KAMA,OAFA4M,EAAAtR,EAAA+M,eAAA/M,EAAAgN,aAAA,GACAsE,EAAAtR,EAAAiN,aAAAjN,EAAAkN,WAAA,GACAlN,GAEAuR,QAAA,SAAAC,GACA,IAAAxR,EAAAC,KAEA,SAAAwR,EAAA/M,EAAAwD,EAAAiJ,GACA,IAAAlG,EAAAsD,EAAA3V,EAAA8L,GACA,QAAA6J,EAAArJ,MAAAjJ,iBAAAsS,EAAAvJ,QAAAwM,GAAAjD,EAAA5D,WAGA,OAAAzC,EAAA,CACA,MAAAqG,EAAA7C,SACAT,EAAAsD,EAAAtD,YACAhP,iBAAAgP,EAAAjG,QAAAwM,IAAAvG,EAAAN,YAGA4D,EAAAtD,EAEAkG,EACAnR,EAAAiO,eAAAM,EAAA,IAEAvO,EAAAmO,aAAAI,EAAA,SAEA,GAAArG,GAAAqG,EAAArD,WAAAvG,OAAA,CACA,MAAA4J,EAAAtE,SACAgB,EAAAsD,EAAAtD,YACAhP,iBAAAgP,EAAAjG,QAAAwM,IAAAvG,EAAAN,YAGA4D,EAAAtD,EAEAkG,EACAnR,EAAAkO,cAAAK,EAAA,IAEAvO,EAAAoO,YAAAG,EAAA,KAMA,OApCAvO,EAAIqR,KAkCJI,EAAAzR,EAAA+M,eAAA/M,EAAAgN,aAA4C,GAC5CyE,EAAAzR,EAAAiN,aAAAjN,EAAAkN,WAAA,GACAlN,GAEA0R,OAAA,WAEA,IADA,IAAA3H,EAAAoD,EAAAlN,KAAAkN,UACA,GADAlN,KACA8M,eAAAzM,WAAAyJ,EADA9J,KACA8M,eAAAV,WADApM,KACA+M,eAAA,GAAAjD,EAAAzJ,WAAA1H,EAAAmR,GAAAU,YADAxK,KAEA4N,SAAA9D,EAAA,GAEA,GAAAoD,EACA,OALAlN,KAKAuO,SAAArB,GAEA,QAPAlN,KAOAgN,aAAA3M,UAPAL,KAOAiN,UAAA,IAAAnD,EAPA9J,KAOAgN,aAAAZ,WAPApM,KAOAiN,UAAA,QAAAnD,EAAAzJ,WAAA1H,EAAAmR,GAAAU,YAPAxK,KAQA+N,OAAAjE,IAAAsC,WAAA1H,QAEA,OAVA1E,MAYA0R,eAAA,SAAAC,GACA,IAAAC,EAAA3R,EAAAD,KAAAC,IACA4R,EAAAlZ,EAAA,sCAAAsH,GAAA,GAUA,OATA4R,EAAAxF,GAAA,+BAAAO,eAAA,KAFA5M,KAGAkN,aACA0E,EAAAC,EAAA/I,WAAA,IACAuD,GAAA,6BAAAO,eAAA,MAEAgF,GAPA5R,KAQGuP,aAAAhB,UAAA,GAAAuB,WAAA8B,GAAA1D,aAAA0D,GARH5R,KAUA8P,WAAA+B,GAAA5D,cAAA4D,IAEEC,MAAAH,EAAA,IAAAE,EAAAxF,GAAAwF,EACFE,IAAAH,EAAAD,EAAA,IAAAC,EAAAvF,GAAAuF,EAAA,OAGAI,eAAA,SAAAC,GACA,IAAAhS,EAAAD,KAAAC,IACC6R,EAAAnZ,EAAAsZ,EAAAH,MAAA7R,GAAA8R,EAAAE,EAAAF,IAAApZ,EAAAsZ,EAAAF,IAAA9R,GAAA,KACD,OAAA6R,KAAApN,OAAA,EAFA1E,WAKAgO,eAAA8D,EAAA,IACAA,EAAA5H,SACA6H,KAAArN,OAAA,GAPA1E,KAQAkO,aAAA6D,EAAA,IACAA,EAAA7H,UATAlK,KAWAuO,UAAA,GAXAvO,uBAgBAnJ,QAAAC,IAAA,wBACAD,QAAAC,IAAA,GAAAkJ,KAAA8M,eAAAzM,SAAAL,KAAA8M,eAAA3B,UAAAnL,KAAA8M,eAAA9M,KAAA+M,aACAlW,QAAAC,IAAA,GAAAkJ,KAAAgN,aAAA3M,SAAAL,KAAAgN,aAAA7B,UAAAnL,KAAAgN,aAAAhN,KAAAiN,cASAtU,EAAAuZ,WAAArF,OACAlU,EAAAgW,MAAAwD,OACAxZ,EAAAyZ,eAAA5F,gBACA7T,EAAA0Z,aAAA5F,cACA9T,EAAA2Z,WAAA5F,YACA/T,EAAA4Z,aAAA5F,cAmNApR,QAAKiX,MACL5S,KAAA,SAAA+O,GACA,IAAA1O,EAAA0O,EAAA1O,IAAAD,KACAC,MADAD,KAEAkF,IAAAC,QAAAlF,GAFAD,KAGAyS,IAAAC,QAAAzS,GAHAD,KAIA2O,SAEAgE,UAAA,SAAAC,GACA,IAAA3S,EAAAD,KAAAC,IAAAwP,EAAAoD,QAAA5S,GAEA,OAFAD,KACAyS,IAAAC,QAAAzS,GACAwP,GAFAzP,KAGA2O,MAAAwD,OAAA1C,GACA,QAAA9W,EAJAqH,KAIA2O,MAAA7B,gBAAA/H,MAJA/E,KAKA2O,MAAAN,mBAAApO,EAAAa,MAAAyN,UAAA,GALAvO,OASA4S,GATA5S,KAUI2O,MAAAN,mBAAApO,EAAAa,MAAAyN,UAAA,GAVJvO,OAcA8S,OAAA,SAAAC,GACAA,EAAA9X,OAAA8X,GAAA,GACA,IAGAtD,EAHAgD,EAAAzS,KAAAyS,IAAA9D,EAAA3O,KAAA2O,MAAAY,aAAAkC,SACAzB,EAAArB,EAAA7B,eAAAmD,EAAAtB,EAAA5B,YAEA9M,GADA0O,EAAA3B,aAAA2B,EAAA1B,UACAnI,QAAAkL,IAAA9K,EAHAlF,KAGAkF,IAAA8N,GAAA,EACA,GAAAD,GAAA,GAAA/C,EAAA3P,UAAAsO,EAAAzB,UAAA,CACA,GAAAlV,SAAA,CACA,IAAAib,EAAAta,EAAA,sBAAAsH,GACA0O,EAAAmB,WAAAmD,EAAA,IACAxD,EAAAxP,EAAAa,KAAAgQ,kBACE,IACFrB,EAAAyD,kBAAAD,EAAA,IACA,MAAAE,IAKA,OAJA1D,EAAAlB,UAAA,GACAkB,EAAAqD,SACAG,EAAA/I,SACAhF,EAAAkO,QAfApT,KAkBA,GAAAxI,QAAA,CACA,IAAAyT,EAAA+E,EAAA5D,YACAzT,EAAAqX,GAAAvF,YAAAwF,EAAA,GAAAtX,EAAAsS,EAAAgF,EAAA,IAAAxF,YAAAQ,EAAAgF,IAAAtX,EAAAsS,EAAAgF,IAAAxF,cACAkE,EAAAmB,WAAA7P,EAAAoT,eAAA,MACAL,GAAA,IAIA,GAAAhb,SACA,KACAyX,EAAAd,EAAAtI,KAAA,IACAyM,SACA,MAAApC,SAQA,GANAsC,GACArE,EAAAJ,UAAA,GAEAkB,EAAAd,EAAAtI,KAAA,GACAoM,EAAAa,kBACAb,EAAAc,SAAA9D,GACAxP,IAAAnI,SAAA,CACA,IAAAmQ,EAAAtP,EAAA8W,EAAAzC,cAAA/E,MACA/C,EAAAsO,SAAAvL,EAAAC,EAAAD,EAAAE,GAIA,OADAjD,EAAAkO,QA3CApT,MA8CAyT,KAAA,SAAAjU,GACA,IAAAkU,EAAAzT,EAAAD,KAAAC,IAAA0O,EAAA3O,KAAA2O,MAEA,GADA+E,EAAA/a,EAAA6G,EAAAS,GACA0O,EAAAzB,UAGA,OAFGyB,EAAA8C,SACH9C,EAAAmB,WAAA4D,EAAA,IAAArF,mBAAAqF,EAAA,IAJA1T,KAOA,GAAA0T,EAAAhJ,UAAA,CAEA,IADA,IAAAiJ,EAAAD,EAAA9K,OAAA,GAAAkB,EAAA6J,EACA7J,EAAAsB,SACAtB,IAAAsB,QAIA,OAFAtB,EAAAf,OAAA4F,EAAAkB,mBACAlB,EAAAmB,WAAA6D,EAAA,IAAAvF,WAAAuF,EAAA,IAbA3T,KAgBA2O,EAAA2C,UACA,IAAAW,EAAAtD,EAAA+C,iBAAAkC,EAAAjF,EAAAxB,iBAAA+D,GAAA,EAwBA,OAvBAvY,EAAAib,GAAAlI,KAAA,SAAAjH,GACA,GAAAyM,GAAAzM,GAAAwN,EAAAH,OAIA,GAAAZ,EAAA,CACA,GAAAzM,GAAAwN,EAAAF,IACA,SAEA,IAAAzD,EAAA3V,EAAA8L,GACA,GAAAoP,cAAAvF,GACA,OAEA,MAAAA,EAAArJ,MAAAlL,MAAA0K,EAAA0G,WAAAzG,OAAA,GAEA,IADA,IAAAsG,GACAA,EAAAsD,EAAAtD,aAAAL,WAAA,GAAAK,EAAAC,WAAAvG,QACA4J,EAAAtD,EAEA8I,UAAAxF,EAAAoF,UAhBAxC,GAAA,IAoBAvC,EAAAqD,eAAAC,GAxCAjS,MA2CAN,MAAI,SAAAwR,EAAA6C,GAMJ,IALA,IAIAzF,EAJAK,EAAA3O,KAAA2O,MAAA1O,EAAA0O,EAAA1O,IACA+T,EAAArF,EAAAY,aAAAhB,SAAA2C,GACAzM,EAAAuP,EAAAlH,eAAA7E,EAAA+L,EAAAjH,YACA/B,EAAA,GAAAvG,EAAApE,SAAAoE,EAAAnE,WAAAmE,EACAwP,GAAA,EACAjJ,KAAA1K,YAAA,CAEA,GADAgO,EAAA3V,EAAAqS,GACA+I,EAAA,CACA,IAAKzF,EAAA3D,UACL,MAEA,IAAAuJ,cAAA5F,EAAAyF,GACA,WAGE,GAAA/X,iBAAAsS,EAAAvJ,MACF,MAGAkP,GAAA,EACAjJ,IAAA1K,WAEA,GAAA2T,EAAA,CACA,IAAAhB,EAAAhT,EAAA+D,cAAA,QACA2K,EAAAY,aAAAhB,UAAA2C,GAAApB,WAAAmD,GACA/B,EACA8C,EAAAhG,eAAAhD,EAAAjB,YAAAgE,OAAAtJ,EAAAwD,GAEA+L,EAAApG,SAAAnJ,EAAAwD,GAAAkG,YAAAnD,EAAAc,WAEA,IAAAqI,EAAAH,EAAAnE,kBACAzE,EAAA+I,EAAApK,WAAAsB,EAAA8I,EAAArI,UACAoF,GACA8C,EAAAlE,WAAAqE,GACAxF,EAAAV,cAAA5C,GAAA6C,aAAA+E,KAEAjI,EAAA/B,YAAAkL,GACAxF,EAAAX,eAAAiF,GAAA/E,aAAA9C,IAEA,IAAAgJ,EAAAnB,EAAA3S,WACA,GAAA8T,GAAAzF,EAAA3B,aAAA,CACA,IAAAvB,EAAA9S,EAAAsa,GAAAxH,OAAAzB,EAAArR,EAAAsa,GAAAjJ,OACAyB,GAAAzB,GAAA,GAAAyB,EAAAxG,MAAA,GAAA+E,EAAA/E,KACA0J,EAAAZ,OAAAtC,EAAA,GAAAA,EAAA,GAAAN,UAAAzG,QACAwM,GACAvC,EAAAZ,OAAAY,EAAA3B,aAAA2B,EAAA1B,UAAA,GAGAmH,EAAAnK,YAAAgJ,GAEA,OAAAjT,MAEAkK,OAAA,SAAA6J,GACA,IAiBA/D,EAAAC,EAjBAhQ,EAAAD,KAAAC,IAAA0O,EAAA3O,KAAA2O,MAEA,GADAA,EAAA2C,UACA,IAAA3C,EAAA5B,YAAA,CAEA,IADA,IAAA/B,EAAAqJ,EAAA1b,EAAAgW,EAAA7B,iBACA9B,EAAAqJ,EAAArJ,aAAAL,WAAA,GAAAK,EAAAC,WAAAvG,QACA2P,EAAArJ,EAEA2D,EAAAf,SAAAyG,EAAA,OACAA,EAAA1b,EAAAgW,EAAA7B,iBACApC,WACA4J,iBAAAD,EAAAN,GAEA,IAAAQ,EAAAF,EAAArJ,SACAuJ,KAAA7J,WACA4J,iBAAAC,EAAAR,GAIA,GAAApF,EAAAzB,UAAA,CAIA,GAtBAlN,KAmBAN,OAAA,EAAAqU,GACA/D,EAAArB,EAAA7B,gBACGmD,EAAAtB,EAAA5B,aACH,GACA,IAAAyH,EAAA7b,EAAAqX,EAAA5D,WAAA6D,EAAA,IACAuE,GAAAC,aAAAD,KACAA,EAAAtK,SACAyE,EAAAf,SAAAoC,EAAAC,EAAA,IAGA,IAAAyE,EAAA/b,EAAAqX,EAAA5D,WAAA6D,IASA,OARAyE,GAAAD,aAAAC,IACAA,EAAAxK,SAEAuK,aAAAzE,KACArB,EAAAgG,YAAA3E,GACAA,EAAA9F,UAEAyE,EAAAJ,UAAA,GArCAvO,UAwCAN,OAAA,EAAAqU,GAxCA/T,KAyCAN,OAAA,EAAAqU,GACA,IAAAa,EAAA3U,EAAA+D,cAAA,QAAA6Q,EAAA5U,EAAA+D,cAAA,QACA2K,EAAAY,aAAAhB,UAAA,GAAAuB,WAAA+E,GACAlG,EAAAY,aAAAhB,UAAA,GAAAuB,WAAA8E,GACA,IAAAE,KAAAC,GAAA,EACApc,EAAAgW,EAAAxB,kBAAAzB,KAAA,SAAAjH,GACA,GAAAsQ,GAAAtQ,GAAAmQ,EAIG,OAAAnQ,GAAAoQ,QAGDE,GACFD,EAAAlL,KAAAnF,IAPAsQ,GAAA,IAUApc,EAAAic,GAAA1K,SACAvR,EAAAkc,GAAA3K,SACA8F,EAAArB,EAAA7B,eACAmD,EAAAtB,EAAA5B,YACA,IAAAmD,EAAAvB,EAAA3B,aAAAmD,EAAAxB,EAAA1B,UACA,GAAAgD,EAAA,GACA,IAAA0E,EAAAhc,EAAAqX,EAAA5D,WAAA6D,EAAA,IACA0E,GAAAF,aAAAE,KACAA,EAAAzK,SACAyE,EAAAf,SAAAoC,EAAAC,EAAA,GACAD,GAAAE,GACAvB,EAAAZ,OAAAmC,EAAAC,EAAA,IAGA,IAAA6E,EAAArc,EAAAqX,EAAA5D,WAAA6D,IACA+E,GAAAP,aAAAO,KACAA,EAAA9K,SACA8F,GAAAE,GACAvB,EAAAZ,OAAAmC,EAAAC,EAAA,IAIA,IAAA8E,EAAAtc,EAAAuX,EAAA9D,WAAAuC,EAAA1B,YACAgI,GAAAR,aAAAQ,IACAA,EAAA/K,SAEA,IAAA+H,EAAAtD,EAAA+C,gBAAA,GAKA,OAJErY,MAAAyb,EAAA,SAAAnQ,EAAAF,GACF6P,iBAAA3b,EAAA8L,GAAAsP,KAEApF,EAAAqD,eAAAC,GAxFAjS,MA2FAkV,WAAA,SAAAnB,GACA,IAAApF,EAAA3O,KAAA2O,MACAuB,EAAAvB,EAAA3B,aAAAmD,EAAAxB,EAAA1B,UACAxI,EAAA,GAAAyL,EAAA7P,UAAA,IAAA8P,EAAAD,IAAA9D,WAAA+D,EAAA,GACA,SAAAgF,EAAA1Q,GAEA,IADA,IAAAqF,EAAArF,EAAAuG,EAAAvG,EACAuG,GAAA,CACA,GAAAkJ,cAAAvb,EAAAqS,GAAA+I,GACA,OAAApb,EAAAqS,GAEAA,IAAA1K,WAEA,KAAAwJ,QAAAgC,YACA,GAAAoI,cAAAvb,EAAAmR,GAAAiK,GACA,OAAApb,EAAAmR,GAGE,YAEF,IAAAsL,EAAAD,EAAA1Q,GACA,GAAA2Q,EACA,OAAAA,EAEA,MAAA3Q,EAAApE,UAAA,GAAA6P,EAAA7P,UAAA,IAAA8P,EAAA,CACE,IAAA1E,EAAA9S,EAAA8L,GAAAgH,OACF,GAAAA,EACA,OAAA0J,EAAA1J,GAGA,aAEA0B,eAAA,SAAAkI,GACA,IAAA1G,EAAA3O,KAAA2O,MACAqB,EAAArB,EAAA7B,eAAAmD,EAAAtB,EAAA5B,YACAmD,EAAAvB,EAAA3B,aAAAmD,EAAAxB,EAAA1B,UACA4E,EAAA,GAAA7B,EAAA3P,UAAA,IAAA4P,EAAAD,IAAA5D,WAAA6D,EAAA,GACA2B,EAAA,GAAA1B,EAAA7P,UAAA,IAAA8P,EAAAD,IAAA9D,WAAA+D,EAAA,GACA,SAAAgF,EAAA1Q,GACA,KAAAA,GAAA,CACA,MAAAA,EAAApE,UACAoE,EAAA4Q,QAAAle,gBAA6Bke,EAC7B,OAAA5Q,EAGAA,IAAAnE,WAEA,YAEA,IAAAwR,EAAAqD,EAAAtD,GAAAE,EAAAoD,EAAAvD,GACA,OAAAE,GAAAC,GAAAD,IAAAC,EACApZ,EAAAmZ,GAEA,MAEAwD,MAAA,SAAA/V,GACA,IAAAU,EAAAD,KAAAC,IAAA4I,GAAA,EACA,IACAA,EAAA5I,EAAAsV,kBAAAhW,GACA,MAAAmR,IACA,OAAA7H,GAEArJ,IAAA,SAAAD,GACA,IAAAU,EAAAD,KAAAC,IAAAD,KAAA2O,MACA,SAAA6G,EAAAhW,GACA,OAAAA,EAAArI,cAGA,IAAAmX,EAAA9O,EAAA,GACA,sBAFAD,EAAAiW,EAAAjW,KAEA,aAAAA,EAGAiW,EADAhW,GADAA,EAAAiW,oBAA4BxV,EAAA,aAC5B2G,QAAA,aAGA,gBAAArH,GAEA,MADAC,EAAAiW,oBAAAxV,EAAAV,MAEA+O,EAdAtO,KAcAkV,YAAAQ,sCAAA,SAEAlW,EAAA8O,EAAAvJ,MAGA,WAAAvF,IACAA,EAAA,KAEAgW,EAAAhW,IAEA,aAAAD,IACA+O,EAzBAtO,KAyBAkV,YAAAS,IAAA,kBAEEnW,EAAA8O,EAAA/G,IAAA,cAEFiO,EAAAhW,IAEA,cAAAD,IACA+O,EAhCAtO,KAgCAkV,YAAAS,IAAA,cAEEnW,EAAA8O,EAAA/G,IAAA,UAGF,MADA/H,EAAA7E,OAAA6E,MAEAA,EAAA,WAEGgW,EAAAhW,IAEH,gBAAAD,IACA+O,EA3CAtO,KA2CAkV,YAAAS,IAAA,yBAEAnW,EAAA8O,EAAA/G,IAAA,qBAGA,MADE/H,EAAA7E,OAAA6E,MAEFA,EAAA,WAEAgW,EAAAhW,IAEEA,GAEFoW,OAAA,SAAAlC,EAAAK,GAOE,OANA/T,KACFkV,WAAAnB,GADE/T,KAEFkK,OAAA6J,GAFE/T,KAIFyT,KAAAC,GAJE1T,KAMA8S,UAEF+C,KAAA,WACE,OAAA7V,KAAA4V,OAAA,qBACFrX,KAAA,oBACAuX,OAAA,IACEC,EAAA,OAGFC,OAAA,WACA,OAAGhW,KAAA4V,OAAA,aACHrX,KAAA,qBACA0X,GAAA,IACAtR,EAAA,OAGAuR,UAAA,WACE,OAAAlW,KAAA4V,OAAA,WACFrX,KAAA,6BACA4X,EAAA,OAGAC,cAAA,WACA,OAAApW,KAAA4V,OAAA,WACArX,KAAA,gCACA8X,EAAA,OAGAC,UAAI,SAAA9W,GACJ,OAAAQ,KAAAyT,KAAA,sBAAAjU,EAAA,cAAAsT,UAEAyD,YAAA,SAAA/W,GACA,OAAAQ,KAAAyT,KAAA,iCAAAjU,EAAA,cAAAsT,UAEA0D,SAAA,SAAAhX,GACA,OAAAQ,KAAAyT,KAAA,0BAAAjU,EAAA,cAAAsT,UAEA2D,SAAA,SAAAjX,GACA,OAAAQ,KAAA0W,WAAAlX,IAEAkX,WAAA,SAAAlX,GACA,OAAAQ,KAAAyT,KAAA,4BAAAjU,EAAA,cAAAsT,UAEA6D,aAAI,WACJ,IAAA5C,GACA4B,IAAA,2GAOA,OAJAtc,MADAwC,eACA,SAAA0D,EAAAC,GACAuU,EAAAxU,GAAA,MAEAS,KAAAkK,OAAA6J,GACI/T,KAAA8S,UAEJ8D,WAAA,SAAApX,EAAAqX,GACA,IAAA9W,EAAAC,KAAA2O,EAAA5O,EAAA4O,MACA,QAAAnP,EACA,OAAAO,EAiBA,SAAA+W,EAAAnI,EAAAnP,GACA,IAAAS,EAAA0O,EAAA1O,IACAkU,EAAAlU,EAAA8W,yBACApe,EAAA,IAAA6G,EAAAS,GAAA7G,KAAA,WACA+a,EAAAlL,YAAAjJ,QAEA2O,EAAAiB,iBACAjB,EAAAmB,WAAAqE,GACAxF,EAAAJ,UAAA,GACAxO,EAAA+S,QAAA,GAEA,GAAA9a,UAAA6e,EAAA,CACE,KA3BA,SAAAlI,EAAAnP,GACFA,EAAA,kFAAAA,EACA,IAAAiQ,EAAAd,EAAAtI,MACEoJ,EAAAuH,KACFvH,EAAAuH,KAAA,GAAAC,UAAAzX,EAEAiQ,EAAAyH,UAAA1X,GAEA,IAAA2X,EAAAxI,EAAA1O,IAAAmX,eAAA,2BACAD,EAAA7W,WAAA2J,YAAAkN,GACA,IAAAE,EAAAC,SAAA7H,GACAd,EAAAZ,OAAAsJ,EAAArK,aAAAqK,EAAApK,WACA0B,EAAAJ,UAAA,GACAxO,EAAA+S,QAAA,GAeAyE,CAAA5I,EAAAnP,GACA,MAAAkR,GACAoG,EAAAnI,EAAAnP,GAEA,OAAAO,EAGA,OADA+W,EAAAnI,EAAAnP,GACAO,GAEAf,GAAA,WACA,OAAAgB,KAAA4W,WAAA,WAEAY,MAAA,WAEA,OADAxX,KAAAkF,IAAAsS,QACAxX,MAEAyX,YAAA,SAAAC,EAAAC,EAAAjQ,EAAAE,EAAAgQ,EAAAC,GACAF,EAAA1c,OAAA0c,EAAA,IACAC,EAAA3c,OAAA2c,EAAA,GACA,IAAA9Q,EAAA,aAAAzM,QAAAqd,GAAA,kBAAArd,QAAAqd,GAAA,KAeA,OAdAhQ,IACAZ,GAAA,UAAAzM,QAAAqN,GAAA,MAEAE,IACAd,GAAA,WAAAzM,QAAAuN,GAAA,MAEA+P,IACA7Q,GAAA,UAAAzM,QAAAsd,GAAA,MAEAE,IACA/Q,GAAA,UAAAzM,QAAAwd,GAAA,MAEA/Q,GAAA,QAAAzM,QAAAsd,GAAA,KACA7Q,GAAA,KACA9G,KAAA4W,WAAA9P,IAEAgR,WAAA,SAAAJ,EAAAzS,GACA,IAAAhF,EAAAD,KAAAC,IAAA0O,EAAA3O,KAAA2O,MAAA3O,KACA8S,SACA,IAAAnU,EAFAqB,KAEAkV,YAAAvW,EAAA,MACAA,IAAAgQ,EAAA/D,cACA+D,EAAAP,WAAAzP,EAAA0H,OAJArG,KAKA8S,UAEA,IAAGhM,EAAA,YAAAzM,QAAAqd,GAAA,kBAAArd,QAAAqd,GAAA,KAIH,GAHAzS,IACE6B,GAAA,YAAAzM,QAAA4K,GAAA,KAEF0J,EAAAzB,UAEA,OADApG,GAAA,IAAAzM,QAAAqd,GAAA,OAZA1X,KAaA4W,WAAA9P,GAEA,GAAA6H,EAAA/D,YAAA,CACA,IAAAnG,EAAA9L,EAAAgW,EAAA7B,eAAAV,WAAAuC,EAAA5B,cAKA,OAJAjG,GAAA,QACArC,EAAA6E,MAAA3Q,EAAAmO,EAAA7G,IACAwE,EAAAuF,OAAAjB,OAAAtE,GACAkK,EAAAP,WAAA3J,EAAA,IApBAzE,KAqBA8S,SAEA,SAAAiF,EAAAtT,EAAAiT,EAAAzS,GACAtM,EAAA8L,GAAAqB,KAAA,OAAA4R,GAAA5R,KAAA,cAAA4R,GACAzS,EACGtM,EAAA8L,GAAAqB,KAAA,SAAAb,GAEHtM,EAAA8L,GAAA0B,WAAA,UAGC,IAAA6J,EAAArB,EAAA7B,eAAAmD,EAAAtB,EAAA5B,YACDmD,EAAAvB,EAAA3B,aAAAmD,EAAAxB,EAAA1B,UACA,MAAA+C,EAAA3P,UAAA2P,IAAAE,GAAAD,EAAA,IAAAE,EAAA,CACA,IAAArG,EAAAkG,EAAA5D,WAAA6D,GACA,QAAAnG,EAAAuG,SAAAlZ,cAEA,OADA4gB,EAAAjO,EAAA4N,EAAAzS,GApCAjF,KA4CA,OAJAgY,eAAA/X,EAAA,wCACAtH,EAAA,oCAAAsH,GAAA7G,KAAA,WACA2e,EAAA/X,KAAA0X,EAAAzS,KA1CAjF,MA8CCiY,OAAA,WACD,IAAAhY,EAAAD,KAAAC,IAAA0O,EAAA3O,KAAA2O,MAEA,GAFA3O,KACA8S,SACAnE,EAAAzB,UAAA,CACA,IAAAvO,EAHAqB,KAGAkV,YAAAvW,EAAA,MAMA,GALAA,IACAgQ,EAAAP,WAAAzP,EAAA0H,OALArG,KAMA8S,UAEAkF,eAAA/X,EAAA,eACAzI,SAAA,QAAAmB,EAAAgW,EAAA7B,gBAAA/H,KAAA,CACC,IAAAiG,EAAArS,EAAAgW,EAAA7B,gBAAA9B,SACD,MAAAA,EAAAjG,MACAiG,EAAAd,QAAA,SAIA8N,eAAA/X,EAAA,eAEA,OAlBAD,oKAsBAN,MAAA,cAAAiF,EAAAI,GACAyN,KAAAzG,UAAAhH,GAAA,SAAAvF,GAUA,OATAQ,KACA8S,SACAkF,eAFAhY,KAEAC,IAAA8E,EAAAvF,GACAxH,UAAA2B,SAAAoL,EAAA,qDAAArF,MAAA,UAHAM,KAIA2S,cAEA3a,UAAA2B,SAAAoL,EAAA,8DAAArF,MAAA,WANAM,KAOA2S,YAPA3S,QAYA3G,MAAA,iBAAAqG,MAAA,cAAAiF,EAAAI,GACAyN,KAAAzG,UAAAhH,GAAA,WAEA,IADI/E,KACJC,IAAAiY,sBAAAnT,GACA,qBAIA,OANI/E,KAIJ8S,SACAkF,eALIhY,KAKJC,IAAA8E,EAAA,MALI/E,QAgBJrH,EAAAwf,SAAA3F,KACA7Z,EAAAyf,IAAAC,KA2EA9c,QAAA+c,SACA1Y,KAAA,SAAAvD,GACA,IAAA0D,EAAAC,KA8CA,GA7CAD,EAAAgF,KAAA1I,EAAA0I,MAAA,GACAhF,EAAAE,IAAA5D,EAAA4D,KAAAnI,SACAiI,EAAGmF,IAAAC,QAAApF,EAAAE,KACHF,EAAAmI,EAAAjO,SAAAoC,EAAA6L,GACAnI,EAAAoI,EAAAlO,SAAAoC,EAAA8L,GACApI,EAAAwY,EAAAlc,EAAAkc,EACAxY,EAAA2H,MAAAzN,SAAAoC,EAAAqL,OACA3H,EAAA6H,OAAA3N,SAAAoC,EAAAuL,QACA7H,EAAAvB,IAAA7F,EAAA,sCACAoH,EAAA1D,UACA0D,EAAAyY,SAAAnc,EAAAoc,QACA1Y,EAAA2H,OACA3H,EAAAvB,IAAA+I,IAAA,QAAAxH,EAAA2H,OAEA3H,EAAA6H,QACA7H,EAAAvB,IAAA+I,IAAA,SAAAxH,EAAA6H,QAEI7H,EAAAwY,GACJxY,EAAAvB,IAAA+I,KACAmR,SAAA,WACAnQ,KAAAxI,EAAAmI,EACEM,IAAAzI,EAAAoI,EACFwQ,UAAA5Y,EAAAwY,KAGAxY,EAAAwY,GAAAxY,EAAAmI,IAAAvR,WAAAoJ,EAAAoI,IAAAxR,WACAoJ,EAAA6Y,QAAA7Y,EAAA2H,MAAA3H,EAAA6H,QAEAvL,EAAAmK,KACAzG,EAAAvB,IAAAkI,SAAArK,EAAAmK,KAEAnK,EAAAK,YACAqD,EAAAvB,IAAAkI,SAAA,aAEArK,EAAAkL,KACAxH,EAAAvB,IAAA+I,IAAAlL,EAAAkL,KAEAlL,EAAAwc,IACAlgB,EAAA0D,EAAAwc,KAAArP,YAAAzJ,EAAAvB,KAEE7F,EAAAoH,EAAAE,IAAAa,MAAAiI,OAAAhJ,EAAAvB,KAEFnC,EAAAyK,MACA/G,EAAAvB,IAAAsI,KAAAzK,EAAAyK,MAEAzK,EAAAyc,WACA,GAAA1hB,KAAAgB,GAAA,GAAAP,QAAA,CACA,IAAAkhB,EAAAzQ,gBACA3P,EAAAoH,EAAAmF,KAAAI,KAAA,kBAAAoL,GACA,IAAAzI,EAAAK,gBACA0Q,EAAA/Q,EAAAC,EAAA6Q,EAAA7Q,EACA+Q,EAAAhR,EAAAE,EAAA4Q,EAAA5Q,EACApI,EAAAkI,IAAA9N,YAAA4F,EAAAmI,GAAA8Q,EAAA7e,YAAA4F,EAAAoI,GAAA8Q,GAAA,UAGAlZ,EAAAvB,IAAA+I,IAAA,qBAIAU,IAAA,SAAAC,EAAAC,EAAA+Q,GAiBA,OAfAA,EAAAje,OAAAie,GAAA,GACA,OAAAhR,IACEA,IAAA,IAAAjO,SAAAiO,GAHFlI,KAIAxB,IAAA+I,IAAA,OAAAW,GACAgR,IALAlZ,KAMAkI,MAGA,OAAAC,IACAA,IAAA,IAAAlO,SAAAkO,GAVAnI,KAWAxB,IAAA+I,IAAA,MAAAY,GACG+Q,IAZHlZ,KAaAmI,MAbAnI,MAkBA4Y,QAAE,SAAAlR,EAAAE,GACF,IACAuR,EAAAhf,YAAAuN,IAAA,EACA0R,EAAAjf,YAAAyN,IAAA,EACEmR,EAAAzQ,gBACF,GAJAtI,KAIAwY,SAAA,CACA,IAAAlK,EAAA3V,EALAqH,KAKAwY,UACAvQ,EAAAqG,EAAArG,MACA+Q,EAAAxgB,OAAA8V,EAAA,GAAA+K,YAAA,EAAAF,EAAA,GACAF,EAAAzgB,OAAA8V,EAAA,GAAAgL,aAAA,EAAAF,EAAA,GACAlR,EAAA8Q,EAAA,EAAA/Q,EAAAC,EAAAD,EAAAC,EAAA8Q,EACA7Q,EAAA8Q,EAAA,EAAAhR,EAAAE,EAAAF,EAAAE,EAAA8Q,MACA,CACA,IAAAM,EAAAC,YAZAxZ,KAYAC,KACAiI,EAAA1P,OAAAugB,EAAA7Q,GAAAqR,EAAAF,YAAAF,GAAA,GACAhR,EAAA3P,OAAAugB,EAAA5Q,GAAAoR,EAAAD,aAAAF,GAAA,GAMC,OAJDhiB,KAAAgB,GAAA,GAAAP,UACAqQ,GAAA6Q,EAAA7Q,EACAC,GAAA4Q,EAAA5Q,GAlBAnI,KAoBCiI,IAAAC,EAAAC,IAED+B,OAAA,WACA,IAAAnK,EAAAC,KAQA,OAPA5I,KAAAgB,GAAA,GAAAP,UACAc,EAAAoH,EAAAmF,KAAAM,OAAA,yBAGAnM,MAAA0G,EAAA,SAAA4E,GACA5E,EAAA4E,GAAA,OAEA3E,MAEAoK,KAAA,WAEA,OADApK,KAAAxB,IAAA4L,OACApK,MAEAsK,KAAA,WAEA,OADAtK,KAAAxB,IAAA8L,OACAtK,MAEAyZ,UAAS,SAASpd,GAClB,IAAA0D,EAASC,KAaT,OAZA3D,SACAqd,OAAiB3Z,EAAAvB,IACjBnC,EAAMsd,OAAA,SAAczR,EAAAC,EAAAT,EAAAE,EAAAoR,EAAAC,IACpB/Q,GAAU8Q,GAAA,IACV9Q,EAAQ,IAERC,GAAA8Q,GAAA,IACA9Q,EAAA,GAEApI,EAAAkI,IAAAC,EAAAC,IAEAyR,MAAAvd,GACA0D,KAMApH,EAAAkhB,YAAAvB,QACA3f,EAAAmhB,OAAAC,QAOA,IAAAjT,KAAAkT,WAAA,IACAlT,KAAAhP,SAAAmiB,qBAAgC,WAChCD,WAAAlT,KAAgB,GAAAoT,KAwFhB3e,QAAA4e,MAAA7B,SACA1Y,KAAA,SAAAvD,GACA,IAAA0D,EAAAC,KACAma,MAAAnP,OAAApL,KAAAyF,KAAAtF,EAAA1D,GACA0D,EAAAK,WAAAzH,EAAA0D,EAAA+D,YACAL,EAAAvB,IAAAkI,SAAA,WACA3G,EAAAzD,WAAArB,OAAAoB,EAAAC,YAAA,GACAyD,EAAAqa,cAAA/d,EAAA+d,cACAra,EAAAsa,cAAAhe,EAAAge,cACAta,EAAAua,aAAAje,EAAAie,aACA,IAAI1d,EAAA3B,OAAAoB,EAAAO,WAAA,IACJa,EAAApB,EAAAoB,UACAE,EAAAtB,EAAAsB,QACAC,EAAAvB,EAAAuB,QACA2c,EAAA,QAAAC,SAAAC,UAAAD,SAAAE,KAAA9T,QAAA,aAAA9O,SAAA6iB,OACAC,EAAA,oBACAL,EAAA,oBAAAziB,SAAA6iB,OAAA,SACA,oBACAE,EAAKzjB,IAAA,oCAAA0jB,mBAAAF,GAAA,WAiBL,SAAAnY,IACA,IAAAxC,EAAA8a,WAAAhb,EAAAb,QACAe,EAAA+a,OACAT,IACAta,EAAK0a,OAAA7iB,SAAA6iB,QAEL1a,EAAAgb,MAAAC,aAAAte,EAAAa,EAAAE,EAAAC,IACAqC,EAAAkb,QACApb,EAAAmF,IAAAnF,EAAAb,OAAA,GAAAkc,cACArb,EAAAE,MACA,IAAAmY,EAAAC,KAAApY,GACAF,EAAAsb,YAAA,SAAA3K,GACI0H,EAAAzF,cAEJnb,SACAmB,EAAAsH,GAAAqb,MAAA,SAAA5K,GACA,QAAA/X,EAAA+X,EAAAvQ,QAAA4E,OACAqT,EAAAzF,WAAA,GACAyF,EAAAzJ,MAAAP,WAAAsC,EAAAvQ,QACAiY,EAAAtF,YAIA1b,MACA2I,EAAKwb,kBAAA,WACL,IAAAlE,EAAAe,EAAAzJ,MAAAY,aACA8H,EAAA5F,SACI4F,EAAAzM,aACJ7K,EAAAyb,QAGA7iB,EAAAb,UAAA2jB,UAAA1b,EAAAwb,mBACA5iB,EAAAsH,GAAAyb,QAAA,SAAAhL,GACE,MAAAA,EAAArP,MAAA,CACF+W,EAAAzF,YACA,IAAAlD,EAAA2I,EAAAzJ,MACAc,EAAA7E,cACA6E,EAAAlB,UAAA,GACA5V,EAAA8W,EAAA3C,eAAAV,WAAAqD,EAAA1C,cAAA7C,SACAwG,EAAA/O,sBAKA5B,EAAAqY,MACArY,EAAA+G,KAAA6U,YAAA5b,EAAAK,aACAhJ,KACA6I,EAAAa,KAAA8a,UAAA,EACA3b,EAAAa,KAAA+a,iBAAA,EACA5b,EAAAa,KAAAgb,gBAAA,aAEA7b,EAAA3D,WAAA,KAEAD,EAAA0f,aACA1f,EAAA0f,YAAA1W,KAAAtF,GAtEAA,EAAAb,OAAAvG,EAAA,kEAAAkiB,EAAA,cAAAtT,IAAA,gBACAxH,EAAAic,SAAArjB,EAAA,mEAAA4O,IAAA,gBACAxH,EAAAkc,SAAAC,MAAAC,SAAA9f,EAAA4f,SAAA,KAAAlc,EAAAK,WAAA0F,KAAA,YAAAqW,SAAA9f,EAAA4f,SAAA,IACAlc,EAAAb,OAAA4G,KAAA,WAAA/F,EAAAkc,UACAlc,EAAAic,SAAAlW,KAAA,WAAA/F,EAAAkc,UACAlc,EAAA2H,OACA3H,EAAAqc,SAAArc,EAAA2H,OAEA3H,EAAA6H,QACA7H,EAAAsc,UAAAtc,EAAA6H,QAEA7H,EAAAzD,WACAyD,EAAAic,SAAA1R,OAEAvK,EAAAb,OAAAoL,OA2DAiQ,GACAxa,EAAAb,OAAAoG,KAAA,gBAAAoL,GACA3Q,EAAAb,OAAAsG,OAAA,QACApO,IACAqL,IAEA6Z,WAAA7Z,EAAA,KAIA1C,EAAAvB,IAAAuK,OAAAhJ,EAAAb,QACAa,EAAAvB,IAAAuK,OAAAhJ,EAAAic,UACAjc,EAAAK,WAAAkK,QACAiQ,GAAA9X,KAEA2Z,SAAA,SAAA5c,GAKA,OAHAA,EAAKvF,SAAAuF,GADLQ,KAEA0H,MAAAlI,EAFAQ,KAGAxB,IAAA+I,IAAA,QAAA/H,GAHAQ,MAMAqc,UAAA,SAAA7c,GAUA,OARAA,EAAAvF,SAAAuF,GADAQ,KAEA4H,OAAApI,EAFAQ,KAGAxB,IAAA+I,IAAA,SAAA/H,GAHAQ,KAIAd,OAAAqI,IAAA,SAAA/H,IACApI,KAAAgB,GAAA,GAAAP,WACA2H,EAAAvF,SAAAE,YAAAqF,GAAA,IANAQ,KAQAgc,SAAAzU,IAAA,SAAA/H,GARAQ,MAWAkK,OAAA,WACA,IAAAjK,EAAAD,KAAAC,IACAtH,EAAAsH,EAAAa,MAAA0E,SACA7M,EAAAsH,GAAAuF,SACA7M,EAHAqH,KAGAkF,KAAAM,SAHAxF,KAIAub,mBACA5iB,EAAAb,UAAA0N,OAAA,YALAxF,KAKAub,mBAEAI,YAPA3b,KAOAI,WAPAJ,KAOA8G,QAPA9G,KAQAI,WAAAgK,OARApK,KASAd,OAAAsG,SATAxF,KAUEgc,SAAAxW,SACF2U,MAAAnP,OAAAd,OAAA7E,KAXArF,OAaA8G,KAAA,SAAAtH,EAAA+c,GACA,IAAAtc,EAAAD,KAAAC,IACA,GADAD,KACA1D,WAAA,CACA,IAAAwE,EAAAb,EAAAa,KACA,OAAAtB,IAAA7I,WAEA6I,EADA+c,EACA,wBAAAzb,EAAAR,WAAAyG,UAAA,UAEAjG,EAAAiG,UAPA/G,KASAoa,gBACA5a,EAVAQ,KAUAoa,cAAA5a,IAEAjI,QAAA,UAAAiI,IACGA,EAAA,IAEHA,IAfAQ,KAiBAqa,gBACA7a,EAlBAQ,KAkBAqa,cAAA7a,IAEApI,KAAAgB,IAAA,IACAoH,IAAAoH,QAAA,0CAEEjO,EAAAmI,GAAAgG,KAAAtH,GAvBFQ,KAwBAsa,cAxBAta,KAyBAsa,eAzBAta,MA6BA,OAAAR,IAAA7I,UA7BAqJ,KA8BAgc,SAAAxc,OA9BAQ,KAgCAgc,SAAAxc,OAhCAQ,OAmCAwc,OAAA,SAAA3T,GACA,IAAGrJ,EACH,GAAAqJ,IAAAlS,WADGqJ,KACH1D,WAAAuM,GACA,IAFG7I,KAEH1D,WAAA,CACAkD,EAHGQ,KAGH8G,OAHG9G,KAID1D,YAAA,EAJC0D,KAKHgc,SAAA1R,OALGtK,KAMH8G,KAAAtH,GACA,IAAAN,EAPGc,KAOHd,OACA0I,EAAAzN,YARG6F,KAQH4H,QACA1I,EAAA0I,SAAA,GACA1I,EAAAkL,OACGkS,WAAA,WACHpd,EAAA0I,WACA,SAbG5H,KAgBH1D,aACIkD,EAjBDQ,KAiBC8G,OAjBD9G,KAkBH1D,YAAA,EAlBG0D,KAmBH8G,KAAAtH,GAnBGQ,KAoBHd,OAAAoL,OApBGtK,KAqBHgc,SAAA5R,QAGA,OAxBGpK,KAwBHoT,SAEAA,MAAA,WAGA,OAFApT,KACA1D,WADA0D,KACAkF,IAAAkO,QADApT,KACAgc,SAAA,GAAA5I,QADApT,sBAMA,GAAA5I,IAAA,CACA,IAAAqlB,EAAA9jB,EAAA,kGAFAqH,KAEAxB,KAFAwB,KAGAxB,IAAAuK,OAAA0T,GACAA,EAAA,GAAArJ,QACAqJ,EAAAvS,cALAlK,KAOA1D,WAPA0D,KAOAkF,IAAAsW,OAPAxb,KAOAgc,SAAA,GAAAR,OAEA,OATAxb,MAWAqb,YAAA,SAAAjW,GACA,IAAAnF,EAAAD,KAAAC,IAAAa,EAAAb,EAAAa,KAQA,SAAA4b,EAAAhM,GACA4L,WAAA,WACAlX,EAAAsL,IACG,GAIH,OAdA/X,EAAAsH,GAAA0c,MAAA,SAAAjM,GACAA,EAAAjP,SAAAiP,EAAAkM,SAAAtd,gBAAAoR,EAAArP,QACA+D,EAAAsL,KAGA/X,EAAAsH,GAAA4c,QAAAzX,GAAA0X,YAAA1X,GACAzM,EAPAqH,KAOAkF,KAAAsW,KAAApW,GAMAzM,EAAAmI,GAAAwE,KAAA,QAAAoX,GACA/jB,EAAAmI,GAAAwE,KAAA,MAAAoX,GAdA1c,QAqBArH,EAAAokB,UAAA5C,MACAxhB,EAAAqkB,KAAAC,MACAtkB,EAAAukB,UAAAnC,WAkBAxf,QAAA4hB,SAAA7E,SACA1Y,KAAA,SAAAvD,GACA,IAAA0D,EAAAC,KAQA,SAAAmV,EAAAhV,GACA,IAAAmO,EAAA3V,EAAAwH,GACA,OAAAmO,EAAA/H,SAAA,cACE+H,EAEFA,EAAA/H,SAAA,mBACA+H,EAAAtD,cADA,EAIE,SAAAoS,EAAA1M,EAAA2M,GACF,IAAA/O,EAAA6G,EAAAzE,EAAAvQ,QACA,GAAAmO,EAAA,CACA,GAAAA,EAAA/H,SAAA,eACG,OAED,GAAA+H,EAAA/H,SAAA,eACF,OAEA+H,EAAA+O,GAAA,UAzBAF,SAAAnS,OAAApL,KAAAyF,KAAAtF,EAAA1D,GACA0D,EAAAud,YAAAriB,OAAAoB,EAAAihB,aAAA,GACAvd,EAAAwd,iBAAA1iB,OAAAI,OAAAoB,EAAA6B,oBACA6B,EAAGyd,YACDzd,EAAAvB,IAAAkI,SAAA,cAAApB,KAAA,2CAAAoL,GACFA,EAAA/O,mBACAmE,KAAA,qBAsBA/F,EAAAvB,IAAAif,UAAA,SAAA/M,GACA0M,EAAA1M,EAAA,cAEEgN,SAAA,SAAAhN,GACF0M,EAAA1M,EAAA,iBAEA4K,MAAA,SAAA5K,GACA,IAAApC,EAAA6G,EAAAzE,EAAAvQ,QACA,GAAAmO,EAAA,CACA,GAAAA,EAAA/H,SAAA,eACA,OAEExG,EAAA1D,QAAAif,MAAAjW,KAAArF,KAAA0Q,EAAApC,EAAAxI,KAAA,kBAIFO,IAAA,SAAAtB,GACA,OAAA/E,KAAAwd,SAAAzY,GACA/E,KAAAwd,SAAAzY,GAEA/E,KAAAwd,SAAAzY,GAAApM,EAAA,gBAAAoM,EAAA/E,KAAAxB,KAAAwM,UAEA8H,OAAA,SAAA/N,GAIA,OAHA4Y,eAAAtY,KAAArF,KAAA+E,EAAA,SAAAuJ,GACAA,EAAA5H,SAAA,iBAEA3G,MAEA6d,SAAA,SAAA7Y,GAIA,OAHA4Y,eAAAtY,KAAArF,KAAA+E,EAAA,SAAAuJ,GACAA,EAAA3H,YAAA,eAAAA,YAAA,WAEA5G,MAEA8d,OAAI,SAAA9Y,GACJ,IACAuJ,EAAAvJ,EAAAsB,IAAAtB,EADA/E,KACAqG,IAAAtB,GAKA,OAJAuJ,IACAA,EAAA3H,YAAA,eACC2H,EAAAxG,QAAA,IAJD9H,MAQA8d,QAAA,SAAA/Y,GACA,cAAA/E,YAMA,WAHAsO,EAAA3H,YAAA,eAAAD,SAAA,eACA4H,EAAAxG,QAAA,KAJA9H,MAQA+d,WAAA,SAAAlV,EAAA3K,GACA,IAAA6B,EAAAC,KAAA+T,EAAAhU,EAAAwd,iBAuBA,OAtBArf,IACA6V,EAAAlZ,OAAAqD,KAEA2K,IAAAlS,WAAAoJ,EAAAud,YAAAzU,IACGlQ,EAAA,kBAAAoH,EAAAvB,KAAApF,KAAA,WACD,IAAAkV,EAAA3V,EAAAqH,MACF+E,EAAAuJ,EAAA,GAAA0P,aAAA,eACAjK,EAAAhP,IACAhF,EAAA+d,QAAAxP,KAGAvO,EAAAud,aAAA,IAEA3kB,EAAA,kBAAAoH,EAAAvB,KAAApF,KAAA,WACA,IAAAkV,EAAA3V,EAAAqH,MACA+E,EAAAuJ,EAAA,GAAA0P,aAAA,eACAjK,EAAAhP,IACAhF,EAAA8d,OAAAvP,KAGAvO,EAAAud,aAAA,GAEAvd,KAMApH,EAAAslB,aAAAd,SACAxkB,EAAAulB,QAAAC,SAOA5iB,QAAA6iB,MAAA9F,SACA1Y,KAAA,SAAAvD,GAEAA,EAAAkc,EAAAlc,EAAAkc,GAAA,OACA6F,MAAGpT,OAAApL,KAAAyF,KAFHrF,KAEG3D,GAFH2D,KAGAqe,eAAApjB,OAAAoB,EAAAgiB,gBAAA,GAHAre,KAIAxB,IAAAkI,SAAA,WAAApB,KAAA,2BAAAoL,GACAA,EAAA5O,oBACGgE,KAAA,sBAEHwY,QAAA,SAAAtH,GAEA,SAAAA,EAAAW,MAAA,CAIA,IAUA4G,EAVAC,EAAA7lB,EAAA,sDACA8lB,EAAA9lB,EAAA,yDACA+lB,EAAA/lB,EAAA,0DACAiP,EAAA3N,SAAA+c,EAAApP,QACA+W,EAAA1jB,OAAA+b,EAAA2H,UAAA,IAyCA,OAlDA3e,KAUAxB,IAAAuK,OAAAyV,GACE5W,IACF4W,EAAAjX,IAAA,SAAAK,GACA8W,EAAAnX,IAAA,cAAAK,IAbA5H,KAgBAqe,iBACAE,EAAA5lB,EAAA,2DACAiP,GACA2W,EAAAhX,IAAA,SAAAK,IAGA4W,EAAAf,UAAA,SAAA/M,GACA/X,EAAAqH,MAAA0G,SAAA,mBACA6X,GACAA,EAAA7X,SAAA,iDAIA/N,EAAAqH,MAAA2G,YAAA,mBACA4X,GACAA,EAAA5X,YAAA,4BAGA2U,MAAA,SAAA5K,GACAsG,EAAAsE,MAAAjW,KAAA1M,EAAAqH,OACA0Q,EAAA5O,oBAEAiH,OAAA0V,GACAF,GACAC,EAAAzV,OAAAwV,GAEAC,EAAAzV,OAAA2V,GACA1H,EAAA4H,UACAD,EAAA,mBAEA,KAAAA,GACGF,EAAA3X,KAAA,oEAAA6X,EAAA,aAEHD,EAAA5X,KAAAkQ,EAAAW,OAjDA3X,UAEAxB,IAAAuK,OAAApQ,EAAA,2CAkDAuR,OAAA,WAOA,OANAlK,KACA3D,QAAAwiB,cADA7e,KAEA3D,QAAAwiB,aAAAxZ,KAFArF,MAIArH,EAAA,gBAJAqH,KAIiBxB,IAAA,IAAAgH,SACjB4Y,MAAApT,OAAAd,OAAA7E,KALArF,cAYArH,EAAAmmB,UAAAV,MACAzlB,EAAAomB,KAAAC,MAOAzjB,QAAA0jB,aAAA3G,SACA1Y,KAAG,SAAAvD,GAEHA,EAAAkc,EAAAlc,EAAAkc,GAAA,OACA0G,aAAGjU,OAAApL,KAAAyF,KAFHrF,KAEG3D,GACH,IAAA6iB,EAAA7iB,EAAA6iB,UACA,8DACA,8DACG,8DACH,8DAPAlf,KASGmf,eAAA9iB,EAAA8iB,eAAA,IAAAhoB,cATH6I,KAUAof,UAVApf,KAWAxB,IAAAkI,SAAA,kBAAApB,KAAA,2BAAAoL,GACAA,EAAA5O,oBACAgE,KAAA,qBACE,IAAArH,EAdFuB,KAcEC,IAAA+D,cAAA,SAdFhE,KAeAxB,IAAAuK,OAAAtK,GACAA,EAAA0F,UAAA,uBACA1F,EAAA4gB,YAAA,EACA5gB,EAAA6gB,YAAA,EACA7gB,EAAGmZ,OAAA,EACH,IAAA2H,EAAA9gB,EAAA+gB,UAAA,GAAAC,EAAAF,EAAAG,WAAA,GACAD,EAAAE,QAAAT,EAAA,GAAAxa,OArBA1E,KAsBA4f,SAAAH,EAAA,8BACC,QAAA9a,EAAA,EAAAA,EAAAua,EAAAxa,OAAAC,IAAA,CACD4a,EAAA9gB,EAAA+gB,UAAA7a,EAAA,GACA,QAAAkb,EAAA,EAAAA,EAAAX,EAAAva,GAAAD,OAAAmb,IACAJ,EAAAF,EAAAG,WAAAG,GA1BA7f,KA2BA4f,SAAAH,EAAAP,EAAAva,GAAAkb,GAAA,yBAIAD,SAAA,SAAAH,EAAAK,EAAAtZ,GACA,IAAAzG,EAAAC,KACAyf,EAAA9mB,EAAA8mB,GAAA/Y,SAAAF,GACAzG,EAAAof,gBAAAW,EAAA3oB,eACAsoB,EAAA/Y,SAAA,gCAEA+Y,EAAA3Z,KAAA,QAAAga,GAAA/f,EAAA1D,QAAA0jB,SACAN,EAAAhC,UAAA,SAAA/M,GACA/X,EAAAqH,MAAA0G,SAAA,4BAEA+Y,EAAA/B,SAAA,SAAAhN,GACA/X,EAAAqH,MAAA2G,YAAA,4BAEA8Y,EAAAnE,MAAA,SAAA5K,GACAA,EAAA1O,OACAjC,EAAA1D,QAAAif,MAAAjW,KAAA1M,EAAAqH,MAAA8f,KAEAA,EACAL,EAAA1W,OAAApQ,EAAA,mEAAA4O,IAAA,mBAAAuY,IAEAL,EAAA3Y,KAAA/G,EAAA1D,QAAA0jB,SAEApnB,EAAA8mB,GAAA3Z,KAAA,qBACA/F,EAAAqf,OAAAxV,KAAA6V,IAEAvV,OAAA,WAMA,OAJA7Q,MADA2G,KACAof,OAAA,WACApf,KAAAwF,WAEAyZ,aAAAjU,OAAAd,OAAA7E,KAJArF,cAWArH,EAAAqnB,iBAAAf,aACAtmB,EAAAsnB,YAAAC,aAMA3kB,QAAA4kB,eACAvgB,KAAA,SAAAvD,GACA,IACAqF,EAAA/I,EAAA0D,EAAAqF,QACA0e,EAAA/jB,EAAA+jB,WAAA,OACA1I,EAAArb,EAAAqb,KAAA,GACAC,EAAAjW,EAAAlC,MACA6gB,EAAAhkB,EAAAgkB,gBACA7Z,EAAA9E,EAAA,GAAAyC,WAAA,GACAhE,EAAA9D,EAAA8D,QAAA,iCAAA7H,MAAAC,UACA8D,EAAAikB,WAAAjkB,EAAAikB,YAAA,SAAAC,GACAC,MAAAD,IAEA,IAAAE,KACA,IAAI,IAAAza,KAAAqa,EACJI,EAAA7W,KAAA,8BAAA5D,EAAA,YAAAqa,EAAAra,GAAA,QAEA,IAAAc,GACA,+BAAAN,EAAA,KACAnK,EAAA8D,OAAA,oBAAAA,EAAA,oCACA9D,EAAAqkB,KAAA,2HAAAvgB,EAAA,aAAAuX,EAAA,KACA,kCACA+I,EAAAE,KAAA,IACA,kEAAAhJ,EAAA,OACA,UACA,mDAAAyI,EAAA,qBACA/jB,EAAAqkB,KAAA,mBACG,UAAAC,KAAA,IACHniB,EAAA7F,EAAAmO,EAAApF,EAAAzB,KACAyB,EAAA4I,OACE5I,EAAA0H,OAAA5K,GA5BFwB,KA6BAxB,MA7BAwB,KA8BA0B,SA9BA1B,KA+BAd,OAAA7C,EAAA8D,OAAAxH,EAAA,gBAAAwH,EAAA,MAAAxH,EAAA,SAAA6F,GA/BAwB,KAgCA0gB,KAAArkB,EAAAqkB,KAAA/nB,EAAA0D,EAAAqkB,MAAA/nB,EAAA,OAAA6F,GAhCAwB,KAiCA4gB,QAAAjoB,EAAA,kBAAA6F,GACA,IAAAkJ,EAAArL,EAAAqL,OAAA/O,EAAA,oBAAA6F,GAAAkJ,QACA/O,EAAA,kBAAA6F,GAAAkJ,SAnCA1H,KAoCA3D,WAEAwkB,OAAA,WACC,IAAA9gB,EAAAC,KACDd,EAAAa,EAAAb,OA4BA,OA3BAA,EAAAoG,KAAA,kBACApG,EAAAsG,SACA,IAAAsb,EAAAhpB,SAAAkM,cAAA,QACAjE,EAAA6gB,QAAAxX,OAAA0X,oCAGAnoB,EAAAmoB,GAAA5W,QAAA,GACA,IAEAlC,EAFA/H,EAAAtH,EAAAukB,UAAAhe,GACAH,EAAAkB,EAAAga,qBAAA,UACAsG,EAAA,GAMAA,EAAAhmB,UAJAgmB,EADAxhB,EACAA,EAAAgI,UAEA9G,EAAAa,KAAAiG,WAGA7H,EAAA,GAAA2Z,IAAA,uBAEA7Q,EAAArP,EAAA6C,KAAA+kB,GACA,MAAA7P,GACA3Q,EAAA1D,QAAAikB,WAAAjb,KAAAtF,EAAA,wBAAAE,EAAAa,KAAAR,WAAAyG,UAAA,WAEAiB,GACAjI,EAAA1D,QAAA0kB,YAAA1b,KAAAtF,EAAAiI,KAGAjI,EAAA2gB,KAAA,GAAAG,SACA9gB,GAEAmK,OAAA,WAQA,OAPAlK,KACA4gB,SADA5gB,KAEA4gB,QAAApb,SAFAxF,KAIAd,OAAAgL,SAJAlK,KAKAxB,IAAA0L,SALAlK,KAMA0B,OAAA0I,OANApK,QAaArH,EAAAqoB,kBAAAb,cACAxnB,EAAAsoB,aAAAC,cAmBA3lB,QAAI4lB,QAAA7I,SACJ1Y,KAAI,SAAAvD,GACJ,IACAK,EAAAzB,OAAAoB,EAAAK,YAAA,GACAL,EAAAkc,EAAAlc,EAAAkc,GAAA,OACAlc,EAAAK,YAAA,EACAL,EAAAyc,WAAA7d,OAAAoB,EAAAyc,YAAA,GACAqI,QAAAnW,OAAApL,KAAAyF,KALArF,KAKA3D,GACA,IAAGsb,EAAAtb,EAAAsb,MACH7W,EAAAnI,EAAA0D,EAAAyE,KAPAd,KAOAC,KACAmhB,EAAA/kB,EAAA+kB,WACAC,EAAAhlB,EAAAglB,OACAC,EAAAjlB,EAAAilB,MACAC,EAAAllB,EAAAklB,SACAC,EAAAvmB,OAAAoB,EAAAmlB,UAAA,GAZAxhB,KAaAxB,IAAAkI,SAAA,aAAApB,KAAA,2BAAAoL,GACAA,EAAA5O,oBAEA,IAAA2f,EAAA9oB,EAAA,yCAAAwQ,SAhBAnJ,KAgBAxB,KACApH,KAAAgB,GAAA,EAjBA4H,KAkBA0hB,WAAA/oB,EAAA,gEAAAwQ,SAlBAnJ,KAkBAxB,KACA9B,GACA/D,EAAA,wCAAAwQ,SApBAnJ,KAoBAxB,KAEA,IAAAmjB,EAAAhpB,EAAA,wCACA8oB,EAAA1Y,OAAA4Y,GACAA,EAAI7a,KAAA6Q,GAxBJ3X,KAyBA4hB,UAAAjpB,EAAA,6CAAA4oB,EAAAxc,KAAA,aAAAuW,MAAAiG,EAAAjG,OACAqG,EAAA5Y,OA1BA/I,KA0BA4hB,WA1BA5hB,KA2BAyZ,WACAoI,QAAAF,EACAG,WAAAzlB,EAAAylB,aAEE,IAAAC,EAAAppB,EAAA,sCACF8oB,EAAA1Y,OAAAgZ,GACAA,EAAAhZ,OAAAjI,GACA,IAAAkhB,EAAArpB,EAAA,wCAqBA,IApBEyoB,GAAAC,GAAAC,IACFG,EAAA1Y,OAAAiZ,GAEA3oB,QACA4oB,IAAAb,EAAArc,KAAA,YACAkd,IAAAZ,EAAAtc,KAAA,QACAkd,IAAAX,EAAAvc,KAAA,OACA,WACA,GAAA/E,KAAAiiB,IAAA,CACA,IAAAvgB,EAAAwgB,cAAAliB,KAAAiiB,KACEvgB,EAAAgF,SAAA,aAAA1G,KAAA+E,MACFid,EAAAjZ,OAAArH,MA9CA1B,KAiDA4H,QACAma,EAAAna,OAAAzN,YAlDA6F,KAkDA4H,QAAA+Z,EAAA/Z,SAAAoa,EAAApa,UAlDA5H,KAoDAxB,IAAAkJ,MApDA1H,KAoDAxB,IAAAkJ,SApDA1H,KAqDAxB,IAAAoJ,OArDA5H,KAqDAxB,IAAAoJ,UArDA5H,KAsDAmiB,KAAA,KACAX,EAAA,CACA,IAAAjI,EAAAC,YAxDAxZ,KAwDAC,KACAmiB,EAAA3pB,KAAA4pB,IAAA9I,EAAA+I,YAAA/I,EAAAF,aACAkJ,EAAA9pB,KAAA4pB,IAAA9I,EAAAiJ,aAAAjJ,EAAAD,cA1DAtZ,KA2DAmiB,KAAApI,SACA7R,EAAA,EACAC,EAAA,EACAoQ,EA9DAvY,KA8DAuY,EAAA,EACA/R,IAAA,iBACAkB,MAAA0a,EACAxa,OAAA2a,IAjEAviB,KAoEA4Y,QApEA5Y,KAoEAxB,IAAAkJ,QApEA1H,KAoEAxB,IAAAoJ,UApEA5H,KAqEAgiB,YArEAhiB,KAsEA+hB,UAtEA/hB,KAuEC2hB,YAvED3hB,KAwEAyiB,WAAA,GAEAC,aAAA,SAAAnK,GACAvY,KACAmiB,KAAA3jB,IAAA+I,IAAA,UAAAgR,4BAGAoK,EAAA1nB,OAAA0nB,EAAA,IACA,IAAA7hB,EAAAd,KAAA+hB,QAMA,OANA/hB,KACA4iB,QAAAjqB,EAAA,2GAAAF,KAAAC,MAAAoI,EAAA8G,SAAA,WAAA+a,EAAA,gBACAjb,MAAA5G,EAAA4G,SAAAE,OAAA9G,EAAA8G,UACAL,IAAA,MAHAvH,KAGA2hB,UAAA/Z,SAAA,MACA9G,EAAAyG,IAAA,uBAAA+B,MAJAtJ,KAIA4iB,SAJA5iB,KAKAyiB,WAAA,EALAziB,MAQA6iB,YAAG,WAIH,OAHA7iB,KAAA4iB,SAAA5iB,KAAA4iB,QAAA1Y,SACAlK,KAAA+hB,QAAAxa,IAAA,wBACAvH,KAAAyiB,WAAA,EACAziB,MAEAkK,OAAA,WAiBA,OAhBAlK,KACA3D,QAAAwiB,cADA7e,KAEA3D,QAAAwiB,aAAAxZ,KAFArF,WAIAmiB,MAJAniB,KAIAmiB,KAAAjY,SAJAlK,KAKA0hB,YALA1hB,KAKA0hB,WAAAxX,SALAlK,KAMA4hB,UAAApc,SACA7M,EAAA,QAPAqH,KAOAxB,KAAAgH,SACA7M,EAAA,SARAqH,KAQAxB,KAAAgH,SARAxF,KASAgiB,UAAAxc,SATAxF,KAUI+hB,QAAAvc,SAVJxF,KAWA2hB,UAAAnc,SACA7M,EAAA,SAZAqH,KAYAxB,KAAApF,KAAA,WACAT,EAAAqH,MAAAkK,WAEAiX,QAAAnW,OAAAd,OAAA7E,KAfArF,cAsBArH,EAAAmqB,YAAA3B,QACAxoB,EAAAoqB,OAAGC,QAwDHrqB,EAAAsqB,KAAAC,MAoEAvqB,EAAAwqB,WAAAC,YACAzqB,EAAA0qB,UAAAC,WACA3qB,EAAA4qB,KAAAC,sBAaAC,aAmUAC,QAAA3X,WACA4X,KAAG,SAAAC,GACH,OAAAC,MAAAD,EAAA5jB,KAAAhD,WAEA8mB,WAAA,SAAA/e,EAAAK,GACA,IAAArF,EAAAC,KACA+jB,EAAA/jB,KAAA+jB,cAIA,OAHAA,IACAA,EAAA/jB,KAAA+jB,kBAEAC,SAAAjf,GACAtL,YAAAuqB,SAAAjf,KAMAgf,EAAAhf,KACAif,SAAAjf,GAAAM,KAAAtF,EAAAnJ,YACAmtB,EAAAhf,GAAA,UAEAK,GACGA,EAAAC,KAAAtF,GAEDA,IAZEuc,WAAA,WACJvc,EAAA+jB,WAAA/e,EAAAK,IACA,KACArF,IAWAikB,SAAAjf,GAAA,UACAqe,YAAArjB,EAAAjD,YAAAiI,EAAA,IAAAA,EAAA,WAAA+V,mBAAAniB,EAAAC,MAAAP,MAAAtB,UAAA,WACEulB,WAAA,WACF0H,SAAAjf,IACAhF,EAAA+jB,WAAA/e,EAAAK,IAEA,KAEErF,IAEFkkB,QAAA,SAAA1kB,EAAA6F,GACE,IAAArF,EAAAC,KAIF,OAHAD,EAAAmkB,UAAA3kB,KACAQ,EAAAmkB,UAAA3kB,OAEA9F,YAAA2L,IACArF,EAAAmkB,UAAA3kB,GAAAqK,KAAAxE,GACErF,IAEF1G,MAAA0G,EAAAmkB,UAAA3kB,GAAA,WACA6F,EAAApF,KAAAqF,KAAAtF,EAAAqF,KAEAA,IAEA+e,aAAA,SAAApf,EAAAK,GACA,IAAArF,EAAAC,KAAAT,EAAA,eAAAwF,EACA,OAAAK,IAAAzO,UACAoJ,EAAAmkB,UAAA3kB,GACAQ,EAAAkkB,QAAA1kB,IAEAQ,EAAA+jB,WAAA/e,EAAA,WACAhF,EAAAkkB,QAAA1kB,KAEAQ,GAEAA,EAAAkkB,QAAA1kB,EAAA6F,IAEAgf,YAAA,WACA,IAAArkB,EAAAC,KAKA,OAJA3G,MAAA,qJACGqG,MAAA,cAAAiF,EAAAI,GACHhF,EAAAqY,IAAA9C,MAAAvQ,GAAAhF,EAAAme,QAAApL,OAAA/N,GAAAhF,EAAAme,QAAAN,SAAA7Y,KAEAhF,GAEAskB,eAAA,SAAArN,GAEA,OADAhX,KAAAskB,cAAA1a,KAAAoN,GACAhX,MAEA+b,YAAA,SAAA3W,GACA,OAAApF,KAAAikB,QAAA,cAAA7e,IAEAyZ,aAAA,SAAAzZ,GACA,OAAApF,KAAAikB,QAAA,eAAA7e,IAEAgV,cAAA,SAAAhV,GACA,OAAApF,KAAAikB,QAAA,gBAAA7e,IAEAiV,cAAA,SAAAjV,GACA,OAAApF,KAAAikB,QAAA,gBAAA7e,IAEAkV,aAAA,SAAAlV,GACA,OAAIpF,KAAAikB,QAAA,eAAA7e,IAEJmf,OAAA,WACA,IAAGxkB,EAAAC,KAAAzD,EAAAwD,EAAAxD,eACH,GAAAwD,EAAAykB,UACA,OAAAzkB,EAEA,GAAAA,EAAAK,WAAA4H,KAAA,cACA,OAAKjI,EAELA,EAAAK,WAAA4H,KAAA,qBAEAwR,cAAAhS,MAAAid,SADAloB,EACA,SAEA,GAEA,IAAAmL,EAAAnL,EAAAid,cAAAH,YAAA,KAAAtZ,EAAA2H,MACAE,EAAArL,EAAAid,cAAAF,aAAA,KAAAvZ,EAAA6H,QACAxQ,KAAAgB,GAAA,GAAAP,WACA+P,EAAI3N,SAAAE,YAAAyN,GAAA,IAEJ,IAAI8c,EAAA3kB,EAAA2kB,UAAA/rB,EAAAoH,EAAAZ,QACJ5C,EACA5D,EAAAb,SAAAgJ,MAAAiI,OAAA2b,GAEG3kB,EAAAK,WAAAgJ,OAAAsb,GAEH,IAAAC,EAAAhsB,EAAA,WAAA+rB,GACAE,EAAAjsB,EAAA,QAAA+rB,GACAG,EAAA9kB,EAAA8kB,UAAAlsB,EAAA,aAAA+rB,GACAA,EAAA/d,YAAA,aACAD,SAAA,6BAAA3G,EAAAhD,WAAAwK,IAAA,QAAAG,GACAnL,GACAmoB,EAAAnd,KACAmR,SAAA,WACAnQ,KAAA,EACAC,IAAA,EACAmQ,UAAA,SAEAphB,SACAwI,EAAA+kB,WAAAxc,iBAEA5R,OAAA8c,SAAA,KACA7a,EAAAb,SAAAgJ,MAAAyG,KACAK,OAAA,MACA6c,SAAA,WAEA9rB,EAAAb,SAAAgJ,KAAAR,YAAAiH,IAAA,qBACAxH,EAAAglB,qBAAA,IAEAhlB,EAAAglB,sBACApsB,EAAAb,SAAAgJ,MAAAyG,KACAK,OAAA,GACA6c,SAAA,KAEA9rB,EAAAb,SAAAgJ,KAAAR,YAAAiH,IAAA,gBAEAxH,EAAA+kB,YACApuB,OAAA8c,SAAAzT,EAAA+kB,WAAA5c,EAAAnI,EAAA+kB,WAAA3c,IAGA,IAAA6c,KACArsB,EAAAS,KAAA2G,EAAA9B,MAAA,SAAA0G,EAAAI,GACA,KAAAA,EACIigB,EAAApb,KAAA,sDACJ,KAAA7E,EACAigB,EAAApb,KAAA,8BAEAob,EAAApb,KAAA,uCAAA7E,EAAA,YAAAhF,EAAA4jB,KAAA5e,GAAA,wBACAigB,EAAApb,KAAA,4DAAA7E,EAAA,yCAGA,IAAAmZ,EAAAne,EAAAme,QAAAC,UACAtF,IAAA8L,EACA7d,KAAAke,EAAArE,KAAA,IACAziB,eAAA6B,EAAA7B,eACAod,MAAA,SAAA5K,EAAA3L,GAEA,GADA2L,EAAA1O,OACAjC,EAAAgf,KAAA,CACA,IAAAkG,EAAAllB,EAAAgf,KAAAha,KAEA,GADAhF,EAAAmlB,WACAD,IAAAlgB,EACA,OAGAhF,EAAAokB,aAAApf,MAGAogB,EAAAhrB,YAAAyN,GAAAsW,EAAA1f,IAAAoJ,SACAoV,EAAAjd,EAAAid,KAAAC,OACArV,OAAAud,EAAA,GAAAhrB,YAAAyN,GAAA7H,EAAAjC,UAAAqnB,EAAAplB,EAAAjC,UACA+a,IAAA+L,EACAxkB,WAAAL,EAAAK,WACA9D,WAAAyD,EAAAzD,WACAM,WAAKmD,EAAAnD,WACLa,UAAAsC,EAAAtC,UACAE,QAAAoC,EAAApC,QACAC,QAAAmC,EAAAnC,QACAwc,cAAA,SAAAtT,GAGA,OAAAhE,YADAgE,EAAAse,mBAAAC,eADAve,EAAA/G,EAAAqa,cAAAtT,KAEA/G,EAAAvD,WAAAuD,EAAA1B,SAAA,KAAA0B,EAAA9C,QAAA8C,EAAAtD,eAAAsD,EAAArC,aAEA2c,cAAA,SAAAvT,GAEA,OADAA,EAAAhE,YAAAgE,EAAA/G,EAAAvD,WAAAuD,EAAA1B,SAAA,YACA0B,EAAAsa,cAAAvT,IAEAwT,aAAA,WACAva,EAAAid,OAAAhd,KACAD,EAAAua,gBAEAyB,YAAA,WAqCA,GApCAhc,EAAAid,OAAAhd,KACAD,EAAAqY,IAAA4E,EAAA5E,IACArY,EAAAulB,gBAAA,SAAA5U,GACG3Q,EAAAgf,MACHhf,EAAAmlB,YAGAvsB,EAAAqkB,EAAA/c,IAAAnI,UAAA2jB,UAAA1b,EAAAulB,iBACAC,sBAAAlgB,KAAAtF,GACAylB,kBAAAngB,KAAAtF,GACA0lB,cAAApgB,KAAAtF,GACA2lB,gBAAArgB,KAAAtF,GACAid,EAAA3B,YAAA,SAAA3K,GACAsM,EAAA1gB,aAGAyD,EAAAqkB,cACArkB,EAAA4lB,cACA5lB,EAAA1D,QAAAgf,aACAtb,EAAA1D,QAAAgf,YAAAhW,KAAAtF,MAGAid,EAAAhB,SAAAW,MAAA,SAAAjM,GACAA,EAAAjP,SAAAiP,EAAAkM,SAAAxd,eAAAsR,EAAArP,QACAtB,EAAA1D,QAAAgf,aACAtb,EAAA1D,QAAAgf,YAAAhW,KAAAtF,KAIGA,EAAA6lB,cACH7lB,EAAA8lB,WAEA9lB,EAAAykB,WAAA,EACK,KAAAzkB,EAAA+lB,cACL/lB,EAAA+lB,YAAA/lB,EAAA+G,QAEA/G,EAAAgmB,WAAArhB,OAAA,GACA,IAAA+G,EAAA1L,EAAAgmB,WAAAC,MACAva,EAAAqG,QACA/R,EAAA+G,KAAA2E,EAAA3E,MACAkW,EAAA5E,IAAAzJ,MAAAqD,eAAAvG,GACA1L,EAAA+S,UAGI/S,EAAAgc,cACJhc,EAAA1D,QAAA0f,aACAhc,EAAA1D,QAAA0f,YAAA1W,KAAAtF,MA6DA,OAzDA8kB,EAAAle,YAAA,aAAAD,SAAA,gBACAqC,OAAA,kEACAA,OAAA,iEACAhJ,EAAAkmB,2BACAttB,EAAAjC,QAAA8O,OAAA,SAAAzF,EAAAkmB,0BACAlmB,EAAAkmB,yBAAA,MAEA,SAAIC,IACJ,IAAArB,EAAAjd,SAIE7H,EAAAomB,OAAAze,EAAAE,GAAA,GAHF0U,WAAA4J,EAAA,KAKAA,GACA3pB,GACAwD,EAAAkmB,yBAAA,SAAAvV,GACA3Q,EAAAykB,WACAzkB,EAAAomB,OAAA3M,cAAAH,YAAAG,cAAAF,cAAA,IAGA3gB,EAAAjC,QAAA4O,KAAA,SAAAvF,EAAAkmB,0BACA/H,EAAApL,OAAA,cACA+R,EAAAzZ,QAAA7D,IAAA,uBACAsd,EAAAxZ,OAAA9D,IAAA,yBAEAhQ,QACAoB,EAAAjC,QAAA4O,KAAA,kBAAAoL,GACA3Q,EAAA+kB,WAAAxc,kBAGAvI,EAAA5C,WAAA,EACAyc,OACAF,OAAAgL,EACA7C,QAAAgD,EACAlL,OAAA,SAAAzR,EAAAC,EAAAT,EAAAE,EAAAoR,EAAAC,GACErR,GAAAqR,EACFlZ,EAAAomB,OAAA,KAAAve,MAIAid,EAAAzZ,QAAA7D,IAAA,uBAEA,IAAAxH,EAAA5C,WACAyc,OACAF,OAAAgL,EACA7C,QAAAgD,EAAAxZ,OACAsO,OAAA,SAAAzR,EAAAC,EAAAT,EAAAE,EAAAoR,EAAAC,GACAvR,GAAAsR,EACApR,GAAAqR,EACAlZ,EAAAomB,OAAAze,EAAAE,MAIAid,EAAAxZ,OAAA9D,IAAA,wBAGAxH,GAEAmK,OAAA,WACE,IAAAnK,EAAAC,KACF,OAAAD,EAAAykB,WAGEzkB,EAAA8e,eACF9e,EAAAK,WAAA4H,KAAA,iBACAjI,EAAAgf,MACAhf,EAAAmlB,WAEA7rB,MAAA0G,EAAAqmB,QAAA,WACArmB,EAAAsmB,eAEA1tB,EAAAb,UAAA0N,OAAA,YAAAzF,EAAAulB,iBACAvlB,EAAAme,QAAAhU,SACAnK,EAAAid,KAAA9S,SACEnK,EAAA8kB,UAAAxZ,OAAA7F,SACFzF,EAAA8kB,UAAArf,SACAzF,EAAA2kB,UAAAxa,SACEnK,EAAA2kB,UAAA3kB,EAAAme,QAAAne,EAAAid,KAAAjd,EAAAgf,KAAA,KACFhf,EAAAqmB,WACArmB,EAAAykB,WAAA,EACAzkB,GAnBAA,GAqBAomB,OAAG,SAAAze,EAAAE,EAAAsR,GAsBH,OApBAA,EAAAje,OAAAie,GAAA,GACExR,IACF,IAAA9P,KAAA8P,KAEEA,GADFA,EAAAvN,YAAAuN,IAJA1H,KAKEnC,SALFmC,KAKEnC,SAAA6J,GALF1H,KAOA0kB,UAAAnd,IAAA,QAAAtN,SAAAyN,IACEwR,IARFlZ,KASA0H,MAAAzN,SAAAyN,KAGAE,IACEA,EAAAzN,YAAAyN,GACFud,WAAAhrB,YAAAyN,GAdA5H,KAcAke,QAAA1f,IAAAoJ,SAdA5H,KAcA6kB,UAAAjd,SACAud,sBAfAnlB,KAeAlC,UAfAkC,KAeAlC,UAAAqnB,WAfAnlB,KAgBAgd,KAAAX,UAAA8I,YACAjM,IAjBAlZ,KAkBA4H,OAAA3N,SAAA2N,KAlBA5H,MAuBA8S,OAAA,WAEA,OADE9S,KAAAwkB,WAAAxkB,KAAAoY,IAAAtF,SACF9S,MAEA8G,KAAA,SAAAtH,GAEA,OAAAA,IAAA7I,UADAqJ,KAEAwkB,UAFAxkB,KAEAgd,KAAAlW,OAAA6U,YAFA3b,KAEAI,aAFAJ,KAIAwkB,UAJAxkB,KAIAgd,KAAAlW,KAAAtH,GAAAmc,YAJA3b,KAIAI,WAAAZ,GAJAQ,KAKAwkB,WALAxkB,KAMAoY,IAAAzF,YANA3S,OAUAsmB,SAAA,WACA,OAAAtmB,KAAAwkB,UAAAxkB,KAAAgd,KAAAlW,KAAAnQ,WAAA,OAEAsQ,KAAE,SAAAzH,GAEF,OAAAA,IAAA7I,UACAoD,MAFAiG,KAEA8G,OAAAF,QAAA,2BAAAA,QAAA,iBAFA5G,KAIA8G,KAAAzM,QAAAmF,KAGA+mB,QAAE,WACF,WAAAxsB,MAAAiG,KAAAiH,OAAAL,QAAA,mBAEA4f,QAAA,WACA,OAAAzsB,MAAAiG,KAAA8lB,YAAAlf,QAAA,uBAAA7M,MAAAiG,KAAA8G,OAAAF,QAAA,sBAEA6f,aAAA,WACA,IAAAjnB,EAAAQ,KAAAwkB,UAAAxkB,KAAAoY,IAAAzJ,MAAA7H,OAAA,GAEE,OADFtH,EAAA4lB,mBAAAC,eAAA7lB,KAGAknB,MAAA,SAAAC,GAGA,gBADEA,MAAA,QAAAxvB,eADF6I,KAGA8G,OAAApC,OAEE,SAAAiiB,EALF3mB,KAMAiH,OAAAL,QAAA,4BAAAA,QAAA,kBAAAlC,OAEA,GAEAvM,KAAA,SAAAoH,GACAA,IAAApI,cACA,IAAAihB,EAAApY,KAAAoY,IACAwO,EAAAjtB,SAAA4F,EAAA,6BAAAG,MAAA,QAYA,OAXAknB,GAFA5mB,KAGA2lB,aAAA,GAEAvN,EAAA7Y,GAAAsnB,MAAAzO,EAAArd,SAAAuR,UAAA,IACAsa,IANA5mB,KAOAokB,cAPApkB,KAQA2lB,aAAA,GARA3lB,KASA3D,QAAAgf,aATArb,KAUA3D,QAAAgf,YAAAhW,KAVArF,aAeA8W,WAAA,SAAAtX,EAAAqX,GACA,OAAA7W,KAAAwkB,WAGAhlB,EAAAQ,KAAAqa,cAAA7a,GACAQ,KAAA7H,KAAA,aAAAqH,EAAAqX,GACA7W,MAJAA,MAMA8mB,WAAA,SAAAtnB,GAEE,GADFQ,KAAA8G,KAAA9G,KAAA8G,OAAAtH,GACEQ,KAAAwkB,UAAA,CACF,IAAApM,EAAApY,KAAAoY,IACAA,EAAAzJ,MAAAN,mBAAA+J,EAAAnY,IAAAa,MAAAyN,UAAA,GACE6J,EAAAtF,SAEF,OAAA9S,MAEA+mB,KAAA,WAEA,OADEpL,YAAA3b,KAAAI,WAAAJ,KAAA8G,QACF9G,MAEAoT,MAAA,WAEA,OADApT,KAAAwkB,UAAAxkB,KAAAgd,KAAA5J,QAAApT,KAAAI,WAAA,GAAAgT,QACApT,MAEAwb,KAAA,WAEA,OADAxb,KAAAwkB,UAAAxkB,KAAAgd,KAAAxB,OAAAxb,KAAAI,WAAA,GAAAob,OACIxb,MAEJ2lB,YAAA,SAAAqB,GACAA,EAAA/rB,OAAA+rB,GAAA,GACA,IAEA/U,EAFG+K,EAAAhd,KAAAgd,KACHlc,EAAAkc,EAAA/c,IAAAa,KACAgG,EAAAue,eAAAvkB,EAAAiG,WACA,GAAAigB,GAHGhnB,KAGH+lB,WAAArhB,OAAA,GACE,IAAA+G,EAJCzL,KAID+lB,WAJC/lB,KAID+lB,WAAArhB,OAAA,GACF,GAAAjM,KAAAwuB,IAAAngB,EAAApC,OAAA0gB,mBAAA3Z,EAAA3E,MAAApC,QALG1E,KAKHjC,cACA,OANGiC,KASH,GAAAgd,EAAA1gB,aATG0D,KASHknB,kBAAA,CACA,IAAAvY,EAVG3O,KAUHoY,IAAAzJ,OACAsD,EAAAtD,EAAA+C,gBAAA,IACA5K,KAAAue,eAAAvkB,EAAAiG,WACA4H,EAAAqD,eAAAC,QAEAA,GACAnL,QAKA,OArBG9G,KAmBHknB,mBAAA,EACAC,oBApBGnnB,KAoBH+lB,WAAA9T,GApBGjS,MAuBHonB,KAAA,WACE,OAAAC,YAAAhiB,KAAArF,UAAA+lB,WAAA/lB,KAAAsnB,aAEFC,KAAA,WACA,OAAAF,YAAAhiB,KAAArF,UAAAsnB,WAAAtnB,KAAA+lB,aAEAyB,WAAE,SAAA3e,GAGF,OAFA7I,KAAAzD,eAAAsM,IAAAlS,WAAAqJ,KAAAzD,eAAAsM,EACA7I,KAAA2lB,aAAA,GACA3lB,KAAAkK,SAAAqa,UAEAsB,SAAE,SAAA4B,GACFA,EAAAxsB,OAAAwsB,GAAA,GACA,IAAA1nB,EAAAC,KAAAgd,EAAAjd,EAAAid,KAAA/c,EAAA+c,EAAA/c,IACAF,EAAAzD,WACAyD,EAAAme,QAAAH,WAAA0J,MAEApuB,MAAA0G,EAAA7B,eAAA,WACA6B,EAAAme,QAAAuJ,EAAA,oBAAAznB,QAGA5I,IACA6I,EAAAa,KAAA+a,iBAAA4L,EAEGxnB,EAAA3D,WAAAmrB,EAAA,WAEHzK,EAAAhB,SAAA,GAAAJ,SAAA6L,GAEAC,WAAA,SAAArrB,GACA,IACA0I,EAAA1I,EAAA0I,KACAuJ,EAFAtO,KAEAke,QAAA7X,IAAAtB,GACAkD,EAAAqG,EAAArG,MAcA,OAbA5L,EAAG6L,EAAAD,EAAAC,EACH7L,EAAA8L,EAAAF,EAAAE,EAAAmG,EAAA1G,SACAvL,EAAAkc,EANAvY,KAMA3D,QAAA2B,OACA3B,EAAAK,WAAAzB,OAAAoB,EAAAK,WAPAsD,KAOAtD,YACAL,EAAA8iB,gBAAAxoB,WACA0F,EAAAmK,IAAA,kBATAxG,KASAjD,UACAV,EAAA0jB,QAVA/f,KAUA2jB,KAAA,WAVA3jB,KAWA+e,KAAAmB,aAAA7jB,KAEAA,EAAAmK,IAAA,WAbAxG,KAaAjD,UACAV,EAAAgiB,gBAAA,EAdAre,KAeA+e,KAAAC,MAAA3iB,IAfA2D,KAiBA+e,MAEAmG,SAAE,WAGF,OAFAllB,KAAA+e,KAAA7U,SACAlK,KAAA+e,KAAA,KACA/e,MAEA2nB,gBAAA,WAGA,OAFA3nB,KAAA8c,YAAA5S,SACAlK,KAAA8c,YAAA,KACA9c,MAEA4nB,aAAA,SAAAvrB,GACA,IAAA0D,EAAAC,KAAA3D,EAAA0I,KAyBA,GAxBE1I,EAAAkc,EAAAxY,EAAA1D,QAAA2B,OACF3B,EAAAK,WAAAzB,OAAAoB,EAAAK,WAAAqD,EAAArD,YACAL,EAAAklB,SAAAtmB,OAAAoB,EAAAklB,UACAxc,KAAAhF,EAAA4jB,KAAA,SACArI,MAAA,SAAA5K,GACA3Q,EAAAsmB,aACAjvB,KAAA2I,EAAAqY,KACGrY,EAAAqY,IAAAtF,YAIHzW,EAAAilB,MAAArmB,OAAAoB,EAAAilB,OACAvc,KAAAhF,EAAA4jB,KAAAtnB,EAAAglB,OAAA,cACA/F,MAAA,SAAA5K,GACA3Q,EAAAsmB,aACAjvB,KAAA2I,EAAAqY,KACArY,EAAAqY,IAAAtF,YAIA,QAAA/S,EAAAzC,kBACAjB,EAAAoc,QAAA1Y,EAAA2kB,WAEAroB,EAAAmK,IAAA,aAAAzG,EAAAhD,UACAgD,EAAAqmB,QAAA1hB,OAAA,GACA,IAAAmjB,EAAA9nB,EAAAqmB,QAAA,GACA0B,EAAA/nB,EAAAqmB,QAAArmB,EAAAqmB,QAAA1hB,OAAA,GACAmjB,EAAAnF,aAAAoF,EAAAvP,EAAA,GACAlc,EAAAkc,EAAAuP,EAAAvP,EAAA,EACAlc,EAAAmlB,UAAA,EAEA,IAAAuB,EAAAC,QAAA3mB,GAEA,OADA0D,EAAAqmB,QAAAxc,KAAAmZ,GACAA,GAEAsD,WAAA,WAKA,GAJArmB,KACAomB,QAAA1hB,OAAA,GADA1E,KAEAomB,QAAAJ,MAAA9b,SAFAlK,KAIAomB,QAAA1hB,OAAA,GACG,IAAAmjB,EALH7nB,KAKGomB,QAAA,GACH0B,EANA9nB,KAMAomB,QANApmB,KAMAomB,QAAA1hB,OAAA,GACAmjB,EAAAnF,aAAAoF,EAAAvP,EAAA,GAEA,OATAvY,MAWA+nB,YAAA,SAAAjhB,GACA,IACAic,EADA/iB,KACA4nB,cACAlgB,MAAA,IACGiQ,MAHH3X,KAGG2jB,KAAA,eACH7iB,KAAA,8GAEA5B,EAAAvG,EAAA,SAAAoqB,EAAAvkB,KAAAyB,EAAAtH,EAAAukB,UAAAhe,GAMA,OALAe,EAAA+a,OACA/a,EAAAgb,MAAAnU,GACA7G,EAAAkb,QACAxiB,EAAAsH,EAAAa,MAAAyG,IAAA,2BACArI,EAAA,GAAAkc,cAAAhI,QAXApT,OAkBAgoB,cAuDArvB,EAAEuR,OAAA,SAAAlB,GACFif,YAAAjf,EAAA,SAAArE,GACA3E,KAAAkK,SACA8d,WAAAE,OAAAvjB,EAAA,MAGAhM,EAAAouB,KAAA,SAAA/d,GACAif,YAAAjf,EAAA,WACAhJ,KAAA+mB,UAGApuB,EAAAmO,KAAA,SAAAkC,EAAAxJ,GACAyoB,YAAAjf,EAAA,WACAhJ,KAAA8G,KAAAtH,MAGA7G,EAAAme,WAAA,SAAA9N,EAAAxJ,GACAyoB,YAAKjf,EAAA,WACLhJ,KAAI8W,WAAAtX,MAGJ7G,EAAAmuB,WAAA,SAAA9d,EAAAxJ,GACAyoB,YAAAjf,EAAA,WACAhJ,KAAI8mB,WAAAtnB,MAKJpI,KAAAgB,GAAA,GACA4f,eAAElgB,SAAA,2BAEFa,EAAAwvB,YAAAzE,QACA/qB,EAAAyvB,OAAAC,QACA1vB,EAAA4rB,OAAA+D,QACA3vB,EAAA4vB,UAAAP,WACArvB,EAAA6vB,OAAGC,QACH9vB,EAAAgrB,KAAAE,MAGA4E,QAAA,gBAAA9vB,GACA,IAAAoH,EAAAC,KACA0oB,GACAtB,KAAK,IAAAG,KAAA,IAAA1R,KAAA,IAAAG,OAAA,IAAAE,UAAA,IAAAsB,MAAA,IAAAmR,UAAA,KA+DL,GA7DA5oB,EAAAua,aAAA,WACAva,EAAA1D,QAAAgf,aACAtb,EAAA1D,QAAAgf,YAAAhW,KAAAtF,KAGAA,EAAAgc,YAAA,WACA,WAAAhc,EAAA3C,SAAA,CAIA,IADE,IAAAyC,EAAAlH,EAAAoH,EAAAK,YAAAwoB,GAAA,EACF/oB,IAAAmL,UACA,WAAAnL,EAAAkF,KAAA,CACE6jB,GAAA,EACF,MAGA,GAAAA,EAAA,CACA/oB,EAAAyF,KAAA,kBAAAoL,GACA3Q,EAAAgnB,OACApuB,EAAAjC,QAAA4O,KAAA,oBACAvF,EAAMid,KAAAhB,SAAA9R,aAGN,IAAA2e,EAAAlwB,EAAA,iBAAAkH,GACAgpB,EAAAvN,MAAA,WACAvb,EAAA+G,KAAA/G,EAAA+lB,aACA/lB,EAAAqY,IAAAzF,cAEA5S,EAAA8e,aAAA,WACAhf,EAAA2F,SACAqjB,EAAArjB,eAIAzF,EAAAokB,aAAA,oBACApkB,EAAAid,KAAA1gB,YACAyD,EAAAme,QAAAH,YAAA,GACAhe,EAAAid,KAAAR,QAAA,GACAzc,EAAAme,QAAApL,OAAA,YAEA/S,EAAIme,QAAAH,YAAA,GACJhe,EAAAid,KAAAR,QAAA,GACAzc,EAAAme,QAAAN,SAAA,UACArmB,OACG+kB,WAAA,WACDvc,EAAAqY,IAAAzF,aACF,GAEA5S,EAAAqY,IAAAzF,aAGA5S,EAAAzD,WAAAyD,EAAAid,KAAA1gB,aAEAyD,EAAAgc,YAAA,WACIhc,EAAAzD,YACJyD,EAAAme,QAAAH,YAAA,GAAAjL,OAAA,YAGA/S,EAAAokB,aAAA,wBACApkB,EAAIynB,eAEJznB,EAAAvC,mBAAA,CACA,IAAAsrB,GAAA,EACA/oB,EAAAgc,YAAA,WAQA,GAPApjB,EAAAoH,EAAAid,KAAA/c,IAAAF,EAAAid,KAAAhB,UAAAW,MAAA,SAAAjM,GACA,IAAAA,EAAArP,OACAib,WAAA,WACAvc,EAAAynB,cACA,KAGAsB,EAAA,CACI,GAAA1xB,MAAA2I,EAAAzD,WACD,OAEHyD,EAAAqT,QAEA0V,IACAA,GAAA,KAIAzvB,MAAA,YAAAqG,MAAA,cAAAiF,EAAAI,GACA2jB,EAAA3jB,IACAhF,EAAAgc,YAAA,WACAvZ,MAAAxC,KAAAgd,KAAA/c,IAAAyoB,EAAA3jB,GAAA,WACAhF,EAAAokB,aAAApf,OAIEhF,EAAAokB,aAAApf,EAAA,WACFhF,EAAAgF,SAGAhF,EAAAokB,aAAA,yBACA,IAAA4E,EAAAhpB,EAAA4jB,KAAA,2BACAqF,GACAC,GAAA,GACAC,GAAA,GACAC,GAAA,GACAC,GAAA,GACAC,EAAA,IAEAC,EAAAvpB,EAAAqY,IAAA5Y,IAAA,eACAuf,EAAAhf,EAAA2nB,YACI3iB,KAAA,cACD2C,MAAA,MAAA3H,EAAA/C,SAAA,UAEH3D,MAAA0vB,EAAA,SAAAxpB,EAAAC,GACA,IAAAgI,EAAA,aAAAwhB,EAAAzpB,GAAA,MACA,MAAAA,EAAA2M,OAAA,KACA1E,GAAA,qBAEAuX,EAAAT,SACA3G,MAAA,gBAAAnQ,EAAA,uBAAAhI,EAAA,UACAoI,OAAAohB,EAAAzpB,GAAA,GACAqf,QAAA0K,IAAA/pB,GAAA+pB,IAAA9pB,EACI8b,MAAA,WACDvb,EAAA+S,SAAA3a,KAAA,kBAAAoH,EAAA,KAAA2lB,kBAKHnlB,EAAAokB,aAAA,sBACA,IAAAmF,EAAAvpB,EAAAqY,IAAA5Y,IAAA,YACAuf,EAAIhf,EAAA2nB,YACJ3iB,KAAA,WACA2C,MAAA,MAEErO,MAAA0G,EAAA4jB,KAAA,8BAAApkB,EAAAC,GACFuf,EAAAT,SACA3G,MAAA,6BAAsCpY,EAAA,wBAAAC,EAAA,UACtCof,QAAA0K,IAAA/pB,EAAApI,eAAAmyB,IAAA9pB,EAAArI,cACAmkB,MAAA,WACAvb,EAAA5H,KAAA,WAAAoH,GAAA2lB,kBAKAnlB,EAAAokB,aAAA,sBACA,IAAGmF,EAAAvpB,EAAAqY,IAAA5Y,IAAA,YACDuf,EAAAhf,EAAA2nB,YACF3iB,KAAA,WACA2C,MAAA,MAEArO,MAAA0G,EAAA3B,cAAA,SAAAuG,EAAAnF,GACAuf,EAAAT,SACA3G,MAAA,0BAAAnY,EAAA,wBAAAA,EAAA,UACGoI,OAAAzN,YAAAqF,GAAA,GACHof,QAAA0K,IAAA9pB,EACA8b,MAAA,WACAvb,EAAA5H,KAAA,WAAAqH,GAAA0lB,kBAKA7rB,MAAA,wBAAAqG,MAAA,cAAAiF,EAAAI,GACAhF,EAAAokB,aAAApf,EAAA,WACGhF,EAAA2nB,YACH3iB,OACAoa,cAAApf,EAAAqY,IAAA5Y,IAAAuF,IAAA,UACAma,OAAAnf,EAAA5B,WACAmd,MAAA,SAAAwE,GACG/f,EAAA5H,KAAA4M,EAAA+a,GAAAoF,kBAKH7rB,MAAA,iBAAAqG,MAAA,cAAAiF,EAAAI,GACAhF,EAAAokB,aAAApf,EAAA,WACAhF,EAAAqT,QACA,IACArT,EAAA5H,KAAA4M,EAAA,MACA,MAAA2L,GACA8P,MAAMzgB,EAAA4jB,KAAA5e,EAAA,eAINhF,EAAAokB,aAAA,mBACA,IAAIrd,EAAA,6CACD/P,SAAA,mIAGHgJ,EAAA6nB,cACA7iB,KAAA,QACA2C,MAAA,IACAiQ,MAAA5X,EAAA4jB,KAAA,SACA7iB,KAAAgG,MAGA/G,EAAAyoB,OAAAe,gBAAA,WACA,OAAAxpB,EAAAqY,IAAAjL,eAAA,MAEApN,EAAAyoB,OAAAgB,iBAAA,WACA,OAAAC,mBAAA1pB,EAAAid,KAAA5E,IAAAzJ,MAAA,SAAA9P,GACA,mBAAAjH,KAAAiH,EAAA,GAAAsF,cAGApE,EAAAyoB,OAAAkB,iBAAA,WACA,OAAAD,mBAAA1pB,EAAAid,KAAA5E,IAAAzJ,MAAA,SAAA9P,GACA,kBAAAA,EAAA,GAAAsF,aAGApE,EAAAyoB,OAAAmB,iBAAA,WACA,OAAAF,mBAAA1pB,EAAAid,KAAA5E,IAAAzJ,MAAA,SAAA9P,GACA,kBAAAA,EAAA,GAAAsF,WAAA,SAAAtF,EAAA,GAAAsF,aAGApE,EAAAyoB,OAAAoB,kBAAsB,WACtB,OAAAH,mBAAA1pB,EAAAid,KAAA5E,IAAAzJ,MAAA,SAAA9P,GACA,mBAAAA,EAAA,GAAAsF,aAGA9K,MAAA,gCAAAqG,MAAA,cAAAiF,EAAAI,GACA,IAAA8kB,EAAA9kB,EAAAmH,OAAA,GAAA4d,cAAA/kB,EAAAoH,OAAA,GACA9S,MAAA,cAAAqG,MAAA,cAAAmgB,EAAArgB,GACAO,EAAAskB,gBACA1M,MAAK5X,EAAA4jB,KAAAnkB,EAAAqqB,GACDvO,MAAA,WACJvb,EAAA+jB,WAAA/e,EAAA,WACAhF,EAAAyoB,OAAAzjB,GAAAvF,KACAO,EAAAmlB,cAGA6E,KAAAhqB,EAAAyoB,OAAA,cAAAqB,GACAniB,MAAA,IACAiX,UAAA,QAAAnf,EAAA,WAAAuF,EAAApO,cAGAoJ,EAAAskB,gBAAA1M,MAAA,QAEA5X,EAAAyoB,OAAAwB,iBAAA,WACA,OAAAjqB,EAAAqY,IAAAjL,eAAA,UAEApN,EAAAyoB,OAAAyB,eAAA,WACA,OAAAlqB,EAAAqY,IAAAjL,eAAA,OAEApN,EAAAyoB,OAAA0B,gBAAA,WACA,OAAAnqB,EAAAqY,IAAAjL,eAAA,OAEA9T,MAAK,iJACLqG,MAAA,cAAAiF,EAAAnF,GACA,IAAAuqB,EAAApwB,SAAA6F,GAAA,oBAAAO,EAAAyoB,OAAA0B,gBAAAnqB,EAAAyoB,OAAAwB,iBACAjqB,EAAAskB,gBACA1M,MAAA5X,EAAA4jB,KAAA,QAAAnkB,GACA8b,MAAA,WACAvb,EAAA+jB,WAAA,mBACA/jB,EAAAyoB,OAAA/pB,MAAAe,KACAO,EAAAmlB,cAGA6E,OACAriB,MAAA,IACAiX,UAAA,gBAAAnf,MAGAO,EAAAskB,gBAAA1M,MAAA,MACAte,MAAA,2MAEAqG,MAAA,cAAAiF,EAAAI,GACA2jB,EAAA3jB,IACAhF,EAAAgc,YAAA,WACAvZ,MAAAxC,KAAAgd,KAAA/c,IAAAyoB,EAAA3jB,GAAA,WACAhF,EAAAqY,IAAAzF,YACA5S,EAAAokB,aAAApf,OAIAhF,EAAAokB,aAAApf,EAAA,WACAhF,EAAAqT,QAAAjb,KAAA4M,EAAA,UAGAhF,EAAAgc,YAAA,WACA,IAAA3D,EAAAnG,EAAAzT,EAAAyB,EAAAF,EAAAid,KAAA/c,IACAuG,EAAA,uBAAA2jB,GAAA,EAmDAxxB,EAAAsH,EAAAa,MAAAwE,KAAA,iBAAAoL,GACA,OAAA3Q,EAAA1C,WAIA,IAAA8sB,EAAA,CAiBG,GAdHA,GAAA,EACAxxB,EAAA,OAAA6N,EAAAvG,GAAAiK,SACAkO,EAAArY,EAAAqY,IAAAzF,YACAV,EAAAmG,EAAAzJ,MAAA+C,iBACAlT,EAAA7F,EAAA,eAAA6N,EAAA,WAAAvG,GAAAsH,KACAmR,SAAA,WACAhR,MAAA,MACAE,OAAA,MACA6c,SAAA,SACAlc,KAAA,UACAC,IAAA7P,EAAAsZ,EAAAH,OAAA7J,MAAAE,EAAA,KACAiiB,cAAA,WAEAzxB,EAAAsH,EAAAa,MAAAiI,OAAAvK,GACGpH,IAAA,CACH,IAAAqY,EAAA2I,EAAAzJ,MAAAtI,KAAA,GACAoJ,EAAAyD,kBAAA1U,EAAA,IACAiR,EAAAqD,SACGrD,EAAA4a,YAAA,SACH3Z,EAAA/O,sBAEGyW,EAAAzJ,MAAAN,mBAAA7P,EAAA,IACH4Z,EAAAtF,SACAtU,EAAA,GAAAyd,UAAA,EACGzd,EAAA,GAAA4U,QAEHkJ,WAAA,YApFA,WACAlE,EAAAzJ,MAAAqD,eAAAC,GACAmG,EAAAtF,SACAtb,UACAmB,EAAA,OAAA6N,EAAAhI,GAAApF,KAAA,WACAT,EAAAqH,MAAAsJ,MAAA,UAAAY,QAAA,KAEAvR,EAAA,wBAAA6F,GAAA0L,QAAA,GACAvR,EAAA,sBAAA6F,GAAA0L,QAAA,GACAvR,EAAA,cAAA6F,GAAApF,KAAA,WACA,UAAAT,EAAAqH,MAAAuH,IAAA,gBACA5O,EAAAqH,MAAAkK,QAAA,KAGAvR,EAAA,OAAA6F,GAAA0L,UAEA,IAAApD,EAAAtI,EAAA,GAAAuI,UACAvI,EAAA0L,SACA,KAAApD,IAGAtP,UACIsP,IAAAF,QAAA,oBAEJ,IAAA7G,EAAA1C,YACAyJ,IAAAF,QAAA,oCACA,8CAAAhP,KAAAkP,GACAA,EAAAlD,aAAAkD,EAAA/G,EAAAvD,WAAAuD,EAAA1B,SAAA1F,EAAA0D,QAAAgC,WAEAyI,EAAAhE,YAAAgE,EAAA/G,EAAAvD,WAAAuD,EAAA1B,SAAA,MACIyI,EAAA/G,EAAAsa,cAAAvT,KAGJ,IAAA/G,EAAA1C,YAMIyJ,GADJA,GADAA,GADAA,GADAA,GADAA,IAAAF,QAAA,iBACAA,QAAA,kBACAA,QAAA,qBACAA,QAAA,yBACAA,QAAA,gBACIA,QAAA,mBACD,KAAA7G,EAAA7C,WACD,KAAAtF,KAAAkP,KACFA,IAAAF,QAAA,WAAAA,QAAA,kBAAAA,QAAA,wBAGAE,IAAAF,QAAA,mBAGA7G,EAAA+W,WAAAhQ,GAAA,IAqCAwjB,GACIH,GAAA,GACJ,SAnCIzZ,EAAA1O,WAsCJjC,EAAAqa,cAAA,SAAAtT,GAYA,OAXA1P,KAAAgB,IAAA,IAIA0O,GAHGA,IAAAF,QAAA,4EAAA2jB,EAAAC,GACD,OAAAlwB,SAAAkwB,MAEF5jB,QAAA,sCAAA6jB,EAAAC,EAAAC,GACA,yBAAA/yB,KAAA6yB,GAGAA,EAFAC,EAAA,eAAAC,KAKA7jB,EAAAF,QAAA,sEAAA6jB,EAAAC,EAAAC,EAAAC,GACA,OAAIF,EAAAnwB,UAAAowB,GAAA/jB,QAAA,YAAAgkB,IAEJhkB,QAAA,0DAAA2jB,GACA,IAAAM,EAAA3nB,aAAAqnB,GACAO,EAAA9nB,YAAA6nB,EAAArjB,OAAA,IACAujB,EAAAznB,YAAAunB,EAAA,gBACAnjB,EAAAzM,OAAA6vB,EAAApjB,MAAA,IACAE,EAAA3M,OAAA6vB,EAAAljB,OAAA,IASA,MARG,MAAAhQ,KAAA8P,KACHA,EAAAvN,YAAAuN,IAEA,MAAA9P,KAAAgQ,KACAA,EAAAzN,YAAAyN,IAEAmjB,EAAArjB,MAAAzM,OAAA4vB,EAAAnjB,SACGqjB,EAAAnjB,OAAA3M,OAAA4vB,EAAAjjB,UACHpE,YAAAunB,KAEGnkB,QAAA,gDAAA2jB,GACH,IAAAM,EAAA3nB,aAAAqnB,GACA,kBAAAjwB,SAAAuwB,EAAA,4BAEAjkB,QAAA,8EAAA2jB,EAAAzkB,EAAAklB,GACA,gBAAA1wB,SAAAwL,GAAA,IAAAxL,SAAA0wB,GAAA,eAEApkB,QAAA,gFAAA2jB,EAAAzkB,EAAAklB,GACA,kBAAA1wB,SAAAwL,GAAA,IAAAxL,SAAA0wB,GAAA,gBAEGpkB,QAAA,mDAAA2jB,EAAAzY,EAAA+G,EAAA9G,GAKH,OADAwY,GAHAA,IAAA3jB,QAAA,wCAAA6jB,EAAAC,EAAAC,GACA,OAAAD,EAAAnwB,UAAAse,GAAA8R,KAEA/jB,QAAA,gCAGAA,QAAA,qDAAA2jB,EAAAzY,EAAAC,GACA,OAAAD,EAAAC,MAGChS,EAAAsa,cAAA,SAAAvT,GAWD,kGANA,0BAFC5D,aAAAqnB,cAEDhgB,QACA,mDAAAnQ,OAAAmwB,GAAA,WAEAA,KAGAzjB,EAAAF,QAAA,2DAAA2jB,GACA,IAAAQ,EAAA7nB,aAAAqnB,GAIA,OAHAQ,EAAAlS,IAAA5d,OAAA8vB,EAAAlS,IAAA,IACAkS,EAAArjB,MAAAzM,OAAA8vB,EAAArjB,MAAA,GACAqjB,EAAAnjB,OAAA3M,OAAA8vB,EAAAnjB,OAAA,GACAlE,UAAA3D,EAAAnD,WAAA,mBAAAmuB,KAEAnkB,QAAA,mDAAA2jB,GACA,IAAAQ,EAAA7nB,aAAAqnB,GACA,OAAAQ,EAAAE,OAAAt0B,UACA4zB,EAEA,+BAAAxqB,EAAAnD,WAAA,oCAAAxC,OAAA2wB,EAAAhmB,MAAA,SAEA6B,QAAA,iDAAA2jB,EAAAzkB,EAAAklB,GACA,qDAAA5wB,OAAA0L,GAAA,KAAA1L,OAAA4wB,GAAA,WAEApkB,QAAA,qDAAA2jB,EAAAzkB,EAAAklB,GACA,yDAAA5wB,OAAA0L,GAAA,KAAA1L,OAAA4wB,GAAA,WAEApkB,QAAA,kDAAA2jB,EAAAzY,EAAAvS,EAAAsZ,EAAA9G,GACA,OAAAwY,EAAAW,MAAA,0BACAX,EAEAA,EAAAzY,EAAAvS,EAAA,KAAAsZ,EAAA,kBAAAxe,QAAAwe,GAAA,IAAA9G,IAGAnL,QAAA,6CAAA2jB,EAAAzY,EAAAC,GACA,OAAAD,EAAA,WAAAC,IAEAnL,QAAA,4CAAA2jB,GACA,OAAAA,EAAAlzB,QAAA,oBACAkzB,EAEAY,eAAAZ,EAAA,uBA15LA,SAAAhxB,SAAAiG,GACA,QAAAA,GAGA,mBAAA4rB,OAAArf,UAAAyD,SAAAnK,KAAA7F,GAEA,SAAA/F,YAAA+F,GACA,QAAAA,GAGA,sBAAA4rB,OAAArf,UAAAyD,SAAAnK,KAAA7F,GAEA,SAAA7F,SAAA6F,EAAAsP,GACA,QAAAnK,EAAA,EAAAC,EAAAkK,EAAApK,OAAkCC,EAAAC,EAASD,IAC3C,GAAAnF,IAAAsP,EAAAnK,GACA,OAAAA,EAGA,SAEA,SAAAtL,MAAAgyB,EAAAjmB,GACA,GAAA7L,SAAA8xB,GACA,QAAA1mB,EAAA,EAAAC,EAAAymB,EAAA3mB,OAAmCC,EAAAC,IACnC,IAAAQ,EAAAC,KAAAgmB,EAAA1mB,KAAA0mB,EAAA1mB,IAD4CA,UAM5C,QAAApF,KAAA8rB,EACA,GAAAA,EAAAC,eAAA/rB,KACA,IAAA6F,EAAAC,KAAAgmB,EAAA9rB,KAAA8rB,EAAA9rB,IACA,MAMA,SAAAxF,MAAAwmB,GACA,OAAAA,EAAA3Z,QAAA,uCAEA,SAAA/M,UAAA2F,EAAA+gB,EAAAgL,GAEA,QADAA,MAAA50B,UAAA,IAAA40B,GACAhL,EAAAgL,GAAAl0B,QAAAk0B,EAAA/rB,EAAA+rB,IAAA,EAEA,SAAAtxB,SAAAuF,EAAAgsB,GAEA,OADAA,KAAA,KACAhsB,GAAA,oBAAA5H,KAAA4H,KAAAgsB,EAAAhsB,EAEA,SAAArF,YAAAqF,GACA,IAAA0rB,EACA,OAAA1rB,IAAA0rB,EAAA,QAAA/yB,KAAAqH,IAAA2c,SAAA+O,EAAA,SAEA,SAAA7wB,QAAAmF,GACA,OAAAA,EAAAoH,QAAA,cAAgCA,QAAA,aAAsBA,QAAA,aAAsBA,QAAA,eAE5E,SAAArM,UAAAiF,GACA,OAAAA,EAAAoH,QAAA,QAAyB,KAAAA,QAAA,QAAsB,KAAAA,QAAA,UAAwB,KAAAA,QAAA,SAAuB,KAE9F,SAAAnM,SAAA8lB,GACA,IAAAzR,EAAAyR,EAAA7gB,MAAA,KAKA,OAJA6gB,EAAA,GACAlnB,MAAAyV,EAAA,SAAAvP,EAAAC,GACA+gB,GAAAhhB,EAAA,EAAAC,EAAA0M,OAAA,GAAA4d,cAAAtqB,EAAA2M,OAAA,GAAA3M,IAEA+gB,EAEA,SAAA5lB,OAAA6E,GACA,SAAAisB,EAAA7qB,GACA,IAAAyV,EAAA8F,SAAAvb,EAAA,IAAA4O,SAAA,IAAAsa,cACA,OAAAzT,EAAA3R,OAAA,EAAA2R,EAAA,IAAAA,EAEA,OAAA7W,EAAAoH,QAAA,kDACA,SAAA6jB,EAAAC,EAAAC,EAAAC,GACA,UAAAa,EAAAf,GAAAe,EAAAd,GAAAc,EAAAb,KAIA,SAAA/vB,OAAA2E,EAAA+rB,GACAA,MAAA50B,UAAA,IAAA40B,EACA,IAAaL,EAAbnX,KAUA,OATA1a,MADaE,SAAAiG,OAAAE,MAAA6rB,GACb,SAAAhsB,EAAAC,GACA,GAAA0rB,EAAA,mBAAA/yB,KAAAqH,GACA,QAAAmF,EAAAwX,SAAA+O,EAAA,OAAuCvmB,GAAAwX,SAAA+O,EAAA,OAA6BvmB,IACpEoP,EAAApP,EAAA6K,aAAA,OAGAuE,EAAAvU,IAAA,IAGAuU,EAEA,SAAAhZ,SAAAswB,EAAAxd,GACA,OAAA6d,MAAA3f,UAAA4f,MAAAtmB,KAAAgmB,EAAAxd,GAAA,GAEA,SAAA5S,OAAAuE,EAAAosB,GACA,OAAApsB,IAAA7I,UAAAi1B,EAAApsB,EAEA,SAAArE,YAAAuc,GACA,OAAAA,GAAA,QAAA9f,KAAA8f,GAEA,SAAArc,UAAAqc,EAAAmU,GACA,OAAAnU,EAAArgB,QAAA,QAAAqgB,EAAA,IAAAmU,EAAAnU,EAAA,IAAAmU,EAEA,SAAAtwB,QAAAuO,EAAAkB,EAAA8gB,GAKA,IAAAC,EACA,GALAD,IACAA,EAAA9gB,EACAA,EAAA,MAGAA,EAAA,CACA,IAAA5F,EAAA,aACAA,EAAA2G,UAAAf,EAAAe,UACAggB,EAAA,IAAA3mB,EACA/L,MAAAyyB,EAAA,SAAAvsB,EAAAC,GACAusB,EAAAxsB,GAAAC,SAGAusB,EAAAD,EAEAC,EAAAlnB,YAAAiF,EACAA,EAAAiC,UAAAggB,EACAjiB,EAAAkB,WAAAe,UAAA,KAIA,SAAAtQ,MAAAwL,MACA,IAAAikB,OACAA,MAAA,0BAAA/yB,KAAA8O,SACAA,KAAAikB,MAAA,IAEA,IAAAc,GAAA,2GAOA,GANAA,GAAAC,UAAA,EACAD,GAAAp0B,KAAAqP,QACAA,UAAAL,QAAAolB,GAAA,SAAArtB,GACG,oBAAAA,EAAAutB,WAAA,GAAA1c,SAAA,KAAAmc,OAAA,MAGH,gBACA/zB,KAAAqP,KAAAL,QAAA,2CACAA,QAAA,wEACAA,QAAA,4BACA,OAAAulB,KAAA,IAAAllB,KAAA,KAEA,wBA4CA,SAAA7K,eAEA,IADA,IAA2Cyc,EAA3CuT,EAAAt0B,SAAAmiB,qBAAkC,UAClCtV,EAAA,EAAAC,EAAAwnB,EAAA1nB,OAAAC,EAAAC,EAAAD,IAEA,GADAkU,EAAAuT,EAAAznB,GAAAkU,KAAA,GACA,0BAAAjhB,KAAAihB,GACA,OAAAA,EAAAwT,UAAA,EAAAxT,EAAAyT,YAAA,QAGA,SAwGA,SAAAC,WAAA1sB,EAAAoF,EAAAG,GACAvF,EAAA2sB,iBACA3sB,EAAA2sB,iBAAAvnB,EAAAG,EAAAqnB,aACA5sB,EAAAwC,aACAxC,EAAAwC,YAAA,KAAA4C,EAAAG,GAIA,SAAAsnB,aAAA7sB,EAAAoF,EAAAG,GACAvF,EAAA8sB,oBACA9sB,EAAA8sB,oBAAA1nB,EAAAG,EAAAqnB,aACA5sB,EAAA+sB,qCASA,SAAAjtB,OAAAE,EAAAC,GACAE,KAAAJ,KAAAC,EAAAC,GAiFA,SAAA+sB,OAAAhtB,GACA,OAAAA,EAAAoC,gBAAA,KAEA,SAAE6qB,OAAAjtB,GAEF,OADAA,EAAAoC,iBAAAC,SACAA,SAEA,SAAA6qB,UAAAltB,GACA,WACAA,EAAAoC,eACA,MAAAyO,GACA7Q,EAAAic,iBACAjc,EAAAic,gBAAA7Z,gBAIA,SAAAsD,MAAA1F,EAAAoF,EAAAG,GACA,GAAAH,EAAA5N,QAAA,QACAgC,MAAA4L,EAAAvF,MAAA,gBACA6F,MAAA1F,EAAAG,KAAAoF,SAFA,CAMA,IAAAiH,EAAAwgB,OAAAhtB,GACAwM,IACAA,EAAAygB,OAAAjtB,IAEAsC,WAAAkK,KAAA1V,YACAwL,WAAAkK,OAEA,IAAA/J,EAAAH,WAAAkK,GAAApH,GACA3C,KAAAoC,OAAA,EACAgoB,aAAA7sB,EAAAoF,EAAA3C,EAAA,KAEAH,WAAAkK,GAAApH,MACA9C,WAAAkK,GAAAxM,MAGI,KADJyC,EAAAH,WAAAkK,GAAApH,IACIP,SACJpC,EAAA,YAAAoO,GACA,IAAAsc,EAAAtc,EAAA,IAAA/Q,OAAAE,EAAA6Q,GAAA/Z,UACA0C,MAAAiJ,EAAA,SAAAqC,EAAA7E,GACA6E,EAAA,GAAA7E,GACAA,EAAAuF,KAAAxF,EAAAmtB,OAKArzB,SAAAyL,EAAA9C,GAAA,GACAA,EAAAsH,KAAAxE,GAEAmnB,WAAA1sB,EAAAoF,EAAA3C,EAAA,KAEA,SAAAmD,QAAA5F,EAAAoF,EAAAG,GACA,GAAAH,KAAA5N,QAAA,QACAgC,MAAA4L,EAAAvF,MAAA,gBACA+F,QAAA5F,EAAAG,KAAAoF,SAFA,CAMA,IAAAiH,EAAAwgB,OAAAhtB,GACA,GAAAwM,EAGA,GAAApH,IAAAtO,WAYA,GAAAwL,WAAAkK,GAAA,CAGA,IAAA/J,EAAAH,WAAAkK,GAAApH,GACA,GAAA3C,KAAAoC,OAAA,GACAU,IAAAzO,WACA+1B,aAAI7sB,EAAAoF,EAAA3C,EAAA,WACJH,WAAAkK,GAAApH,KAEA5L,MAAAiJ,EAAA,SAAAqC,EAAA7E,GACA6E,EAAA,GAAA7E,IAAAsF,GACA9C,EAAA4lB,OAAAvjB,EAAA,KAGA,GAAArC,EAAAoC,SACGgoB,aAAA7sB,EAAAoF,EAAA3C,EAAA,WACHH,WAAAkK,GAAApH,KAGA,IAAAyhB,EAAA,EACArtB,MAAA8I,WAAAkK,GAAA,WACAqa,MAEAA,EAAA,WACAvkB,WAAAkK,GACA0gB,UAAAltB,WApCAwM,KAAAlK,aACA9I,MAAA8I,WAAAkK,GAAA,SAAA9M,EAAA+C,GACA,MAAA/C,GAAA+C,EAAAoC,OAAA,GACAgoB,aAAA7sB,EAAAN,EAAA+C,EAAA,aAGAH,WAAAkK,GACA0gB,UAAAltB,KAiCA,SAAA8F,MAAA9F,EAAAoF,GACA,GAAAA,EAAA5N,QAAA,QACAgC,MAAA4L,EAAAvF,MAAA,gBACAiG,MAAA9F,EAAAG,YAFA,CAMA,IAAAqM,EAAAwgB,OAAAhtB,GACA,GAAAwM,EAAA,CAGA,IAAA/J,EAAYH,WAAGkK,GAAApH,GACf9C,WAAAkK,IAAA/J,KAAAoC,OAAA,GACApC,EAAA,OAGA,SAAAE,MAAA3C,EAAAN,EAAA6F,GAEA7F,EAAA,WAAA3H,KAAA2H,OAAAuqB,cAAAoC,WAAA,GACA3mB,MAAA1F,EAAA,mBAAA6Q,IACAA,EAAAjP,SAAAiP,EAAArP,OAAA9B,GAAAmR,EAAAuc,UAAAvc,EAAAkM,SACAxX,EAAAC,KAAAxF,GACA6Q,EAAA1O,UAKA,SAAAU,OAAA0C,GACA,GAAAhD,eACAgD,EAAAxO,gBADA,CAIA,IAAAkyB,GAAA,EAwBA,GAAGhxB,SAAA00B,iBACHjnB,MAAAzN,SAAA,mBAAAo1B,QACA,GAAAp1B,SAAAuK,YAAA,CACAkD,MAAAzN,SAAA,mBARA,WACA,aAAAA,SAAAq1B,YACAD,MAOA,IAAAE,GAAA,EACA,IACAA,EAAA,MAAA12B,OAAA22B,aACA,MAAA3c,IACA5Y,SAAA+I,gBAAAysB,UAAAF,GAxBA,SAAAG,IACA,IAAAzE,EAAA,CACA,IACAhxB,SAAA+I,gBAAAysB,SAAA,QACA,MAAA5c,GAEA,YADA4L,WAAAiR,EAAA,KAGAL,KAiBAK,GAGAhoB,MAAA7O,OAAA,OAAAw2B,GAnCA,SAAAA,IACApE,IACAA,GAAA,EACA1jB,EAAAxO,YACAwL,gBAAI,IA6CJ,SAAAY,YAAAuE,GAIA,IAHA,IAEA2jB,EAFAhgB,KACAsiB,EAAA,gCAEAtC,EAAAsC,EAAAr1B,KAAAoP,IAAA,CACA,IAAAhI,EAAAxF,MAAcmxB,EAAA,GAAA/zB,eACdqI,EAAAzF,MAAAY,OAAAuwB,EAAA,KACAhgB,EAAA3L,GAAAC,EAEA,OAAA0L,EAEA,SAAAhI,aAAAsnB,GAIA,IAHA,IAEAU,EAFAhgB,KACAsiB,EAAA,qHAEAtC,EAAAsC,EAAAr1B,KAAAqyB,IAAA,CACA,IAAAjrB,GAAA2rB,EAAA,IAAAA,EAAA,IAAAA,EAAA,IAAAA,EAAA,IAAA/zB,cACAqI,GAAA0rB,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,QACAhgB,EAAA3L,GAAAC,EAEA,OAAI0L,EAEJ,SAAAigB,eAAAX,EAAArmB,GAYA,OAVEqmB,EADC,eAAA5yB,KAAA4yB,GACDA,EAAA5jB,QAAA,gDAAA6jB,EAAAC,EAAAC,EAAAC,GACF,WAAAD,EAAA,KAAAtzB,QAAA,IAAA8M,EAAA,OACA,KAAAwmB,EAAAD,EAAAvmB,EAAAymB,EAAAF,EAAAC,EAAA,IAAAxmB,EAAAymB,EAEAH,IAIAD,EAAAre,OAAA,EAAAqe,EAAA9lB,OAA6B,cAAAP,EAAA,KAI7B,SAAAspB,WAAAlmB,GACA,IAAAgZ,EAAA,GAIA,OAHAlnB,MAAA2J,YAAAuE,GAAA,SAAAhI,EAAAC,GACA+gB,GAAAhhB,EAAA,IAAAC,EAAA,MAEA+gB,EAEA,SAAA3d,WAAA8U,EAAAiP,EAAAjM,EAAAgT,GAKA,GAJA/G,EAAA1rB,OAAA0rB,EAAA,IAAAxvB,cACA,SAAAugB,EAAAvL,OAAA,OACAuL,IAAA9Q,QAAA,sBAEAjN,SAAAgtB,GAAA,mCACA,OAAAjP,EAGA,GADAgD,KAAAF,SAAAC,SAAA,KAAAD,SAAAE,KACAgT,IAAA/2B,UAAA,CACA,IAAAg3B,EAAAnT,SAAAkT,SAAAxC,MAAA,aACEwC,EAAAC,IAAA,MAEF,IAAAzC,EACA,GAAAA,EAAA,oBAAA/yB,KAAAuf,IACA,GAAAwT,EAAA,KAAAxQ,EACA,OAAAhD,OAEA,WAAA9f,KAAA8f,GACA,OAAAA,EAEA,SAAAkW,EAAAC,GAEA,IADA,IAAIC,EAAAD,EAAAnuB,MAAA,KAAAquB,KACJppB,EAAA,EAAAC,EAAAkpB,EAAAppB,OAAAC,EAAAC,EAAAD,IAAA,CACA,IAAAqpB,EAAAF,EAAAnpB,GACA,MAAAqpB,EACAD,EAAArpB,OAAA,GACAqpB,EAAA/H,MAEA,KAAAgI,GAAA,KAAAA,GACED,EAAAnkB,KAAAokB,GAGF,UAAAD,EAAApN,KAAA,KAkCA,MAhCA,MAAA/oB,KAAA8f,GACAA,EAAAgD,EAAAkT,EAAkBlW,EAAWvL,OAAA,IAC7B,YAAAvU,KAAA8f,KACAA,EAAAgD,EAAAkT,EAAAF,EAAA,IAAAhW,IAsBA,aAAAiP,EACAjP,EArBA,SAAAuW,EAAAJ,EAAAK,GACA,GAAAxW,EAAAvL,OAAA,EAAA0hB,EAAAnpB,UAAAmpB,EAAA,CAEA,IADA,IAAA/e,KACAnK,EAAA,EAAAA,EAAAupB,EAAAvpB,IACAmK,EAAAlF,KAAA,MAEA,IAAAukB,EAAA,IAOA,OANGrf,EAAApK,OAAA,IACHypB,GAAA,IAAArf,EAAA6R,KAAA,MAEA,KAAA+M,IACAS,GAAA,KAEAA,EAAAzW,EAAAvL,OAAA0hB,EAAAnpB,QAEE,GAAAwmB,EAAA,UAAA/yB,KAAA01B,GACF,OAAAI,EAAA/C,EAAA,KAAAgD,GAKAD,CAAAvT,EAAAgT,EAAA,GAAAvhB,OAAA,GACA,aAAAwa,GACAjP,EAAAvL,OAAA,EAAAuO,EAAAhW,UAAAgW,IACAhD,IAAAvL,OAAAuO,EAAAhW,SAGAgT,EAEA,SAAA5U,YAAAgE,EAAAzI,EAAApB,EAAAmxB,EAAA1wB,GACA,MAAAoJ,IACAA,EAAA,IAEA7J,KAAA,GACAmxB,EAAAnzB,OAAAmzB,GAAA,GACA1wB,EAAAzC,OAAAyC,EAAA,MACA,IAAA2wB,EAAA,uDAAuC3uB,MAAA,KAWvCoH,GADAA,GADAA,GADAA,GADAA,GADAA,GADAA,GADAA,GAHAA,IAAAF,QAAA,8CAAsC,SAAA6jB,EAAAC,EAAAC,EAAAC,GACtC,OAAAF,EAAAC,EAAA/jB,QAAA,uBAAuC,MAAAgkB,KAEvChkB,QAAA,8CACAA,QAAA,gDACEA,QAAA,eACFA,QAAA,qBACAA,QAAA,oBACAA,QAAA,qBACAA,QAAA,qBACAA,QAAA,mBAAoC6jB,GACpC,OAAAA,EAAA7jB,QAAA,cAEA,IAAG0nB,KACHjwB,IACAhF,MAAAgF,EAAA,SAAAkB,EAAAC,GAEA,IADA,IAAAsP,EAAAvP,EAAAG,MAAA,KACAiF,EAAA,EAAAC,EAAAkK,EAAApK,OAAAC,EAAAC,EAAAD,IACA2pB,EAAAxf,EAAAnK,IAAA9J,OAAA2E,KAGA8uB,EAAAC,SACAznB,IAAAF,QAAA,4DAEA0nB,EAAA9mB,QACAV,IAAAF,QAAA,0DAGA,IACA4nB,KAyIA,OAAAz0B,MADA+M,GADAA,GAHAA,GAnIAA,IAAAF,QAFA,2IAEA,SAAA6jB,EAAAC,EAAAC,EAAAC,EAAA6D,EAAAC,EAAAC,GACA,IAAApE,EAAAE,EACAmE,EAAAlE,GAAA,GACAmE,EAAAlE,GAAA,GACAtV,EAAAuV,EAAAzzB,cACA2O,EAAA2oB,GAAA,GACAK,EAAAJ,EAAA,IAAAA,EAAA,GACAK,EAAAJ,GAAA,GACA,GAAAtwB,IAAAiwB,EAAAjZ,GACA,SAuBA,GArBA,KAAAyZ,GAAAlzB,gBAAAyZ,KACAyZ,EAAA,MAEApzB,gBAAA2Z,KACAuZ,IACAA,EAAA,KAEIG,IACJA,EAAA,MAGAhzB,aAAAsZ,KACAwZ,EACAE,EAAA,KAEAH,EAAA,MAGKR,GAAA,MAAA/Y,IACL0Z,EAAA,MAEApzB,eAAA0Z,KAAAtZ,aAAAsZ,GACA,GAAA+Y,EAAA,CACAS,GAAAL,EAAA9pB,OAAA,GAAA8pB,IAAA9pB,OAAA,KAA6E2Q,EAC7EmZ,EAAAxI,MAEAwI,EAAA5kB,KAAAyL,GAEAuZ,EAAA,KACAG,EAAA,KACA,QAAApqB,EAAA,EAAAC,EAAAiqB,EAAAL,EAAA9pB,OAAA8pB,EAAA9pB,OAAA,EAAAC,EAAAC,EAAAD,IACKiqB,GAAAlxB,EACLmxB,IACAE,GAAArxB,GAGAoxB,EACAN,EAAAxI,MACA6I,IACAE,GAAArxB,QAGAkxB,EAAAG,EAAA,GAGA,QAAAjpB,EAAA,CACA,IAAAkpB,EAAA9rB,aAAAqnB,GACA,YAAAlV,EAAA,CACA,IAAA4Z,KAAAC,EAAA,GACA71B,MAAA21B,EAAA,SAAAzvB,EAAAC,GACA,UAAAD,IACA0vB,EAAAnP,MAAAtgB,SACAwvB,EAAAzvB,IAEA,SAAAA,IACA0vB,EAAA,aAAAZ,EAAAlS,SAAA3c,EAAA,kBACAwvB,EAAAzvB,IAEK,SAAAA,IACL0vB,EAAA,eAAwBzvB,SACxBwvB,EAAoBzvB,IAEpB,UAAAA,IACA2vB,EAAA1vB,KAGA0vB,IAAA,KAAAt3B,KAAAs3B,KACAA,GAAA,KAEA71B,MAAA41B,EAAA,SAAA1vB,EAAsCC,GACjC,KAAAA,IAGL,KAAA5H,KAAA4H,KACAA,EAAA,IAAAA,EAAA,KAEA0vB,GAAA3vB,EAAA,IAAAC,EAAA,OAEAwvB,EAAAxnB,MAAA0nB,EAEA71B,MAAA21B,EAAA,SAAAzvB,EAAAC,GAYA,GAXAtD,eAAAqD,KACAyvB,EAAAzvB,MAEA5F,SAAA4F,GAAA,oBACAyvB,EAAAzvB,GAAAqD,WAAApD,EAAAvC,KAEAoB,GAAA,UAAAkB,IAAA+uB,EAAAjZ,GAAA,OAAAiZ,EAAAjZ,GAAA9V,IACA,SAAA8V,GAAA,oBAAA9V,GACA,mBAAA3H,KAAA2H,YACAyvB,EAAAzvB,GAEA,UAAAA,GAAA,KAAAC,EAAA,CACA,IAAA2vB,EAAAnsB,YAAAxD,GACAnG,MAAA81B,EAAA,SAAAnpB,EAA+BC,IACzB5H,GAAAiwB,EAAAjZ,GAAA7N,OAAA8mB,EAAAjZ,GAAA,IAAArP,WACNmpB,EAAAnpB,KAGA,IAAAwB,EAAA,GACAnO,MAAA81B,EAAA,SAAAnpB,EAAAC,GACAuB,GAAAxB,EAAA,IAAAC,EAAA,MAEA+oB,EAAAxnB,WAGA1B,EAAI,GACJzM,MAAA21B,EAAA,SAAAzvB,EAAAC,GACA,UAAAD,GAAA,KAAAC,IAGAA,IAAAoH,QAAA,eACEd,GAAA,IAAAvG,EAAA,KAAAC,EAAA,OAMF,MAHE,SAAA6V,IACFA,EAAA,QAEAuZ,EAAA,IAAAC,EAAAxZ,EAAAvP,EAAAgpB,EAAA,IAAAC,KAEAnoB,QAAA,uDAAA6jB,EAAAC,EAAAC,EAAAC,GACA,OAAAF,EAAAC,EAAA/jB,QAAA,kDAAAgkB,KAEAhkB,QAAA,kBACAA,QAAA,mDAIA,SAAAhD,aAAAkD,EAAAzI,GAWA,OAAAyE,YAVAgE,IAAAF,QAAA,uBACGA,QAAA,oBACHA,QAAA,sCACAA,QAAA,wCACAA,QAAA,qCACAA,QAAA,qCACAA,QAAA,6BACAA,QAAA,iCAAA2jB,GACA,OAAAA,EAAA3jB,QAAA,4CAEAvI,GAGA,SAAA+E,WAAAyV,GACA,2BAAAjhB,KAAAihB,GACA,8BAEA,qBAAAjhB,KAAAihB,GACA,gCAEA,wBAGA,SAAAuW,YAAAnqB,GACA,mBAAArN,KAAAqN,GACA,QAEA,SAAArN,KAAAqN,GACA,WAEA,WAEA,SAAA3B,YAAA+rB,GACA,OAAAnsB,aAAA5I,SAAA+0B,IAEA,SAAA7rB,YAAAunB,GACA,IAAAjkB,EAAA,UAKA,OAJAzN,MAAA0xB,EAAA,SAAAxrB,EAAAC,GACAsH,GAAAvH,EAAA,KAAAC,EAAA,OAEAsH,GAAA,KAGA,SAAApD,UAAA4rB,EAAAvE,GACA,IAAArjB,EAAAqjB,EAAArjB,MACAE,EAAAmjB,EAAAnjB,OACE3C,EAAA8lB,EAAA9lB,MAAA7B,WAAA2nB,EAAAlS,KACFwW,EAAA7rB,YAAAunB,GACAvjB,EAAA,GACA,KAAA5P,KAAA8P,GACAF,GAAA,SAAAE,EAAA,IACAA,EAAA,IACAF,GAAA,SAAAE,EAAA,OAEA,KAAA9P,KAAAgQ,GACAJ,GAAA,UAAAI,EAAA,UAEAJ,GAAA,UAAAI,EAAA,OAEA,IAAAd,EAAA,eAA6BsoB,YAAAnqB,GAAA,UAA4BqqB,EAAA,KAKzD,MAJa,KAAb9nB,IACAV,GAAA,UAAAU,EAAA,MAEAV,GAAA,gBAAA1M,OAAAi1B,GAAA,cAOA,SAAAvrB,MAAAyc,EAAAvY,GACA,IAAA5C,EAAA,IAAAmqB,SAAA,MACA,2EAEAhP,EAAA3Z,QAAA,iBACAlH,MAAA,MAAAihB,KAAA,MACA/Z,QAAA,2BACAA,QAAA,wBACAlH,MAAA,MAAAihB,KAAA,OACAjhB,MAAA,MAAAihB,KAAA,8EAgBA,SAAA5V,UAAAgE,EAAAC,GACA,MAAAD,EAAA1O,UAAA,GAAA2O,EAAA3O,SACA,SAEA,KAAA2O,IAAA1O,YACA,GAAA0O,GAAAD,EACA,SAGA,SAKA,SAAGlJ,SAAAhG,EAAAN,GACHA,IAAApI,cACA,IAAAqI,EAAA,KACA,GAAA0E,oBAAA,UAAArE,EAAAwQ,SAAAlZ,cAQA,IACAqI,EAAAK,EAAAme,aAAAze,EAAA,GACA,MAAAmR,GACAlR,EAAAK,EAAAme,aAAAze,EAAA,OAXA,CACA,IAAAf,EAAAqB,EAAAK,cAAA8D,cAAA,OACAxF,EAAAyK,YAAApJ,EAAAiJ,WAAA,IACA,IAAAoC,EAAAhI,aAAA3I,UAAAiE,EAAAuI,YACAxH,KAAA2L,IACA1L,EAAA0L,EAAA3L,IAYA,MAHA,UAAAA,GAAA,OAAAC,IACAA,EAAIiuB,WAAAjuB,IAEJA,EAEA,SAAA+E,UAAAyE,EAAAiD,GACA,IAAAujB,EAAAxmB,EAAAtJ,MAAA,KACA,GAAA8vB,EAAA9qB,OAAA,GACA,IAAA+qB,KAQA,OAPAp2B,MAAAm2B,EAAA,WACAn2B,MAAAkL,UAAAvE,KAAAiM,GAAA,WACAtS,SAAAqG,KAAAyvB,GAAA,GACAA,EAAA7lB,KAAA5J,UAIAyvB,EAGA,SAAAr1B,EAAAmmB,GACA,uBAAAA,EACAA,EAEAA,EAAA3Z,QAAA,qBAEA,SAAA8oB,EAAAnP,GACA,OAAAA,EAAA3Z,QAAA,UAEA,SAAA+oB,EAAAC,EAAAC,GACA,YAAAD,KAAAz4B,gBAAAiD,EAAAy1B,EAAA14B,eAEA,SAAA24B,EAAAzjB,EAAAme,EAAAve,GACA,IAAA6C,KAEAjP,GADAoM,EAAA/L,eAAA+L,GACAmL,eAAAsY,EAAArjB,IAMA,OALAxM,GACA8vB,EAAAnF,EAAA3qB,EAAAwQ,WAAAtF,UAAAkB,EAAApM,IACAiP,EAAAlF,KAAA/J,GAGAiP,EAEA,SAAAihB,EAAA5rB,EAAAqmB,EAAAve,GACA,IAAAmgB,EAAAznB,EAAAC,EAAA/E,EAAAI,EAAAgM,EAAA/L,eAAA+L,EAAA6C,KACA,GAAA7C,EAAA+jB,uBAEA,IAAArrB,EAAA,EAAAC,GADAwnB,EAAAngB,EAAA+jB,uBAAAN,EAAAvrB,KACAO,OAAAC,EAAAC,EAAAD,IAEAgrB,EAAAnF,GADG3qB,EAAAusB,EAAAznB,IACH0L,WACAvB,EAAAlF,KAAA/J,QAGA,GAAAI,EAAAgwB,iBAEA,IAAAtrB,EAAA,EAAAC,GADAwnB,EAAAnsB,EAAAgwB,kBAAA,cAAAhkB,EAAAoE,SAAApE,EAAAoE,SAAA,QAAAma,EAAA,IAAArmB,IACAO,OAAAC,EAAAC,EAAAD,IAEAoG,UAAAkB,EADApM,EAAAusB,EAAAznB,KAEAmK,EAAAlF,KAAA/J,QAMA,IADAsE,EAAA,IAAAA,EAAA,IACAQ,EAAA,EAAAC,GAFAwnB,EAAAngB,EAAAgO,qBAAAuQ,IAEA9lB,OAAAC,EAAAC,EAAAD,IAEA,OADA9E,EAAAusB,EAAAznB,IACAtE,SAAA,CACA,IAAAmG,EAAA3G,EAAAsE,UACAqC,IAAA,IAAAA,EAAA,KAAAnP,QAAA8M,IAAA,GACA2K,EAAAlF,KAAA/J,GAKA,OAAAiP,EAeA,SAAAohB,EAAA3wB,EAAAC,EAAAgrB,EAAAve,GAEA,IADA,IAAApM,EAAAiP,KAAAsd,EAAAngB,EAAAgO,qBAAAuQ,GACA7lB,EAAA,EAAAC,EAAAwnB,EAAA1nB,OAAAC,EAAAC,EAAAD,IAEA,IADA9E,EAAAusB,EAAAznB,IACAtE,WACA,OAAAb,EACA,OAAAqG,SAAAhG,EAAAN,IACAuP,EAAAlF,KAAA/J,GAGAL,IAAApF,EAAAyL,SAAAhG,EAAAN,KACGuP,EAAAlF,KAAA/J,IAKH,OAAAiP,EAEA,SAAAgE,EAAA9J,EAAAiD,GACA,IAAIkkB,EAAArhB,KAEA0b,GADJ2F,EAAA,0BAAAh4B,KAAA6Q,IACImnB,EAAA,OACJ,GAAAA,EAAA,sBAAAh4B,KAAA6Q,GACA8F,EAAIghB,EAAAK,EAAA,GAAA3F,EAAAve,QACJ,GAAAkkB,EAAA,uBAAAh4B,KAAA6Q,GACA8F,EAAAihB,EAAAI,EAAA,GAAA3F,EAAAve,QACG,GAAAkkB,EAAA,wBAAAh4B,KAAA6Q,GACH8F,EAAAohB,EAAAC,EAAA,GAAAh5B,cAAA,KAAAqzB,EAAAve,QACA,GAAAkkB,EAAA,0DAA6Ch4B,KAAA6Q,GAAA,CAC7C,IAAAzJ,EAAA4wB,EAAA,GAAAh5B,cAAAqI,EAAA2wB,EAAA,GAEArhB,EADA,OAAAvP,EACAuwB,EAAAtwB,EAAAgrB,EAAAve,GACA,UAAA1M,EACAwwB,EAAAvwB,EAAAgrB,EAAAve,GACA,SAAA1M,EA/CA,SAAAwF,EAAAylB,EAAAve,GAGA,IAFA,IAC4CpM,EAD5CiP,KACAsd,GADAngB,EAAA/L,eAAA+L,GACAmkB,kBAAAV,EAA4C3qB,IAC5CJ,EAAA,EAAAC,EAAAwnB,EAAA1nB,OAAAC,EAAAC,EAAAD,IAEAgrB,EAAAnF,GADA3qB,EAAAusB,EAAAznB,IACA0L,WAAAtF,UAAAkB,EAAApM,IACA,OAAAA,EAAAme,aAAA,SACAlP,EAAAlF,KAAA/J,GAIA,OAAAiP,EAqCAuhB,CAAA7wB,EAAAgrB,EAAAve,GAEAikB,EAAA3wB,EAAAC,EAAAgrB,EAAAve,QAIA,IADA,IAAApM,EAAAusB,EAAAngB,EAAAgO,qBAAAuQ,GACA7lB,EAAA,EAAAC,EAAAwnB,EAAA1nB,OAAAC,EAAAC,EAAAD,IAEA,IADA9E,EAAAusB,EAAAznB,IACAtE,UACAyO,EAAAlF,KAAA/J,GAIA,OAAAiP,EAtHA7C,KAAAnU,SAyHA,IADA,IAAAgX,EAAAgf,KAAAwC,EAAA,2BACAxhB,EAAAwhB,EAAAn4B,KAAA6Q,IACA,MAAA8F,EAAA,IACAgf,EAAAlkB,KAAAkF,EAAA,IAGA,IAAAyhB,KACA,MAAAzC,EAAAppB,OACA,OAAAoO,EAAAgb,EAAA,GAAA7hB,GAEA,IAAA+hB,EAAA5B,EAAAoE,EAAAhxB,EAAAyG,EAAAtB,EAAAkb,EAAA7Z,EAAApB,EAAA6rB,EAAAC,GAAA,EACA,IAAA/rB,EAAA,EAAAgsB,MAAA7C,EAAAppB,OAAAC,EAAAgsB,MAAAhsB,IAEA,UADAqpB,EAAAF,EAAAnpB,IACA,CAIA,GAAAA,EAAA,GAEA,IADAynB,KACAvM,EAAA,EAAAjb,EAAA2rB,EAAA7rB,OAAAmb,EAAAjb,EAAAib,IAGA,IAAA7Z,EAAA,EAAAyqB,GADGD,EAAA1d,EAAAkb,EADHxuB,EAAA+wB,EAAA1Q,KAEAnb,OAAAsB,EAAAyqB,EAAAzqB,IACAC,EAAAuqB,EAAAxqB,GACA0qB,EACAlxB,IAAAyG,EAAA3F,YACA8rB,EAAAxiB,KAAA3D,GAGAmmB,EAAAxiB,KAAA3D,GAIAsqB,EAAAnE,OAEAmE,EAAAzd,EAAAkb,EAAA/hB,mBAGA,cAxBAykB,GAAA,EA2BA,OAAAH,EAEA,SAAAlsB,OAAA2E,EAAAiD,GACA,IAAA6C,EAAAvK,UAAAyE,EAAAiD,GACA,OAAA6C,EAAApK,OAAA,EAAAoK,EAAA,QAMA,SAAA5F,KAAA1J,GACA,OAAA7G,EAAA6G,GAAA,GAEA,SAAAsF,QAAAL,GACA,OAAAA,EAGAA,EAAAvE,eAAAuE,EAAA3M,UAAA2M,EAFA3M,SAIA,SAAAqN,QAAAV,GACA,IAAAA,EACA,OAAA/N,OAEA,IAAAuJ,EAAA6E,QAAAL,GACA,OAAAxE,EAAA2wB,cAAA3wB,EAAA4wB,YAEA,SAAG7pB,SAAAnH,EAAAiH,GACH,MAAAjH,EAAAQ,SAAA,CAGA,IAAAJ,EAAA6E,QAAAjF,GACA,IACAA,EAAAkH,UAAA,kFAAAD,EACA,IAAAqQ,EAAAlX,EAAAmX,eAAA,2BACAD,EAAA7W,WAAA2J,YAAAkN,GACA,MAAAzG,GACA/X,EAAAkH,GAAAgK,QACAlR,EAAA,IAAAmO,EAAA7G,GAAA7G,KAAA,WACAyG,EAAAoJ,YAAAjJ,UAIA,SAAAyG,UAAA5G,EAAA2G,GACA,OAAA3M,UAAA2M,EAAA3G,EAAAsE,UAAA,KAEA,SAAA+B,SAAArG,EAAAN,EAAAC,GACApI,KAAAgB,GAAA,YAAAmH,EAAApI,gBACAoI,EAAA,aAEAM,EAAAoE,aAAA1E,EAAA,GAAAC,GAEA,SAAA4G,YAAAvG,EAAAN,GACAnI,KAAAgB,GAAA,YAAAmH,EAAApI,gBACAoI,EAAA,aAEA2G,SAAArG,EAAAN,EAAA,IACAM,EAAEic,gBAAAvc,GAEF,SAAAyF,aAAAP,GACA,OAAAA,KAAA4L,SAGA5L,EAAA4L,SAAAlZ,cAFA,GAIA,SAAAsQ,aAAA5H,EAAAN,GACA,IAAA2F,EAAAC,QAAAtF,GAAAixB,EAAAr2B,SAAA8E,GAAAC,EAAA,GACA,GAAA0F,EAAA6rB,iBAAA,CACA,IAAAvpB,EAAAtC,EAAA6rB,iBAAAlxB,EAAA,MACAL,EAAAgI,EAAAspB,IAAAtpB,EAAAwpB,iBAAAzxB,IAAAM,EAAA2H,MAAAspB,QACAjxB,EAAAoxB,eACAzxB,EAAAK,EAAAoxB,aAAAH,IAAAjxB,EAAA2H,MAAAspB,IAEA,OAAAtxB,EAEA,SAAA6H,QAAA5C,GACA,QAAAysB,eAAAlsB,aAAAP,IAEA,SAAA+U,YAAAvZ,GAEA,OADAA,KAAAnI,SACAD,QAAAoI,EAAAa,KAAAb,EAAAY,gBAEA,SAAAswB,WAAAlxB,GACA,IAAEJ,EAAA2Z,YAAAvZ,GACF,OAAAxH,KAAA4pB,IAAAxiB,EAAA2iB,aAAA3iB,EAAAyZ,cAEA,SAAA8X,UAAAnxB,GACA,IAAAJ,EAAS2Z,YAAAvZ,GACT,OAAAxH,KAAA4pB,IAAAxiB,EAAAyiB,YAAAziB,EAAAwZ,aAEA,SAAA/Q,cAAArI,GAEA,IAAAiI,EAAAC,EAQA,OATAlI,KAAAnI,SAEAV,KAAAE,QAAAG,QACAyQ,EAAAsR,YAAAvZ,GAAAc,WACAoH,EAAAqR,YAAAvZ,GAAAkB,YAEA+G,EAAA/C,QAAAlF,GAAAoxB,QACAlpB,EAAAhD,QAAAlF,GAAAqxB,UAEAppB,IAAAC,KAIA,SAAA3D,MAAAC,GACAzE,KAAAJ,KAAA6E,GAggBA,SAAAqJ,iBAAAa,GAEA,OADAA,EAAAzB,UAAAyB,EAAA7B,iBAAA6B,EAAA3B,cAAA2B,EAAA5B,cAAA4B,EAAA1B,UACA0B,EAEA,SAAAgB,eAAAhB,EAAA4iB,EAAAC,GACA,IAAAvxB,EAAA0O,EAAA1O,IAAA6U,KACA,SAAA2c,EAAAhtB,EAAAsI,EAAAE,GACA,IAAAykB,EAAAhtB,EAAAD,EAAA0G,UAAAzG,OACA,GAAA6sB,EAAA,CACA,IAAAzoB,EAAArE,EAAAqE,WAAA,GAEA4oB,EADA3kB,EAAA,EACAjE,EAAAwH,UAAAvD,GAEAjE,EAEAmE,EAAAvI,GACAgtB,EAAAphB,UAAArD,EAAAF,GAGA,GAAAykB,EAAA,CACA,IAAAG,EAAAltB,EAKA,GAJAsI,EAAA,IACA4kB,EAAAltB,EAAA6L,UAAAvD,GACA4B,EAAAf,SAAAnJ,EAAAsI,IAEAE,EAAAvI,EAAA,CACA,IAAAyM,EAAAwgB,EAAArhB,UAAArD,EAAAF,GACA4B,EAAAZ,OAAAoD,EAAA,GAEA2D,EAAAlL,KAAA+nB,GAEA,OAAAD,EAaA,IAAAE,EAAAjjB,EAAAY,aAAAsB,OACAiB,GAAA,EAAA+f,GAAA,EAAAC,GAAA,EAAA/f,GAAA,EACA6B,EAAAjF,EAAAxB,iBAAAgH,EAAAlU,EAAA8W,yBACA,MAAAnD,EAAAvT,SAAA,CACA,IAAA0xB,EAAAN,EAAA7d,EAAAjF,EAAA5B,YAAA4B,EAAA1B,WAKA,OAJAskB,GACApd,EAAAlL,YAAA8oB,GAjBA,WACAP,GACA7iB,EAAAyC,KAAA7C,UAAA,GAEA,QAAA5J,EAAA,EAAAC,EAAAkQ,EAAApQ,OAAAC,EAAAC,EAAAD,IAAA,CACA,IAAAF,EAAAqQ,EAAAnQ,GACAF,EAAAnE,YACAmE,EAAAnE,WAAA2J,YAAAxF,IAYAutB,GACAT,EAAApd,EAAAxF,GAEA,SAAAsjB,EAAAjnB,EAAAmJ,GAEA,IADA,IAAA+d,EAAAztB,EAAAuG,EAAAjB,WACAtF,GAAA,CACA,IAyBA0tB,EAzBAC,EAAA,IAAAvlB,OAAA5M,GAAAmO,WAAA3J,GAWA,IAVAqN,EAAAsgB,EAAA3jB,sBAAAhC,cAAAkC,KACA,GAAAkjB,GAAA,IACAA,EAAAO,EAAA3jB,sBAAAjC,gBAAAmC,IAEAkjB,GAAA,GAAAC,GAAA,IACAA,EAAAM,EAAA3jB,sBAAA/B,YAAAiC,IAEAmjB,GAAA,GAAA/f,GAAA,IACAA,EAAAqgB,EAAA3jB,sBAAA9B,cAAAgC,IAEAoD,GAAA,EACA,SAGA,GADAmgB,EAAAztB,EAAA8E,YACAuI,EAAA,EACA,MAAArN,EAAApE,UACA,GAAAwxB,GAAA,GAAAC,GAAA,EACAP,GACApd,EAAAlL,YAAAxE,EAAAqE,WAAA,IAEA0oB,GACA1c,EAAAlL,KAAAnF,QAQA,GAJM8sB,IACNY,EAAA1tB,EAAAqE,WAAA,GACAqL,EAAAlL,YAAAkpB,KAEA,IAAAF,EAAAxtB,EAAA0tB,GACA,cAGA,MAAA1tB,EAAApE,SAAA,CACA,IAAA0xB,EAQA,GANAA,EADAttB,GAAAmtB,EAAA9kB,eACA2kB,EAAAhtB,EAAAmtB,EAAA7kB,YAAAtI,EAAA0G,UAAAzG,QACAD,GAAAmtB,EAAA5kB,aACAykB,EAAAhtB,EAAA,EAAAmtB,EAAA3kB,WAEAwkB,EAAAhtB,EAAA,EAAAA,EAAA0G,UAAAzG,QAEA6sB,EACA,IACApd,EAAAlL,YAAA8oB,GACA,MAAArhB,KAIAjM,EAAAytB,GAGAD,CAAAre,EAAAO,GACAqd,GACA7iB,EAAAyC,KAAA7C,UAAA,GAEA,QAAA5J,EAAA,EAAAC,EAAAkQ,EAAApQ,OAAAC,EAAAC,EAAAD,IAAA,CACA,IAAAF,EAAAqQ,EAAAnQ,GACAF,EAAAnE,YACAmE,EAAAnE,WAAA2J,YAAAxF,GAGA,OAAA8sB,EAAApd,EAAAxF,EAGA,SAAA0jB,mBAAA1jB,EAAA9O,GAEA,IADA,IAAA4E,EAAA5E,EACA4E,GAAA,CACA,IAAA6J,EAAA3V,EAAA8L,GACA,cAAA6J,EAAAvJ,MAAA,UAAAuJ,EAAAvJ,KACA,OAEAN,IAAAnE,WAEA,IACAqO,EAAAuE,kBAAArT,GACA,MAAA6Q,KAGA,SAAA4hB,aAAW7iB,EAAAyB,GACX,IAAAjR,EAAAwP,EAAA8iB,gBAAAryB,cACAsyB,EAAA/iB,EAAAgjB,YACAD,EAAAjkB,SAAA2C,GACA,IAAAlG,EAAAwnB,EAAAD,gBACA9oB,EAAAuB,EAAAoB,WACA,OAAA3C,EAAA/E,OACA,OAAAD,KAAAuG,EAAA1K,WAAAuN,OAAAlV,EAAAqS,GAAAM,SAEA,IAAAuG,EAAA5R,EAAAyyB,EAAA,EAAAtjB,GAAA,EACAgjB,EAAA3iB,EAAAgjB,YACAJ,mBAAAD,EAAApnB,GACA,QAAArG,EAAA,EAAAC,EAAA6E,EAAA/E,OAAAC,EAAAC,EAAAD,IAAA,CACA,IAAAF,EAAAgF,EAAA9E,GAEA,QADAyK,EAAIgjB,EAAA/iB,iBAAA,eAAAmjB,IAEJ,OAAA/tB,OAAAnE,WAAAuN,OAAAlJ,GAEA,MAAAF,EAAApE,SAAA,CACA,IAAA4S,EAAA0f,EAAAljB,EAAAgjB,YAAAnkB,EAAA3V,EAAA8L,GAAAiF,EAAAjF,EACG6J,EAAA1D,cACHqI,EAAAhT,EAAA+D,cAAA,QACAsK,EAAAhF,MAAA2J,GACAvJ,EAAAuJ,EACAyf,GAAApkB,EAAArH,OAAAL,QAAA,kBAAAlC,QAEA2tB,mBAAAM,EAAAjpB,GACA0oB,EAAArhB,YAAA,aAAA4hB,GACAvjB,EAAA,EACAsjB,GAAUC,EAAA1rB,KAAAL,QAAA,kBAAAlC,OAEVguB,EAAA,EAEAzf,GACAta,EAAAsa,GAAA/I,cAEA,GAAAzF,EAAApE,WACA+xB,EAAAQ,UAAA,YAAAnuB,EAAA0G,UAAAzG,QACAguB,GAAAjuB,EAAA0G,UAAAzG,QAEA0K,EAAA,IACAyC,EAAApN,GAGA,GAAA2K,EAAA,MAAAyC,EAAAxR,SACA,OAAAoE,KAAAuG,EAAA6C,OAAAlV,EAAAqS,EAAAc,WAAAR,QAAA,GAEA,GAAA8D,EAAS,EACT,KAAAyC,EAAAtI,aAAA,GAAAsI,EAAAxR,UACAwR,IAAAtI,YAOA,GAHA8oB,mBADAD,EAAA3iB,EAAAgjB,YACAznB,GACAonB,EAAArhB,YAAA,aAAAyhB,GACAE,GAAAN,EAAAnrB,KAAAL,QAAA,kBAAAlC,OACA0K,EAAA,MAAAyC,EAAAxR,SAEA,IADA,IAAAwyB,EAAAhhB,EAAArG,gBACAqnB,GAAA,GAAAA,EAAAxyB,UACAqyB,GAAAG,EAAA1nB,UAAAzG,OACAmuB,IAAArnB,gBAGA,OAAA/G,KAAAoN,EAAAhE,OAAA6kB,GAGA,SAAA1hB,aAAAvM,EAAAoJ,GACA,IAAA5N,EAAAwE,EAAAvE,eAAAuE,EACAkK,EAAA1O,EAAAa,KAAAgQ,kBACA,GAAA7Q,GAAAwE,EAEA,OADAkK,EAAAJ,UAAA,GACAI,EAEA,MAAAlK,EAAApE,UAAAoE,EAAA2H,WAAA1H,OAAA,GACA,IAAAwM,EAAApH,EAAAmB,EAAAxG,EAAA2H,WAQA,GAPA,IAAAyB,GACA/D,EAAAmB,EAAA,GACAiG,GAAA,IAEApH,EAAAmB,EAAA4C,EAAA,GACAqD,GAAA,IAEApH,EACA,OAAA6E,EAEA,YAAAhW,EAAAmR,GAAA/E,KAQA,OAPA,IAAA8I,IACAqD,GAAA,GAEA,IAAArD,IACAqD,GAAA,GAEAvC,EAAAJ,SAAA2C,GACAvC,EAEA,MAAA7E,EAAAzJ,SAAA,CACA,IAAA9B,EAAAu0B,EAAAn6B,EAAAmR,GAeA,OAdAgpB,EAAAloB,cACArM,EAAA0B,EAAA+D,cAAA,QACAkN,EACA4hB,EAAA1pB,OAAA7K,GAEAu0B,EAAAxpB,MAAA/K,GAEAuL,EAAAvL,GAEA8zB,mBAAA1jB,EAAA7E,GACA6E,EAAAJ,SAAA2C,GACA3S,GACA5F,EAAA4F,GAAA2L,SAEAyE,EAEAlK,EAAAqF,EACA+D,EAAAqD,EAAA,EAAApH,EAAAqB,UAAAzG,OAEA,IAAAuO,EAAAhT,EAAA+D,cAAA,QAKA,OAJArL,EAAA8L,GAAA2E,OAAA6J,GACAof,mBAAA1jB,EAAAsE,GACAtE,EAAAikB,UAAA,YAAA/kB,GACAlV,EAAAsa,GAAA/I,SACAyE,EAGA,SAAA2I,SAAA7H,GACA,IAAAxP,EAAA0O,EACA,SAAAokB,EAAAjhB,GACA,MAAAnZ,EAAAmZ,EAAArN,MAAAM,OACA+M,EAAArN,KAAAqN,EAAArN,KAAAuuB,MAAAlhB,EAAAjE,QACAiE,EAAAjE,OAAA,GAGA,GAAA7V,SAAA,CACA,GAAAyX,EAAAuH,KAIA,OAFArI,EAAA,IAAA9B,OADA5M,EAAA6E,QAAA2K,EAAAuH,KAAA,MAEA5I,WAAAqB,EAAAuH,KAAA,IACArI,EAEA1O,EAAAwP,EAAA8iB,gBAAAryB,cACA,IAAA4R,EAAAwgB,aAAA7iB,GAAA,GACAsC,EAAAugB,aAAA7iB,GAAA,GAMA,OALAsjB,EAAAjhB,GACAihB,EAAAhhB,IACApD,EAAA,IAAA9B,OAAA5M,IACA2N,SAAAkE,EAAArN,KAAAqN,EAAAjE,QACAc,EAAAZ,OAAAgE,EAAAtN,KAAAsN,EAAAlE,QACAc,EAEA,IAAA7B,EAAA2C,EAAA3C,eAKA,OAHA6B,EAAE,IAAA9B,OADF5M,EAAA6M,EAAA5M,eAAA4M,IAEAc,SAAAd,EAAA2C,EAAA1C,aACA4B,EAAAZ,OAAA0B,EAAAzC,aAAAyC,EAAAxC,WACA0B,EAIA,SAAA9B,OAAA5M,GACAD,KAAAJ,KAAAK,GAmZA,SAAAkS,OAAAyR,GACA,OAAAA,EAAAvT,SAGE,IAAAxD,OAAA+W,GAFFA,EAAA/e,cAAAgI,OAAA+W,EAAAtM,SAAAsM,GAaA,SAAA5L,eAAA/X,EAAAV,EAAAC,GACA,IACAS,EAAAoqB,YAAA9qB,GAAA,EAAAC,GACA,MAAAkR,KAGA,SAAA+E,oBAAAxV,EAAAV,GACA,IAAEC,EAAA,GACF,IACAA,EAAAS,EAAAgzB,kBAAA1zB,GACA,MAAAmR,IAIA,MAHA,iBAAAlR,IACAA,EAAA,IAEAA,EAGA,SAAAkT,QAAAzS,GACA,IAAAiF,EAAAC,QAAAlF,GACA,OAAAjI,SAAAiI,EAAA0S,UAAAzN,EAAAjN,eAGA,SAAA4a,QAAA5S,GACA,IAAAwP,EAAAgD,EAAAC,QAAAzS,GACA,IAEAwP,EADAgD,EAAAygB,WAAA,EACAzgB,EAAA0gB,WAAA,GAEA1gB,EAAAhC,cAEA,MAAAC,IACA,OAAA1Y,UAAAyX,MAAAuH,MAAAvH,EAAA8iB,gBAAAryB,gBAAAD,GAGAwP,EAFA,KAKA,SAAA2jB,cAAArf,GACA,IAAAjF,EAAA7I,EAAAotB,KAQA,OAPAh6B,MAAA0a,EAAA,SAAAxU,EAAAC,GAEA,QAAAmF,EAAA,EAAAC,GADAkK,EAAAvP,EAAAG,MAAA,MACAgF,OAAAC,EAAAC,EAAAD,IACAsB,EAAA6I,EAAAnK,GACA0uB,EAAAptB,GAAAzG,IAGA6zB,EAGA,SAAAnf,cAAA5F,EAAAyF,GACA,OAAAuf,mBAAAhlB,EAAAyF,EAAA,MAAAuf,mBAAAhlB,EAAAyF,GAEA,SAAAuf,mBAAAhlB,EAAAyF,EAAAwf,GAEA,GADAA,KAAAjlB,EAAAvJ,KACA,IAAAuJ,EAAArJ,KACA,SAEA,IAAAouB,EAAAD,cAAArf,GACA,IAAAsf,EAAAE,GACA,SAGA,IADA,IAAAzkB,EAAAukB,EAAAE,GAAA7zB,MAAA,KACAiF,EAAA,EAAAC,EAAAkK,EAAApK,OAAAC,EAAAC,EAAAD,IAAA,CACA,IAAApF,EAAAuP,EAAAnK,GACA,SAAApF,EACA,SAEA,IAAA2rB,EAAA,8BAAA/yB,KAAAoH,GACA8d,EAAA6N,EAAA,gBACA3rB,EAAA2rB,EAAA,GACA,IAAA1rB,EAAA0rB,EAAA,OACA,QAAA1rB,GAAA,KAAA8O,EAAA+O,GAAA9d,GACA,SAEA,QAAAC,GAAA8O,EAAA+O,GAAA9d,KAAAC,EACA,SAGA,SAGA,SAAA8U,iBAAAhG,EAAAyF,GACA,GAAAzF,EAAArJ,OAGAuuB,sBAAGllB,EAAAyF,EAAA,KACHyf,sBAAAllB,EAAAyF,IAEA,SAAAyf,sBAAAllB,EAAAyF,EAAAwf,GAEA,GADAA,KAAAjlB,EAAAvJ,KACA,IAAAuJ,EAAArJ,KAAA,CAGA,IAAAouB,EAAAD,cAAArf,GACA,GAAAsf,EAAAE,GAAA,CAIA,IADA,IAAAzkB,EAAAukB,EAAAE,GAAA7zB,MAAA,KAAA+zB,GAAA,EACA9uB,EAAA,EAAAC,EAAAkK,EAAApK,OAAAC,EAAAC,EAAAD,IAAA,CACA,IAAApF,EAAAuP,EAAAnK,GACA,SAAApF,EAAA,CACAk0B,GAAA,EACA,MAEA,IAAAvI,EAAA,8BAAA/yB,KAAAoH,GACAA,EAAA2rB,EAAA,GACAA,EAAA,IACA3rB,EAAA9E,SAAA8E,GACA+O,EAAA,GAAA9G,MAAAjI,KACA+O,EAAA,GAAA9G,MAAAjI,GAAA,KAGA+O,EAAAnI,WAAA5G,GAGAk0B,GACAnlB,EAAApE,QAAA,KAIA,SAAAwpB,cAAAplB,GAEA,IADA,IAAAqlB,EAAArlB,EACAqlB,EAAAvoB,SACAuoB,IAAAvoB,QAEA,OAAAuoB,EAGA,SAAAlf,aAAAnG,GACA,UAAAA,EAAArJ,OAAAqJ,EAAA9D,YAGA,KAAA8D,EAAAxH,OAAAF,QAAA,eAMA,SAAAgtB,cAAAj1B,EAAAoX,GAGA,IADA,IAAA8d,EAAAH,cADA/0B,IAAAiK,OAAA,IACAkrB,EAAAn1B,EAAAo1B,GAAA,EACAhe,GAAA,CACA,KAAA+d,GACAA,EAAA/uB,OAAAgR,EAAAhR,OACAivB,YAAAF,EAAA/d,EAAAjQ,OAAAiQ,EAAAxO,OACAwsB,GAAA,GAEAD,IAAA1oB,QAEA2oB,GACAF,EAAA9qB,OAAAgN,EAAAnN,OAAA,IAEAmrB,GAAA,EACAhe,IAAA3K,QAEA,OAAAzM,EAGA,SAAAmV,UAAAxF,EAAAoF,GAEA,GADAA,IAAA9K,OAAA,GACA,GAAA0F,EAAArJ,KAGA,OAFAyuB,cAAAhgB,GAAA3K,OAAAuF,EAAA1F,OAAA,IACA0F,EAAA9E,YAAAkK,GACAA,EAGA,IADA,IAAA5J,EAAAmqB,EAAA3lB,GACAxE,EAAAwE,EAAAlD,UAAA,GAAAtB,EAAAmB,WAAAvG,QACA4J,EAAAxE,EAEAA,EAAAwE,EAAAlD,QAEA,IADA,IAAA+I,EAAA7F,EAAArO,IAAA8W,yBACAjN,GACAqK,EAAAlL,YAAAa,EAAA,IACAA,IAAAE,OAOA,OALA0J,EAAAkgB,cAAAK,EAAAvgB,GACAS,EAAApK,YACA2pB,cAAAhgB,GAAA3K,OAAAoL,GAEA8f,EAAAzqB,YAAAkK,GACAA,EAGA,SAAAsgB,YAAA1lB,EAAAyc,EAAAD,GACAzxB,MAAA0xB,EAAA,SAAAxrB,EAAAC,GACA,UAAAD,GACA+O,EAAAxI,KAAAvG,EAAAC,KAGAnG,MAAAyxB,EAAA,SAAAvrB,EAAAC,GACA8O,EAAA/G,IAAAhI,EAAAC,KAIA,SAAAqU,cAAAvF,GACA,KAAAA,GAAA,QAAAA,EAAAvJ,MAAA,CACA,GAAAhJ,aAAAuS,EAAAvJ,OAAA,OAAAuJ,EAAAvJ,MAAAuJ,EAAA/H,SAAA,aACA,SAEA+H,IAAAtD,SAEA,SAGA,SAAAwH,KAAA7D,GACA3O,KAAAJ,KAAA+O,GA4lBA,SAAA0J,KAAAuL,GACA,GAAAA,EAAAvT,SAAA,CACA,IAAApQ,EAAA6E,QAAA8e,GACAA,EAAAzR,OAAAlS,GAAAoO,mBAAApO,EAAAa,MAAAyN,UAAA,GAEA,WAAAiE,KAAAoR,GAMA,SAAAhK,MAAAvd,GACA,IAAAqd,EAAArd,EAAAqd,OACAC,EAAAtd,EAAAsd,OACAkI,EAAAxlB,EAAAwlB,SAAAnI,EACAoI,EAAAzlB,EAAAylB,WACAoS,EAAA73B,EAAA63B,YAAAv9B,WAAA0F,EAAA63B,UACAC,GAAAr8B,UACAo8B,GACAv7B,EAAA,UAAAS,KAAA,WACA,IAAAyf,EAAAjW,WAAA5C,KAAA6Y,KAAA,eACA,mBAAAjhB,KAAAihB,GAAA,CAGA,IAAA5Y,EACA,IACAA,EAAA8a,WAAA/a,MACA,MAAA0Q,IACA,GAAAzQ,EAAA,CACA,IAAAgI,EAAAtP,EAAAqH,MAAAiI,MACAtP,EAAAsH,GAAA+H,KAAA,QAAAC,EAAAC,GACAvP,EAAAsH,GAAA+H,KAAA,QAAAC,EAAAE,GACAgsB,EAAAvqB,KAAA3J,OAIA4hB,EAAApG,UAAA,SAAA/K,GACA,OAAAA,EAAAhP,QAAA,IAAAgP,EAAAhP,OAAA,CAGEgP,EAAA5O,kBACF,IAAA/B,EAAA8hB,EAAAxb,mCAEA8B,EAAAhO,YAAAuf,EAAAnS,IAAA,QACAG,EAAAgS,EAAAhS,QACAE,EAAA8R,EAAA9R,SACAlH,EAAAgQ,EAAAhQ,MACAO,EAAAyP,EAAAzP,MACA6gB,GACAA,IAqBAnpB,EAAAw7B,GAAAC,UAAAC,GACAxX,QAVA,SAAAyX,EAAA5jB,GACAA,EAAA/O,iBACAhJ,EAAAw7B,GAAA3uB,OAAA,YAAA6uB,GACA7uB,OAAA,UAAA8uB,GACA9uB,OAAA,cAAA+uB,GACAx0B,EAAAy0B,gBACAz0B,EAAAy0B,mBAKIlvB,KAAA,cAAAivB,GACJx0B,EAAA00B,YACA10B,EAAA00B,aAvBA,SAAAJ,EAAA3jB,GACAA,EAAA/O,iBACA,IAAA+yB,EAAA/7B,EAAAmM,QAAA4L,EAAAvQ,SACA6Y,EAAAxgB,QAAAk8B,EAAA1sB,KAAA,aAAA0I,EAAAhQ,SACAuY,EAAAzgB,QAAAk8B,EAAA1sB,KAAA,aAAA0I,EAAAzP,SACA0Y,EAAAtU,KAAAwc,EAAA3Z,EAAAC,EAAAT,EAAAE,EAAAoR,EAAAC,GAEA,SAAAsb,EAAA7jB,GACAA,EAAA/O,oBAqBA,SAAA2W,QAAAjc,GACA2D,KAAAJ,KAAAvD,GA8IA,SAAA0d,QAAc1d,GACd,WAAAic,QAAAjc,GAMA,SAAI0e,WAAA7b,GAEJ,OADAA,EAAAgK,KAAAhK,IACAy1B,iBAA0Bz1B,EAAAkc,cAAAtjB,SAM1B,SAAIojB,aAAAte,EAAAa,EAAAE,EAAAC,GACJ,IAAAkR,GACA,KAAAkL,WAAA,SAA2B,cAAAA,WAAA,KAC3B,gDACA,UACA,6BACA,+BACA,kEACA,wCACA,oBACA,oCACA,kBACA,2BACA,mDACA,iBACA,2BACA,0BAAIpd,EAAA,qBACJ,uCACA,iCACA,iBACA,kBACA,IACA,cACA,2BACA,0BAAAA,EAAA,kBACA,uCACE,iCACF,iBACA,kBACA,IACA,iBACA,2BACA,0BAAAA,EAAA,qBACA,uCACA,iCACA,iBACA,kBACA,IACA,kBACA,4BACA,gBACA,iBACA,IACA,iEAEA,iBACA,aACA,cACA,IACA,kBACA,4BACA,iBACA,gBACA,IACA,YAcA,OAZArD,SAAAoE,KACAA,OAEAtE,MAAAsE,EAAA,SAAAgH,EAAAkpB,GACAA,GACA/e,EAAAlF,KAAA,eAAAikB,EAAA,2BAGAjwB,GACAkR,EAAAlF,KAAA,UAAsBhM,EAAA,YAEtBkR,EAAAlF,KAAA,iBAAAnM,EAAA,UAAAA,EAAA,2BACAqR,EAAA6R,KAAA,MAEA,SAAAhF,YAAArN,EAAA9O,GACA,GAAA8O,EAAAlH,SAAA,CACA,GAAA5H,IAAA7I,UAAA,CACA,IAAAmQ,EAAAwH,EAAA9O,MAEA,OADAsH,IAAAF,QAAA,oCAGA,OAAA0H,EAAA9O,OAEA,OAAA8O,EAAAxH,KAAAtH,GAIA,SAAA2a,MAAA9d,GACA2D,KAAAJ,KAAAvD,GAiPA,SAAA4gB,MAAA5gB,GACA,WAAA8d,MAAA9d,GAOA,SAAAshB,eAAA5Y,EAAAK,GACA,IACAkJ,EADAtO,KACAqG,IAAAtB,GACA,GAAAuJ,EAAA,CACA,GAAAA,EAAA/H,SAAA,eACA,OAEAnB,EAAAkJ,IAKA,SAAG6O,SAAA9gB,GACH2D,KAAAJ,KAAAvD,GAgHA,SAAA8hB,SAAA9hB,GACA,WAAA8gB,SAAA9gB,GAOA,SAAA+hB,MAAA/hB,GACA2D,KAAGJ,KAAAvD,GA2EH,SAAA2iB,MAAA3iB,GACA,WAAA+hB,MAAA/hB,GAOA,SAAA4iB,aAAA5iB,GACA2D,KAAAJ,KAAAvD,GAqEA,SAAA6jB,aAAA7jB,GACA,WAAA4iB,aAAA5iB,GAMA,SAAA8jB,cAAA9jB,GACA2D,KAAEJ,KAAAvD,GAqFF,SAAA6kB,cAAA7kB,GACA,WAAA8jB,cAAA9jB,GAMA,SAAA6lB,cAAA0S,GAEA,IAAA7vB,GADA6vB,SACA7vB,MAAA,GACAxG,EAAA5F,EAAA,yDAAAoM,EAAA,aACAkd,EAAAtpB,EAAA,kEAAAoM,EAAA,QAKA,OAJA6vB,EAAAtZ,OACA2G,EAAG3G,MAAAsZ,EAAAtZ,OAEH/c,EAAAwK,OAAAkZ,GACA1jB,EAIA,SAAA4iB,QAAA9kB,GACA2D,KAAAJ,KAAAvD,GAsHA,SAAA2mB,QAAA3mB,GACA,OAAK,IAAA8kB,QAAA9kB,GAML,SAAA6mB,MAAA7mB,GACA,IAAA0D,EAAAga,QAAA1d,GACA6N,EAAAnK,EAAAmK,OACA2qB,EAAAx4B,EAAAw4B,YACAr2B,EAAAuB,EAAAvB,IACAs2B,KACAt2B,EAAAkI,SAAA,WACApB,KAAA,2CAAAoL,GACAA,EAAA/O,mBAEA,IAAAozB,EAAAp8B,EAAA,4CAyCA,OAxCA6F,EAAAuK,OAAAgsB,wEAGAC,EAAAhtB,KAAA,MAAAitB,GACAH,EAAAlrB,KAAAorB,GACAD,EAAAhsB,OAAAisB,IAEAj1B,EAAAm1B,cAAA,EACAn1B,EAAA+S,OAAA,SAAAxH,GACAvL,EAAAm1B,cAAA5pB,EACAjS,MAAAy7B,EAAA,SAAAnwB,EAAAqwB,GACAA,EAAAxvB,SACAb,IAAA2G,GACA0pB,EAAAtuB,SAAA,uBACA/N,EAAAq8B,EAAAhtB,KAAA,OAAAmtB,OAAA/qB,KAAA,MAEA4qB,EAAAruB,YAAA,uBAAAA,YAAA,iBACA8W,UAAA,WACA9kB,EAAAqH,MAAA0G,SAAA,mBAEAgX,SAAA,WACA/kB,EAAAqH,MAAA2G,YAAA,mBAEA2U,MAAA,WACAvb,EAAA+S,OAAAnO,KAEAhM,EAAAq8B,EAAAhtB,KAAA,OAAAmtB,OAAA7qB,UAGAuqB,GACAA,EAAAxvB,KAAAtF,EAAAuL,IAGAvL,EAAAmK,OAAA,WACA7Q,MAAAy7B,EAAA,WACA90B,KAAAkK,WAEA6qB,EAAA7qB,SACAA,EAAA7E,KAAAtF,IAEAA,EAKA,SAAAqjB,YAAA1L,EAAAtS,GACA,IAAAgwB,EAAAt9B,SAAAmiB,qBAAA,aAAApiB,QAAAC,SAAAgJ,KAAAhJ,SAAA+I,iBACA0tB,EAAAz2B,SAAAkM,cAAA,UACAoxB,EAAAnsB,YAAAslB,GACAA,EAAA1V,IAAAnB,EACA6W,EAAA8G,QAAA,QACA9G,EAAA+G,OAAA/G,EAAAgH,mBAAA,WACAv1B,KAAAmtB,YAAA,WAAAntB,KAAAmtB,aACA/nB,GACAA,IAEAmpB,EAAA+G,OAAA/G,EAAAgH,mBAAA,KACAH,EAAAnrB,YAAAskB,KAMA,SAAEiH,WAAA9d,GACF,IAAApM,EAAAoM,EAAArgB,QAAA,KACA,OAAAiU,EAAA,EAAAoM,EAAAvL,OAAA,EAAAb,GAAAoM,EAEA,SAAA4L,WAAA5L,GAKA,IAJA,IAAA0d,EAAAt9B,SAAAmiB,qBAAA,aAAApiB,QAAAC,SAAAgJ,KAAAhJ,SAAA+I,iBACA40B,EAAA39B,SAAAkM,cAAA,+EAGAW,EAAA,EAAAC,EAAA8wB,EAAAhxB,OAAAC,EAAAC,EAAAD,IACA,GAAA6wB,WAAA5yB,WAAA8yB,EAAA/wB,GAAAsmB,KAAA,eAAA0K,EACA,OAGAP,EAAAnsB,YAAAwsB,GACAA,EAAAxK,KAAAvT,EACA+d,EAAAG,IAAA,aAEA,SAAApS,MAAA9L,EAAAtS,EAAAiY,EAAAwO,EAAAgK,GACAxY,KAAA,MACAwY,KAAA,OACA,IAAAC,EAAAp/B,OAAAq/B,eAAA,IAAAr/B,OAAAq/B,eAAA,IAAAC,cAAA,qBAaA,GAZAF,EAAA9a,KAAAqC,EAAA3F,GAAA,GACAoe,EAAAP,mBAAA,WACA,MAAAO,EAAA3I,YAAA,KAAA2I,EAAAG,QACA7wB,EAAA,CACA,IAAA4C,EAASjO,MAAA+7B,EAAAI,cACT,QAAAL,IACA7tB,EAAAvM,MAAAuM,IAEA5C,EAAA4C,KAIA,QAAAqV,EAAA,CACA,IAAA8Y,KACA98B,MAAAwyB,EAAA,SAAAtsB,EAAAC,GACA22B,EAAAvsB,KAAAkR,mBAAAvb,GAAA,IAAAub,mBAAAtb,MAEA,IACAs2B,EAAAM,iBAAA,oDACA,MAAA1lB,IACAolB,EAAAO,KAAAF,EAAAxV,KAAA,WAEAmV,EAAAO,KAAA,MASA,SAAA5N,QAAA1jB,EAAAK,GACA,OAAAL,IAAApO,UACAqtB,SAEA5e,OAGA4e,SAAAjf,GAAAK,GAFA4e,SAAAjf,GAKA,SAAAuxB,cAAA/2B,GACA,IAAA2rB,EAAAqL,EAAA,OAKA,OAJArL,EAAA,iBAAA/yB,KAAAoH,MACAg3B,EAAArL,EAAA,GACA3rB,EAAA2rB,EAAA,KAEAqL,KAAAh3B,OAEA,SAAAskB,MAAAD,EAAA5mB,GAEA,GADAA,MAAArG,UAAAgC,EAAA0D,QAAAW,WACA,iBAAA4mB,EAAA,CACA,IAAAH,UAAAzmB,GACA,oBAEA,IAAAiL,EAAA2b,EAAAlf,OAAA,EACA,SAAAkf,EAAAzX,OAAAlE,GACA,OAAAwb,UAAAzmB,GAAA4mB,EAAAzX,OAAA,EAAAlE,IAEA,IAAAojB,EAAAiL,cAAA1S,GACA,OAAAH,UAAAzmB,GAAAquB,EAAAkL,IAAAlL,EAAA9rB,KAEAlG,MAAAuqB,EAAA,SAAArkB,EAAAC,GACA,IAAA6rB,EAAAiL,cAAA/2B,GACAkkB,UAAAzmB,KACAymB,UAAAzmB,OAEAymB,UAAAzmB,GAAAquB,EAAAkL,MACA9S,UAAAzmB,GAAAquB,EAAAkL,QAEA9S,UAAAzmB,GAAAquB,EAAAkL,IAAAlL,EAAA9rB,KAAAC,IAKA,SAAAiqB,mBAAA9a,EAAAvJ,GACA,IAAAuJ,EAAAzB,UAAA,CAIA,IAAA8C,GADArB,IAAAY,aAAA6B,MACAtE,eAAAmD,EAAAtB,EAAA5B,YACA,GAAAvV,SAAAmX,EAAA/D,YAAA,CAGA,IAAA/L,EAAAlG,EAAAqX,EAAA5D,WAAA6D,IACA,GAAApR,GAAA,OAAAA,EAAAkG,KAGA,OAAAK,EAAAvG,GACAA,OADA,IAIA,SAAA0mB,wBACA,IAAAxlB,EAAAC,KAAAC,EAAAF,EAAAid,KAAA/c,IACAtH,EAAAsH,GAAA6c,YAAY,SAAApM,GAIZ,GAHA3Q,EAAAgf,MACAhf,EAAKmlB,WAELnlB,EAAAxC,gBAIA,OAAAwC,EAAAukB,cAAA5f,OAAA,CAGA,IAAA8xB,EAAA,EAAAv4B,KAaA,IAZA5E,MAAA0G,EAAAukB,cAAA,WACA,KAAAtkB,KAAA2X,MAIA3X,KAAA+pB,MAAA/pB,KAAA+pB,SACA9rB,EAAA2L,KAAA5J,MACAA,KAAA0H,OAAA1H,KAAA0H,MAAA8uB,IACAA,EAAAx2B,KAAA0H,QANAzJ,EAAA2L,KAAA5J,QAUA/B,EAAAyG,OAAA,QAAAzG,EAAA,GAAA0Z,OACA1Z,EAAAw4B,QAEA,KAAAx4B,EAAAyG,OAAA,QAAAzG,IAAAyG,OAAA,GAAAiT,OACA1Z,EAAA+nB,MAEA,IAAA0Q,EAAA,KAOA,GANAr9B,MAAA4E,EAAA,SAAA0G,GACA,KAAA3E,KAAA2X,OAAA,KAAA+e,EAAA/e,cACA1Z,EAAA0G,GAEA+xB,EAAA12B,OAEA/B,EAAAyG,OAAA,GACAgM,EAAA/O,iBACA,IAAAsG,EAAAtP,EAAAoH,EAAAid,KAAA9d,QAAA+I,MACA8W,EAAAC,OACA9W,EAAAD,EAAAC,EAAAwI,EAAA/P,QACAwH,EAAAF,EAAAE,EAAAuI,EAAAxP,QACAwG,MAAA8uB,EACAjvB,KAAAovB,WAAA,UACAj6B,WAAAqD,EAAArD,aAEArD,MAAA4E,EAAA,WACA+B,KAAA2X,OACAoH,EAAAT,QAAAte,QAGA,IAAAuZ,EAAAC,YAAAuF,EAAA9e,KACA22B,EAAA7X,EAAAvgB,IAAAoJ,SACA8I,EAAAxP,QAAA01B,GAAArd,EAAAD,aAAA,KACAyF,EAAA9W,IAAA8W,EAAA7W,EAAA/N,YAAA4kB,EAAA5W,GAAAyuB,GAEA7X,EAAAvgB,IAAA+I,IAAA,wBACExH,EAAAgf,cArDFrO,EAAA/O,mBAyDA,SAAA6jB,oBACA,IAAAzlB,EAAAC,KAAAC,EAAAF,EAAAid,KAAA/c,IAAA/C,EAAA6C,EAAA7C,WACA,KAAA9F,KAAA,OAAA8F,GAGA3F,QAAAa,GAAA,SAAA8E,GAGAzF,QAAAW,GAAA,IAGA,IAAAy+B,EAAAh8B,OAAA,4BACAi8B,EAAAj8B,OAAA,yCAWAlC,EAAAsH,GAAAyb,QAAA,SAAAhL,GACA,SAAAA,EAAArP,OAAAqP,EAAAuc,UAAAvc,EAAAjP,SAAAiP,EAAAkM,QAAA,CAGA7c,EAAAqY,IAAAzF,YACA,IAAA0C,EAAA0hB,EAAAh3B,EAAAqY,IAAAzJ,OACA,cAAA0G,GAAA,UAAAA,EAGA,aAAAnY,GAAA25B,EAAAxhB,QAKAyhB,EAAAzhB,IACA2C,eAAA/X,EAAA,uBALAyQ,EAAA/O,sBACA5B,EAAA+W,WAAA,UAAA1f,KAAAgB,GAAA,eAOAO,EAAAsH,GAAA0c,MAAA,SAAAjM,GACA,SAAAA,EAAArP,OAAAqP,EAAAuc,UAAAvc,EAAAjP,SAAAiP,EAAAkM,SAGA,MAAA1f,EAGA,GAAA3F,OAAA,CACA,IAAA0U,EAAAlM,EAAAqY,IAAAjL,eAAA,KACAxO,EAAAoB,EAAAqY,IAAAjL,eAA+B,KAC/BxO,GAAA,IAAAA,EAAAsI,SACAtI,EAAAuL,QAAA,GACAnK,EAAAqY,IAAAzJ,MAAAN,mBAAsCpC,EAAA,IAAMsC,UAAA,GAC5CxO,EAAAqY,IAAAtF,cANA,CAUA/S,EAAAqY,IAAAzF,YACA,IAAA0C,EAAA0hB,EAAAh3B,EAAAqY,IAAAzJ,OACA,cAAA0G,GAAA,UAAAA,EAAA,CAGEyhB,EAAAzhB,IACF2C,eAAA/X,EAAA,qBAEA,IAAAzB,EAAAuB,EAAAqY,IAAAjL,eAAA,OACE,GAAA3O,EAAA,CAGF,IAFA,IAAA6qB,EAAA1wB,EAAA,WACAmR,EAAAtL,EAAA,GAAAuL,WACAD,GAAA,CACA,IAAAE,EAAAF,EAAAP,YACA8f,EAAAtgB,OAAAe,GACAA,EAAAE,EAEAxL,EAAA4K,OAAAigB,GACA7qB,EAAA0L,SACAnK,EAAAqY,IAAAzJ,MAAAN,mBAAAgb,EAAA,IACAtpB,EAAAqY,IAAAtF,cAjEA,SAAAikB,EAAApoB,GAEA,IADA,IAAAiF,EAAAjb,EAAAgW,EAAAxB,kBACAyG,IACA,GAAAA,EAAA3O,MAAA2O,EAAAjJ,YAGAiJ,IAAA5I,SAEA,OAAA4I,EAAA7O,MA6DA,SAAA0gB,gBACA,IAAA1lB,EAAAC,KAAAC,EAAAF,EAAAid,KAAA/c,IACAtH,EAAAsH,GAAAyb,QAAA,SAAAhL,kBAGA,GADAA,EAAA/O,iBACA5B,EAAAi3B,SAEA,YADAj3B,EAAAi3B,SAAA3xB,KAAAtF,EAAA2Q,GAGA,IAAA0H,EAAArY,EAAAqY,IAAAzJ,EAAAyJ,EAAAzJ,MACAA,EAAA8C,SACA9C,EAAAzB,WAAA,GAAAyB,EAAA7B,eAAAzM,WACAsO,EAAAmB,WAAAnX,EAAA,UAAAsH,GAAA,IACAmY,EAAAtF,UAEE/S,EAAA+W,WAAA,+BAIF,SAAA4O,kBACA,IAAA3lB,EAAAC,KACArH,EAAAoH,EAAAid,KAAAhB,SAAA,GAAAjc,EAAAid,KAAA9X,KAAAkO,MAAA,SAAA1C,GACA3Q,EAAAk3B,YACAl3B,EAAAk3B,WAAA5xB,KAAAtF,EAAA2Q,KAEA8K,KAAA,SAAA9K,GACA3Q,EAAAm3B,WACAn3B,EAAAm3B,UAAA7xB,KAAAtF,EAAA2Q,KAIA,SAAE0U,mBAAAte,GACF,OAAA/M,MAAA+M,EAAAF,QAAA,yEAEA,SAAAye,eAAAve,GACA,OAAAA,EAAAF,QAAA,qEAEA,SAAAugB,oBAAAgQ,EAAAllB,GACA,OAAAklB,EAAAzyB,OAAA,CAIA,IAAA+G,EAAA0rB,IAAAzyB,OAAA,GACA0gB,mBAAAnT,EAAAnL,QAAAse,mBAAA3Z,EAAA3E,OACAqwB,EAAAvtB,KAAAqI,QALAklB,EAAAvtB,KAAAqI,GAWA,SAAAoV,YAAA+P,EAAAC,GACA,IAEA1oB,EAAAsD,EAFA+K,EAAAhd,KAAAgd,KACElc,EAAAkc,EAAA/c,IAAAa,KAEF,OAAAs2B,EAAA1yB,OACA,OAJA1E,KAMAgd,EAAA1gB,YAEA2V,GADAtD,EAPA3O,KAOAoY,IAAAzJ,OACA+C,gBAAA,IACA5K,KAAAhG,EAAAiG,UAEAkL,GACAnL,KAAAhG,EAAAiG,WAGAogB,oBAAAkQ,EAAAplB,GACA,IAAAxG,EAAA2rB,EAAApR,MAaA,OAZAZ,mBAAAnT,EAAAnL,QAAAse,mBAAA3Z,EAAA3E,OAAAswB,EAAA1yB,OAAA,IACA+G,EAAA2rB,EAAApR,OAEAhJ,EAAA1gB,YACA0gB,EAAAlW,KAAA2E,EAAA3E,MACA2E,EAAAqG,QACAnD,EAAAqD,eAAAvG,GAvBAzL,KAwBA8S,WAGAna,EAAAmI,GAAAgG,KAAAse,mBAAA3Z,EAAA3E,OA3BA9G,KA+BA,SAAE0jB,QAAArnB,GACF,IAAA0D,EAAAC,KAEA,SAAAs3B,EAAA/3B,EAAAC,GACAkkB,QAAA3X,UAAAxM,KAAA5I,YACAoJ,EAAAR,GAAAC,GAEAO,EAAA1D,QAAAkD,GAAAC,EALAO,EAAA1D,WAOAhD,MAAAgD,EAAA,SAAAkD,EAAAC,GACA83B,EAAA/3B,EAAAlD,EAAAkD,MAEAlG,MAAAV,EAAA0D,QAAA,SAAAkD,EAAAC,GACAO,EAAAR,KAAA5I,WACA2gC,EAAA/3B,EAAAC,KAGA,IAAA+3B,EAAA5+B,EAAAoH,EAAAK,YAAA,eACAL,EAAA2H,QACA3H,EAAA2H,MAAA6vB,EAAA,GAAA/vB,MAAAE,OAAA6vB,EAAA7vB,SAEA3H,EAAA6H,SACA7H,EAAA6H,OAAA2vB,EAAA,GAAA/vB,MAAAI,QAAA2vB,EAAA3vB,UAEA0vB,EAAA,QAAAr8B,OAAA8E,EAAA2H,MAAA3H,EAAAlC,WACAy5B,EAAA,SAAAr8B,OAAA8E,EAAA6H,OAAA7H,EAAAjC,YACAw5B,EAAA,QAAAr9B,SAAA8F,EAAA2H,QACA4vB,EAAA,SAAAr9B,SAAA8F,EAAA6H,SACAlQ,WAAAC,MAAAS,GAAA,OACA2H,EAAIzD,YAAA,GAEJyD,EAAAK,WAAAm3B,EACAx3B,EAAE+lB,YAAA,GACF/lB,EAAAyoB,UACAzoB,EAAAykB,WAAA,EACAzkB,EAAAmkB,aACAnkB,EAAAukB,iBACAvkB,EAAAgmB,cACAhmB,EAAAunB,cACAvnB,EAAAmnB,mBAAA,EACAnnB,EAAAgf,KAAAhf,EAAA+c,YAAA,KACA/c,EAAAqmB,WAylBA,SAAAiC,QAAAhsB,GACA,WAAAqnB,QAAArnB,GAGA,SAAAisB,QAAAtf,EAAA3M,GAMA,IALAA,SACAF,SAAAlB,OAAAoB,EAAAF,SAAAxD,EAAAwD,UACAE,EAAAO,WAAA3B,OAAAoB,EAAAO,WAAAP,EAAAF,SAAA,WACAE,EAAAQ,SAAA5B,OAAAoB,EAAAQ,SAAAR,EAAAF,SAAA,SACAE,EAAGS,YAAA7B,OAAAoB,EAAAS,YAAAT,EAAAF,SAAA,YACDlB,OAAAoB,EAAAM,cAAAhE,EAAA0D,QAAAM,eAAA,CACF,IAAAI,EAAA9B,OAAAoB,EAAAU,UAAApE,EAAA0D,QAAAU,WACAumB,WAAAjnB,EAAAO,WAAA,uBACA0mB,WAAAjnB,EAAAO,WAAAG,EAAA,IAAAA,EAAA,QAEA,SAAAwnB,EAAA6D,GAUA,OATE/uB,MAAA2qB,SAAA,SAAAjf,EAAAK,GACF3L,YAAA2L,KACAA,EAAAC,KAAA+iB,EAAAxxB,YACAwxB,EAAArE,gBACAqE,EAAArE,kBAEAqE,EAAArE,cAAAhf,GAAA,YAGAqjB,EAAA7D,SAEA,IAAAjW,EAAA3V,EAAAqQ,GACA,GAAAsF,GAAA,IAAAA,EAAA5J,OAAA,CAGA,GAAE4J,EAAA5J,OAAA,EAIF,OAHA4J,EAAAlV,KAAA,WACAkvB,QAAAtoB,KAAA3D,KAEA2rB,WAAA,GAEA3rB,EAAA+D,WAAAkO,EAAA,wBAGA,OADA0Z,WAAApe,KAAAwe,GACA3E,UAAA2E,EAAAprB,UACAunB,EAAA6D,IAEAhF,YAAAgF,EAAAvrB,SAAAurB,EAAAprB,SAAA,WAAA8d,mBAAAniB,EAAAC,MAAAP,MAAAtB,UAAA,WACAwtB,EAAA6D,KAEAA,8BAGAzvB,EAAAqQ,GAAA5P,KAAA,SAAAuL,EAAA9E,GACAlH,EAAAS,KAAA4uB,WAAA,SAAAnI,EAAAuI,GACA,GAAAA,KAAAhoB,WAAA,IAAAP,EAEA,OADAuF,EAAAC,KAAA+iB,EAAAvI,IACA,OAr7KA,CA07LAnpB,QAUAE,WAAA+sB,MACA6T,OAAA,SACAC,QAAA,KACArQ,KAAA,aACAG,KAAA,aACAmQ,IAAA,aACAC,KAAA,aACAC,MAAA,aACAC,WAAA,WACAC,UAAA,UACAnP,UAAA,aACAoP,YAAA,MACAC,cAAA,KACAC,aAAA,MACAC,YAAA,OACAC,kBAAA,KACAC,oBAAA,OACAC,OAAA,OACAC,QAAA,OACAC,UAAA,KACAC,YAAA,KACAC,YAAA,KACAhiB,SAAA,KACAD,SAAA,OACAF,UAAA,OACAC,YAAA,OACAV,KAAA,aACAG,OAAA,aACAE,UAAA,cACAE,cAAA,MACAO,aAAA,OACA+hB,MAAA,KACAC,WAAA,SACAC,MAAA,QACAC,MAAA,MACAp6B,MAAA,KACAq6B,UAAA,MACA95B,GAAA,OACA+5B,UAAA,OACAtD,KAAA,OACAxd,OAAA,SACAuP,WAAA,OACAwR,MAAA,KACAxhB,MAAA,aACAyhB,YAAA,OACAjO,KAAA,SACAjX,IAAA,WACAmlB,SAAA,OACAC,WAAA,KACAC,UAAA,WACAC,UAAA,QACAC,YAAA,OACAC,WAAA,OACAC,SAAA,OACAC,OAAA,KACAC,IAAA,KACAC,GAAA,KACAxe,MAAA,KACAye,UAAA,OACAC,YAAA,OACAC,UAAA,UACAC,YAAA,UACAC,UAAA,QACAC,YAAA,QACAC,SAAA,SACAC,WAAA,SACAC,WAAA,OACAC,aAAA,OACAC,UAAA,OACAC,cAAA,QACAC,YAAA,OACAC,YAAA,OACAC,mBAAA,QACAC,oBAAA,QACAC,oBAAA,QACAC,oBAAA,QACAC,cAAA,UACAC,cAAA,UACAC,cAAA,MACAC,cAAA,MACAC,eAAA,MACAC,eAAA,MACApb,QAAA,MACAqb,iBAAA,SACAC,WAAA,sCACAC,aAAA,sEACAC,aAAA,WACAC,cAAA,WACAC,cAAA,WACAvgC,WAAA,eACAwgC,YAAA,sBACAC,YAAA,sBACAC,eAAA,WACAC,eAAA,WACAC,YAAA,WACAC,cAAA,QACAC,SAAA,wCACAC,UAAA,wCACAC,WAAA,wCACAC,YAAA,cACAC,cAAA,cACAC,YAAA,OACAC,qBAAA,8BACAC,oBAAA,8BACAC,mBAAA,WACAC,WAAA,MACAC,gBAAA,OACAC,iBAAA,MACAC,kBAAA,OACAC,YAAA,MACAC,cAAA,KACAC,eAAA,KACAC,eAAA,KACAC,mBAAA,OACAC,YAAA,MACAC,cAAA,KACAC,eAAA,KACAC,kBAAA,OACAC,eAAA,KACAC,mBAAA,OACAC,oBAAA,OACAC,mBAAA,OACAC,kBAAA,OACAC,iBAAA,OACAC,aAAA,OACAC,cAAA,IACAC,eAAA,IACAC,kBAAA,OACAC,cAAA,OACAC,qBAAA,OACAC,kBAAA,MACAC,mBAAA,MACAC,iBAAA,OACAC,eAAA,QACAC,mBAAA,OACAC,wBAAA,sDACAC,yBAAA,OACAC,sBAAA,OACAC,uBAAA,OACAC,gCAAA,YACAC,kCAAA,YACAC,0BAAA,WACAC,6BAAA,WACAC,0BAAA,aACAC,qBAAA,OACAC,yBAAA,OACAC,0BAAA,OACAC,qBAAA,WACAC,uBAAA,QACAC,wBAAE,MACFC,wBAAA,OACAC,wBAAA,QACAC,uBAAA,KACAC,uBAAA,KACAC,uBAAA,KACAC,iBAAA,MACAC,mBAAA,OACAC,oBAAA,KACAC,wBAAA,OACAC,cAAA,OACAC,aAAA,KACAC,aAAA,KACAC,aAAA,KACAC,cAAE,KACFC,eAAA,KACAC,gBAAgB,IAChBC,WAAG,KACHC,cAAgB,OAChBC,gBAAG,KACHC,gBAAG,KACHC,cAAA,OACAC,kBAAA,OACAC,sBAAA,OACAC,qBAAA,KACAC,kBAAA,MACAC,oBAAA,KACAC,mBAAA,MACAC,iBAAA,KACCC,oBAAA,KACDC,oBAAA,KACAC,sBAAA,KACAC,eAAA,KACAC,oBAAA,KACAC,oBAAA,KACAC,wBAAA,OACAC,cAAA,OACAC,aAAA,KACAC,mBAAA,OACAC,kBAAA,KACAC,4BAAA,SACAC,cAAA,OACAC,2BACA9Y,GAAA,OACAC,GAAA,OACAC,GAAA,OACA6Y,GAAA,OACA3Y,EAAA,OAEA4Y,qBACAC,OAAA,KACAC,QAAA,MACAC,gBAAA,YACAC,aAAA,YACAC,OAAA,KACAC,kBAAA,OACAC,MAAA,QACAC,cAAA,cACAC,kBAAA,kBACAC,cAAA,cACAC,OAAI,SACJC,QAAA,WAEAC,0BACAC,EAAA,SACAC,IAAA,WACAC,EAAA,SACAC,IAAA,WACAC,EAAA,SAEAC,0BAAA,OACAC,0BAAA,SACAC,qBACAC,SAAA,QACAC,SAAA,KACCC,SAAA,SAED,SACA7sC,WAAAyF,QAAAW,SAAA,QASApG,WAAA4xB,OAAA,kBAAA7vB,GACA,IAAAoH,EAAAC,KAAA+E,EAAA,SAAA4e,EAAA5jB,EAAA4jB,KAAA5e,EAAA,KACAhF,EAAAyoB,OAAAiR,QACAzc,KAAA,WACA,IAAAlW,GAAA,8BACA,8BACA,uBAAA6c,EAAA5e,KAAA,WACA,oGACA,SACA,UAAA4b,KAAA,IAaAniB,EAZAuB,EAAA6nB,cACA7iB,OACA2C,MAAA,IACAiQ,MAAA5X,EAAA4jB,KAAA5e,GACAjE,KAAAgG,EACAua,QACAtc,KAAAhF,EAAA4jB,KAAA,OACArI,MAAA,SAAA5K,GACA3Q,EAAA+W,WAAA,YAAA4sB,EAAAlkC,MAAA,MAAA6mB,aAAAjT,YAIA5U,IACAklC,EAAA/qC,EAAA,qBAAA6F,GACEK,EAAAkB,EAAAyoB,OAAAoB,oBACF/qB,GACA6kC,EAAAlkC,IAAAlF,SAAAuE,EAAAiH,KAAA,kBAEA49B,EAAA,GAAAtwB,QACAswB,EAAA,GAAA5wB,UAEA6wB,OAAA,WACA5jC,EAAAyoB,OAAAoB,oBAAA1f,oDAcAtT,WAAA4xB,OAAA,sBAAA7vB,GACA,IAIAmF,EAJAiC,EAAAC,KACAD,EAAA6jC,iBAsBA7jC,EAAAykB,UACA5kB,IAEAG,EAAAgc,YAAAnc,IAfA,SAAAikC,IACA,IAAA7mB,EAAAjd,EAAAid,KACAlc,EAAAkc,EAAA/c,IAAAa,KACAkc,EAAA9d,OAAA0I,OAAA9J,GACAiC,EAAAomB,OAAA,KAAA1tB,KAAA4pB,KAAA1pB,EAAAG,GAAAgI,EAAA0hB,aAAwD1hB,EAAA+G,cAAA,GAAA/J,IAExD,SAAA8B,IAZA,IACAod,EACAlc,EAWAhD,EAAAnF,EAAAuB,WAAA6F,EAAA6H,QACA7H,EAAAid,KAAA3B,YAAAwoB,GAbA7mB,EAAAjd,EAAAid,KACAlc,EAAAkc,EAAA/c,IAAAa,KACAkc,EAAA9d,OAAA,GAAA4kC,OAAA,KACAhjC,EAAA0G,MAAAu8B,UAAA,SAYAF,OAwBAjtC,WAAA4xB,OAAA,oBAAA7vB,GACA,IAAAoH,EAAAC,KAAA+E,EAAA,WAAA4e,EAAA5jB,EAAA4jB,KAAA5e,EAAA,KACAi/B,EAAArrC,EAAAqC,MAAA+E,EAAAikC,SAAA,KACAC,EAAAtrC,EAAAqC,MAAA+E,EAAAkkC,UAAA,KACAlkC,EAAAokB,aAAApf,EAAA,WACA,IAsDAG,EAAAjF,EAtDA6G,GAAA,mCACG,0BACH,wBACA6c,EAAAugB,QAAA,oHACA,kDACA,mFAAAvgB,EAAAwgB,OAAA,OACA,UACA,SACA,yBACA,uHAAAxgB,EAAAygB,iBAAA,WACA,SACA,kCACA,SACA,oCAAAJ,EAAA,aAAAC,EAAA,cACA,UAAAtjB,KAAA,IACAoC,EAAAhjB,EAAA6nB,cACA7iB,KAAIA,EACJ2C,MAAAs8B,EAAA,GACArsB,MAAA5X,EAAA4jB,KAAA5e,GACGjE,KAAAgG,EACHua,QACAtc,KAAAhF,EAAA4jB,KAAA,OACArI,MAAA,SAAA5K,GACG,IAAAqD,EAAA7O,EAAA6O,IACDswB,EAAAtwB,EAAAuwB,YACD3S,EAAA0S,EAAAE,IAAA,IAAAF,EAAAG,kBAED9sB,GAAA+sB,EAAA,GAAA7lB,QAAA7e,EAAAjD,YAAA,6DACA,WAAAge,mBAAA6W,GACA,SAAA7W,mBAAA4pB,GACA,UAAAV,EACA,WAAAC,EACA,YAAAnpB,mBAAA6W,GACA,iBAAA7W,mBAAA,QAAA6F,KAAA,IACA8jB,EAAA,GAAA7lB,oHAGA7e,EAAA5H,KAAA,cAAAuf,GAEA3X,EAAAsmB,aAAAjT,UAGAyL,aAAA,WACA8lB,EAAAz6B,SACAjK,GACAA,EAAAgb,MAAA,IAEA/b,EAAAgL,YAGA1L,EAAAukB,EAAAvkB,IACAomC,EAAAjsC,EAAA,mBAAA6F,GACAmmC,EAAAhsC,EAAA,qBAAA6F,GACAimC,EAAA9rC,EAAA,4BAAAoqB,EAAAvkB,KAEAU,EAAAvG,EAAA,oDAAAoH,EAAAjD,YAAA,mCAAAknC,EAAA,aAAAC,EAAA,kBACA,SAAAxhC,IACAyC,EAAAhG,EAAA,GAAAkc,cACAnb,EAAAtH,EAAAukB,UAAAhe,GAEAA,EAAAoG,KAAA,kBACApG,EAAAsG,OAAA,QACA7M,EAAAG,GACA2J,IAEA6Z,WAAA7Z,EAAA,KAGA9J,EAAA,UAAA6F,GAAAgL,YAAAtK,GACAylC,EAAArpB,MAAA,WACApW,EAAAi/B,OAAAS,EAAAplC,aAeA5I,WAAA4xB,OAAA,eAAA7vB,GACA,IAAAoH,EAAAC,KAAA2jB,EAAA5jB,EAAA4jB,KAAA5e,QACAhF,EAAAokB,aADA,MACW,WACX,IA4CAjf,EAAKjF,EA5CL6G,GAAW,mCACX,8BACA6c,EAAAugB,QAAA,oHACA,kDACA,mFAAAvgB,EAAAwgB,OAAA,OACA,UACA,SACA,+DACA,UAAAxjB,KAAA,IAiCAniB,EAhCAuB,EAAA6nB,cACA7iB,KAZA,MAaA2C,MAAA,IACAiQ,MAAA5X,EAAA4jB,KAdA,OAeA7iB,KAAAgG,EACAua,QACAtc,KAAAhF,EAAA4jB,KAAA,OACArI,MAAA,SAAA5K,GACAxL,EAAA2/B,SAAA,IACA9wB,EAAA7O,EAAA6O,IACA4d,EAAO5d,EAAAuwB,YAAAE,MAAA,IAAAzwB,EAAAuwB,YAAAC,MACPG,EAAA3wB,EAAA+wB,UACAC,EAAAhxB,EAAAixB,eACAttB,EAAA,gDACAA,GAAA,WAAAoD,mBAAA6W,GACAja,GAAA,SAAwBoD,mBAAA4pB,GACxBhtB,GAAA,gBACAA,GAAQ,YAAAoD,mBAAAiqB,GACRrtB,GAAO,YAAAoD,mBAAA6W,GACDja,GAAE,aAAA3X,EAAA/C,SACH0a,GAAA,gBACL3X,EAAA5H,KAAA,cAA8Buf,GAAA2O,aAAAjT,UAG9ByL,aAAA,WACA8lB,EAAAz6B,SACAjK,GACAA,EAAAgb,MAAA,IAEA/b,EAAAgL,YAGA1L,IACAomC,EAAOjsC,EAAA,mBAAA6F,GACPmmC,EAAQhsC,EAAA,qBAAA6F,GAwDRU,IAtDA,8BACA,yEACA,UACA,0BACA,yEACA,iCACA,WACA,6EAAAa,EAAA/C,SAAA,eACA,WACA,qBACA,0BACA,gEACA,oBACA,gBACA,sBACA,8BACA,wBACG,yBACH,4BACA,0BACA,gCACG,gCACD,+CACD,sFAED,2CACA,mEACA,qDACA,0BACA,gHACA,UACA,QACA,QACA,IACA,6BACA,sBACA,sEACA,qDACA,yBACA,qDACA,8CACA,oBACA,iDACA,YACA,eACA,8CACA,QACG,QACH,IACA,aACA,UACE,gCACD,2FAEDrE,EAAA,oDAAAoH,EAAAjD,YAAA,8DACA,SAAA2F,IACAyC,EAAAhG,EAAA,GAAAkc,cACAnb,EAAAtH,EAAAukB,UAAAhe,GAEAA,EAAAoG,KAAA,kBACApG,EAAAsG,OAAA,QACA7M,EAAAG,OAGAwjB,WAAA7Z,EAAA,KAGA9J,EAAA,UAAA6F,GAAAgL,YAAAtK,GACAylC,EAAArpB,MAAA,WACApW,EAAAi/B,OAAAS,EAAAplC,aAaA5I,WAAA4xB,OAAA,qBAAA7vB,GACA,IAAAoH,EAAAC,KACAD,EAAAokB,aADA,YACA,WACApkB,EAAAqT,QACA,IAAAtM,EAAA/G,EAAA+G,OAEAA,GADAA,IAAAF,QAAA,+CACAA,QAAA,4CACAE,EAAAnO,EAAAkK,WAAAiE,GACAnI,GAAA,iBACAC,OAAA,2GACAC,KAAA,kEACAJ,OAAA,UACAC,SAAA,qBACAumC,kEAEAllC,EAAA+G,QACA/G,EAAAqY,IAAAzF,WAAA,GACA5S,EAAA4lB,kBAeA/uB,WAAA4xB,OAAA,gBAAA7vB,GACA,IAAAoH,EAAAC,KACAD,EAAAokB,aADA,OACA,WACA,IAAAR,EAAA5jB,EAAA4jB,KAAA5e,SACA+B,GAAA,mCACA,8BACA,gCACA,yCACA,qCACA,mCACA,mCACA,mCACA,qCACA,mCACA,qCACA,qCACA,qCACA,iCACA,mCACA,qCACA,kCACA,YACA,SACA,8EACI,UAAA6Z,KAAA,IACJoC,EAAAhjB,EAAA6nB,cACA7iB,KA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","file":"static/js/4.abd5824327fdc96b4941.js","sourcesContent":["/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2016 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @website http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n* @version 4.1.11 (2016-03-31)\r\n*******************************************************************************/\r\n(function (window, undefined) {\r\n\tif (window.KindEditor) {\r\n\t\treturn;\r\n\t}\r\n\n\r\nif (!window.console) {\r\n\twindow.console = {};\r\n}\r\nif (!console.log) {\r\n\tconsole.log = function () {};\r\n}\r\nvar _VERSION = '4.1.11 (2016-03-31)',\r\n\t_ua = navigator.userAgent.toLowerCase(),\r\n\t_IE = _ua.indexOf('msie') > -1 && _ua.indexOf('opera') == -1,\r\n\t_NEWIE = _ua.indexOf('msie') == -1 && _ua.indexOf('trident') > -1,\r\n\t_GECKO = _ua.indexOf('gecko') > -1 && _ua.indexOf('khtml') == -1,\r\n\t_WEBKIT = _ua.indexOf('applewebkit') > -1,\r\n\t_OPERA = _ua.indexOf('opera') > -1,\r\n\t_MOBILE = _ua.indexOf('mobile') > -1,\r\n\t_IOS = /ipad|iphone|ipod/.test(_ua),\r\n\t_QUIRKS = document.compatMode != 'CSS1Compat',\r\n\t_IERANGE = !window.getSelection,\r\n\t_matches = /(?:msie|firefox|webkit|opera)[\\/:\\s](\\d+)/.exec(_ua),\r\n\t_V = _matches ? _matches[1] : '0',\r\n\t_TIME = new Date().getTime();\r\nfunction _isArray(val) {\r\n\tif (!val) {\r\n\t\treturn false;\r\n\t}\r\n\treturn Object.prototype.toString.call(val) === '[object Array]';\r\n}\r\nfunction _isFunction(val) {\r\n\tif (!val) {\r\n\t\treturn false;\r\n\t}\r\n\treturn Object.prototype.toString.call(val) === '[object Function]';\r\n}\r\nfunction _inArray(val, arr) {\r\n\tfor (var i = 0, len = arr.length; i < len; i++) {\r\n\t\tif (val === arr[i]) {\r\n\t\t\treturn i;\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\nfunction _each(obj, fn) {\r\n\tif (_isArray(obj)) {\r\n\t\tfor (var i = 0, len = obj.length; i < len; i++) {\r\n\t\t\tif (fn.call(obj[i], i, obj[i]) === false) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\tfor (var key in obj) {\r\n\t\t\tif (obj.hasOwnProperty(key)) {\r\n\t\t\t\tif (fn.call(obj[key], key, obj[key]) === false) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nfunction _trim(str) {\r\n\treturn str.replace(/(?:^[ \\t\\n\\r]+)|(?:[ \\t\\n\\r]+$)/g, '');\r\n}\r\nfunction _inString(val, str, delimiter) {\r\n\tdelimiter = delimiter === undefined ? ',' : delimiter;\r\n\treturn (delimiter + str + delimiter).indexOf(delimiter + val + delimiter) >= 0;\r\n}\r\nfunction _addUnit(val, unit) {\r\n\tunit = unit || 'px';\r\n\treturn val && /^-?\\d+(?:\\.\\d+)?$/.test(val) ? val + unit : val;\r\n}\r\nfunction _removeUnit(val) {\r\n\tvar match;\r\n\treturn val && (match = /(\\d+)/.exec(val)) ? parseInt(match[1], 10) : 0;\r\n}\r\nfunction _escape(val) {\r\n\treturn val.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\r\n}\r\nfunction _unescape(val) {\r\n\treturn val.replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\"').replace(/&amp;/g, '&');\r\n}\r\nfunction _toCamel(str) {\r\n\tvar arr = str.split('-');\r\n\tstr = '';\r\n\t_each(arr, function(key, val) {\r\n\t\tstr += (key > 0) ? val.charAt(0).toUpperCase() + val.substr(1) : val;\r\n\t});\r\n\treturn str;\r\n}\r\nfunction _toHex(val) {\r\n\tfunction hex(d) {\r\n\t\tvar s = parseInt(d, 10).toString(16).toUpperCase();\r\n\t\treturn s.length > 1 ? s : '0' + s;\r\n\t}\r\n\treturn val.replace(/rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/ig,\r\n\t\tfunction($0, $1, $2, $3) {\r\n\t\t\treturn '#' + hex($1) + hex($2) + hex($3);\r\n\t\t}\r\n\t);\r\n}\r\nfunction _toMap(val, delimiter) {\r\n\tdelimiter = delimiter === undefined ? ',' : delimiter;\r\n\tvar map = {}, arr = _isArray(val) ? val : val.split(delimiter), match;\r\n\t_each(arr, function(key, val) {\r\n\t\tif ((match = /^(\\d+)\\.\\.(\\d+)$/.exec(val))) {\r\n\t\t\tfor (var i = parseInt(match[1], 10); i <= parseInt(match[2], 10); i++) {\r\n\t\t\t\tmap[i.toString()] = true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tmap[val] = true;\r\n\t\t}\r\n\t});\r\n\treturn map;\r\n}\r\nfunction _toArray(obj, offset) {\r\n\treturn Array.prototype.slice.call(obj, offset || 0);\r\n}\r\nfunction _undef(val, defaultVal) {\r\n\treturn val === undefined ? defaultVal : val;\r\n}\r\nfunction _invalidUrl(url) {\r\n\treturn !url || /[<>\"]/.test(url);\r\n}\r\nfunction _addParam(url, param) {\r\n\treturn url.indexOf('?') >= 0 ? url + '&' + param : url + '?' + param;\r\n}\r\nfunction _extend(child, parent, proto) {\r\n\tif (!proto) {\r\n\t\tproto = parent;\r\n\t\tparent = null;\r\n\t}\r\n\tvar childProto;\r\n\tif (parent) {\r\n\t\tvar fn = function () {};\r\n\t\tfn.prototype = parent.prototype;\r\n\t\tchildProto = new fn();\r\n\t\t_each(proto, function(key, val) {\r\n\t\t\tchildProto[key] = val;\r\n\t\t});\r\n\t} else {\r\n\t\tchildProto = proto;\r\n\t}\r\n\tchildProto.constructor = child;\r\n\tchild.prototype = childProto;\r\n\tchild.parent = parent ? parent.prototype : null;\r\n}\r\n\r\r\nfunction _json(text) {\r\n\tvar match;\r\n\tif ((match = /\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\]/.exec(text))) {\r\n\t\ttext = match[0];\r\n\t}\r\n\tvar cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\r\n\tcx.lastIndex = 0;\r\n\tif (cx.test(text)) {\r\n\t\ttext = text.replace(cx, function (a) {\r\n\t\t\treturn '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\r\n\t\t});\r\n\t}\r\n\tif (/^[\\],:{}\\s]*$/.\r\n\ttest(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@').\r\n\treplace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']').\r\n\treplace(/(?:^|:|,)(?:\\s*\\[)+/g, ''))) {\r\n\t\treturn eval('(' + text + ')');\r\n\t}\r\n\tthrow 'JSON parse error';\r\n}\r\nvar _round = Math.round;\r\nvar K = {\r\n\tDEBUG : false,\r\n\tVERSION : _VERSION,\r\n\tIE : _IE,\r\n\tGECKO : _GECKO,\r\n\tWEBKIT : _WEBKIT,\r\n\tOPERA : _OPERA,\r\n\tV : _V,\r\n\tTIME : _TIME,\r\n\teach : _each,\r\n\tisArray : _isArray,\r\n\tisFunction : _isFunction,\r\n\tinArray : _inArray,\r\n\tinString : _inString,\r\n\ttrim : _trim,\r\n\taddUnit : _addUnit,\r\n\tremoveUnit : _removeUnit,\r\n\tescape : _escape,\r\n\tunescape : _unescape,\r\n\ttoCamel : _toCamel,\r\n\ttoHex : _toHex,\r\n\ttoMap : _toMap,\r\n\ttoArray : _toArray,\r\n\tundef : _undef,\r\n\tinvalidUrl : _invalidUrl,\r\n\taddParam : _addParam,\r\n\textend : _extend,\r\n\tjson : _json\r\n};\r\nvar _INLINE_TAG_MAP = _toMap('a,abbr,acronym,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,img,input,ins,kbd,label,map,q,s,samp,select,small,span,strike,strong,sub,sup,textarea,tt,u,var'),\r\n\t_BLOCK_TAG_MAP = _toMap('address,applet,blockquote,body,center,dd,dir,div,dl,dt,fieldset,form,frameset,h1,h2,h3,h4,h5,h6,head,hr,html,iframe,ins,isindex,li,map,menu,meta,noframes,noscript,object,ol,p,pre,script,style,table,tbody,td,tfoot,th,thead,title,tr,ul'),\r\n\t_SINGLE_TAG_MAP = _toMap('area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed'),\r\n\t_STYLE_TAG_MAP = _toMap('b,basefont,big,del,em,font,i,s,small,span,strike,strong,sub,sup,u'),\r\n\t_CONTROL_TAG_MAP = _toMap('img,table,input,textarea,button'),\r\n\t_PRE_TAG_MAP = _toMap('pre,style,script'),\r\n\t_NOSPLIT_TAG_MAP = _toMap('html,head,body,td,tr,table,ol,ul,li'),\r\n\t_AUTOCLOSE_TAG_MAP = _toMap('colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr'),\r\n\t_FILL_ATTR_MAP = _toMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected'),\r\n\t_VALUE_TAG_MAP = _toMap('input,button,textarea,select');\r\n\n\r\nfunction _getBasePath() {\r\n\tvar els = document.getElementsByTagName('script'), src;\r\n\tfor (var i = 0, len = els.length; i < len; i++) {\r\n\t\tsrc = els[i].src || '';\r\n\t\tif (/kindeditor[\\w\\-\\.]*\\.js/.test(src)) {\r\n\t\t\treturn src.substring(0, src.lastIndexOf('/') + 1);\r\n\t\t}\r\n\t}\r\n\treturn '';\r\n}\r\nK.basePath = _getBasePath();\r\nK.options = {\r\n\tdesignMode : true,\r\n\tfullscreenMode : false,\r\n\tfilterMode : true,\r\n\twellFormatMode : true,\r\n\tshadowMode : true,\r\n\tloadStyleMode : true,\r\n\tbasePath : K.basePath,\r\n\tthemesPath : K.basePath + 'themes/',\r\n\tlangPath : K.basePath + 'lang/',\r\n\tpluginsPath : K.basePath + 'plugins/',\r\n\tthemeType : 'default',\r\n\tlangType : 'zh-CN',\r\n\turlType : '',\r\n\tnewlineTag : 'p',\r\n\tresizeType : 2,\r\n\tsyncType : 'form',\r\n\tpasteType : 2,\r\n\tdialogAlignType : 'page',\r\n\tuseContextmenu : true,\r\n\tfullscreenShortcut : false,\r\n\tbodyClass : 'ke-content',\r\n\tindentChar : '\\t',\r\n\tcssPath : '',\r\n\tcssData : '',\r\n\tminWidth : 650,\r\n\tminHeight : 100,\r\n\tminChangeSize : 50,\r\n\tzIndex : 811213,\r\n\titems : [\r\n\t\t'source', '|', 'undo', 'redo', '|', 'preview', 'print', 'template', 'code', 'cut', 'copy', 'paste',\r\n\t\t'plainpaste', 'wordpaste', '|', 'justifyleft', 'justifycenter', 'justifyright',\r\n\t\t'justifyfull', 'insertorderedlist', 'insertunorderedlist', 'indent', 'outdent', 'subscript',\r\n\t\t'superscript', 'clearhtml', 'quickformat', 'selectall', '|', 'fullscreen', '/',\r\n\t\t'formatblock', 'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold',\r\n\t\t'italic', 'underline', 'strikethrough', 'lineheight', 'removeformat', '|', 'image', 'multiimage',\r\n\t\t'flash', 'media', 'insertfile', 'table', 'hr', 'emoticons', 'baidumap', 'pagebreak',\r\n\t\t'anchor', 'link', 'unlink', '|', 'about'\r\n\t],\r\n\tnoDisableItems : ['source', 'fullscreen'],\r\n\tcolorTable : [\r\n\t\t['#E53333', '#E56600', '#FF9900', '#64451D', '#DFC5A4', '#FFE500'],\r\n\t\t['#009900', '#006600', '#99BB00', '#B8D100', '#60D978', '#00D5FF'],\r\n\t\t['#337FE5', '#003399', '#4C33E5', '#9933E5', '#CC33E5', '#EE33EE'],\r\n\t\t['#FFFFFF', '#CCCCCC', '#999999', '#666666', '#333333', '#000000']\r\n\t],\r\n\tfontSizeTable : ['9px', '10px', '12px', '14px', '16px', '18px', '24px', '32px'],\r\n\thtmlTags : {\r\n\t\tfont : ['id', 'class', 'color', 'size', 'face', '.background-color'],\r\n\t\tspan : [\r\n\t\t\t'id', 'class', '.color', '.background-color', '.font-size', '.font-family', '.background',\r\n\t\t\t'.font-weight', '.font-style', '.text-decoration', '.vertical-align', '.line-height'\r\n\t\t],\r\n\t\tdiv : [\r\n\t\t\t'id', 'class', 'align', '.border', '.margin', '.padding', '.text-align', '.color',\r\n\t\t\t'.background-color', '.font-size', '.font-family', '.font-weight', '.background',\r\n\t\t\t'.font-style', '.text-decoration', '.vertical-align', '.margin-left'\r\n\t\t],\r\n\t\ttable: [\r\n\t\t\t'id', 'class', 'border', 'cellspacing', 'cellpadding', 'width', 'height', 'align', 'bordercolor',\r\n\t\t\t'.padding', '.margin', '.border', 'bgcolor', '.text-align', '.color', '.background-color',\r\n\t\t\t'.font-size', '.font-family', '.font-weight', '.font-style', '.text-decoration', '.background',\r\n\t\t\t'.width', '.height', '.border-collapse'\r\n\t\t],\r\n\t\t'td,th': [\r\n\t\t\t'id', 'class', 'align', 'valign', 'width', 'height', 'colspan', 'rowspan', 'bgcolor',\r\n\t\t\t'.text-align', '.color', '.background-color', '.font-size', '.font-family', '.font-weight',\r\n\t\t\t'.font-style', '.text-decoration', '.vertical-align', '.background', '.border'\r\n\t\t],\r\n\t\ta : ['id', 'class', 'href', 'target', 'name'],\r\n\t\tembed : ['id', 'class', 'src', 'width', 'height', 'type', 'loop', 'autostart', 'quality', '.width', '.height', 'align', 'allowscriptaccess', 'wmode'],\r\n\t\timg : ['id', 'class', 'src', 'width', 'height', 'border', 'alt', 'title', 'align', '.width', '.height', '.border'],\r\n\t\t'p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6' : [\r\n\t\t\t'id', 'class', 'align', '.text-align', '.color', '.background-color', '.font-size', '.font-family', '.background',\r\n\t\t\t'.font-weight', '.font-style', '.text-decoration', '.vertical-align', '.text-indent', '.margin-left'\r\n\t\t],\r\n\t\tpre : ['id', 'class'],\r\n\t\thr : ['id', 'class', '.page-break-after'],\r\n\t\t'br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del' : ['id', 'class'],\r\n\t\tiframe : ['id', 'class', 'src', 'frameborder', 'width', 'height', '.width', '.height']\r\n\t},\r\n\tlayout : '<div class=\"container\"><div class=\"toolbar\"></div><div class=\"edit\"></div><div class=\"statusbar\"></div></div>'\r\n};\r\n\n\r\nvar _useCapture = false;\r\n\r\r\nvar _INPUT_KEY_MAP = _toMap('8,9,13,32,46,48..57,59,61,65..90,106,109..111,188,190..192,219..222');\r\r\nvar _CURSORMOVE_KEY_MAP = _toMap('33..40');\r\r\nvar _CHANGE_KEY_MAP = {};\r\n_each(_INPUT_KEY_MAP, function(key, val) {\r\n\t_CHANGE_KEY_MAP[key] = val;\r\n});\r\n_each(_CURSORMOVE_KEY_MAP, function(key, val) {\r\n\t_CHANGE_KEY_MAP[key] = val;\r\n});\r\n\r\r\nfunction _bindEvent(el, type, fn) {\r\n\tif (el.addEventListener){\r\n\t\tel.addEventListener(type, fn, _useCapture);\r\n\t} else if (el.attachEvent){\r\n\t\tel.attachEvent('on' + type, fn);\r\n\t}\r\n}\r\r\nfunction _unbindEvent(el, type, fn) {\r\n\tif (el.removeEventListener){\r\n\t\tel.removeEventListener(type, fn, _useCapture);\r\n\t} else if (el.detachEvent){\r\n\t\tel.detachEvent('on' + type, fn);\r\n\t}\r\n}\r\nvar _EVENT_PROPS = ('altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,' +\r\n\t'data,detail,eventPhase,fromElement,handler,keyCode,metaKey,newValue,offsetX,offsetY,originalTarget,pageX,' +\r\n\t'pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which').split(',');\r\n\r\r\nfunction KEvent(el, event) {\r\n\tthis.init(el, event);\r\n}\r\n_extend(KEvent, {\r\n\tinit : function(el, event) {\r\n\t\tvar self = this, doc = el.ownerDocument || el.document || el;\r\n\t\tself.event = event;\r\n\t\t_each(_EVENT_PROPS, function(key, val) {\r\n\t\t\tself[val] = event[val];\r\n\t\t});\r\n\t\tif (!self.target) {\r\n\t\t\tself.target = self.srcElement || doc;\r\n\t\t}\r\n\t\tif (self.target.nodeType === 3) {\r\n\t\t\tself.target = self.target.parentNode;\r\n\t\t}\r\n\t\tif (!self.relatedTarget && self.fromElement) {\r\n\t\t\tself.relatedTarget = self.fromElement === self.target ? self.toElement : self.fromElement;\r\n\t\t}\r\n\t\tif (self.pageX == null && self.clientX != null) {\r\n\t\t\tvar d = doc.documentElement, body = doc.body;\r\n\t\t\tself.pageX = self.clientX + (d && d.scrollLeft || body && body.scrollLeft || 0) - (d && d.clientLeft || body && body.clientLeft || 0);\r\n\t\t\tself.pageY = self.clientY + (d && d.scrollTop  || body && body.scrollTop  || 0) - (d && d.clientTop  || body && body.clientTop  || 0);\r\n\t\t}\r\n\t\tif (!self.which && ((self.charCode || self.charCode === 0) ? self.charCode : self.keyCode)) {\r\n\t\t\tself.which = self.charCode || self.keyCode;\r\n\t\t}\r\n\t\tif (!self.metaKey && self.ctrlKey) {\r\n\t\t\tself.metaKey = self.ctrlKey;\r\n\t\t}\r\n\t\tif (!self.which && self.button !== undefined) {\r\n\t\t\tself.which = (self.button & 1 ? 1 : (self.button & 2 ? 3 : (self.button & 4 ? 2 : 0)));\r\n\t\t}\r\n\t\tswitch (self.which) {\r\n\t\tcase 186 :\r\n\t\t\tself.which = 59;\r\n\t\t\tbreak;\r\n\t\tcase 187 :\r\n\t\tcase 107 :\r\n\t\tcase 43 :\r\n\t\t\tself.which = 61;\r\n\t\t\tbreak;\r\n\t\tcase 189 :\r\n\t\tcase 45 :\r\n\t\t\tself.which = 109;\r\n\t\t\tbreak;\r\n\t\tcase 42 :\r\n\t\t\tself.which = 106;\r\n\t\t\tbreak;\r\n\t\tcase 47 :\r\n\t\t\tself.which = 111;\r\n\t\t\tbreak;\r\n\t\tcase 78 :\r\n\t\t\tself.which = 110;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tif (self.which >= 96 && self.which <= 105) {\r\n\t\t\tself.which -= 48;\r\n\t\t}\r\n\t},\r\n\tpreventDefault : function() {\r\n\t\tvar ev = this.event;\r\n\t\tif (ev.preventDefault) {\r\n\t\t\tev.preventDefault();\r\n\t\t} else {\r\n\t\t\tev.returnValue = false;\r\n\t\t}\r\n\t},\r\n\tstopPropagation : function() {\r\n\t\tvar ev = this.event;\r\n\t\tif (ev.stopPropagation) {\r\n\t\t\tev.stopPropagation();\r\n\t\t} else {\r\n\t\t\tev.cancelBubble = true;\r\n\t\t}\r\n\t},\r\n\tstop : function() {\r\n\t\tthis.preventDefault();\r\n\t\tthis.stopPropagation();\r\n\t}\r\n});\r\nvar _eventExpendo = 'kindeditor_' + _TIME, _eventId = 0, _eventData = {};\r\nfunction _getId(el) {\r\n\treturn el[_eventExpendo] || null;\r\n}\r\nfunction _setId(el) {\r\n\tel[_eventExpendo] = ++_eventId;\r\n\treturn _eventId;\r\n}\r\nfunction _removeId(el) {\r\n\ttry {\r\n\t\tdelete el[_eventExpendo];\r\n\t} catch(e) {\r\n\t\tif (el.removeAttribute) {\r\n\t\t\tel.removeAttribute(_eventExpendo);\r\n\t\t}\r\n\t}\r\n}\r\nfunction _bind(el, type, fn) {\r\n\tif (type.indexOf(',') >= 0) {\r\n\t\t_each(type.split(','), function() {\r\n\t\t\t_bind(el, this, fn);\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n\tvar id = _getId(el);\r\n\tif (!id) {\r\n\t\tid = _setId(el);\r\n\t}\r\n\tif (_eventData[id] === undefined) {\r\n\t\t_eventData[id] = {};\r\n\t}\r\n\tvar events = _eventData[id][type];\r\n\tif (events && events.length > 0) {\r\n\t\t_unbindEvent(el, type, events[0]);\r\n\t} else {\r\n\t\t_eventData[id][type] = [];\r\n\t\t_eventData[id].el = el;\r\n\t}\r\n\tevents = _eventData[id][type];\r\n\tif (events.length === 0) {\r\n\t\tevents[0] = function(e) {\r\n\t\t\tvar kevent = e ? new KEvent(el, e) : undefined;\r\n\t\t\t_each(events, function(i, event) {\r\n\t\t\t\tif (i > 0 && event) {\r\n\t\t\t\t\tevent.call(el, kevent);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t}\r\n\tif (_inArray(fn, events) < 0) {\r\n\t\tevents.push(fn);\r\n\t}\r\n\t_bindEvent(el, type, events[0]);\r\n}\r\nfunction _unbind(el, type, fn) {\r\n\tif (type && type.indexOf(',') >= 0) {\r\n\t\t_each(type.split(','), function() {\r\n\t\t\t_unbind(el, this, fn);\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n\tvar id = _getId(el);\r\n\tif (!id) {\r\n\t\treturn;\r\n\t}\r\n\tif (type === undefined) {\r\n\t\tif (id in _eventData) {\r\n\t\t\t_each(_eventData[id], function(key, events) {\r\n\t\t\t\tif (key != 'el' && events.length > 0) {\r\n\t\t\t\t\t_unbindEvent(el, key, events[0]);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdelete _eventData[id];\r\n\t\t\t_removeId(el);\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\tif (!_eventData[id]) {\r\n\t\treturn;\r\n\t}\r\n\tvar events = _eventData[id][type];\r\n\tif (events && events.length > 0) {\r\n\t\tif (fn === undefined) {\r\n\t\t\t_unbindEvent(el, type, events[0]);\r\n\t\t\tdelete _eventData[id][type];\r\n\t\t} else {\r\n\t\t\t_each(events, function(i, event) {\r\n\t\t\t\tif (i > 0 && event === fn) {\r\n\t\t\t\t\tevents.splice(i, 1);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (events.length == 1) {\r\n\t\t\t\t_unbindEvent(el, type, events[0]);\r\n\t\t\t\tdelete _eventData[id][type];\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar count = 0;\r\n\t\t_each(_eventData[id], function() {\r\n\t\t\tcount++;\r\n\t\t});\r\n\t\tif (count < 2) {\r\n\t\t\tdelete _eventData[id];\r\n\t\t\t_removeId(el);\r\n\t\t}\r\n\t}\r\n}\r\nfunction _fire(el, type) {\r\n\tif (type.indexOf(',') >= 0) {\r\n\t\t_each(type.split(','), function() {\r\n\t\t\t_fire(el, this);\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n\tvar id = _getId(el);\r\n\tif (!id) {\r\n\t\treturn;\r\n\t}\r\n\tvar events = _eventData[id][type];\r\n\tif (_eventData[id] && events && events.length > 0) {\r\n\t\tevents[0]();\r\n\t}\r\n}\r\nfunction _ctrl(el, key, fn) {\r\n\tvar self = this;\r\n\tkey = /^\\d{2,}$/.test(key) ? key : key.toUpperCase().charCodeAt(0);\r\n\t_bind(el, 'keydown', function(e) {\r\n\t\tif (e.ctrlKey && e.which == key && !e.shiftKey && !e.altKey) {\r\n\t\t\tfn.call(el);\r\n\t\t\te.stop();\r\n\t\t}\r\n\t});\r\n}\r\nvar _readyFinished = false;\r\nfunction _ready(fn) {\r\n\tif (_readyFinished) {\r\n\t\tfn(KindEditor);\r\n\t\treturn;\r\n\t}\r\n\tvar loaded = false;\r\n\tfunction readyFunc() {\r\n\t\tif (!loaded) {\r\n\t\t\tloaded = true;\r\n\t\t\tfn(KindEditor);\r\n\t\t\t_readyFinished = true;\r\n\t\t}\r\n\t}\r\n\tfunction ieReadyFunc() {\r\n\t\tif (!loaded) {\r\n\t\t\ttry {\r\n\t\t\t\tdocument.documentElement.doScroll('left');\r\n\t\t\t} catch(e) {\r\n\t\t\t\tsetTimeout(ieReadyFunc, 100);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\treadyFunc();\r\n\t\t}\r\n\t}\r\n\tfunction ieReadyStateFunc() {\r\n\t\tif (document.readyState === 'complete') {\r\n\t\t\treadyFunc();\r\n\t\t}\r\n\t}\r\n\tif (document.addEventListener) {\r\n\t\t_bind(document, 'DOMContentLoaded', readyFunc);\r\n\t} else if (document.attachEvent) {\r\n\t\t_bind(document, 'readystatechange', ieReadyStateFunc);\r\n\t\tvar toplevel = false;\r\n\t\ttry {\r\n\t\t\ttoplevel = window.frameElement == null;\r\n\t\t} catch(e) {}\r\n\t\tif (document.documentElement.doScroll && toplevel) {\r\n\t\t\tieReadyFunc();\r\n\t\t}\r\n\t}\r\n\t_bind(window, 'load', readyFunc);\r\n}\r\nif (window.attachEvent) {\r\n\twindow.attachEvent('onunload', function() {\r\n\t\t_each(_eventData, function(key, events) {\r\n\t\t\tif (events.el) {\r\n\t\t\t\t_unbind(events.el);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\nK.ctrl = _ctrl;\r\nK.ready = _ready;\r\n\nfunction _getCssList(css) {\r\n\tvar list = {},\r\n\t\treg = /\\s*([\\w\\-]+)\\s*:([^;]*)(;|$)/g,\r\n\t\tmatch;\r\n\twhile ((match = reg.exec(css))) {\r\n\t\tvar key = _trim(match[1].toLowerCase()),\r\n\t\t\tval = _trim(_toHex(match[2]));\r\n\t\tlist[key] = val;\r\n\t}\r\n\treturn list;\r\n}\r\nfunction _getAttrList(tag) {\r\n\tvar list = {},\r\n\t\treg = /\\s+(?:([\\w\\-:]+)|(?:([\\w\\-:]+)=([^\\s\"'<>]+))|(?:([\\w\\-:\"]+)=\"([^\"]*)\")|(?:([\\w\\-:\"]+)='([^']*)'))(?=(?:\\s|\\/|>)+)/g,\r\n\t\tmatch;\r\n\twhile ((match = reg.exec(tag))) {\r\n\t\tvar key = (match[1] || match[2] || match[4] || match[6]).toLowerCase(),\r\n\t\t\tval = (match[2] ? match[3] : (match[4] ? match[5] : match[7])) || '';\r\n\t\tlist[key] = val;\r\n\t}\r\n\treturn list;\r\n}\r\nfunction _addClassToTag(tag, className) {\r\n\tif (/\\s+class\\s*=/.test(tag)) {\r\n\t\ttag = tag.replace(/(\\s+class=[\"']?)([^\"']*)([\"']?[\\s>])/, function($0, $1, $2, $3) {\r\n\t\t\tif ((' ' + $2 + ' ').indexOf(' ' + className + ' ') < 0) {\r\n\t\t\t\treturn $2 === '' ? $1 + className + $3 : $1 + $2 + ' ' + className + $3;\r\n\t\t\t} else {\r\n\t\t\t\treturn $0;\r\n\t\t\t}\r\n\t\t});\r\n\t} else {\r\n\t\ttag = tag.substr(0, tag.length - 1) + ' class=\"' + className + '\">';\r\n\t}\r\n\treturn tag;\r\n}\r\nfunction _formatCss(css) {\r\n\tvar str = '';\r\n\t_each(_getCssList(css), function(key, val) {\r\n\t\tstr += key + ':' + val + ';';\r\n\t});\r\n\treturn str;\r\n}\r\nfunction _formatUrl(url, mode, host, pathname) {\r\n\tmode = _undef(mode, '').toLowerCase();\r\n\tif (url.substr(0, 5) != 'data:') {\r\n\t\turl = url.replace(/([^:])\\/\\//g, '$1/');\r\n\t}\r\n\tif (_inArray(mode, ['absolute', 'relative', 'domain']) < 0) {\r\n\t\treturn url;\r\n\t}\r\n\thost = host || location.protocol + '//' + location.host;\r\n\tif (pathname === undefined) {\r\n\t\tvar m = location.pathname.match(/^(\\/.*)\\//);\r\n\t\tpathname = m ? m[1] : '';\r\n\t}\r\n\tvar match;\r\n\tif ((match = /^(\\w+:\\/\\/[^\\/]*)/.exec(url))) {\r\n\t\tif (match[1] !== host) {\r\n\t\t\treturn url;\r\n\t\t}\r\n\t} else if (/^\\w+:/.test(url)) {\r\n\t\treturn url;\r\n\t}\r\n\tfunction getRealPath(path) {\r\n\t\tvar parts = path.split('/'), paths = [];\r\n\t\tfor (var i = 0, len = parts.length; i < len; i++) {\r\n\t\t\tvar part = parts[i];\r\n\t\t\tif (part == '..') {\r\n\t\t\t\tif (paths.length > 0) {\r\n\t\t\t\t\tpaths.pop();\r\n\t\t\t\t}\r\n\t\t\t} else if (part !== '' && part != '.') {\r\n\t\t\t\tpaths.push(part);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn '/' + paths.join('/');\r\n\t}\r\n\tif (/^\\//.test(url)) {\r\n\t\turl = host + getRealPath(url.substr(1));\r\n\t} else if (!/^\\w+:\\/\\//.test(url)) {\r\n\t\turl = host + getRealPath(pathname + '/' + url);\r\n\t}\r\n\tfunction getRelativePath(path, depth) {\r\n\t\tif (url.substr(0, path.length) === path) {\r\n\t\t\tvar arr = [];\r\n\t\t\tfor (var i = 0; i < depth; i++) {\r\n\t\t\t\tarr.push('..');\r\n\t\t\t}\r\n\t\t\tvar prefix = '.';\r\n\t\t\tif (arr.length > 0) {\r\n\t\t\t\tprefix += '/' + arr.join('/');\r\n\t\t\t}\r\n\t\t\tif (pathname == '/') {\r\n\t\t\t\tprefix += '/';\r\n\t\t\t}\r\n\t\t\treturn prefix + url.substr(path.length);\r\n\t\t} else {\r\n\t\t\tif ((match = /^(.*)\\//.exec(path))) {\r\n\t\t\t\treturn getRelativePath(match[1], ++depth);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (mode === 'relative') {\r\n\t\turl = getRelativePath(host + pathname, 0).substr(2);\r\n\t} else if (mode === 'absolute') {\r\n\t\tif (url.substr(0, host.length) === host) {\r\n\t\t\turl = url.substr(host.length);\r\n\t\t}\r\n\t}\r\n\treturn url;\r\n}\r\nfunction _formatHtml(html, htmlTags, urlType, wellFormatted, indentChar) {\r\n\tif (html == null) {\r\n\t\thtml = '';\r\n\t}\r\n\turlType = urlType || '';\r\n\twellFormatted = _undef(wellFormatted, false);\r\n\tindentChar = _undef(indentChar, '\\t');\r\n\tvar fontSizeList = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\r\n\thtml = html.replace(/(<(?:pre|pre\\s[^>]*)>)([\\s\\S]*?)(<\\/pre>)/ig, function($0, $1, $2, $3) {\r\n\t\treturn $1 + $2.replace(/<(?:br|br\\s[^>]*)>/ig, '\\n') + $3;\r\n\t});\r\n\thtml = html.replace(/<(?:br|br\\s[^>]*)\\s*\\/?>\\s*<\\/p>/ig, '</p>');\r\n\thtml = html.replace(/(<(?:p|p\\s[^>]*)>)\\s*(<\\/p>)/ig, '$1<br />$2');\r\n\thtml = html.replace(/\\u200B/g, '');\r\n\thtml = html.replace(/\\u00A9/g, '&copy;');\r\n\thtml = html.replace(/\\u00AE/g, '&reg;');\r\n\thtml = html.replace(/\\u2003/g, '&emsp;');\r\n\thtml = html.replace(/\\u3000/g, '&emsp;');\r\n\thtml = html.replace(/<[^>]+/g, function($0) {\r\n\t\treturn $0.replace(/\\s+/g, ' ');\r\n\t});\r\n\tvar htmlTagMap = {};\r\n\tif (htmlTags) {\r\n\t\t_each(htmlTags, function(key, val) {\r\n\t\t\tvar arr = key.split(',');\r\n\t\t\tfor (var i = 0, len = arr.length; i < len; i++) {\r\n\t\t\t\thtmlTagMap[arr[i]] = _toMap(val);\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!htmlTagMap.script) {\r\n\t\t\thtml = html.replace(/(<(?:script|script\\s[^>]*)>)([\\s\\S]*?)(<\\/script>)/ig, '');\r\n\t\t}\r\n\t\tif (!htmlTagMap.style) {\r\n\t\t\thtml = html.replace(/(<(?:style|style\\s[^>]*)>)([\\s\\S]*?)(<\\/style>)/ig, '');\r\n\t\t}\r\n\t}\r\n\tvar re = /(\\s*)<(\\/)?([\\w\\-:]+)((?:\\s+|(?:\\s+[\\w\\-:]+)|(?:\\s+[\\w\\-:]+=[^\\s\"'<>]+)|(?:\\s+[\\w\\-:\"]+=\"[^\"]*\")|(?:\\s+[\\w\\-:\"]+='[^']*'))*)(\\/)?>(\\s*)/g;\r\n\tvar tagStack = [];\r\n\thtml = html.replace(re, function($0, $1, $2, $3, $4, $5, $6) {\r\n\t\tvar full = $0,\r\n\t\t\tstartNewline = $1 || '',\r\n\t\t\tstartSlash = $2 || '',\r\n\t\t\ttagName = $3.toLowerCase(),\r\n\t\t\tattr = $4 || '',\r\n\t\t\tendSlash = $5 ? ' ' + $5 : '',\r\n\t\t\tendNewline = $6 || '';\r\n\t\tif (htmlTags && !htmlTagMap[tagName]) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\tif (endSlash === '' && _SINGLE_TAG_MAP[tagName]) {\r\n\t\t\tendSlash = ' /';\r\n\t\t}\r\n\t\tif (_INLINE_TAG_MAP[tagName]) {\r\n\t\t\tif (startNewline) {\r\n\t\t\t\tstartNewline = ' ';\r\n\t\t\t}\r\n\t\t\tif (endNewline) {\r\n\t\t\t\tendNewline = ' ';\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (_PRE_TAG_MAP[tagName]) {\r\n\t\t\tif (startSlash) {\r\n\t\t\t\tendNewline = '\\n';\r\n\t\t\t} else {\r\n\t\t\t\tstartNewline = '\\n';\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (wellFormatted && tagName == 'br') {\r\n\t\t\tendNewline = '\\n';\r\n\t\t}\r\n\t\tif (_BLOCK_TAG_MAP[tagName] && !_PRE_TAG_MAP[tagName]) {\r\n\t\t\tif (wellFormatted) {\r\n\t\t\t\tif (startSlash && tagStack.length > 0 && tagStack[tagStack.length - 1] === tagName) {\r\n\t\t\t\t\ttagStack.pop();\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttagStack.push(tagName);\r\n\t\t\t\t}\r\n\t\t\t\tstartNewline = '\\n';\r\n\t\t\t\tendNewline = '\\n';\r\n\t\t\t\tfor (var i = 0, len = startSlash ? tagStack.length : tagStack.length - 1; i < len; i++) {\r\n\t\t\t\t\tstartNewline += indentChar;\r\n\t\t\t\t\tif (!startSlash) {\r\n\t\t\t\t\t\tendNewline += indentChar;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (endSlash) {\r\n\t\t\t\t\ttagStack.pop();\r\n\t\t\t\t} else if (!startSlash) {\r\n\t\t\t\t\tendNewline += indentChar;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tstartNewline = endNewline = '';\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (attr !== '') {\r\n\t\t\tvar attrMap = _getAttrList(full);\r\n\t\t\tif (tagName === 'font') {\r\n\t\t\t\tvar fontStyleMap = {}, fontStyle = '';\r\n\t\t\t\t_each(attrMap, function(key, val) {\r\n\t\t\t\t\tif (key === 'color') {\r\n\t\t\t\t\t\tfontStyleMap.color = val;\r\n\t\t\t\t\t\tdelete attrMap[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (key === 'size') {\r\n\t\t\t\t\t\tfontStyleMap['font-size'] = fontSizeList[parseInt(val, 10) - 1] || '';\r\n\t\t\t\t\t\tdelete attrMap[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (key === 'face') {\r\n\t\t\t\t\t\tfontStyleMap['font-family'] = val;\r\n\t\t\t\t\t\tdelete attrMap[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (key === 'style') {\r\n\t\t\t\t\t\tfontStyle = val;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (fontStyle && !/;$/.test(fontStyle)) {\r\n\t\t\t\t\tfontStyle += ';';\r\n\t\t\t\t}\r\n\t\t\t\t_each(fontStyleMap, function(key, val) {\r\n\t\t\t\t\tif (val === '') {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (/\\s/.test(val)) {\r\n\t\t\t\t\t\tval = \"'\" + val + \"'\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfontStyle += key + ':' + val + ';';\r\n\t\t\t\t});\r\n\t\t\t\tattrMap.style = fontStyle;\r\n\t\t\t}\r\n\t\t\t_each(attrMap, function(key, val) {\r\n\t\t\t\tif (_FILL_ATTR_MAP[key]) {\r\n\t\t\t\t\tattrMap[key] = key;\r\n\t\t\t\t}\r\n\t\t\t\tif (_inArray(key, ['src', 'href']) >= 0) {\r\n\t\t\t\t\tattrMap[key] = _formatUrl(val, urlType);\r\n\t\t\t\t}\r\n\t\t\t\tif (htmlTags && key !== 'style' && !htmlTagMap[tagName]['*'] && !htmlTagMap[tagName][key] ||\r\n\t\t\t\t\ttagName === 'body' && key === 'contenteditable' ||\r\n\t\t\t\t\t/^kindeditor_\\d+$/.test(key)) {\r\n\t\t\t\t\tdelete attrMap[key];\r\n\t\t\t\t}\r\n\t\t\t\tif (key === 'style' && val !== '') {\r\n\t\t\t\t\tvar styleMap = _getCssList(val);\r\n\t\t\t\t\t_each(styleMap, function(k, v) {\r\n\t\t\t\t\t\tif (htmlTags && !htmlTagMap[tagName].style && !htmlTagMap[tagName]['.' + k]) {\r\n\t\t\t\t\t\t\tdelete styleMap[k];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar style = '';\r\n\t\t\t\t\t_each(styleMap, function(k, v) {\r\n\t\t\t\t\t\tstyle += k + ':' + v + ';';\r\n\t\t\t\t\t});\r\n\t\t\t\t\tattrMap.style = style;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tattr = '';\r\n\t\t\t_each(attrMap, function(key, val) {\r\n\t\t\t\tif (key === 'style' && val === '') {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tval = val.replace(/\"/g, '&quot;');\r\n\t\t\t\tattr += ' ' + key + '=\"' + val + '\"';\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (tagName === 'font') {\r\n\t\t\ttagName = 'span';\r\n\t\t}\r\n\t\treturn startNewline + '<' + startSlash + tagName + attr + endSlash + '>' + endNewline;\r\n\t});\r\n\thtml = html.replace(/(<(?:pre|pre\\s[^>]*)>)([\\s\\S]*?)(<\\/pre>)/ig, function($0, $1, $2, $3) {\r\n\t\treturn $1 + $2.replace(/\\n/g, '<span id=\"__kindeditor_pre_newline__\">\\n') + $3;\r\n\t});\r\n\thtml = html.replace(/\\n\\s*\\n/g, '\\n');\r\n\thtml = html.replace(/<span id=\"__kindeditor_pre_newline__\">\\n/g, '\\n');\r\n\treturn _trim(html);\r\n}\r\r\nfunction _clearMsWord(html, htmlTags) {\r\n\thtml = html.replace(/<meta[\\s\\S]*?>/ig, '')\r\n\t\t.replace(/<![\\s\\S]*?>/ig, '')\r\n\t\t.replace(/<style[^>]*>[\\s\\S]*?<\\/style>/ig, '')\r\n\t\t.replace(/<script[^>]*>[\\s\\S]*?<\\/script>/ig, '')\r\n\t\t.replace(/<w:[^>]+>[\\s\\S]*?<\\/w:[^>]+>/ig, '')\r\n\t\t.replace(/<o:[^>]+>[\\s\\S]*?<\\/o:[^>]+>/ig, '')\r\n\t\t.replace(/<xml>[\\s\\S]*?<\\/xml>/ig, '')\r\n\t\t.replace(/<(?:table|td)[^>]*>/ig, function(full) {\r\n\t\t\treturn full.replace(/border-bottom:([#\\w\\s]+)/ig, 'border:$1');\r\n\t\t});\r\n\treturn _formatHtml(html, htmlTags);\r\n}\r\r\nfunction _mediaType(src) {\r\n\tif (/\\.(rm|rmvb)(\\?|$)/i.test(src)) {\r\n\t\treturn 'audio/x-pn-realaudio-plugin';\r\n\t}\r\n\tif (/\\.(swf|flv)(\\?|$)/i.test(src)) {\r\n\t\treturn 'application/x-shockwave-flash';\r\n\t}\r\n\treturn 'video/x-ms-asf-plugin';\r\n}\r\r\nfunction _mediaClass(type) {\r\n\tif (/realaudio/i.test(type)) {\r\n\t\treturn 'ke-rm';\r\n\t}\r\n\tif (/flash/i.test(type)) {\r\n\t\treturn 'ke-flash';\r\n\t}\r\n\treturn 'ke-media';\r\n}\r\nfunction _mediaAttrs(srcTag) {\r\n\treturn _getAttrList(unescape(srcTag));\r\n}\r\nfunction _mediaEmbed(attrs) {\r\n\tvar html = '<embed ';\r\n\t_each(attrs, function(key, val) {\r\n\t\thtml += key + '=\"' + val + '\" ';\r\n\t});\r\n\thtml += '/>';\r\n\treturn html;\r\n}\r\nfunction _mediaImg(blankPath, attrs) {\r\n\tvar width = attrs.width,\r\n\t\theight = attrs.height,\r\n\t\ttype = attrs.type || _mediaType(attrs.src),\r\n\t\tsrcTag = _mediaEmbed(attrs),\r\n\t\tstyle = '';\r\n\tif (/\\D/.test(width)) {\r\n\t\tstyle += 'width:' + width + ';';\r\n\t} else if (width > 0) {\r\n\t\tstyle += 'width:' + width + 'px;';\r\n\t}\r\n\tif (/\\D/.test(height)) {\r\n\t\tstyle += 'height:' + height + ';';\r\n\t} else if (height > 0) {\r\n\t\tstyle += 'height:' + height + 'px;';\r\n\t}\r\n\tvar html = '<img class=\"' + _mediaClass(type) + '\" src=\"' + blankPath + '\" ';\r\n\tif (style !== '') {\r\n\t\thtml += 'style=\"' + style + '\" ';\r\n\t}\r\n\thtml += 'data-ke-tag=\"' + escape(srcTag) + '\" alt=\"\" />';\r\n\treturn html;\r\n}\r\n\r\r\r\r\nfunction _tmpl(str, data) {\r\n\tvar fn = new Function(\"obj\",\r\n\t\t\"var p=[],print=function(){p.push.apply(p,arguments);};\" +\r\n\t\t\"with(obj){p.push('\" +\r\n\t\tstr.replace(/[\\r\\t\\n]/g, \" \")\r\n\t\t\t.split(\"<%\").join(\"\\t\")\r\n\t\t\t.replace(/((^|%>)[^\\t]*)'/g, \"$1\\r\")\r\n\t\t\t.replace(/\\t=(.*?)%>/g, \"',$1,'\")\r\n\t\t\t.split(\"\\t\").join(\"');\")\r\n\t\t\t.split(\"%>\").join(\"p.push('\")\r\n\t\t\t.split(\"\\r\").join(\"\\\\'\") + \"');}return p.join('');\");\r\n\treturn data ? fn(data) : fn;\r\n}\r\nK.formatUrl = _formatUrl;\r\nK.formatHtml = _formatHtml;\r\nK.getCssList = _getCssList;\r\nK.getAttrList = _getAttrList;\r\nK.mediaType = _mediaType;\r\nK.mediaAttrs = _mediaAttrs;\r\nK.mediaEmbed = _mediaEmbed;\r\nK.mediaImg = _mediaImg;\r\nK.clearMsWord = _clearMsWord;\r\nK.tmpl = _tmpl;\r\n\n\r\nfunction _contains(nodeA, nodeB) {\r\n\tif (nodeA.nodeType == 9 && nodeB.nodeType != 9) {\r\n\t\treturn true;\r\n\t}\r\n\twhile ((nodeB = nodeB.parentNode)) {\r\n\t\tif (nodeB == nodeA) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\nvar _getSetAttrDiv = document.createElement('div');\r\n_getSetAttrDiv.setAttribute('className', 't');\r\nvar _GET_SET_ATTRIBUTE = _getSetAttrDiv.className !== 't';\r\nfunction _getAttr(el, key) {\r\n\tkey = key.toLowerCase();\r\n\tvar val = null;\r\n\tif (!_GET_SET_ATTRIBUTE && el.nodeName.toLowerCase() != 'script') {\r\n\t\tvar div = el.ownerDocument.createElement('div');\r\n\t\tdiv.appendChild(el.cloneNode(false));\r\n\t\tvar list = _getAttrList(_unescape(div.innerHTML));\r\n\t\tif (key in list) {\r\n\t\t\tval = list[key];\r\n\t\t}\r\n\t} else {\r\n\t\ttry {\r\n\t\t\tval = el.getAttribute(key, 2);\r\n\t\t} catch(e) {\r\n\t\t\tval = el.getAttribute(key, 1);\r\n\t\t}\r\n\t}\r\n\tif (key === 'style' && val !== null) {\r\n\t\tval = _formatCss(val);\r\n\t}\r\n\treturn val;\r\n}\r\nfunction _queryAll(expr, root) {\r\n\tvar exprList = expr.split(',');\r\n\tif (exprList.length > 1) {\r\n\t\tvar mergedResults = [];\r\n\t\t_each(exprList, function() {\r\n\t\t\t_each(_queryAll(this, root), function() {\r\n\t\t\t\tif (_inArray(this, mergedResults) < 0) {\r\n\t\t\t\t\tmergedResults.push(this);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\treturn mergedResults;\r\n\t}\r\n\troot = root || document;\r\n\tfunction escape(str) {\r\n\t\tif (typeof str != 'string') {\r\n\t\t\treturn str;\r\n\t\t}\r\n\t\treturn str.replace(/([^\\w\\-])/g, '\\\\$1');\r\n\t}\r\n\tfunction stripslashes(str) {\r\n\t\treturn str.replace(/\\\\/g, '');\r\n\t}\r\n\tfunction cmpTag(tagA, tagB) {\r\n\t\treturn tagA === '*' || tagA.toLowerCase() === escape(tagB.toLowerCase());\r\n\t}\r\n\tfunction byId(id, tag, root) {\r\n\t\tvar arr = [],\r\n\t\t\tdoc = root.ownerDocument || root,\r\n\t\t\tel = doc.getElementById(stripslashes(id));\r\n\t\tif (el) {\r\n\t\t\tif (cmpTag(tag, el.nodeName) && _contains(root, el)) {\r\n\t\t\t\tarr.push(el);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn arr;\r\n\t}\r\n\tfunction byClass(className, tag, root) {\r\n\t\tvar doc = root.ownerDocument || root, arr = [], els, i, len, el;\r\n\t\tif (root.getElementsByClassName) {\r\n\t\t\tels = root.getElementsByClassName(stripslashes(className));\r\n\t\t\tfor (i = 0, len = els.length; i < len; i++) {\r\n\t\t\t\tel = els[i];\r\n\t\t\t\tif (cmpTag(tag, el.nodeName)) {\r\n\t\t\t\t\tarr.push(el);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (doc.querySelectorAll) {\r\n\t\t\tels = doc.querySelectorAll((root.nodeName !== '#document' ? root.nodeName + ' ' : '') + tag + '.' + className);\r\n\t\t\tfor (i = 0, len = els.length; i < len; i++) {\r\n\t\t\t\tel = els[i];\r\n\t\t\t\tif (_contains(root, el)) {\r\n\t\t\t\t\tarr.push(el);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tels = root.getElementsByTagName(tag);\r\n\t\t\tclassName = ' ' + className + ' ';\r\n\t\t\tfor (i = 0, len = els.length; i < len; i++) {\r\n\t\t\t\tel = els[i];\r\n\t\t\t\tif (el.nodeType == 1) {\r\n\t\t\t\t\tvar cls = el.className;\r\n\t\t\t\t\tif (cls && (' ' + cls + ' ').indexOf(className) > -1) {\r\n\t\t\t\t\t\tarr.push(el);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn arr;\r\n\t}\r\n\tfunction byName(name, tag, root) {\r\n\t\tvar arr = [], doc = root.ownerDocument || root,\r\n\t\t\tels = doc.getElementsByName(stripslashes(name)), el;\r\n\t\tfor (var i = 0, len = els.length; i < len; i++) {\r\n\t\t\tel = els[i];\r\n\t\t\tif (cmpTag(tag, el.nodeName) && _contains(root, el)) {\r\n\t\t\t\tif (el.getAttribute('name') !== null) {\r\n\t\t\t\t\tarr.push(el);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn arr;\r\n\t}\r\n\tfunction byAttr(key, val, tag, root) {\r\n\t\tvar arr = [], els = root.getElementsByTagName(tag), el;\r\n\t\tfor (var i = 0, len = els.length; i < len; i++) {\r\n\t\t\tel = els[i];\r\n\t\t\tif (el.nodeType == 1) {\r\n\t\t\t\tif (val === null) {\r\n\t\t\t\t\tif (_getAttr(el, key) !== null) {\r\n\t\t\t\t\t\tarr.push(el);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (val === escape(_getAttr(el, key))) {\r\n\t\t\t\t\t\tarr.push(el);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn arr;\r\n\t}\r\n\tfunction select(expr, root) {\r\n\t\tvar arr = [], matches;\r\n\t\tmatches = /^((?:\\\\.|[^.#\\s\\[<>])+)/.exec(expr);\r\n\t\tvar tag = matches ? matches[1] : '*';\r\n\t\tif ((matches = /#((?:[\\w\\-]|\\\\.)+)$/.exec(expr))) {\r\n\t\t\tarr = byId(matches[1], tag, root);\r\n\t\t} else if ((matches = /\\.((?:[\\w\\-]|\\\\.)+)$/.exec(expr))) {\r\n\t\t\tarr = byClass(matches[1], tag, root);\r\n\t\t} else if ((matches = /\\[((?:[\\w\\-]|\\\\.)+)\\]/.exec(expr))) {\r\n\t\t\tarr = byAttr(matches[1].toLowerCase(), null, tag, root);\r\n\t\t} else if ((matches = /\\[((?:[\\w\\-]|\\\\.)+)\\s*=\\s*['\"]?((?:\\\\.|[^'\"]+)+)['\"]?\\]/.exec(expr))) {\r\n\t\t\tvar key = matches[1].toLowerCase(), val = matches[2];\r\n\t\t\tif (key === 'id') {\r\n\t\t\t\tarr = byId(val, tag, root);\r\n\t\t\t} else if (key === 'class') {\r\n\t\t\t\tarr = byClass(val, tag, root);\r\n\t\t\t} else if (key === 'name') {\r\n\t\t\t\tarr = byName(val, tag, root);\r\n\t\t\t} else {\r\n\t\t\t\tarr = byAttr(key, val, tag, root);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar els = root.getElementsByTagName(tag), el;\r\n\t\t\tfor (var i = 0, len = els.length; i < len; i++) {\r\n\t\t\t\tel = els[i];\r\n\t\t\t\tif (el.nodeType == 1) {\r\n\t\t\t\t\tarr.push(el);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn arr;\r\n\t}\r\n\tvar parts = [], arr, re = /((?:\\\\.|[^\\s>])+|[\\s>])/g;\r\n\twhile ((arr = re.exec(expr))) {\r\n\t\tif (arr[1] !== ' ') {\r\n\t\t\tparts.push(arr[1]);\r\n\t\t}\r\n\t}\r\n\tvar results = [];\r\n\tif (parts.length == 1) {\r\n\t\treturn select(parts[0], root);\r\n\t}\r\n\tvar isChild = false, part, els, subResults, val, v, i, j, k, length, len, l;\r\n\tfor (i = 0, lenth = parts.length; i < lenth; i++) {\r\n\t\tpart = parts[i];\r\n\t\tif (part === '>') {\r\n\t\t\tisChild = true;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif (i > 0) {\r\n\t\t\tels = [];\r\n\t\t\tfor (j = 0, len = results.length; j < len; j++) {\r\n\t\t\t\tval = results[j];\r\n\t\t\t\tsubResults = select(part, val);\r\n\t\t\t\tfor (k = 0, l = subResults.length; k < l; k++) {\r\n\t\t\t\t\tv = subResults[k];\r\n\t\t\t\t\tif (isChild) {\r\n\t\t\t\t\t\tif (val === v.parentNode) {\r\n\t\t\t\t\t\t\tels.push(v);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tels.push(v);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresults = els;\r\n\t\t} else {\r\n\t\t\tresults = select(part, root);\r\n\t\t}\r\n\t\tif (results.length === 0) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\treturn results;\r\n}\r\nfunction _query(expr, root) {\r\n\tvar arr = _queryAll(expr, root);\r\n\treturn arr.length > 0 ? arr[0] : null;\r\n}\r\nK.query = _query;\r\nK.queryAll = _queryAll;\r\n\n\r\nfunction _get(val) {\r\n\treturn K(val)[0];\r\n}\r\nfunction _getDoc(node) {\r\n\tif (!node) {\r\n\t\treturn document;\r\n\t}\r\n\treturn node.ownerDocument || node.document || node;\r\n}\r\nfunction _getWin(node) {\r\n\tif (!node) {\r\n\t\treturn window;\r\n\t}\r\n\tvar doc = _getDoc(node);\r\n\treturn doc.parentWindow || doc.defaultView;\r\n}\r\nfunction _setHtml(el, html) {\r\n\tif (el.nodeType != 1) {\r\n\t\treturn;\r\n\t}\r\n\tvar doc = _getDoc(el);\r\n\ttry {\r\n\t\tel.innerHTML = '<img id=\"__kindeditor_temp_tag__\" width=\"0\" height=\"0\" style=\"display:none;\" />' + html;\r\n\t\tvar temp = doc.getElementById('__kindeditor_temp_tag__');\r\n\t\ttemp.parentNode.removeChild(temp);\r\n\t} catch(e) {\r\n\t\tK(el).empty();\r\n\t\tK('@' + html, doc).each(function() {\r\n\t\t\tel.appendChild(this);\r\n\t\t});\r\n\t}\r\n}\r\nfunction _hasClass(el, cls) {\r\n\treturn _inString(cls, el.className, ' ');\r\n}\r\nfunction _setAttr(el, key, val) {\r\n\tif (_IE && _V < 8 && key.toLowerCase() == 'class') {\r\n\t\tkey = 'className';\r\n\t}\r\n\tel.setAttribute(key, '' + val);\r\n}\r\nfunction _removeAttr(el, key) {\r\n\tif (_IE && _V < 8 && key.toLowerCase() == 'class') {\r\n\t\tkey = 'className';\r\n\t}\r\n\t_setAttr(el, key, '');\r\n\tel.removeAttribute(key);\r\n}\r\nfunction _getNodeName(node) {\r\n\tif (!node || !node.nodeName) {\r\n\t\treturn '';\r\n\t}\r\n\treturn node.nodeName.toLowerCase();\r\n}\r\nfunction _computedCss(el, key) {\r\n\tvar self = this, win = _getWin(el), camelKey = _toCamel(key), val = '';\r\n\tif (win.getComputedStyle) {\r\n\t\tvar style = win.getComputedStyle(el, null);\r\n\t\tval = style[camelKey] || style.getPropertyValue(key) || el.style[camelKey];\r\n\t} else if (el.currentStyle) {\r\n\t\tval = el.currentStyle[camelKey] || el.style[camelKey];\r\n\t}\r\n\treturn val;\r\n}\r\nfunction _hasVal(node) {\r\n\treturn !!_VALUE_TAG_MAP[_getNodeName(node)];\r\n}\r\nfunction _docElement(doc) {\r\n\tdoc = doc || document;\r\n\treturn _QUIRKS ? doc.body : doc.documentElement;\r\n}\r\nfunction _docHeight(doc) {\r\n\tvar el = _docElement(doc);\r\n\treturn Math.max(el.scrollHeight, el.clientHeight);\r\n}\r\nfunction _docWidth(doc) {\r\n\tvar el = _docElement(doc);\r\n\treturn Math.max(el.scrollWidth, el.clientWidth);\r\n}\r\nfunction _getScrollPos(doc) {\r\n\tdoc = doc || document;\r\n\tvar x, y;\r\n\tif (_IE || _NEWIE || _OPERA) {\r\n\t\tx = _docElement(doc).scrollLeft;\r\n\t\ty = _docElement(doc).scrollTop;\r\n\t} else {\r\n\t\tx = _getWin(doc).scrollX;\r\n\t\ty = _getWin(doc).scrollY;\r\n\t}\r\n\treturn {x : x, y : y};\r\n}\r\n\r\r\nfunction KNode(node) {\r\n\tthis.init(node);\r\n}\r\n_extend(KNode, {\r\n\tinit : function(node) {\r\n\t\tvar self = this;\r\n\t\tnode = _isArray(node) ? node : [node];\r\n\t\tvar length = 0;\r\n\t\tfor (var i = 0, len = node.length; i < len; i++) {\r\n\t\t\tif (node[i]) {\r\n\t\t\t\tself[i] = node[i].constructor === KNode ? node[i][0] : node[i];\r\n\t\t\t\tlength++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tself.length = length;\r\n\t\tself.doc = _getDoc(self[0]);\r\n\t\tself.name = _getNodeName(self[0]);\r\n\t\tself.type = self.length > 0 ? self[0].nodeType : null;\r\n\t\tself.win = _getWin(self[0]);\r\n\t},\r\n\teach : function(fn) {\r\n\t\tvar self = this;\r\n\t\tfor (var i = 0; i < self.length; i++) {\r\n\t\t\tif (fn.call(self[i], i, self[i]) === false) {\r\n\t\t\t\treturn self;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn self;\r\n\t},\r\n\tbind : function(type, fn) {\r\n\t\tthis.each(function() {\r\n\t\t\t_bind(this, type, fn);\r\n\t\t});\r\n\t\treturn this;\r\n\t},\r\n\tunbind : function(type, fn) {\r\n\t\tthis.each(function() {\r\n\t\t\t_unbind(this, type, fn);\r\n\t\t});\r\n\t\treturn this;\r\n\t},\r\n\tfire : function(type) {\r\n\t\tif (this.length < 1) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t_fire(this[0], type);\r\n\t\treturn this;\r\n\t},\r\n\thasAttr : function(key) {\r\n\t\tif (this.length < 1) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn !!_getAttr(this[0], key);\r\n\t},\r\n\tattr : function(key, val) {\r\n\t\tvar self = this;\r\n\t\tif (key === undefined) {\r\n\t\t\treturn _getAttrList(self.outer());\r\n\t\t}\r\n\t\tif (typeof key === 'object') {\r\n\t\t\t_each(key, function(k, v) {\r\n\t\t\t\tself.attr(k, v);\r\n\t\t\t});\r\n\t\t\treturn self;\r\n\t\t}\r\n\t\tif (val === undefined) {\r\n\t\t\tval = self.length < 1 ? null : _getAttr(self[0], key);\r\n\t\t\treturn val === null ? '' : val;\r\n\t\t}\r\n\t\tself.each(function() {\r\n\t\t\t_setAttr(this, key, val);\r\n\t\t});\r\n\t\treturn self;\r\n\t},\r\n\tremoveAttr : function(key) {\r\n\t\tthis.each(function() {\r\n\t\t\t_removeAttr(this, key);\r\n\t\t});\r\n\t\treturn this;\r\n\t},\r\n\tget : function(i) {\r\n\t\tif (this.length < 1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn this[i || 0];\r\n\t},\r\n\teq : function(i) {\r\n\t\tif (this.length < 1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn this[i] ? new KNode(this[i]) : null;\r\n\t},\r\n\thasClass : function(cls) {\r\n\t\tif (this.length < 1) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn _hasClass(this[0], cls);\r\n\t},\r\n\taddClass : function(cls) {\r\n\t\tthis.each(function() {\r\n\t\t\tif (!_hasClass(this, cls)) {\r\n\t\t\t\tthis.className = _trim(this.className + ' ' + cls);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn this;\r\n\t},\r\n\tremoveClass : function(cls) {\r\n\t\tthis.each(function() {\r\n\t\t\tif (_hasClass(this, cls)) {\r\n\t\t\t\tthis.className = _trim(this.className.replace(new RegExp('(^|\\\\s)' + cls + '(\\\\s|$)'), ' '));\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn this;\r\n\t},\r\n\thtml : function(val) {\r\n\t\tvar self = this;\r\n\t\tif (val === undefined) {\r\n\t\t\tif (self.length < 1 || self.type != 1) {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t\treturn _formatHtml(self[0].innerHTML);\r\n\t\t}\r\n\t\tself.each(function() {\r\n\t\t\t_setHtml(this, val);\r\n\t\t});\r\n\t\treturn self;\r\n\t},\r\n\ttext : function() {\r\n\t\tvar self = this;\r\n\t\tif (self.length < 1) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\treturn _IE ? self[0].innerText : self[0].textContent;\r\n\t},\r\n\thasVal : function() {\r\n\t\tif (this.length < 1) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn _hasVal(this[0]);\r\n\t},\r\n\tval : function(val) {\r\n\t\tvar self = this;\r\n\t\tif (val === undefined) {\r\n\t\t\tif (self.length < 1) {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t\treturn self.hasVal() ? self[0].value : self.attr('value');\r\n\t\t} else {\r\n\t\t\tself.each(function() {\r\n\t\t\t\tif (_hasVal(this)) {\r\n\t\t\t\t\tthis.value = val;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_setAttr(this, 'value' , val);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn self;\r\n\t\t}\r\n\t},\r\n\tcss : function(key, val) {\r\n\t\tvar self = this;\r\n\t\tif (key === undefined) {\r\n\t\t\treturn _getCssList(self.attr('style'));\r\n\t\t}\r\n\t\tif (typeof key === 'object') {\r\n\t\t\t_each(key, function(k, v) {\r\n\t\t\t\tself.css(k, v);\r\n\t\t\t});\r\n\t\t\treturn self;\r\n\t\t}\r\n\t\tif (val === undefined) {\r\n\t\t\tif (self.length < 1) {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t\treturn self[0].style[_toCamel(key)] || _computedCss(self[0], key) || '';\r\n\t\t}\r\n\t\tself.each(function() {\r\n\t\t\tthis.style[_toCamel(key)] = val;\r\n\t\t});\r\n\t\treturn self;\r\n\t},\r\n\twidth : function(val) {\r\n\t\tvar self = this;\r\n\t\tif (val === undefined) {\r\n\t\t\tif (self.length < 1) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\treturn self[0].offsetWidth;\r\n\t\t}\r\n\t\treturn self.css('width', _addUnit(val));\r\n\t},\r\n\theight : function(val) {\r\n\t\tvar self = this;\r\n\t\tif (val === undefined) {\r\n\t\t\tif (self.length < 1) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\treturn self[0].offsetHeight;\r\n\t\t}\r\n\t\treturn self.css('height', _addUnit(val));\r\n\t},\r\n\topacity : function(val) {\r\n\t\tthis.each(function() {\r\n\t\t\tif (this.style.opacity === undefined) {\r\n\t\t\t\tthis.style.filter = val == 1 ? '' : 'alpha(opacity=' + (val * 100) + ')';\r\n\t\t\t} else {\r\n\t\t\t\tthis.style.opacity = val == 1 ? '' : val;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn this;\r\n\t},\r\n\tdata : function(key, val) {\r\n\t\tvar self = this;\r\n\t\tkey = 'kindeditor_data_' + key;\r\n\t\tif (val === undefined) {\r\n\t\t\tif (self.length < 1) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn self[0][key];\r\n\t\t}\r\n\t\tthis.each(function() {\r\n\t\t\tthis[key] = val;\r\n\t\t});\r\n\t\treturn self;\r\n\t},\r\n\tpos : function() {\r\n\t\tvar self = this, node = self[0], x = 0, y = 0;\r\n\t\tif (node) {\r\n\t\t\tif (node.getBoundingClientRect) {\r\n\t\t\t\tvar box = node.getBoundingClientRect(),\r\n\t\t\t\t\tpos = _getScrollPos(self.doc);\r\n\t\t\t\tx = box.left + pos.x;\r\n\t\t\t\ty = box.top + pos.y;\r\n\t\t\t} else {\r\n\t\t\t\twhile (node) {\r\n\t\t\t\t\tx += node.offsetLeft;\r\n\t\t\t\t\ty += node.offsetTop;\r\n\t\t\t\t\tnode = node.offsetParent;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {x : _round(x), y : _round(y)};\r\n\t},\r\n\tclone : function(bool) {\r\n\t\tif (this.length < 1) {\r\n\t\t\treturn new KNode([]);\r\n\t\t}\r\n\t\treturn new KNode(this[0].cloneNode(bool));\r\n\t},\r\n\tappend : function(expr) {\r\n\t\tthis.each(function() {\r\n\t\t\tif (this.appendChild) {\r\n\t\t\t\tthis.appendChild(_get(expr));\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn this;\r\n\t},\r\n\tappendTo : function(expr) {\r\n\t\tthis.each(function() {\r\n\t\t\t_get(expr).appendChild(this);\r\n\t\t});\r\n\t\treturn this;\r\n\t},\r\n\tbefore : function(expr) {\r\n\t\tthis.each(function() {\r\n\t\t\tthis.parentNode.insertBefore(_get(expr), this);\r\n\t\t});\r\n\t\treturn this;\r\n\t},\r\n\tafter : function(expr) {\r\n\t\tthis.each(function() {\r\n\t\t\tif (this.nextSibling) {\r\n\t\t\t\tthis.parentNode.insertBefore(_get(expr), this.nextSibling);\r\n\t\t\t} else {\r\n\t\t\t\tthis.parentNode.appendChild(_get(expr));\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn this;\r\n\t},\r\n\treplaceWith : function(expr) {\r\n\t\tvar nodes = [];\r\n\t\tthis.each(function(i, node) {\r\n\t\t\t_unbind(node);\r\n\t\t\tvar newNode = _get(expr);\r\n\t\t\tnode.parentNode.replaceChild(newNode, node);\r\n\t\t\tnodes.push(newNode);\r\n\t\t});\r\n\t\treturn K(nodes);\r\n\t},\r\n\tempty : function() {\r\n\t\tvar self = this;\r\n\t\tself.each(function(i, node) {\r\n\t\t\tvar child = node.firstChild;\r\n\t\t\twhile (child) {\r\n\t\t\t\tif (!node.parentNode) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar next = child.nextSibling;\r\n\t\t\t\tchild.parentNode.removeChild(child);\r\n\t\t\t\tchild = next;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn self;\r\n\t},\r\n\tremove : function(keepChilds) {\r\n\t\tvar self = this;\r\n\t\tself.each(function(i, node) {\r\n\t\t\tif (!node.parentNode) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_unbind(node);\r\n\t\t\tif (keepChilds) {\r\n\t\t\t\tvar child = node.firstChild;\r\n\t\t\t\twhile (child) {\r\n\t\t\t\t\tvar next = child.nextSibling;\r\n\t\t\t\t\tnode.parentNode.insertBefore(child, node);\r\n\t\t\t\t\tchild = next;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tdelete self[i];\r\n\t\t});\r\n\t\tself.length = 0;\r\n\t\treturn self;\r\n\t},\r\n\tshow : function(val) {\r\n\t\tvar self = this;\r\n\t\tif (val === undefined) {\r\n\t\t\tval = self._originDisplay || '';\r\n\t\t}\r\n\t\tif (self.css('display') != 'none') {\r\n\t\t\treturn self;\r\n\t\t}\r\n\t\treturn self.css('display', val);\r\n\t},\r\n\thide : function() {\r\n\t\tvar self = this;\r\n\t\tif (self.length < 1) {\r\n\t\t\treturn self;\r\n\t\t}\r\n\t\tself._originDisplay = self[0].style.display;\r\n\t\treturn self.css('display', 'none');\r\n\t},\r\n\touter : function() {\r\n\t\tvar self = this;\r\n\t\tif (self.length < 1) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\tvar div = self.doc.createElement('div'), html;\r\n\t\tdiv.appendChild(self[0].cloneNode(true));\r\n\t\thtml = _formatHtml(div.innerHTML);\r\n\t\tdiv = null;\r\n\t\treturn html;\r\n\t},\r\n\tisSingle : function() {\r\n\t\treturn !!_SINGLE_TAG_MAP[this.name];\r\n\t},\r\n\tisInline : function() {\r\n\t\treturn !!_INLINE_TAG_MAP[this.name];\r\n\t},\r\n\tisBlock : function() {\r\n\t\treturn !!_BLOCK_TAG_MAP[this.name];\r\n\t},\r\n\tisStyle : function() {\r\n\t\treturn !!_STYLE_TAG_MAP[this.name];\r\n\t},\r\n\tisControl : function() {\r\n\t\treturn !!_CONTROL_TAG_MAP[this.name];\r\n\t},\r\n\tcontains : function(otherNode) {\r\n\t\tif (this.length < 1) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn _contains(this[0], _get(otherNode));\r\n\t},\r\n\tparent : function() {\r\n\t\tif (this.length < 1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar node = this[0].parentNode;\r\n\t\treturn node ? new KNode(node) : null;\r\n\t},\r\n\tchildren : function() {\r\n\t\tif (this.length < 1) {\r\n\t\t\treturn new KNode([]);\r\n\t\t}\r\n\t\tvar list = [], child = this[0].firstChild;\r\n\t\twhile (child) {\r\n\t\t\tif (child.nodeType != 3 || _trim(child.nodeValue) !== '') {\r\n\t\t\t\tlist.push(child);\r\n\t\t\t}\r\n\t\t\tchild = child.nextSibling;\r\n\t\t}\r\n\t\treturn new KNode(list);\r\n\t},\r\n\tfirst : function() {\r\n\t\tvar list = this.children();\r\n\t\treturn list.length > 0 ? list.eq(0) : null;\r\n\t},\r\n\tlast : function() {\r\n\t\tvar list = this.children();\r\n\t\treturn list.length > 0 ? list.eq(list.length - 1) : null;\r\n\t},\r\n\tindex : function() {\r\n\t\tif (this.length < 1) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tvar i = -1, sibling = this[0];\r\n\t\twhile (sibling) {\r\n\t\t\ti++;\r\n\t\t\tsibling = sibling.previousSibling;\r\n\t\t}\r\n\t\treturn i;\r\n\t},\r\n\tprev : function() {\r\n\t\tif (this.length < 1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar node = this[0].previousSibling;\r\n\t\treturn node ? new KNode(node) : null;\r\n\t},\r\n\tnext : function() {\r\n\t\tif (this.length < 1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar node = this[0].nextSibling;\r\n\t\treturn node ? new KNode(node) : null;\r\n\t},\r\n\tscan : function(fn, order) {\r\n\t\tif (this.length < 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\torder = (order === undefined) ? true : order;\r\n\t\tfunction walk(node) {\r\n\t\t\tvar n = order ? node.firstChild : node.lastChild;\r\n\t\t\twhile (n) {\r\n\t\t\t\tvar next = order ? n.nextSibling : n.previousSibling;\r\n\t\t\t\tif (fn(n) === false) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (walk(n) === false) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tn = next;\r\n\t\t\t}\r\n\t\t}\r\n\t\twalk(this[0]);\r\n\t\treturn this;\r\n\t}\r\n});\r\n_each(('blur,focus,focusin,focusout,load,resize,scroll,unload,click,dblclick,' +\r\n\t'mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,' +\r\n\t'change,select,submit,keydown,keypress,keyup,error,contextmenu').split(','), function(i, type) {\r\n\tKNode.prototype[type] = function(fn) {\r\n\t\treturn fn ? this.bind(type, fn) : this.fire(type);\r\n\t};\r\n});\r\nvar _K = K;\r\nK = function(expr, root) {\r\n\tif (expr === undefined || expr === null) {\r\n\t\treturn;\r\n\t}\r\n\tfunction newNode(node) {\r\n\t\tif (!node[0]) {\r\n\t\t\tnode = [];\r\n\t\t}\r\n\t\treturn new KNode(node);\r\n\t}\r\n\tif (typeof expr === 'string') {\r\n\t\tif (root) {\r\n\t\t\troot = _get(root);\r\n\t\t}\r\n\t\tvar length = expr.length;\r\n\t\tif (expr.charAt(0) === '@') {\r\n\t\t\texpr = expr.substr(1);\r\n\t\t}\r\n\t\tif (expr.length !== length || /<.+>/.test(expr)) {\r\n\t\t\tvar doc = root ? root.ownerDocument || root : document,\r\n\t\t\t\tdiv = doc.createElement('div'), list = [];\r\n\t\t\tdiv.innerHTML = '<img id=\"__kindeditor_temp_tag__\" width=\"0\" height=\"0\" style=\"display:none;\" />' + expr;\r\n\t\t\tfor (var i = 0, len = div.childNodes.length; i < len; i++) {\r\n\t\t\t\tvar child = div.childNodes[i];\r\n\t\t\t\tif (child.id == '__kindeditor_temp_tag__') {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(child);\r\n\t\t\t}\r\n\t\t\treturn newNode(list);\r\n\t\t}\r\n\t\treturn newNode(_queryAll(expr, root));\r\n\t}\r\n\tif (expr && expr.constructor === KNode) {\r\n\t\treturn expr;\r\n\t}\r\n\tif (expr.toArray) {\r\n\t\texpr = expr.toArray();\r\n\t}\r\n\tif (_isArray(expr)) {\r\n\t\treturn newNode(expr);\r\n\t}\r\n\treturn newNode(_toArray(arguments));\r\n};\r\n_each(_K, function(key, val) {\r\n\tK[key] = val;\r\n});\r\nK.NodeClass = KNode;\r\nwindow.KindEditor = K;\r\n\n\r\nvar _START_TO_START = 0,\r\n\t_START_TO_END = 1,\r\n\t_END_TO_END = 2,\r\n\t_END_TO_START = 3,\r\n\t_BOOKMARK_ID = 0;\r\nfunction _updateCollapsed(range) {\r\n\trange.collapsed = (range.startContainer === range.endContainer && range.startOffset === range.endOffset);\r\n\treturn range;\r\n}\r\nfunction _copyAndDelete(range, isCopy, isDelete) {\r\n\tvar doc = range.doc, nodeList = [];\r\n\tfunction splitTextNode(node, startOffset, endOffset) {\r\n\t\tvar length = node.nodeValue.length, centerNode;\r\n\t\tif (isCopy) {\r\n\t\t\tvar cloneNode = node.cloneNode(true);\r\n\t\t\tif (startOffset > 0) {\r\n\t\t\t\tcenterNode = cloneNode.splitText(startOffset);\r\n\t\t\t} else {\r\n\t\t\t\tcenterNode = cloneNode;\r\n\t\t\t}\r\n\t\t\tif (endOffset < length) {\r\n\t\t\t\tcenterNode.splitText(endOffset - startOffset);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isDelete) {\r\n\t\t\tvar center = node;\r\n\t\t\tif (startOffset > 0) {\r\n\t\t\t\tcenter = node.splitText(startOffset);\r\n\t\t\t\trange.setStart(node, startOffset);\r\n\t\t\t}\r\n\t\t\tif (endOffset < length) {\r\n\t\t\t\tvar right = center.splitText(endOffset - startOffset);\r\n\t\t\t\trange.setEnd(right, 0);\r\n\t\t\t}\r\n\t\t\tnodeList.push(center);\r\n\t\t}\r\n\t\treturn centerNode;\r\n\t}\r\n\tfunction removeNodes() {\r\n\t\tif (isDelete) {\r\n\t\t\trange.up().collapse(true);\r\n\t\t}\r\n\t\tfor (var i = 0, len = nodeList.length; i < len; i++) {\r\n\t\t\tvar node = nodeList[i];\r\n\t\t\tif (node.parentNode) {\r\n\t\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tvar copyRange = range.cloneRange().down();\r\n\tvar start = -1, incStart = -1, incEnd = -1, end = -1,\r\n\t\tancestor = range.commonAncestor(), frag = doc.createDocumentFragment();\r\n\tif (ancestor.nodeType == 3) {\r\n\t\tvar textNode = splitTextNode(ancestor, range.startOffset, range.endOffset);\r\n\t\tif (isCopy) {\r\n\t\t\tfrag.appendChild(textNode);\r\n\t\t}\r\n\t\tremoveNodes();\r\n\t\treturn isCopy ? frag : range;\r\n\t}\r\n\tfunction extractNodes(parent, frag) {\r\n\t\tvar node = parent.firstChild, nextNode;\r\n\t\twhile (node) {\r\n\t\t\tvar testRange = new KRange(doc).selectNode(node);\r\n\t\t\tstart = testRange.compareBoundaryPoints(_START_TO_END, range);\r\n\t\t\tif (start >= 0 && incStart <= 0) {\r\n\t\t\t\tincStart = testRange.compareBoundaryPoints(_START_TO_START, range);\r\n\t\t\t}\r\n\t\t\tif (incStart >= 0 && incEnd <= 0) {\r\n\t\t\t\tincEnd = testRange.compareBoundaryPoints(_END_TO_END, range);\r\n\t\t\t}\r\n\t\t\tif (incEnd >= 0 && end <= 0) {\r\n\t\t\t\tend = testRange.compareBoundaryPoints(_END_TO_START, range);\r\n\t\t\t}\r\n\t\t\tif (end >= 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tnextNode = node.nextSibling;\r\n\t\t\tif (start > 0) {\r\n\t\t\t\tif (node.nodeType == 1) {\r\n\t\t\t\t\tif (incStart >= 0 && incEnd <= 0) {\r\n\t\t\t\t\t\tif (isCopy) {\r\n\t\t\t\t\t\t\tfrag.appendChild(node.cloneNode(true));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (isDelete) {\r\n\t\t\t\t\t\t\tnodeList.push(node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar childFlag;\r\n\t\t\t\t\t\tif (isCopy) {\r\n\t\t\t\t\t\t\tchildFlag = node.cloneNode(false);\r\n\t\t\t\t\t\t\tfrag.appendChild(childFlag);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (extractNodes(node, childFlag) === false) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (node.nodeType == 3) {\r\n\t\t\t\t\tvar textNode;\r\n\t\t\t\t\tif (node == copyRange.startContainer) {\r\n\t\t\t\t\t\ttextNode = splitTextNode(node, copyRange.startOffset, node.nodeValue.length);\r\n\t\t\t\t\t} else if (node == copyRange.endContainer) {\r\n\t\t\t\t\t\ttextNode = splitTextNode(node, 0, copyRange.endOffset);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttextNode = splitTextNode(node, 0, node.nodeValue.length);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (isCopy) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tfrag.appendChild(textNode);\r\n\t\t\t\t\t\t} catch(e) {}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tnode = nextNode;\r\n\t\t}\r\n\t}\r\n\textractNodes(ancestor, frag);\r\n\tif (isDelete) {\r\n\t\trange.up().collapse(true);\r\n\t}\r\n\tfor (var i = 0, len = nodeList.length; i < len; i++) {\r\n\t\tvar node = nodeList[i];\r\n\t\tif (node.parentNode) {\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t}\r\n\t}\r\n\treturn isCopy ? frag : range;\r\n}\r\r\nfunction _moveToElementText(range, el) {\r\n\tvar node = el;\r\n\twhile (node) {\r\n\t\tvar knode = K(node);\r\n\t\tif (knode.name == 'marquee' || knode.name == 'select') {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tnode = node.parentNode;\r\n\t}\r\n\ttry {\r\n\t\trange.moveToElementText(el);\r\n\t} catch(e) {}\r\n}\r\r\nfunction _getStartEnd(rng, isStart) {\r\n\tvar doc = rng.parentElement().ownerDocument,\r\n\t\tpointRange = rng.duplicate();\r\n\tpointRange.collapse(isStart);\r\n\tvar parent = pointRange.parentElement(),\r\n\t\tnodes = parent.childNodes;\r\n\tif (nodes.length === 0) {\r\n\t\treturn {node: parent.parentNode, offset: K(parent).index()};\r\n\t}\r\n\tvar startNode = doc, startPos = 0, cmp = -1;\r\n\tvar testRange = rng.duplicate();\r\n\t_moveToElementText(testRange, parent);\r\n\tfor (var i = 0, len = nodes.length; i < len; i++) {\r\n\t\tvar node = nodes[i];\r\n\t\tcmp = testRange.compareEndPoints('StartToStart', pointRange);\r\n\t\tif (cmp === 0) {\r\n\t\t\treturn {node: node.parentNode, offset: i};\r\n\t\t}\r\n\t\tif (node.nodeType == 1) {\r\n\t\t\tvar nodeRange = rng.duplicate(), dummy, knode = K(node), newNode = node;\r\n\t\t\tif (knode.isControl()) {\r\n\t\t\t\tdummy = doc.createElement('span');\r\n\t\t\t\tknode.after(dummy);\r\n\t\t\t\tnewNode = dummy;\r\n\t\t\t\tstartPos += knode.text().replace(/\\r\\n|\\n|\\r/g, '').length;\r\n\t\t\t}\r\n\t\t\t_moveToElementText(nodeRange, newNode);\r\n\t\t\ttestRange.setEndPoint('StartToEnd', nodeRange);\r\n\t\t\tif (cmp > 0) {\r\n\t\t\t\tstartPos += nodeRange.text.replace(/\\r\\n|\\n|\\r/g, '').length;\r\n\t\t\t} else {\r\n\t\t\t\tstartPos = 0;\r\n\t\t\t}\r\n\t\t\tif (dummy) {\r\n\t\t\t\tK(dummy).remove();\r\n\t\t\t}\r\n\t\t} else if (node.nodeType == 3) {\r\n\t\t\ttestRange.moveStart('character', node.nodeValue.length);\r\n\t\t\tstartPos += node.nodeValue.length;\r\n\t\t}\r\n\t\tif (cmp < 0) {\r\n\t\t\tstartNode = node;\r\n\t\t}\r\n\t}\r\n\tif (cmp < 0 && startNode.nodeType == 1) {\r\n\t\treturn {node: parent, offset: K(parent.lastChild).index() + 1};\r\n\t}\r\n\tif (cmp > 0) {\r\n\t\twhile (startNode.nextSibling && startNode.nodeType == 1) {\r\n\t\t\tstartNode = startNode.nextSibling;\r\n\t\t}\r\n\t}\r\n\ttestRange = rng.duplicate();\r\n\t_moveToElementText(testRange, parent);\r\n\ttestRange.setEndPoint('StartToEnd', pointRange);\r\n\tstartPos -= testRange.text.replace(/\\r\\n|\\n|\\r/g, '').length;\r\n\tif (cmp > 0 && startNode.nodeType == 3) {\r\n\t\tvar prevNode = startNode.previousSibling;\r\n\t\twhile (prevNode && prevNode.nodeType == 3) {\r\n\t\t\tstartPos -= prevNode.nodeValue.length;\r\n\t\t\tprevNode = prevNode.previousSibling;\r\n\t\t}\r\n\t}\r\n\treturn {node: startNode, offset: startPos};\r\n}\r\r\nfunction _getEndRange(node, offset) {\r\n\tvar doc = node.ownerDocument || node,\r\n\t\trange = doc.body.createTextRange();\r\n\tif (doc == node) {\r\n\t\trange.collapse(true);\r\n\t\treturn range;\r\n\t}\r\n\tif (node.nodeType == 1 && node.childNodes.length > 0) {\r\n\t\tvar children = node.childNodes, isStart, child;\r\n\t\tif (offset === 0) {\r\n\t\t\tchild = children[0];\r\n\t\t\tisStart = true;\r\n\t\t} else {\r\n\t\t\tchild = children[offset - 1];\r\n\t\t\tisStart = false;\r\n\t\t}\r\n\t\tif (!child) {\r\n\t\t\treturn range;\r\n\t\t}\r\n\t\tif (K(child).name === 'head') {\r\n\t\t\tif (offset === 1) {\r\n\t\t\t\tisStart = true;\r\n\t\t\t}\r\n\t\t\tif (offset === 2) {\r\n\t\t\t\tisStart = false;\r\n\t\t\t}\r\n\t\t\trange.collapse(isStart);\r\n\t\t\treturn range;\r\n\t\t}\r\n\t\tif (child.nodeType == 1) {\r\n\t\t\tvar kchild = K(child), span;\r\n\t\t\tif (kchild.isControl()) {\r\n\t\t\t\tspan = doc.createElement('span');\r\n\t\t\t\tif (isStart) {\r\n\t\t\t\t\tkchild.before(span);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tkchild.after(span);\r\n\t\t\t\t}\r\n\t\t\t\tchild = span;\r\n\t\t\t}\r\n\t\t\t_moveToElementText(range, child);\r\n\t\t\trange.collapse(isStart);\r\n\t\t\tif (span) {\r\n\t\t\t\tK(span).remove();\r\n\t\t\t}\r\n\t\t\treturn range;\r\n\t\t}\r\n\t\tnode = child;\r\n\t\toffset = isStart ? 0 : child.nodeValue.length;\r\n\t}\r\n\tvar dummy = doc.createElement('span');\r\n\tK(node).before(dummy);\r\n\t_moveToElementText(range, dummy);\r\n\trange.moveStart('character', offset);\r\n\tK(dummy).remove();\r\n\treturn range;\r\n}\r\r\nfunction _toRange(rng) {\r\n\tvar doc, range;\r\n\tfunction tr2td(start) {\r\n\t\tif (K(start.node).name == 'tr') {\r\n\t\t\tstart.node = start.node.cells[start.offset];\r\n\t\t\tstart.offset = 0;\r\n\t\t}\r\n\t}\r\n\tif (_IERANGE) {\r\n\t\tif (rng.item) {\r\n\t\t\tdoc = _getDoc(rng.item(0));\r\n\t\t\trange = new KRange(doc);\r\n\t\t\trange.selectNode(rng.item(0));\r\n\t\t\treturn range;\r\n\t\t}\r\n\t\tdoc = rng.parentElement().ownerDocument;\r\n\t\tvar start = _getStartEnd(rng, true),\r\n\t\t\tend = _getStartEnd(rng, false);\r\n\t\ttr2td(start);\r\n\t\ttr2td(end);\r\n\t\trange = new KRange(doc);\r\n\t\trange.setStart(start.node, start.offset);\r\n\t\trange.setEnd(end.node, end.offset);\r\n\t\treturn range;\r\n\t}\r\n\tvar startContainer = rng.startContainer;\r\n\tdoc = startContainer.ownerDocument || startContainer;\r\n\trange = new KRange(doc);\r\n\trange.setStart(startContainer, rng.startOffset);\r\n\trange.setEnd(rng.endContainer, rng.endOffset);\r\n\treturn range;\r\n}\r\n\r\r\nfunction KRange(doc) {\r\n\tthis.init(doc);\r\n}\r\n_extend(KRange, {\r\n\tinit : function(doc) {\r\n\t\tvar self = this;\r\n\t\tself.startContainer = doc;\r\n\t\tself.startOffset = 0;\r\n\t\tself.endContainer = doc;\r\n\t\tself.endOffset = 0;\r\n\t\tself.collapsed = true;\r\n\t\tself.doc = doc;\r\n\t},\r\n\tcommonAncestor : function() {\r\n\t\tfunction getParents(node) {\r\n\t\t\tvar parents = [];\r\n\t\t\twhile (node) {\r\n\t\t\t\tparents.push(node);\r\n\t\t\t\tnode = node.parentNode;\r\n\t\t\t}\r\n\t\t\treturn parents;\r\n\t\t}\r\n\t\tvar parentsA = getParents(this.startContainer),\r\n\t\t\tparentsB = getParents(this.endContainer),\r\n\t\t\ti = 0, lenA = parentsA.length, lenB = parentsB.length, parentA, parentB;\r\n\t\twhile (++i) {\r\n\t\t\tparentA = parentsA[lenA - i];\r\n\t\t\tparentB = parentsB[lenB - i];\r\n\t\t\tif (!parentA || !parentB || parentA !== parentB) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn parentsA[lenA - i + 1];\r\n\t},\r\n\tsetStart : function(node, offset) {\r\n\t\tvar self = this, doc = self.doc;\r\n\t\tself.startContainer = node;\r\n\t\tself.startOffset = offset;\r\n\t\tif (self.endContainer === doc) {\r\n\t\t\tself.endContainer = node;\r\n\t\t\tself.endOffset = offset;\r\n\t\t}\r\n\t\treturn _updateCollapsed(this);\r\n\t},\r\n\tsetEnd : function(node, offset) {\r\n\t\tvar self = this, doc = self.doc;\r\n\t\tself.endContainer = node;\r\n\t\tself.endOffset = offset;\r\n\t\tif (self.startContainer === doc) {\r\n\t\t\tself.startContainer = node;\r\n\t\t\tself.startOffset = offset;\r\n\t\t}\r\n\t\treturn _updateCollapsed(this);\r\n\t},\r\n\tsetStartBefore : function(node) {\r\n\t\treturn this.setStart(node.parentNode || this.doc, K(node).index());\r\n\t},\r\n\tsetStartAfter : function(node) {\r\n\t\treturn this.setStart(node.parentNode || this.doc, K(node).index() + 1);\r\n\t},\r\n\tsetEndBefore : function(node) {\r\n\t\treturn this.setEnd(node.parentNode || this.doc, K(node).index());\r\n\t},\r\n\tsetEndAfter : function(node) {\r\n\t\treturn this.setEnd(node.parentNode || this.doc, K(node).index() + 1);\r\n\t},\r\n\tselectNode : function(node) {\r\n\t\treturn this.setStartBefore(node).setEndAfter(node);\r\n\t},\r\n\tselectNodeContents : function(node) {\r\n\t\tvar knode = K(node);\r\n\t\tif (knode.type == 3 || knode.isSingle()) {\r\n\t\t\treturn this.selectNode(node);\r\n\t\t}\r\n\t\tvar children = knode.children();\r\n\t\tif (children.length > 0) {\r\n\t\t\treturn this.setStartBefore(children[0]).setEndAfter(children[children.length - 1]);\r\n\t\t}\r\n\t\treturn this.setStart(node, 0).setEnd(node, 0);\r\n\t},\r\n\tcollapse : function(toStart) {\r\n\t\tif (toStart) {\r\n\t\t\treturn this.setEnd(this.startContainer, this.startOffset);\r\n\t\t}\r\n\t\treturn this.setStart(this.endContainer, this.endOffset);\r\n\t},\r\n\tcompareBoundaryPoints : function(how, range) {\r\n\t\tvar rangeA = this.get(), rangeB = range.get();\r\n\t\tif (_IERANGE) {\r\n\t\t\tvar arr = {};\r\n\t\t\tarr[_START_TO_START] = 'StartToStart';\r\n\t\t\tarr[_START_TO_END] = 'EndToStart';\r\n\t\t\tarr[_END_TO_END] = 'EndToEnd';\r\n\t\t\tarr[_END_TO_START] = 'StartToEnd';\r\n\t\t\tvar cmp = rangeA.compareEndPoints(arr[how], rangeB);\r\n\t\t\tif (cmp !== 0) {\r\n\t\t\t\treturn cmp;\r\n\t\t\t}\r\n\t\t\tvar nodeA, nodeB, nodeC, posA, posB;\r\n\t\t\tif (how === _START_TO_START || how === _END_TO_START) {\r\n\t\t\t\tnodeA = this.startContainer;\r\n\t\t\t\tposA = this.startOffset;\r\n\t\t\t}\r\n\t\t\tif (how === _START_TO_END || how === _END_TO_END) {\r\n\t\t\t\tnodeA = this.endContainer;\r\n\t\t\t\tposA = this.endOffset;\r\n\t\t\t}\r\n\t\t\tif (how === _START_TO_START || how === _START_TO_END) {\r\n\t\t\t\tnodeB = range.startContainer;\r\n\t\t\t\tposB = range.startOffset;\r\n\t\t\t}\r\n\t\t\tif (how === _END_TO_END || how === _END_TO_START) {\r\n\t\t\t\tnodeB = range.endContainer;\r\n\t\t\t\tposB = range.endOffset;\r\n\t\t\t}\r\n\t\t\tif (nodeA === nodeB) {\r\n\t\t\t\tvar diff = posA - posB;\r\n\t\t\t\treturn diff > 0 ? 1 : (diff < 0 ? -1 : 0);\r\n\t\t\t}\r\n\t\t\tnodeC = nodeB;\r\n\t\t\twhile (nodeC && nodeC.parentNode !== nodeA) {\r\n\t\t\t\tnodeC = nodeC.parentNode;\r\n\t\t\t}\r\n\t\t\tif (nodeC) {\r\n\t\t\t\treturn K(nodeC).index() >= posA ? -1 : 1;\r\n\t\t\t}\r\n\t\t\tnodeC = nodeA;\r\n\t\t\twhile (nodeC && nodeC.parentNode !== nodeB) {\r\n\t\t\t\tnodeC = nodeC.parentNode;\r\n\t\t\t}\r\n\t\t\tif (nodeC) {\r\n\t\t\t\treturn K(nodeC).index() >= posB ? 1 : -1;\r\n\t\t\t}\r\n\t\t\tnodeC = K(nodeB).next();\r\n\t\t\tif (nodeC && nodeC.contains(nodeA)) {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\tnodeC = K(nodeA).next();\r\n\t\t\tif (nodeC && nodeC.contains(nodeB)) {\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn rangeA.compareBoundaryPoints(how, rangeB);\r\n\t\t}\r\n\t},\r\n\tcloneRange : function() {\r\n\t\treturn new KRange(this.doc).setStart(this.startContainer, this.startOffset).setEnd(this.endContainer, this.endOffset);\r\n\t},\r\n\ttoString : function() {\r\n\t\tvar rng = this.get(), str = _IERANGE ? rng.text : rng.toString();\r\n\t\treturn str.replace(/\\r\\n|\\n|\\r/g, '');\r\n\t},\r\n\tcloneContents : function() {\r\n\t\treturn _copyAndDelete(this, true, false);\r\n\t},\r\n\tdeleteContents : function() {\r\n\t\treturn _copyAndDelete(this, false, true);\r\n\t},\r\n\textractContents : function() {\r\n\t\treturn _copyAndDelete(this, true, true);\r\n\t},\r\n\tinsertNode : function(node) {\r\n\t\tvar self = this,\r\n\t\t\tsc = self.startContainer, so = self.startOffset,\r\n\t\t\tec = self.endContainer, eo = self.endOffset,\r\n\t\t\tfirstChild, lastChild, c, nodeCount = 1;\r\n\t\tif (node.nodeName.toLowerCase() === '#document-fragment') {\r\n\t\t\tfirstChild = node.firstChild;\r\n\t\t\tlastChild = node.lastChild;\r\n\t\t\tnodeCount = node.childNodes.length;\r\n\t\t}\r\n\t\tif (sc.nodeType == 1) {\r\n\t\t\tc = sc.childNodes[so];\r\n\t\t\tif (c) {\r\n\t\t\t\tsc.insertBefore(node, c);\r\n\t\t\t\tif (sc === ec) {\r\n\t\t\t\t\teo += nodeCount;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsc.appendChild(node);\r\n\t\t\t}\r\n\t\t} else if (sc.nodeType == 3) {\r\n\t\t\tif (so === 0) {\r\n\t\t\t\tsc.parentNode.insertBefore(node, sc);\r\n\t\t\t\tif (sc.parentNode === ec) {\r\n\t\t\t\t\teo += nodeCount;\r\n\t\t\t\t}\r\n\t\t\t} else if (so >= sc.nodeValue.length) {\r\n\t\t\t\tif (sc.nextSibling) {\r\n\t\t\t\t\tsc.parentNode.insertBefore(node, sc.nextSibling);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsc.parentNode.appendChild(node);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (so > 0) {\r\n\t\t\t\t\tc = sc.splitText(so);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tc = sc;\r\n\t\t\t\t}\r\n\t\t\t\tsc.parentNode.insertBefore(node, c);\r\n\t\t\t\tif (sc === ec) {\r\n\t\t\t\t\tec = c;\r\n\t\t\t\t\teo -= so;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (firstChild) {\r\n\t\t\tself.setStartBefore(firstChild).setEndAfter(lastChild);\r\n\t\t} else {\r\n\t\t\tself.selectNode(node);\r\n\t\t}\r\n\t\tif (self.compareBoundaryPoints(_END_TO_END, self.cloneRange().setEnd(ec, eo)) >= 1) {\r\n\t\t\treturn self;\r\n\t\t}\r\n\t\treturn self.setEnd(ec, eo);\r\n\t},\r\n\tsurroundContents : function(node) {\r\n\t\tnode.appendChild(this.extractContents());\r\n\t\treturn this.insertNode(node).selectNode(node);\r\n\t},\r\n\tisControl : function() {\r\n\t\tvar self = this,\r\n\t\t\tsc = self.startContainer, so = self.startOffset,\r\n\t\t\tec = self.endContainer, eo = self.endOffset, rng;\r\n\t\treturn sc.nodeType == 1 && sc === ec && so + 1 === eo && K(sc.childNodes[so]).isControl();\r\n\t},\r\n\tget : function(hasControlRange) {\r\n\t\tvar self = this, doc = self.doc, node, rng;\r\n\t\tif (!_IERANGE) {\r\n\t\t\trng = doc.createRange();\r\n\t\t\ttry {\r\n\t\t\t\trng.setStart(self.startContainer, self.startOffset);\r\n\t\t\t\trng.setEnd(self.endContainer, self.endOffset);\r\n\t\t\t} catch (e) {}\r\n\t\t\treturn rng;\r\n\t\t}\r\n\t\tif (hasControlRange && self.isControl()) {\r\n\t\t\trng = doc.body.createControlRange();\r\n\t\t\trng.addElement(self.startContainer.childNodes[self.startOffset]);\r\n\t\t\treturn rng;\r\n\t\t}\r\n\t\tvar range = self.cloneRange().down();\r\n\t\trng = doc.body.createTextRange();\r\n\t\trng.setEndPoint('StartToStart', _getEndRange(range.startContainer, range.startOffset));\r\n\t\trng.setEndPoint('EndToStart', _getEndRange(range.endContainer, range.endOffset));\r\n\t\treturn rng;\r\n\t},\r\n\thtml : function() {\r\n\t\treturn K(this.cloneContents()).outer();\r\n\t},\r\n\tdown : function() {\r\n\t\tvar self = this;\r\n\t\tfunction downPos(node, pos, isStart) {\r\n\t\t\tif (node.nodeType != 1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar children = K(node).children();\r\n\t\t\tif (children.length === 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar left, right, child, offset;\r\n\t\t\tif (pos > 0) {\r\n\t\t\t\tleft = children.eq(pos - 1);\r\n\t\t\t}\r\n\t\t\tif (pos < children.length) {\r\n\t\t\t\tright = children.eq(pos);\r\n\t\t\t}\r\n\t\t\tif (left && left.type == 3) {\r\n\t\t\t\tchild = left[0];\r\n\t\t\t\toffset = child.nodeValue.length;\r\n\t\t\t}\r\n\t\t\tif (right && right.type == 3) {\r\n\t\t\t\tchild = right[0];\r\n\t\t\t\toffset = 0;\r\n\t\t\t}\r\n\t\t\tif (!child) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (isStart) {\r\n\t\t\t\tself.setStart(child, offset);\r\n\t\t\t} else {\r\n\t\t\t\tself.setEnd(child, offset);\r\n\t\t\t}\r\n\t\t}\r\n\t\tdownPos(self.startContainer, self.startOffset, true);\r\n\t\tdownPos(self.endContainer, self.endOffset, false);\r\n\t\treturn self;\r\n\t},\r\n\tup : function() {\r\n\t\tvar self = this;\r\n\t\tfunction upPos(node, pos, isStart) {\r\n\t\t\tif (node.nodeType != 3) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (pos === 0) {\r\n\t\t\t\tif (isStart) {\r\n\t\t\t\t\tself.setStartBefore(node);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.setEndBefore(node);\r\n\t\t\t\t}\r\n\t\t\t} else if (pos == node.nodeValue.length) {\r\n\t\t\t\tif (isStart) {\r\n\t\t\t\t\tself.setStartAfter(node);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.setEndAfter(node);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tupPos(self.startContainer, self.startOffset, true);\r\n\t\tupPos(self.endContainer, self.endOffset, false);\r\n\t\treturn self;\r\n\t},\r\n\tenlarge : function(toBlock) {\r\n\t\tvar self = this;\r\n\t\tself.up();\r\n\t\tfunction enlargePos(node, pos, isStart) {\r\n\t\t\tvar knode = K(node), parent;\r\n\t\t\tif (knode.type == 3 || _NOSPLIT_TAG_MAP[knode.name] || !toBlock && knode.isBlock()) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (pos === 0) {\r\n\t\t\t\twhile (!knode.prev()) {\r\n\t\t\t\t\tparent = knode.parent();\r\n\t\t\t\t\tif (!parent || _NOSPLIT_TAG_MAP[parent.name] || !toBlock && parent.isBlock()) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tknode = parent;\r\n\t\t\t\t}\r\n\t\t\t\tif (isStart) {\r\n\t\t\t\t\tself.setStartBefore(knode[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.setEndBefore(knode[0]);\r\n\t\t\t\t}\r\n\t\t\t} else if (pos == knode.children().length) {\r\n\t\t\t\twhile (!knode.next()) {\r\n\t\t\t\t\tparent = knode.parent();\r\n\t\t\t\t\tif (!parent || _NOSPLIT_TAG_MAP[parent.name] || !toBlock && parent.isBlock()) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tknode = parent;\r\n\t\t\t\t}\r\n\t\t\t\tif (isStart) {\r\n\t\t\t\t\tself.setStartAfter(knode[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.setEndAfter(knode[0]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tenlargePos(self.startContainer, self.startOffset, true);\r\n\t\tenlargePos(self.endContainer, self.endOffset, false);\r\n\t\treturn self;\r\n\t},\r\n\tshrink : function() {\r\n\t\tvar self = this, child, collapsed = self.collapsed;\r\n\t\twhile (self.startContainer.nodeType == 1 && (child = self.startContainer.childNodes[self.startOffset]) && child.nodeType == 1 && !K(child).isSingle()) {\r\n\t\t\tself.setStart(child, 0);\r\n\t\t}\r\n\t\tif (collapsed) {\r\n\t\t\treturn self.collapse(collapsed);\r\n\t\t}\r\n\t\twhile (self.endContainer.nodeType == 1 && self.endOffset > 0 && (child = self.endContainer.childNodes[self.endOffset - 1]) && child.nodeType == 1 && !K(child).isSingle()) {\r\n\t\t\tself.setEnd(child, child.childNodes.length);\r\n\t\t}\r\n\t\treturn self;\r\n\t},\r\n\tcreateBookmark : function(serialize) {\r\n\t\tvar self = this, doc = self.doc, endNode,\r\n\t\t\tstartNode = K('<span style=\"display:none;\"></span>', doc)[0];\r\n\t\tstartNode.id = '__kindeditor_bookmark_start_' + (_BOOKMARK_ID++) + '__';\r\n\t\tif (!self.collapsed) {\r\n\t\t\tendNode = startNode.cloneNode(true);\r\n\t\t\tendNode.id = '__kindeditor_bookmark_end_' + (_BOOKMARK_ID++) + '__';\r\n\t\t}\r\n\t\tif (endNode) {\r\n\t\t\tself.cloneRange().collapse(false).insertNode(endNode).setEndBefore(endNode);\r\n\t\t}\r\n\t\tself.insertNode(startNode).setStartAfter(startNode);\r\n\t\treturn {\r\n\t\t\tstart : serialize ? '#' + startNode.id : startNode,\r\n\t\t\tend : endNode ? (serialize ? '#' + endNode.id : endNode) : null\r\n\t\t};\r\n\t},\r\n\tmoveToBookmark : function(bookmark) {\r\n\t\tvar self = this, doc = self.doc,\r\n\t\t\tstart = K(bookmark.start, doc), end = bookmark.end ? K(bookmark.end, doc) : null;\r\n\t\tif (!start || start.length < 1) {\r\n\t\t\treturn self;\r\n\t\t}\r\n\t\tself.setStartBefore(start[0]);\r\n\t\tstart.remove();\r\n\t\tif (end && end.length > 0) {\r\n\t\t\tself.setEndBefore(end[0]);\r\n\t\t\tend.remove();\r\n\t\t} else {\r\n\t\t\tself.collapse(true);\r\n\t\t}\r\n\t\treturn self;\r\n\t},\r\n\tdump : function() {\r\n\t\tconsole.log('--------------------');\r\n\t\tconsole.log(this.startContainer.nodeType == 3 ? this.startContainer.nodeValue : this.startContainer, this.startOffset);\r\n\t\tconsole.log(this.endContainer.nodeType == 3 ? this.endContainer.nodeValue : this.endContainer, this.endOffset);\r\n\t}\r\n});\r\nfunction _range(mixed) {\r\n\tif (!mixed.nodeName) {\r\n\t\treturn mixed.constructor === KRange ? mixed : _toRange(mixed);\r\n\t}\r\n\treturn new KRange(mixed);\r\n}\r\nK.RangeClass = KRange;\r\nK.range = _range;\r\nK.START_TO_START = _START_TO_START;\r\nK.START_TO_END = _START_TO_END;\r\nK.END_TO_END = _END_TO_END;\r\nK.END_TO_START = _END_TO_START;\r\n\n\r\r\nfunction _nativeCommand(doc, key, val) {\r\n\ttry {\r\n\t\tdoc.execCommand(key, false, val);\r\n\t} catch(e) {}\r\n}\r\r\nfunction _nativeCommandValue(doc, key) {\r\n\tvar val = '';\r\n\ttry {\r\n\t\tval = doc.queryCommandValue(key);\r\n\t} catch (e) {}\r\n\tif (typeof val !== 'string') {\r\n\t\tval = '';\r\n\t}\r\n\treturn val;\r\n}\r\r\nfunction _getSel(doc) {\r\n\tvar win = _getWin(doc);\r\n\treturn _IERANGE ? doc.selection : win.getSelection();\r\n}\r\r\nfunction _getRng(doc) {\r\n\tvar sel = _getSel(doc), rng;\r\n\ttry {\r\n\t\tif (sel.rangeCount > 0) {\r\n\t\t\trng = sel.getRangeAt(0);\r\n\t\t} else {\r\n\t\t\trng = sel.createRange();\r\n\t\t}\r\n\t} catch(e) {}\r\n\tif (_IERANGE && (!rng || (!rng.item && rng.parentElement().ownerDocument !== doc))) {\r\n\t\treturn null;\r\n\t}\r\n\treturn rng;\r\n}\r\r\nfunction _singleKeyMap(map) {\r\n\tvar newMap = {}, arr, v;\r\n\t_each(map, function(key, val) {\r\n\t\tarr = key.split(',');\r\n\t\tfor (var i = 0, len = arr.length; i < len; i++) {\r\n\t\t\tv = arr[i];\r\n\t\t\tnewMap[v] = val;\r\n\t\t}\r\n\t});\r\n\treturn newMap;\r\n}\r\r\nfunction _hasAttrOrCss(knode, map) {\r\n\treturn _hasAttrOrCssByKey(knode, map, '*') || _hasAttrOrCssByKey(knode, map);\r\n}\r\nfunction _hasAttrOrCssByKey(knode, map, mapKey) {\r\n\tmapKey = mapKey || knode.name;\r\n\tif (knode.type !== 1) {\r\n\t\treturn false;\r\n\t}\r\n\tvar newMap = _singleKeyMap(map);\r\n\tif (!newMap[mapKey]) {\r\n\t\treturn false;\r\n\t}\r\n\tvar arr = newMap[mapKey].split(',');\r\n\tfor (var i = 0, len = arr.length; i < len; i++) {\r\n\t\tvar key = arr[i];\r\n\t\tif (key === '*') {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar match = /^(\\.?)([^=]+)(?:=([^=]*))?$/.exec(key);\r\n\t\tvar method = match[1] ? 'css' : 'attr';\r\n\t\tkey = match[2];\r\n\t\tvar val = match[3] || '';\r\n\t\tif (val === '' && knode[method](key) !== '') {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (val !== '' && knode[method](key) === val) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\r\nfunction _removeAttrOrCss(knode, map) {\r\n\tif (knode.type != 1) {\r\n\t\treturn;\r\n\t}\r\n\t_removeAttrOrCssByKey(knode, map, '*');\r\n\t_removeAttrOrCssByKey(knode, map);\r\n}\r\nfunction _removeAttrOrCssByKey(knode, map, mapKey) {\r\n\tmapKey = mapKey || knode.name;\r\n\tif (knode.type !== 1) {\r\n\t\treturn;\r\n\t}\r\n\tvar newMap = _singleKeyMap(map);\r\n\tif (!newMap[mapKey]) {\r\n\t\treturn;\r\n\t}\r\n\tvar arr = newMap[mapKey].split(','), allFlag = false;\r\n\tfor (var i = 0, len = arr.length; i < len; i++) {\r\n\t\tvar key = arr[i];\r\n\t\tif (key === '*') {\r\n\t\t\tallFlag = true;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tvar match = /^(\\.?)([^=]+)(?:=([^=]*))?$/.exec(key);\r\n\t\tkey = match[2];\r\n\t\tif (match[1]) {\r\n\t\t\tkey = _toCamel(key);\r\n\t\t\tif (knode[0].style[key]) {\r\n\t\t\t\tknode[0].style[key] = '';\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tknode.removeAttr(key);\r\n\t\t}\r\n\t}\r\n\tif (allFlag) {\r\n\t\tknode.remove(true);\r\n\t}\r\n}\r\r\nfunction _getInnerNode(knode) {\r\n\tvar inner = knode;\r\n\twhile (inner.first()) {\r\n\t\tinner = inner.first();\r\n\t}\r\n\treturn inner;\r\n}\r\r\nfunction _isEmptyNode(knode) {\r\n\tif (knode.type != 1 || knode.isSingle()) {\r\n\t\treturn false;\r\n\t}\r\n\treturn knode.html().replace(/<[^>]+>/g, '') === '';\r\n}\r\r\r\r\r\nfunction _mergeWrapper(a, b) {\r\n\ta = a.clone(true);\r\n\tvar lastA = _getInnerNode(a), childA = a, merged = false;\r\n\twhile (b) {\r\n\t\twhile (childA) {\r\n\t\t\tif (childA.name === b.name) {\r\n\t\t\t\t_mergeAttrs(childA, b.attr(), b.css());\r\n\t\t\t\tmerged = true;\r\n\t\t\t}\r\n\t\t\tchildA = childA.first();\r\n\t\t}\r\n\t\tif (!merged) {\r\n\t\t\tlastA.append(b.clone(false));\r\n\t\t}\r\n\t\tmerged = false;\r\n\t\tb = b.first();\r\n\t}\r\n\treturn a;\r\n}\r\r\nfunction _wrapNode(knode, wrapper) {\r\n\twrapper = wrapper.clone(true);\r\n\tif (knode.type == 3) {\r\n\t\t_getInnerNode(wrapper).append(knode.clone(false));\r\n\t\tknode.replaceWith(wrapper);\r\n\t\treturn wrapper;\r\n\t}\r\n\tvar nodeWrapper = knode, child;\r\n\twhile ((child = knode.first()) && child.children().length == 1) {\r\n\t\tknode = child;\r\n\t}\r\n\tchild = knode.first();\r\n\tvar frag = knode.doc.createDocumentFragment();\r\n\twhile (child) {\r\n\t\tfrag.appendChild(child[0]);\r\n\t\tchild = child.next();\r\n\t}\r\n\twrapper = _mergeWrapper(nodeWrapper, wrapper);\r\n\tif (frag.firstChild) {\r\n\t\t_getInnerNode(wrapper).append(frag);\r\n\t}\r\n\tnodeWrapper.replaceWith(wrapper);\r\n\treturn wrapper;\r\n}\r\r\nfunction _mergeAttrs(knode, attrs, styles) {\r\n\t_each(attrs, function(key, val) {\r\n\t\tif (key !== 'style') {\r\n\t\t\tknode.attr(key, val);\r\n\t\t}\r\n\t});\r\n\t_each(styles, function(key, val) {\r\n\t\tknode.css(key, val);\r\n\t});\r\n}\r\r\nfunction _inPreElement(knode) {\r\n\twhile (knode && knode.name != 'body') {\r\n\t\tif (_PRE_TAG_MAP[knode.name] || knode.name == 'div' && knode.hasClass('ke-script')) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tknode = knode.parent();\r\n\t}\r\n\treturn false;\r\n}\r\r\nfunction KCmd(range) {\r\n\tthis.init(range);\r\n}\r\n_extend(KCmd, {\r\n\tinit : function(range) {\r\n\t\tvar self = this, doc = range.doc;\r\n\t\tself.doc = doc;\r\n\t\tself.win = _getWin(doc);\r\n\t\tself.sel = _getSel(doc);\r\n\t\tself.range = range;\r\n\t},\r\n\tselection : function(forceReset) {\r\n\t\tvar self = this, doc = self.doc, rng = _getRng(doc);\r\n\t\tself.sel = _getSel(doc);\r\n\t\tif (rng) {\r\n\t\t\tself.range = _range(rng);\r\n\t\t\tif (K(self.range.startContainer).name == 'html') {\r\n\t\t\t\tself.range.selectNodeContents(doc.body).collapse(false);\r\n\t\t\t}\r\n\t\t\treturn self;\r\n\t\t}\r\n\t\tif (forceReset) {\r\n\t\t\tself.range.selectNodeContents(doc.body).collapse(false);\r\n\t\t}\r\n\t\treturn self;\r\n\t},\r\n\tselect : function(hasDummy) {\r\n\t\thasDummy = _undef(hasDummy, true);\r\n\t\tvar self = this, sel = self.sel, range = self.range.cloneRange().shrink(),\r\n\t\t\tsc = range.startContainer, so = range.startOffset,\r\n\t\t\tec = range.endContainer, eo = range.endOffset,\r\n\t\t\tdoc = _getDoc(sc), win = self.win, rng, hasU200b = false;\r\n\t\tif (hasDummy && sc.nodeType == 1 && range.collapsed) {\r\n\t\t\tif (_IERANGE) {\r\n\t\t\t\tvar dummy = K('<span>&nbsp;</span>', doc);\r\n\t\t\t\trange.insertNode(dummy[0]);\r\n\t\t\t\trng = doc.body.createTextRange();\r\n\t\t\t\ttry {\r\n\t\t\t\t\trng.moveToElementText(dummy[0]);\r\n\t\t\t\t} catch(ex) {}\r\n\t\t\t\trng.collapse(false);\r\n\t\t\t\trng.select();\r\n\t\t\t\tdummy.remove();\r\n\t\t\t\twin.focus();\r\n\t\t\t\treturn self;\r\n\t\t\t}\r\n\t\t\tif (_WEBKIT) {\r\n\t\t\t\tvar children = sc.childNodes;\r\n\t\t\t\tif (K(sc).isInline() || so > 0 && K(children[so - 1]).isInline() || children[so] && K(children[so]).isInline()) {\r\n\t\t\t\t\trange.insertNode(doc.createTextNode('\\u200B'));\r\n\t\t\t\t\thasU200b = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (_IERANGE) {\r\n\t\t\ttry {\r\n\t\t\t\trng = range.get(true);\r\n\t\t\t\trng.select();\r\n\t\t\t} catch(e) {}\r\n\t\t} else {\r\n\t\t\tif (hasU200b) {\r\n\t\t\t\trange.collapse(false);\r\n\t\t\t}\r\n\t\t\trng = range.get(true);\r\n\t\t\tsel.removeAllRanges();\r\n\t\t\tsel.addRange(rng);\r\n\t\t\tif (doc !== document) {\r\n\t\t\t\tvar pos = K(rng.endContainer).pos();\r\n\t\t\t\twin.scrollTo(pos.x, pos.y);\r\n\t\t\t}\r\n\t\t}\r\n\t\twin.focus();\r\n\t\treturn self;\r\n\t},\r\n\twrap : function(val) {\r\n\t\tvar self = this, doc = self.doc, range = self.range, wrapper;\r\n\t\twrapper = K(val, doc);\r\n\t\tif (range.collapsed) {\r\n\t\t\trange.shrink();\r\n\t\t\trange.insertNode(wrapper[0]).selectNodeContents(wrapper[0]);\r\n\t\t\treturn self;\r\n\t\t}\r\n\t\tif (wrapper.isBlock()) {\r\n\t\t\tvar copyWrapper = wrapper.clone(true), child = copyWrapper;\r\n\t\t\twhile (child.first()) {\r\n\t\t\t\tchild = child.first();\r\n\t\t\t}\r\n\t\t\tchild.append(range.extractContents());\r\n\t\t\trange.insertNode(copyWrapper[0]).selectNode(copyWrapper[0]);\r\n\t\t\treturn self;\r\n\t\t}\r\n\t\trange.enlarge();\r\n\t\tvar bookmark = range.createBookmark(), ancestor = range.commonAncestor(), isStart = false;\r\n\t\tK(ancestor).scan(function(node) {\r\n\t\t\tif (!isStart && node == bookmark.start) {\r\n\t\t\t\tisStart = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (isStart) {\r\n\t\t\t\tif (node == bookmark.end) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvar knode = K(node);\r\n\t\t\t\tif (_inPreElement(knode)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (knode.type == 3 && _trim(node.nodeValue).length > 0) {\r\n\t\t\t\t\tvar parent;\r\n\t\t\t\t\twhile ((parent = knode.parent()) && parent.isStyle() && parent.children().length == 1) {\r\n\t\t\t\t\t\tknode = parent;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_wrapNode(knode, wrapper);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\trange.moveToBookmark(bookmark);\r\n\t\treturn self;\r\n\t},\r\n\tsplit : function(isStart, map) {\r\n\t\tvar range = this.range, doc = range.doc;\r\n\t\tvar tempRange = range.cloneRange().collapse(isStart);\r\n\t\tvar node = tempRange.startContainer, pos = tempRange.startOffset,\r\n\t\t\tparent = node.nodeType == 3 ? node.parentNode : node,\r\n\t\t\tneedSplit = false, knode;\r\n\t\twhile (parent && parent.parentNode) {\r\n\t\t\tknode = K(parent);\r\n\t\t\tif (map) {\r\n\t\t\t\tif (!knode.isStyle()) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (!_hasAttrOrCss(knode, map)) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (_NOSPLIT_TAG_MAP[knode.name]) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tneedSplit = true;\r\n\t\t\tparent = parent.parentNode;\r\n\t\t}\r\n\t\tif (needSplit) {\r\n\t\t\tvar dummy = doc.createElement('span');\r\n\t\t\trange.cloneRange().collapse(!isStart).insertNode(dummy);\r\n\t\t\tif (isStart) {\r\n\t\t\t\ttempRange.setStartBefore(parent.firstChild).setEnd(node, pos);\r\n\t\t\t} else {\r\n\t\t\t\ttempRange.setStart(node, pos).setEndAfter(parent.lastChild);\r\n\t\t\t}\r\n\t\t\tvar frag = tempRange.extractContents(),\r\n\t\t\t\tfirst = frag.firstChild, last = frag.lastChild;\r\n\t\t\tif (isStart) {\r\n\t\t\t\ttempRange.insertNode(frag);\r\n\t\t\t\trange.setStartAfter(last).setEndBefore(dummy);\r\n\t\t\t} else {\r\n\t\t\t\tparent.appendChild(frag);\r\n\t\t\t\trange.setStartBefore(dummy).setEndBefore(first);\r\n\t\t\t}\r\n\t\t\tvar dummyParent = dummy.parentNode;\r\n\t\t\tif (dummyParent == range.endContainer) {\r\n\t\t\t\tvar prev = K(dummy).prev(), next = K(dummy).next();\r\n\t\t\t\tif (prev && next && prev.type == 3 && next.type == 3) {\r\n\t\t\t\t\trange.setEnd(prev[0], prev[0].nodeValue.length);\r\n\t\t\t\t} else if (!isStart) {\r\n\t\t\t\t\trange.setEnd(range.endContainer, range.endOffset - 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdummyParent.removeChild(dummy);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\tremove : function(map) {\r\n\t\tvar self = this, doc = self.doc, range = self.range;\r\n\t\trange.enlarge();\r\n\t\tif (range.startOffset === 0) {\r\n\t\t\tvar ksc = K(range.startContainer), parent;\r\n\t\t\twhile ((parent = ksc.parent()) && parent.isStyle() && parent.children().length == 1) {\r\n\t\t\t\tksc = parent;\r\n\t\t\t}\r\n\t\t\trange.setStart(ksc[0], 0);\r\n\t\t\tksc = K(range.startContainer);\r\n\t\t\tif (ksc.isBlock()) {\r\n\t\t\t\t_removeAttrOrCss(ksc, map);\r\n\t\t\t}\r\n\t\t\tvar kscp = ksc.parent();\r\n\t\t\tif (kscp && kscp.isBlock()) {\r\n\t\t\t\t_removeAttrOrCss(kscp, map);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar sc, so;\r\n\t\tif (range.collapsed) {\r\n\t\t\tself.split(true, map);\r\n\t\t\tsc = range.startContainer;\r\n\t\t\tso = range.startOffset;\r\n\t\t\tif (so > 0) {\r\n\t\t\t\tvar sb = K(sc.childNodes[so - 1]);\r\n\t\t\t\tif (sb && _isEmptyNode(sb)) {\r\n\t\t\t\t\tsb.remove();\r\n\t\t\t\t\trange.setStart(sc, so - 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar sa = K(sc.childNodes[so]);\r\n\t\t\tif (sa && _isEmptyNode(sa)) {\r\n\t\t\t\tsa.remove();\r\n\t\t\t}\r\n\t\t\tif (_isEmptyNode(sc)) {\r\n\t\t\t\trange.startBefore(sc);\r\n\t\t\t\tsc.remove();\r\n\t\t\t}\r\n\t\t\trange.collapse(true);\r\n\t\t\treturn self;\r\n\t\t}\r\n\t\tself.split(true, map);\r\n\t\tself.split(false, map);\r\n\t\tvar startDummy = doc.createElement('span'), endDummy = doc.createElement('span');\r\n\t\trange.cloneRange().collapse(false).insertNode(endDummy);\r\n\t\trange.cloneRange().collapse(true).insertNode(startDummy);\r\n\t\tvar nodeList = [], cmpStart = false;\r\n\t\tK(range.commonAncestor()).scan(function(node) {\r\n\t\t\tif (!cmpStart && node == startDummy) {\r\n\t\t\t\tcmpStart = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (node == endDummy) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (cmpStart) {\r\n\t\t\t\tnodeList.push(node);\r\n\t\t\t}\r\n\t\t});\r\n\t\tK(startDummy).remove();\r\n\t\tK(endDummy).remove();\r\n\t\tsc = range.startContainer;\r\n\t\tso = range.startOffset;\r\n\t\tvar ec = range.endContainer, eo = range.endOffset;\r\n\t\tif (so > 0) {\r\n\t\t\tvar startBefore = K(sc.childNodes[so - 1]);\r\n\t\t\tif (startBefore && _isEmptyNode(startBefore)) {\r\n\t\t\t\tstartBefore.remove();\r\n\t\t\t\trange.setStart(sc, so - 1);\r\n\t\t\t\tif (sc == ec) {\r\n\t\t\t\t\trange.setEnd(ec, eo - 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar startAfter = K(sc.childNodes[so]);\r\n\t\t\tif (startAfter && _isEmptyNode(startAfter)) {\r\n\t\t\t\tstartAfter.remove();\r\n\t\t\t\tif (sc == ec) {\r\n\t\t\t\t\trange.setEnd(ec, eo - 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar endAfter = K(ec.childNodes[range.endOffset]);\r\n\t\tif (endAfter && _isEmptyNode(endAfter)) {\r\n\t\t\tendAfter.remove();\r\n\t\t}\r\n\t\tvar bookmark = range.createBookmark(true);\r\n\t\t_each(nodeList, function(i, node) {\r\n\t\t\t_removeAttrOrCss(K(node), map);\r\n\t\t});\r\n\t\trange.moveToBookmark(bookmark);\r\n\t\treturn self;\r\n\t},\r\n\tcommonNode : function(map) {\r\n\t\tvar range = this.range;\r\n\t\tvar ec = range.endContainer, eo = range.endOffset,\r\n\t\t\tnode = (ec.nodeType == 3 || eo === 0) ? ec : ec.childNodes[eo - 1];\r\n\t\tfunction find(node) {\r\n\t\t\tvar child = node, parent = node;\r\n\t\t\twhile (parent) {\r\n\t\t\t\tif (_hasAttrOrCss(K(parent), map)) {\r\n\t\t\t\t\treturn K(parent);\r\n\t\t\t\t}\r\n\t\t\t\tparent = parent.parentNode;\r\n\t\t\t}\r\n\t\t\twhile (child && (child = child.lastChild)) {\r\n\t\t\t\tif (_hasAttrOrCss(K(child), map)) {\r\n\t\t\t\t\treturn K(child);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar cNode = find(node);\r\n\t\tif (cNode) {\r\n\t\t\treturn cNode;\r\n\t\t}\r\n\t\tif (node.nodeType == 1 || (ec.nodeType == 3 && eo === 0)) {\r\n\t\t\tvar prev = K(node).prev();\r\n\t\t\tif (prev) {\r\n\t\t\t\treturn find(prev);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\tcommonAncestor : function(tagName) {\r\n\t\tvar range = this.range,\r\n\t\t\tsc = range.startContainer, so = range.startOffset,\r\n\t\t\tec = range.endContainer, eo = range.endOffset,\r\n\t\t\tstartNode = (sc.nodeType == 3 || so === 0) ? sc : sc.childNodes[so - 1],\r\n\t\t\tendNode = (ec.nodeType == 3 || eo === 0) ? ec : ec.childNodes[eo - 1];\r\n\t\tfunction find(node) {\r\n\t\t\twhile (node) {\r\n\t\t\t\tif (node.nodeType == 1) {\r\n\t\t\t\t\tif (node.tagName.toLowerCase() === tagName) {\r\n\t\t\t\t\t\treturn node;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tnode = node.parentNode;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar start = find(startNode), end = find(endNode);\r\n\t\tif (start && end && start === end) {\r\n\t\t\treturn K(start);\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\tstate : function(key) {\r\n\t\tvar self = this, doc = self.doc, bool = false;\r\n\t\ttry {\r\n\t\t\tbool = doc.queryCommandState(key);\r\n\t\t} catch (e) {}\r\n\t\treturn bool;\r\n\t},\r\n\tval : function(key) {\r\n\t\tvar self = this, doc = self.doc, range = self.range;\r\n\t\tfunction lc(val) {\r\n\t\t\treturn val.toLowerCase();\r\n\t\t}\r\n\t\tkey = lc(key);\r\n\t\tvar val = '', knode;\r\n\t\tif (key === 'fontfamily' || key === 'fontname') {\r\n\t\t\tval = _nativeCommandValue(doc, 'fontname');\r\n\t\t\tval = val.replace(/['\"]/g, '');\r\n\t\t\treturn lc(val);\r\n\t\t}\r\n\t\tif (key === 'formatblock') {\r\n\t\t\tval = _nativeCommandValue(doc, key);\r\n\t\t\tif (val === '') {\r\n\t\t\t\tknode = self.commonNode({'h1,h2,h3,h4,h5,h6,p,div,pre,address' : '*'});\r\n\t\t\t\tif (knode) {\r\n\t\t\t\t\tval = knode.name;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (val === 'Normal') {\r\n\t\t\t\tval = 'p';\r\n\t\t\t}\r\n\t\t\treturn lc(val);\r\n\t\t}\r\n\t\tif (key === 'fontsize') {\r\n\t\t\tknode = self.commonNode({'*' : '.font-size'});\r\n\t\t\tif (knode) {\r\n\t\t\t\tval = knode.css('font-size');\r\n\t\t\t}\r\n\t\t\treturn lc(val);\r\n\t\t}\r\n\t\tif (key === 'forecolor') {\r\n\t\t\tknode = self.commonNode({'*' : '.color'});\r\n\t\t\tif (knode) {\r\n\t\t\t\tval = knode.css('color');\r\n\t\t\t}\r\n\t\t\tval = _toHex(val);\r\n\t\t\tif (val === '') {\r\n\t\t\t\tval = 'default';\r\n\t\t\t}\r\n\t\t\treturn lc(val);\r\n\t\t}\r\n\t\tif (key === 'hilitecolor') {\r\n\t\t\tknode = self.commonNode({'*' : '.background-color'});\r\n\t\t\tif (knode) {\r\n\t\t\t\tval = knode.css('background-color');\r\n\t\t\t}\r\n\t\t\tval = _toHex(val);\r\n\t\t\tif (val === '') {\r\n\t\t\t\tval = 'default';\r\n\t\t\t}\r\n\t\t\treturn lc(val);\r\n\t\t}\r\n\t\treturn val;\r\n\t},\r\n\ttoggle : function(wrapper, map) {\r\n\t\tvar self = this;\r\n\t\tif (self.commonNode(map)) {\r\n\t\t\tself.remove(map);\r\n\t\t} else {\r\n\t\t\tself.wrap(wrapper);\r\n\t\t}\r\n\t\treturn self.select();\r\n\t},\r\n\tbold : function() {\r\n\t\treturn this.toggle('<strong></strong>', {\r\n\t\t\tspan : '.font-weight=bold',\r\n\t\t\tstrong : '*',\r\n\t\t\tb : '*'\r\n\t\t});\r\n\t},\r\n\titalic : function() {\r\n\t\treturn this.toggle('<em></em>', {\r\n\t\t\tspan : '.font-style=italic',\r\n\t\t\tem : '*',\r\n\t\t\ti : '*'\r\n\t\t});\r\n\t},\r\n\tunderline : function() {\r\n\t\treturn this.toggle('<u></u>', {\r\n\t\t\tspan : '.text-decoration=underline',\r\n\t\t\tu : '*'\r\n\t\t});\r\n\t},\r\n\tstrikethrough : function() {\r\n\t\treturn this.toggle('<s></s>', {\r\n\t\t\tspan : '.text-decoration=line-through',\r\n\t\t\ts : '*'\r\n\t\t});\r\n\t},\r\n\tforecolor : function(val) {\r\n\t\treturn this.wrap('<span style=\"color:' + val + ';\"></span>').select();\r\n\t},\r\n\thilitecolor : function(val) {\r\n\t\treturn this.wrap('<span style=\"background-color:' + val + ';\"></span>').select();\r\n\t},\r\n\tfontsize : function(val) {\r\n\t\treturn this.wrap('<span style=\"font-size:' + val + ';\"></span>').select();\r\n\t},\r\n\tfontname : function(val) {\r\n\t\treturn this.fontfamily(val);\r\n\t},\r\n\tfontfamily : function(val) {\r\n\t\treturn this.wrap('<span style=\"font-family:' + val + ';\"></span>').select();\r\n\t},\r\n\tremoveformat : function() {\r\n\t\tvar map = {\r\n\t\t\t'*' : '.font-weight,.font-style,.text-decoration,.color,.background-color,.font-size,.font-family,.text-indent'\r\n\t\t},\r\n\t\ttags = _STYLE_TAG_MAP;\r\n\t\t_each(tags, function(key, val) {\r\n\t\t\tmap[key] = '*';\r\n\t\t});\r\n\t\tthis.remove(map);\r\n\t\treturn this.select();\r\n\t},\r\n\tinserthtml : function(val, quickMode) {\r\n\t\tvar self = this, range = self.range;\r\n\t\tif (val === '') {\r\n\t\t\treturn self;\r\n\t\t}\r\n\t\tfunction pasteHtml(range, val) {\r\n\t\t\tval = '<img id=\"__kindeditor_temp_tag__\" width=\"0\" height=\"0\" style=\"display:none;\" />' + val;\r\n\t\t\tvar rng = range.get();\r\n\t\t\tif (rng.item) {\r\n\t\t\t\trng.item(0).outerHTML = val;\r\n\t\t\t} else {\r\n\t\t\t\trng.pasteHTML(val);\r\n\t\t\t}\r\n\t\t\tvar temp = range.doc.getElementById('__kindeditor_temp_tag__');\r\n\t\t\ttemp.parentNode.removeChild(temp);\r\n\t\t\tvar newRange = _toRange(rng);\r\n\t\t\trange.setEnd(newRange.endContainer, newRange.endOffset);\r\n\t\t\trange.collapse(false);\r\n\t\t\tself.select(false);\r\n\t\t}\r\n\t\tfunction insertHtml(range, val) {\r\n\t\t\tvar doc = range.doc,\r\n\t\t\t\tfrag = doc.createDocumentFragment();\r\n\t\t\tK('@' + val, doc).each(function() {\r\n\t\t\t\tfrag.appendChild(this);\r\n\t\t\t});\r\n\t\t\trange.deleteContents();\r\n\t\t\trange.insertNode(frag);\r\n\t\t\trange.collapse(false);\r\n\t\t\tself.select(false);\r\n\t\t}\r\n\t\tif (_IERANGE && quickMode) {\r\n\t\t\ttry {\r\n\t\t\t\tpasteHtml(range, val);\r\n\t\t\t} catch(e) {\r\n\t\t\t\tinsertHtml(range, val);\r\n\t\t\t}\r\n\t\t\treturn self;\r\n\t\t}\r\n\t\tinsertHtml(range, val);\r\n\t\treturn self;\r\n\t},\r\n\thr : function() {\r\n\t\treturn this.inserthtml('<hr />');\r\n\t},\r\n\tprint : function() {\r\n\t\tthis.win.print();\r\n\t\treturn this;\r\n\t},\r\n\tinsertimage : function(url, title, width, height, border, align) {\r\n\t\ttitle = _undef(title, '');\r\n\t\tborder = _undef(border, 0);\r\n\t\tvar html = '<img src=\"' + _escape(url) + '\" data-ke-src=\"' + _escape(url) + '\" ';\r\n\t\tif (width) {\r\n\t\t\thtml += 'width=\"' + _escape(width) + '\" ';\r\n\t\t}\r\n\t\tif (height) {\r\n\t\t\thtml += 'height=\"' + _escape(height) + '\" ';\r\n\t\t}\r\n\t\tif (title) {\r\n\t\t\thtml += 'title=\"' + _escape(title) + '\" ';\r\n\t\t}\r\n\t\tif (align) {\r\n\t\t\thtml += 'align=\"' + _escape(align) + '\" ';\r\n\t\t}\r\n\t\thtml += 'alt=\"' + _escape(title) + '\" ';\r\n\t\thtml += '/>';\r\n\t\treturn this.inserthtml(html);\r\n\t},\r\n\tcreatelink : function(url, type) {\r\n\t\tvar self = this, doc = self.doc, range = self.range;\r\n\t\tself.select();\r\n\t\tvar a = self.commonNode({ a : '*' });\r\n\t\tif (a && !range.isControl()) {\r\n\t\t\trange.selectNode(a.get());\r\n\t\t\tself.select();\r\n\t\t}\r\n\t\tvar html = '<a href=\"' + _escape(url) + '\" data-ke-src=\"' + _escape(url) + '\" ';\r\n\t\tif (type) {\r\n\t\t\thtml += ' target=\"' + _escape(type) + '\"';\r\n\t\t}\r\n\t\tif (range.collapsed) {\r\n\t\t\thtml += '>' + _escape(url) + '</a>';\r\n\t\t\treturn self.inserthtml(html);\r\n\t\t}\r\n\t\tif (range.isControl()) {\r\n\t\t\tvar node = K(range.startContainer.childNodes[range.startOffset]);\r\n\t\t\thtml += '></a>';\r\n\t\t\tnode.after(K(html, doc));\r\n\t\t\tnode.next().append(node);\r\n\t\t\trange.selectNode(node[0]);\r\n\t\t\treturn self.select();\r\n\t\t}\r\n\t\tfunction setAttr(node, url, type) {\r\n\t\t\tK(node).attr('href', url).attr('data-ke-src', url);\r\n\t\t\tif (type) {\r\n\t\t\t\tK(node).attr('target', type);\r\n\t\t\t} else {\r\n\t\t\t\tK(node).removeAttr('target');\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar sc = range.startContainer, so = range.startOffset,\r\n\t\t\tec = range.endContainer, eo = range.endOffset;\r\n\t\tif (sc.nodeType == 1 && sc === ec && so + 1 === eo) {\r\n\t\t\tvar child = sc.childNodes[so];\r\n\t\t\tif (child.nodeName.toLowerCase() == 'a') {\r\n\t\t\t\tsetAttr(child, url, type);\r\n\t\t\t\treturn self;\r\n\t\t\t}\r\n\t\t}\r\n\t\t_nativeCommand(doc, 'createlink', '__kindeditor_temp_url__');\r\n\t\tK('a[href=\"__kindeditor_temp_url__\"]', doc).each(function() {\r\n\t\t\tsetAttr(this, url, type);\r\n\t\t});\r\n\t\treturn self;\r\n\t},\r\n\tunlink : function() {\r\n\t\tvar self = this, doc = self.doc, range = self.range;\r\n\t\tself.select();\r\n\t\tif (range.collapsed) {\r\n\t\t\tvar a = self.commonNode({ a : '*' });\r\n\t\t\tif (a) {\r\n\t\t\t\trange.selectNode(a.get());\r\n\t\t\t\tself.select();\r\n\t\t\t}\r\n\t\t\t_nativeCommand(doc, 'unlink', null);\r\n\t\t\tif (_WEBKIT && K(range.startContainer).name === 'img') {\r\n\t\t\t\tvar parent = K(range.startContainer).parent();\r\n\t\t\t\tif (parent.name === 'a') {\r\n\t\t\t\t\tparent.remove(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t_nativeCommand(doc, 'unlink', null);\r\n\t\t}\r\n\t\treturn self;\r\n\t}\r\n});\r\n_each(('formatblock,selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,' +\r\n\t'insertunorderedlist,indent,outdent,subscript,superscript').split(','), function(i, name) {\r\n\tKCmd.prototype[name] = function(val) {\r\n\t\tvar self = this;\r\n\t\tself.select();\r\n\t\t_nativeCommand(self.doc, name, val);\r\n\t\tif (_IERANGE && _inArray(name, 'justifyleft,justifycenter,justifyright,justifyfull'.split(',')) >= 0) {\r\n\t\t\tself.selection();\r\n\t\t}\r\n\t\tif (!_IERANGE || _inArray(name, 'formatblock,selectall,insertorderedlist,insertunorderedlist'.split(',')) >= 0) {\r\n\t\t\tself.selection();\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n});\r\n_each('cut,copy,paste'.split(','), function(i, name) {\r\n\tKCmd.prototype[name] = function() {\r\n\t\tvar self = this;\r\n\t\tif (!self.doc.queryCommandSupported(name)) {\r\n\t\t\tthrow 'not supported';\r\n\t\t}\r\n\t\tself.select();\r\n\t\t_nativeCommand(self.doc, name, null);\r\n\t\treturn self;\r\n\t};\r\n});\r\nfunction _cmd(mixed) {\r\n\tif (mixed.nodeName) {\r\n\t\tvar doc = _getDoc(mixed);\r\n\t\tmixed = _range(doc).selectNodeContents(doc.body).collapse(false);\r\n\t}\r\n\treturn new KCmd(mixed);\r\n}\r\nK.CmdClass = KCmd;\r\nK.cmd = _cmd;\r\n\n\r\nfunction _drag(options) {\r\n\tvar moveEl = options.moveEl,\r\n\t\tmoveFn = options.moveFn,\r\n\t\tclickEl = options.clickEl || moveEl,\r\n\t\tbeforeDrag = options.beforeDrag,\r\n\t\tiframeFix = options.iframeFix === undefined ? true : options.iframeFix;\r\n\tvar docs = [document];\r\n\tif (iframeFix) {\r\n\t\tK('iframe').each(function() {\r\n\t\t\tvar src = _formatUrl(this.src || '', 'absolute');\r\n\t\t\tif (/^https?:\\/\\//.test(src)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar doc;\r\n\t\t\ttry {\r\n\t\t\t\tdoc = _iframeDoc(this);\r\n\t\t\t} catch(e) {}\r\n\t\t\tif (doc) {\r\n\t\t\t\tvar pos = K(this).pos();\r\n\t\t\t\tK(doc).data('pos-x', pos.x);\r\n\t\t\t\tK(doc).data('pos-y', pos.y);\r\n\t\t\t\tdocs.push(doc);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tclickEl.mousedown(function(e) {\r\n\t\tif(e.button !== 0 && e.button !== 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\te.stopPropagation();\r\n\t\tvar self = clickEl.get(),\r\n\t\t\tx = _removeUnit(moveEl.css('left')),\r\n\t\t\ty = _removeUnit(moveEl.css('top')),\r\n\t\t\twidth = moveEl.width(),\r\n\t\t\theight = moveEl.height(),\r\n\t\t\tpageX = e.pageX,\r\n\t\t\tpageY = e.pageY;\r\n\t\tif (beforeDrag) {\r\n\t\t\tbeforeDrag();\r\n\t\t}\r\n\t\tfunction moveListener(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tvar kdoc = K(_getDoc(e.target));\r\n\t\t\tvar diffX = _round((kdoc.data('pos-x') || 0) + e.pageX - pageX);\r\n\t\t\tvar diffY = _round((kdoc.data('pos-y') || 0) + e.pageY - pageY);\r\n\t\t\tmoveFn.call(clickEl, x, y, width, height, diffX, diffY);\r\n\t\t}\r\n\t\tfunction selectListener(e) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\tfunction upListener(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tK(docs).unbind('mousemove', moveListener)\r\n\t\t\t\t.unbind('mouseup', upListener)\r\n\t\t\t\t.unbind('selectstart', selectListener);\r\n\t\t\tif (self.releaseCapture) {\r\n\t\t\t\tself.releaseCapture();\r\n\t\t\t}\r\n\t\t}\r\n\t\tK(docs).mousemove(moveListener)\r\n\t\t\t.mouseup(upListener)\r\n\t\t\t.bind('selectstart', selectListener);\r\n\t\tif (self.setCapture) {\r\n\t\t\tself.setCapture();\r\n\t\t}\r\n\t});\r\n}\r\n\r\r\nfunction KWidget(options) {\r\n\tthis.init(options);\r\n}\r\n_extend(KWidget, {\r\n\tinit : function(options) {\r\n\t\tvar self = this;\r\n\t\tself.name = options.name || '';\r\n\t\tself.doc = options.doc || document;\r\n\t\tself.win = _getWin(self.doc);\r\n\t\tself.x = _addUnit(options.x);\r\n\t\tself.y = _addUnit(options.y);\r\n\t\tself.z = options.z;\r\n\t\tself.width = _addUnit(options.width);\r\n\t\tself.height = _addUnit(options.height);\r\n\t\tself.div = K('<div style=\"display:block;\"></div>');\r\n\t\tself.options = options;\r\n\t\tself._alignEl = options.alignEl;\r\n\t\tif (self.width) {\r\n\t\t\tself.div.css('width', self.width);\r\n\t\t}\r\n\t\tif (self.height) {\r\n\t\t\tself.div.css('height', self.height);\r\n\t\t}\r\n\t\tif (self.z) {\r\n\t\t\tself.div.css({\r\n\t\t\t\tposition : 'absolute',\r\n\t\t\t\tleft : self.x,\r\n\t\t\t\ttop : self.y,\r\n\t\t\t\t'z-index' : self.z\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (self.z && (self.x === undefined || self.y === undefined)) {\r\n\t\t\tself.autoPos(self.width, self.height);\r\n\t\t}\r\n\t\tif (options.cls) {\r\n\t\t\tself.div.addClass(options.cls);\r\n\t\t}\r\n\t\tif (options.shadowMode) {\r\n\t\t\tself.div.addClass('ke-shadow');\r\n\t\t}\r\n\t\tif (options.css) {\r\n\t\t\tself.div.css(options.css);\r\n\t\t}\r\n\t\tif (options.src) {\r\n\t\t\tK(options.src).replaceWith(self.div);\r\n\t\t} else {\r\n\t\t\tK(self.doc.body).append(self.div);\r\n\t\t}\r\n\t\tif (options.html) {\r\n\t\t\tself.div.html(options.html);\r\n\t\t}\r\n\t\tif (options.autoScroll) {\r\n\t\t\tif (_IE && _V < 7 || _QUIRKS) {\r\n\t\t\t\tvar scrollPos = _getScrollPos();\r\n\t\t\t\tK(self.win).bind('scroll', function(e) {\r\n\t\t\t\t\tvar pos = _getScrollPos(),\r\n\t\t\t\t\t\tdiffX = pos.x - scrollPos.x,\r\n\t\t\t\t\t\tdiffY = pos.y - scrollPos.y;\r\n\t\t\t\t\tself.pos(_removeUnit(self.x) + diffX, _removeUnit(self.y) + diffY, false);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tself.div.css('position', 'fixed');\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tpos : function(x, y, updateProp) {\r\n\t\tvar self = this;\r\n\t\tupdateProp = _undef(updateProp, true);\r\n\t\tif (x !== null) {\r\n\t\t\tx = x < 0 ? 0 : _addUnit(x);\r\n\t\t\tself.div.css('left', x);\r\n\t\t\tif (updateProp) {\r\n\t\t\t\tself.x = x;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (y !== null) {\r\n\t\t\ty = y < 0 ? 0 : _addUnit(y);\r\n\t\t\tself.div.css('top', y);\r\n\t\t\tif (updateProp) {\r\n\t\t\t\tself.y = y;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn self;\r\n\t},\r\n\tautoPos : function(width, height) {\r\n\t\tvar self = this,\r\n\t\t\tw = _removeUnit(width) || 0,\r\n\t\t\th = _removeUnit(height) || 0,\r\n\t\t\tscrollPos = _getScrollPos();\r\n\t\tif (self._alignEl) {\r\n\t\t\tvar knode = K(self._alignEl),\r\n\t\t\t\tpos = knode.pos(),\r\n\t\t\t\tdiffX = _round(knode[0].clientWidth / 2 - w / 2),\r\n\t\t\t\tdiffY = _round(knode[0].clientHeight / 2 - h / 2);\r\n\t\t\tx = diffX < 0 ? pos.x : pos.x + diffX;\r\n\t\t\ty = diffY < 0 ? pos.y : pos.y + diffY;\r\n\t\t} else {\r\n\t\t\tvar docEl = _docElement(self.doc);\r\n\t\t\tx = _round(scrollPos.x + (docEl.clientWidth - w) / 2);\r\n\t\t\ty = _round(scrollPos.y + (docEl.clientHeight - h) / 2);\r\n\t\t}\r\n\t\tif (!(_IE && _V < 7 || _QUIRKS)) {\r\n\t\t\tx -= scrollPos.x;\r\n\t\t\ty -= scrollPos.y;\r\n\t\t}\r\n\t\treturn self.pos(x, y);\r\n\t},\r\n\tremove : function() {\r\n\t\tvar self = this;\r\n\t\tif (_IE && _V < 7 || _QUIRKS) {\r\n\t\t\tK(self.win).unbind('scroll');\r\n\t\t}\r\n\t\tself.div.remove();\r\n\t\t_each(self, function(i) {\r\n\t\t\tself[i] = null;\r\n\t\t});\r\n\t\treturn this;\r\n\t},\r\n\tshow : function() {\r\n\t\tthis.div.show();\r\n\t\treturn this;\r\n\t},\r\n\thide : function() {\r\n\t\tthis.div.hide();\r\n\t\treturn this;\r\n\t},\r\n\tdraggable : function(options) {\r\n\t\tvar self = this;\r\n\t\toptions = options || {};\r\n\t\toptions.moveEl = self.div;\r\n\t\toptions.moveFn = function(x, y, width, height, diffX, diffY) {\r\n\t\t\tif ((x = x + diffX) < 0) {\r\n\t\t\t\tx = 0;\r\n\t\t\t}\r\n\t\t\tif ((y = y + diffY) < 0) {\r\n\t\t\t\ty = 0;\r\n\t\t\t}\r\n\t\t\tself.pos(x, y);\r\n\t\t};\r\n\t\t_drag(options);\r\n\t\treturn self;\r\n\t}\r\n});\r\nfunction _widget(options) {\r\n\treturn new KWidget(options);\r\n}\r\nK.WidgetClass = KWidget;\r\nK.widget = _widget;\r\n\n\r\nfunction _iframeDoc(iframe) {\r\n\tiframe = _get(iframe);\r\n\treturn iframe.contentDocument || iframe.contentWindow.document;\r\n}\r\nvar html, _direction = '';\r\nif ((html = document.getElementsByTagName('html'))) {\r\n\t_direction = html[0].dir;\r\n}\r\nfunction _getInitHtml(themesPath, bodyClass, cssPath, cssData) {\r\n\tvar arr = [\r\n\t\t(_direction === '' ? '<html>' : '<html dir=\"' + _direction + '\">'),\r\n\t\t'<head><meta charset=\"utf-8\" /><title></title>',\r\n\t\t'<style>',\r\n\t\t'html {margin:0;padding:0;}',\r\n\t\t'body {margin:0;padding:5px;}',\r\n\t\t'body, td {font:12px/1.5 \"sans serif\",tahoma,verdana,helvetica;}',\r\n\t\t'body, p, div {word-wrap: break-word;}',\r\n\t\t'p {margin:5px 0;}',\r\n\t\t'table {border-collapse:collapse;}',\r\n\t\t'img {border:0;}',\r\n\t\t'noscript {display:none;}',\r\n\t\t'table.ke-zeroborder td {border:1px dotted #AAA;}',\r\n\t\t'img.ke-flash {',\r\n\t\t'\tborder:1px solid #AAA;',\r\n\t\t'\tbackground-image:url(' + themesPath + 'common/flash.gif);',\r\n\t\t'\tbackground-position:center center;',\r\n\t\t'\tbackground-repeat:no-repeat;',\r\n\t\t'\twidth:100px;',\r\n\t\t'\theight:100px;',\r\n\t\t'}',\r\n\t\t'img.ke-rm {',\r\n\t\t'\tborder:1px solid #AAA;',\r\n\t\t'\tbackground-image:url(' + themesPath + 'common/rm.gif);',\r\n\t\t'\tbackground-position:center center;',\r\n\t\t'\tbackground-repeat:no-repeat;',\r\n\t\t'\twidth:100px;',\r\n\t\t'\theight:100px;',\r\n\t\t'}',\r\n\t\t'img.ke-media {',\r\n\t\t'\tborder:1px solid #AAA;',\r\n\t\t'\tbackground-image:url(' + themesPath + 'common/media.gif);',\r\n\t\t'\tbackground-position:center center;',\r\n\t\t'\tbackground-repeat:no-repeat;',\r\n\t\t'\twidth:100px;',\r\n\t\t'\theight:100px;',\r\n\t\t'}',\r\n\t\t'img.ke-anchor {',\r\n\t\t'\tborder:1px dashed #666;',\r\n\t\t'\twidth:16px;',\r\n\t\t'\theight:16px;',\r\n\t\t'}',\r\n\t\t'.ke-script, .ke-noscript, .ke-display-none {',\r\n\t\t'\tdisplay:none;',\r\n\t\t'\tfont-size:0;',\r\n\t\t'\twidth:0;',\r\n\t\t'\theight:0;',\r\n\t\t'}',\r\n\t\t'.ke-pagebreak {',\r\n\t\t'\tborder:1px dotted #AAA;',\r\n\t\t'\tfont-size:0;',\r\n\t\t'\theight:2px;',\r\n\t\t'}',\r\n\t\t'</style>'\r\n\t];\r\n\tif (!_isArray(cssPath)) {\r\n\t\tcssPath = [cssPath];\r\n\t}\r\n\t_each(cssPath, function(i, path) {\r\n\t\tif (path) {\r\n\t\t\tarr.push('<link href=\"' + path + '\" rel=\"stylesheet\" />');\r\n\t\t}\r\n\t});\r\n\tif (cssData) {\r\n\t\tarr.push('<style>' + cssData + '</style>');\r\n\t}\r\n\tarr.push('</head><body ' + (bodyClass ? 'class=\"' + bodyClass + '\"' : '') + '></body></html>');\r\n\treturn arr.join('\\n');\r\n}\r\nfunction _elementVal(knode, val) {\r\n\tif (knode.hasVal()) {\r\n\t\tif (val === undefined) {\r\n\t\t\tvar html = knode.val();\r\n\t\t\thtml = html.replace(/(<(?:p|p\\s[^>]*)>) *(<\\/p>)/ig, '');\r\n\t\t\treturn html;\r\n\t\t}\r\n\t\treturn knode.val(val);\r\n\t}\r\n\treturn knode.html(val);\r\n}\r\n\r\r\nfunction KEdit(options) {\r\n\tthis.init(options);\r\n}\r\n_extend(KEdit, KWidget, {\r\n\tinit : function(options) {\r\n\t\tvar self = this;\r\n\t\tKEdit.parent.init.call(self, options);\r\n\t\tself.srcElement = K(options.srcElement);\r\n\t\tself.div.addClass('ke-edit');\r\n\t\tself.designMode = _undef(options.designMode, true);\r\n\t\tself.beforeGetHtml = options.beforeGetHtml;\r\n\t\tself.beforeSetHtml = options.beforeSetHtml;\r\n\t\tself.afterSetHtml = options.afterSetHtml;\r\n\t\tvar themesPath = _undef(options.themesPath, ''),\r\n\t\t\tbodyClass = options.bodyClass,\r\n\t\t\tcssPath = options.cssPath,\r\n\t\t\tcssData = options.cssData,\r\n\t\t\tisDocumentDomain = location.protocol != 'res:' && location.host.replace(/:\\d+/, '') !== document.domain,\r\n\t\t\tsrcScript = ('document.open();' +\r\n\t\t\t\t(isDocumentDomain ? 'document.domain=\"' + document.domain + '\";' : '') +\r\n\t\t\t\t'document.close();'),\r\n\t\t\tiframeSrc = _IE ? ' src=\"javascript:void(function(){' + encodeURIComponent(srcScript) + '}())\"' : '';\r\n\t\tself.iframe = K('<iframe class=\"ke-edit-iframe\" hidefocus=\"true\" frameborder=\"0\"' + iframeSrc + '></iframe>').css('width', '100%');\r\n\t\tself.textarea = K('<textarea class=\"ke-edit-textarea\" hidefocus=\"true\"></textarea>').css('width', '100%');\r\n\t\tself.tabIndex = isNaN(parseInt(options.tabIndex, 10)) ? self.srcElement.attr('tabindex') : parseInt(options.tabIndex, 10);\r\n\t\tself.iframe.attr('tabindex', self.tabIndex);\r\n\t\tself.textarea.attr('tabindex', self.tabIndex);\r\n\t\tif (self.width) {\r\n\t\t\tself.setWidth(self.width);\r\n\t\t}\r\n\t\tif (self.height) {\r\n\t\t\tself.setHeight(self.height);\r\n\t\t}\r\n\t\tif (self.designMode) {\r\n\t\t\tself.textarea.hide();\r\n\t\t} else {\r\n\t\t\tself.iframe.hide();\r\n\t\t}\r\n\t\tfunction ready() {\r\n\t\t\tvar doc = _iframeDoc(self.iframe);\r\n\t\t\tdoc.open();\r\n\t\t\tif (isDocumentDomain) {\r\n\t\t\t\tdoc.domain = document.domain;\r\n\t\t\t}\r\n\t\t\tdoc.write(_getInitHtml(themesPath, bodyClass, cssPath, cssData));\r\n\t\t\tdoc.close();\r\n\t\t\tself.win = self.iframe[0].contentWindow;\r\n\t\t\tself.doc = doc;\r\n\t\t\tvar cmd = _cmd(doc);\r\n\t\t\tself.afterChange(function(e) {\r\n\t\t\t\tcmd.selection();\r\n\t\t\t});\r\n\t\t\tif (_WEBKIT) {\r\n\t\t\t\tK(doc).click(function(e) {\r\n\t\t\t\t\tif (K(e.target).name === 'img') {\r\n\t\t\t\t\t\tcmd.selection(true);\r\n\t\t\t\t\t\tcmd.range.selectNode(e.target);\r\n\t\t\t\t\t\tcmd.select();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (_IE) {\r\n\t\t\t\tself._mousedownHandler = function() {\r\n\t\t\t\t\tvar newRange = cmd.range.cloneRange();\r\n\t\t\t\t\tnewRange.shrink();\r\n\t\t\t\t\tif (newRange.isControl()) {\r\n\t\t\t\t\t\tself.blur();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tK(document).mousedown(self._mousedownHandler);\r\n\t\t\t\tK(doc).keydown(function(e) {\r\n\t\t\t\t\tif (e.which == 8) {\r\n\t\t\t\t\t\tcmd.selection();\r\n\t\t\t\t\t\tvar rng = cmd.range;\r\n\t\t\t\t\t\tif (rng.isControl()) {\r\n\t\t\t\t\t\t\trng.collapse(true);\r\n\t\t\t\t\t\t\tK(rng.startContainer.childNodes[rng.startOffset]).remove();\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tself.cmd = cmd;\r\n\t\t\tself.html(_elementVal(self.srcElement));\r\n\t\t\tif (_IE) {\r\n\t\t\t\tdoc.body.disabled = true;\r\n\t\t\t\tdoc.body.contentEditable = true;\r\n\t\t\t\tdoc.body.removeAttribute('disabled');\r\n\t\t\t} else {\r\n\t\t\t\tdoc.designMode = 'on';\r\n\t\t\t}\r\n\t\t\tif (options.afterCreate) {\r\n\t\t\t\toptions.afterCreate.call(self);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isDocumentDomain) {\r\n\t\t\tself.iframe.bind('load', function(e) {\r\n\t\t\t\tself.iframe.unbind('load');\r\n\t\t\t\tif (_IE) {\r\n\t\t\t\t\tready();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetTimeout(ready, 0);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tself.div.append(self.iframe);\r\n\t\tself.div.append(self.textarea);\r\n\t\tself.srcElement.hide();\r\n\t\t!isDocumentDomain && ready();\r\n\t},\r\n\tsetWidth : function(val) {\r\n\t\tvar self = this;\r\n\t\tval = _addUnit(val);\r\n\t\tself.width = val;\r\n\t\tself.div.css('width', val);\r\n\t\treturn self;\r\n\t},\r\n\tsetHeight : function(val) {\r\n\t\tvar self = this;\r\n\t\tval = _addUnit(val);\r\n\t\tself.height = val;\r\n\t\tself.div.css('height', val);\r\n\t\tself.iframe.css('height', val);\r\n\t\tif ((_IE && _V < 8) || _QUIRKS) {\r\n\t\t\tval = _addUnit(_removeUnit(val) - 2);\r\n\t\t}\r\n\t\tself.textarea.css('height', val);\r\n\t\treturn self;\r\n\t},\r\n\tremove : function() {\r\n\t\tvar self = this, doc = self.doc;\r\n\t\tK(doc.body).unbind();\r\n\t\tK(doc).unbind();\r\n\t\tK(self.win).unbind();\r\n\t\tif (self._mousedownHandler) {\r\n\t\t\tK(document).unbind('mousedown', self._mousedownHandler);\r\n\t\t}\r\n\t\t_elementVal(self.srcElement, self.html());\r\n\t\tself.srcElement.show();\r\n\t\tself.iframe.unbind();\r\n\t\tself.textarea.unbind();\r\n\t\tKEdit.parent.remove.call(self);\r\n\t},\r\n\thtml : function(val, isFull) {\r\n\t\tvar self = this, doc = self.doc;\r\n\t\tif (self.designMode) {\r\n\t\t\tvar body = doc.body;\r\n\t\t\tif (val === undefined) {\r\n\t\t\t\tif (isFull) {\r\n\t\t\t\t\tval = '<!doctype html><html>' + body.parentNode.innerHTML + '</html>';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tval = body.innerHTML;\r\n\t\t\t\t}\r\n\t\t\t\tif (self.beforeGetHtml) {\r\n\t\t\t\t\tval = self.beforeGetHtml(val);\r\n\t\t\t\t}\r\n\t\t\t\tif (_GECKO && val == '<br />') {\r\n\t\t\t\t\tval = '';\r\n\t\t\t\t}\r\n\t\t\t\treturn val;\r\n\t\t\t}\r\n\t\t\tif (self.beforeSetHtml) {\r\n\t\t\t\tval = self.beforeSetHtml(val);\r\n\t\t\t}\r\n\t\t\tif (_IE && _V >= 9) {\r\n\t\t\t\tval = val.replace(/(<.*?checked=\")checked(\".*>)/ig, '$1$2');\r\n\t\t\t}\r\n\t\t\tK(body).html(val);\r\n\t\t\tif (self.afterSetHtml) {\r\n\t\t\t\tself.afterSetHtml();\r\n\t\t\t}\r\n\t\t\treturn self;\r\n\t\t}\r\n\t\tif (val === undefined) {\r\n\t\t\treturn self.textarea.val();\r\n\t\t}\r\n\t\tself.textarea.val(val);\r\n\t\treturn self;\r\n\t},\r\n\tdesign : function(bool) {\r\n\t\tvar self = this, val;\r\n\t\tif (bool === undefined ? !self.designMode : bool) {\r\n\t\t\tif (!self.designMode) {\r\n\t\t\t\tval = self.html();\r\n\t\t\t\tself.designMode = true;\r\n\t\t\t\tself.textarea.hide();\r\n\t\t\t\tself.html(val);\r\n\t\t\t\tvar iframe = self.iframe;\r\n\t\t\t\tvar height = _removeUnit(self.height);\r\n\t\t\t\tiframe.height(height - 2);\r\n\t\t\t\tiframe.show();\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tiframe.height(height);\r\n\t\t\t\t}, 0);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (self.designMode) {\r\n\t\t\t\tval = self.html();\r\n\t\t\t\tself.designMode = false;\r\n\t\t\t\tself.html(val);\r\n\t\t\t\tself.iframe.hide();\r\n\t\t\t\tself.textarea.show();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn self.focus();\r\n\t},\r\n\tfocus : function() {\r\n\t\tvar self = this;\r\n\t\tself.designMode ? self.win.focus() : self.textarea[0].focus();\r\n\t\treturn self;\r\n\t},\r\n\tblur : function() {\r\n\t\tvar self = this;\r\n\t\tif (_IE) {\r\n\t\t\tvar input = K('<input type=\"text\" style=\"float:left;width:0;height:0;padding:0;margin:0;border:0;\" value=\"\" />', self.div);\r\n\t\t\tself.div.append(input);\r\n\t\t\tinput[0].focus();\r\n\t\t\tinput.remove();\r\n\t\t} else {\r\n\t\t\tself.designMode ? self.win.blur() : self.textarea[0].blur();\r\n\t\t}\r\n\t\treturn self;\r\n\t},\r\n\tafterChange : function(fn) {\r\n\t\tvar self = this, doc = self.doc, body = doc.body;\r\n\t\tK(doc).keyup(function(e) {\r\n\t\t\tif (!e.ctrlKey && !e.altKey && _CHANGE_KEY_MAP[e.which]) {\r\n\t\t\t\tfn(e);\r\n\t\t\t}\r\n\t\t});\r\n\t\tK(doc).mouseup(fn).contextmenu(fn);\r\n\t\tK(self.win).blur(fn);\r\n\t\tfunction timeoutHandler(e) {\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tfn(e);\r\n\t\t\t}, 1);\r\n\t\t}\r\n\t\tK(body).bind('paste', timeoutHandler);\r\n\t\tK(body).bind('cut', timeoutHandler);\r\n\t\treturn self;\r\n\t}\r\n});\r\nfunction _edit(options) {\r\n\treturn new KEdit(options);\r\n}\r\nK.EditClass = KEdit;\r\nK.edit = _edit;\r\nK.iframeDoc = _iframeDoc;\r\n\n\r\nfunction _selectToolbar(name, fn) {\r\n\tvar self = this,\r\n\t\tknode = self.get(name);\r\n\tif (knode) {\r\n\t\tif (knode.hasClass('ke-disabled')) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tfn(knode);\r\n\t}\r\n}\r\n\r\r\nfunction KToolbar(options) {\r\n\tthis.init(options);\r\n}\r\n_extend(KToolbar, KWidget, {\r\n\tinit : function(options) {\r\n\t\tvar self = this;\r\n\t\tKToolbar.parent.init.call(self, options);\r\n\t\tself.disableMode = _undef(options.disableMode, false);\r\n\t\tself.noDisableItemMap = _toMap(_undef(options.noDisableItems, []));\r\n\t\tself._itemMap = {};\r\n\t\tself.div.addClass('ke-toolbar').bind('contextmenu,mousedown,mousemove', function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t}).attr('unselectable', 'on');\r\n\t\tfunction find(target) {\r\n\t\t\tvar knode = K(target);\r\n\t\t\tif (knode.hasClass('ke-outline')) {\r\n\t\t\t\treturn knode;\r\n\t\t\t}\r\n\t\t\tif (knode.hasClass('ke-toolbar-icon')) {\r\n\t\t\t\treturn knode.parent();\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction hover(e, method) {\r\n\t\t\tvar knode = find(e.target);\r\n\t\t\tif (knode) {\r\n\t\t\t\tif (knode.hasClass('ke-disabled')) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (knode.hasClass('ke-selected')) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tknode[method]('ke-on');\r\n\t\t\t}\r\n\t\t}\r\n\t\tself.div.mouseover(function(e) {\r\n\t\t\thover(e, 'addClass');\r\n\t\t})\r\n\t\t.mouseout(function(e) {\r\n\t\t\thover(e, 'removeClass');\r\n\t\t})\r\n\t\t.click(function(e) {\r\n\t\t\tvar knode = find(e.target);\r\n\t\t\tif (knode) {\r\n\t\t\t\tif (knode.hasClass('ke-disabled')) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tself.options.click.call(this, e, knode.attr('data-name'));\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tget : function(name) {\r\n\t\tif (this._itemMap[name]) {\r\n\t\t\treturn this._itemMap[name];\r\n\t\t}\r\n\t\treturn (this._itemMap[name] = K('span.ke-icon-' + name, this.div).parent());\r\n\t},\r\n\tselect : function(name) {\r\n\t\t_selectToolbar.call(this, name, function(knode) {\r\n\t\t\tknode.addClass('ke-selected');\r\n\t\t});\r\n\t\treturn self;\r\n\t},\r\n\tunselect : function(name) {\r\n\t\t_selectToolbar.call(this, name, function(knode) {\r\n\t\t\tknode.removeClass('ke-selected').removeClass('ke-on');\r\n\t\t});\r\n\t\treturn self;\r\n\t},\r\n\tenable : function(name) {\r\n\t\tvar self = this,\r\n\t\t\tknode = name.get ? name : self.get(name);\r\n\t\tif (knode) {\r\n\t\t\tknode.removeClass('ke-disabled');\r\n\t\t\tknode.opacity(1);\r\n\t\t}\r\n\t\treturn self;\r\n\t},\r\n\tdisable : function(name) {\r\n\t\tvar self = this,\r\n\t\t\tknode = name.get ? name : self.get(name);\r\n\t\tif (knode) {\r\n\t\t\tknode.removeClass('ke-selected').addClass('ke-disabled');\r\n\t\t\tknode.opacity(0.5);\r\n\t\t}\r\n\t\treturn self;\r\n\t},\r\n\tdisableAll : function(bool, noDisableItems) {\r\n\t\tvar self = this, map = self.noDisableItemMap, item;\r\n\t\tif (noDisableItems) {\r\n\t\t\tmap = _toMap(noDisableItems);\r\n\t\t}\r\n\t\tif (bool === undefined ? !self.disableMode : bool) {\r\n\t\t\tK('span.ke-outline', self.div).each(function() {\r\n\t\t\t\tvar knode = K(this),\r\n\t\t\t\t\tname = knode[0].getAttribute('data-name', 2);\r\n\t\t\t\tif (!map[name]) {\r\n\t\t\t\t\tself.disable(knode);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tself.disableMode = true;\r\n\t\t} else {\r\n\t\t\tK('span.ke-outline', self.div).each(function() {\r\n\t\t\t\tvar knode = K(this),\r\n\t\t\t\t\tname = knode[0].getAttribute('data-name', 2);\r\n\t\t\t\tif (!map[name]) {\r\n\t\t\t\t\tself.enable(knode);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tself.disableMode = false;\r\n\t\t}\r\n\t\treturn self;\r\n\t}\r\n});\r\nfunction _toolbar(options) {\r\n\treturn new KToolbar(options);\r\n}\r\nK.ToolbarClass = KToolbar;\r\nK.toolbar = _toolbar;\r\n\n\r\r\nfunction KMenu(options) {\r\n\tthis.init(options);\r\n}\r\n_extend(KMenu, KWidget, {\r\n\tinit : function(options) {\r\n\t\tvar self = this;\r\n\t\toptions.z = options.z || 811213;\r\n\t\tKMenu.parent.init.call(self, options);\r\n\t\tself.centerLineMode = _undef(options.centerLineMode, true);\r\n\t\tself.div.addClass('ke-menu').bind('click,mousedown', function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t}).attr('unselectable', 'on');\r\n\t},\r\n\taddItem : function(item) {\r\n\t\tvar self = this;\r\n\t\tif (item.title === '-') {\r\n\t\t\tself.div.append(K('<div class=\"ke-menu-separator\"></div>'));\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar itemDiv = K('<div class=\"ke-menu-item\" unselectable=\"on\"></div>'),\r\n\t\t\tleftDiv = K('<div class=\"ke-inline-block ke-menu-item-left\"></div>'),\r\n\t\t\trightDiv = K('<div class=\"ke-inline-block ke-menu-item-right\"></div>'),\r\n\t\t\theight = _addUnit(item.height),\r\n\t\t\ticonClass = _undef(item.iconClass, '');\r\n\t\tself.div.append(itemDiv);\r\n\t\tif (height) {\r\n\t\t\titemDiv.css('height', height);\r\n\t\t\trightDiv.css('line-height', height);\r\n\t\t}\r\n\t\tvar centerDiv;\r\n\t\tif (self.centerLineMode) {\r\n\t\t\tcenterDiv = K('<div class=\"ke-inline-block ke-menu-item-center\"></div>');\r\n\t\t\tif (height) {\r\n\t\t\t\tcenterDiv.css('height', height);\r\n\t\t\t}\r\n\t\t}\r\n\t\titemDiv.mouseover(function(e) {\r\n\t\t\tK(this).addClass('ke-menu-item-on');\r\n\t\t\tif (centerDiv) {\r\n\t\t\t\tcenterDiv.addClass('ke-menu-item-center-on');\r\n\t\t\t}\r\n\t\t})\r\n\t\t.mouseout(function(e) {\r\n\t\t\tK(this).removeClass('ke-menu-item-on');\r\n\t\t\tif (centerDiv) {\r\n\t\t\t\tcenterDiv.removeClass('ke-menu-item-center-on');\r\n\t\t\t}\r\n\t\t})\r\n\t\t.click(function(e) {\r\n\t\t\titem.click.call(K(this));\r\n\t\t\te.stopPropagation();\r\n\t\t})\r\n\t\t.append(leftDiv);\r\n\t\tif (centerDiv) {\r\n\t\t\titemDiv.append(centerDiv);\r\n\t\t}\r\n\t\titemDiv.append(rightDiv);\r\n\t\tif (item.checked) {\r\n\t\t\ticonClass = 'ke-icon-checked';\r\n\t\t}\r\n\t\tif (iconClass !== '') {\r\n\t\t\tleftDiv.html('<span class=\"ke-inline-block ke-toolbar-icon ke-toolbar-icon-url ' + iconClass + '\"></span>');\r\n\t\t}\r\n\t\trightDiv.html(item.title);\r\n\t\treturn self;\r\n\t},\r\n\tremove : function() {\r\n\t\tvar self = this;\r\n\t\tif (self.options.beforeRemove) {\r\n\t\t\tself.options.beforeRemove.call(self);\r\n\t\t}\r\n\t\tK('.ke-menu-item', self.div[0]).unbind();\r\n\t\tKMenu.parent.remove.call(self);\r\n\t\treturn self;\r\n\t}\r\n});\r\nfunction _menu(options) {\r\n\treturn new KMenu(options);\r\n}\r\nK.MenuClass = KMenu;\r\nK.menu = _menu;\r\n\n\r\r\nfunction KColorPicker(options) {\r\n\tthis.init(options);\r\n}\r\n_extend(KColorPicker, KWidget, {\r\n\tinit : function(options) {\r\n\t\tvar self = this;\r\n\t\toptions.z = options.z || 811213;\r\n\t\tKColorPicker.parent.init.call(self, options);\r\n\t\tvar colors = options.colors || [\r\n\t\t\t['#E53333', '#E56600', '#FF9900', '#64451D', '#DFC5A4', '#FFE500'],\r\n\t\t\t['#009900', '#006600', '#99BB00', '#B8D100', '#60D978', '#00D5FF'],\r\n\t\t\t['#337FE5', '#003399', '#4C33E5', '#9933E5', '#CC33E5', '#EE33EE'],\r\n\t\t\t['#FFFFFF', '#CCCCCC', '#999999', '#666666', '#333333', '#000000']\r\n\t\t];\r\n\t\tself.selectedColor = (options.selectedColor || '').toLowerCase();\r\n\t\tself._cells = [];\r\n\t\tself.div.addClass('ke-colorpicker').bind('click,mousedown', function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t}).attr('unselectable', 'on');\r\n\t\tvar table = self.doc.createElement('table');\r\n\t\tself.div.append(table);\r\n\t\ttable.className = 'ke-colorpicker-table';\r\n\t\ttable.cellPadding = 0;\r\n\t\ttable.cellSpacing = 0;\r\n\t\ttable.border = 0;\r\n\t\tvar row = table.insertRow(0), cell = row.insertCell(0);\r\n\t\tcell.colSpan = colors[0].length;\r\n\t\tself._addAttr(cell, '', 'ke-colorpicker-cell-top');\r\n\t\tfor (var i = 0; i < colors.length; i++) {\r\n\t\t\trow = table.insertRow(i + 1);\r\n\t\t\tfor (var j = 0; j < colors[i].length; j++) {\r\n\t\t\t\tcell = row.insertCell(j);\r\n\t\t\t\tself._addAttr(cell, colors[i][j], 'ke-colorpicker-cell');\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_addAttr : function(cell, color, cls) {\r\n\t\tvar self = this;\r\n\t\tcell = K(cell).addClass(cls);\r\n\t\tif (self.selectedColor === color.toLowerCase()) {\r\n\t\t\tcell.addClass('ke-colorpicker-cell-selected');\r\n\t\t}\r\n\t\tcell.attr('title', color || self.options.noColor);\r\n\t\tcell.mouseover(function(e) {\r\n\t\t\tK(this).addClass('ke-colorpicker-cell-on');\r\n\t\t});\r\n\t\tcell.mouseout(function(e) {\r\n\t\t\tK(this).removeClass('ke-colorpicker-cell-on');\r\n\t\t});\r\n\t\tcell.click(function(e) {\r\n\t\t\te.stop();\r\n\t\t\tself.options.click.call(K(this), color);\r\n\t\t});\r\n\t\tif (color) {\r\n\t\t\tcell.append(K('<div class=\"ke-colorpicker-cell-color\" unselectable=\"on\"></div>').css('background-color', color));\r\n\t\t} else {\r\n\t\t\tcell.html(self.options.noColor);\r\n\t\t}\r\n\t\tK(cell).attr('unselectable', 'on');\r\n\t\tself._cells.push(cell);\r\n\t},\r\n\tremove : function() {\r\n\t\tvar self = this;\r\n\t\t_each(self._cells, function() {\r\n\t\t\tthis.unbind();\r\n\t\t});\r\n\t\tKColorPicker.parent.remove.call(self);\r\n\t\treturn self;\r\n\t}\r\n});\r\nfunction _colorpicker(options) {\r\n\treturn new KColorPicker(options);\r\n}\r\nK.ColorPickerClass = KColorPicker;\r\nK.colorpicker = _colorpicker;\r\n\n\r\nfunction KUploadButton(options) {\r\n\tthis.init(options);\r\n}\r\n_extend(KUploadButton, {\r\n\tinit : function(options) {\r\n\t\tvar self = this,\r\n\t\t\tbutton = K(options.button),\r\n\t\t\tfieldName = options.fieldName || 'file',\r\n\t\t\turl = options.url || '',\r\n\t\t\ttitle = button.val(),\r\n\t\t\textraParams = options.extraParams || {},\r\n\t\t\tcls = button[0].className || '',\r\n\t\t\ttarget = options.target || 'kindeditor_upload_iframe_' + new Date().getTime();\r\n\t\toptions.afterError = options.afterError || function(str) {\r\n\t\t\talert(str);\r\n\t\t};\r\n\t\tvar hiddenElements = [];\r\n\t\tfor(var k in extraParams){\r\n\t\t\thiddenElements.push('<input type=\"hidden\" name=\"' + k + '\" value=\"' + extraParams[k] + '\" />');\r\n\t\t}\r\n\t\tvar html = [\r\n\t\t\t'<div class=\"ke-inline-block ' + cls + '\">',\r\n\t\t\t(options.target ? '' : '<iframe name=\"' + target + '\" style=\"display:none;\"></iframe>'),\r\n\t\t\t(options.form ? '<div class=\"ke-upload-area\">' : '<form class=\"ke-upload-area ke-form\" method=\"post\" enctype=\"multipart/form-data\" target=\"' + target + '\" action=\"' + url + '\">'),\r\n\t\t\t'<span class=\"ke-button-common\">',\r\n\t\t\thiddenElements.join(''),\r\n\t\t\t'<input type=\"button\" class=\"ke-button-common ke-button\" value=\"' + title + '\" />',\r\n\t\t\t'</span>',\r\n\t\t\t'<input type=\"file\" class=\"ke-upload-file\" name=\"' + fieldName + '\" tabindex=\"-1\" />',\r\n\t\t\t(options.form ? '</div>' : '</form>'),\r\n\t\t\t'</div>'].join('');\r\n\t\tvar div = K(html, button.doc);\r\n\t\tbutton.hide();\r\n\t\tbutton.before(div);\r\n\t\tself.div = div;\r\n\t\tself.button = button;\r\n\t\tself.iframe = options.target ? K('iframe[name=\"' + target + '\"]') : K('iframe', div);\r\n\t\tself.form = options.form ? K(options.form) : K('form', div);\r\n\t\tself.fileBox = K('.ke-upload-file', div);\r\n\t\tvar width = options.width || K('.ke-button-common', div).width();\r\n\t\tK('.ke-upload-area', div).width(width);\r\n\t\tself.options = options;\r\n\t},\r\n\tsubmit : function() {\r\n\t\tvar self = this,\r\n\t\t\tiframe = self.iframe;\r\n\t\tiframe.bind('load', function() {\r\n\t\t\tiframe.unbind();\r\n\t\t\tvar tempForm = document.createElement('form');\r\n\t\t\tself.fileBox.before(tempForm);\r\n\t\t\tK(tempForm).append(self.fileBox);\r\n\t\t\ttempForm.reset();\r\n\t\t\tK(tempForm).remove(true);\r\n\t\t\tvar doc = K.iframeDoc(iframe),\r\n\t\t\t\tpre = doc.getElementsByTagName('pre')[0],\r\n\t\t\t\tstr = '', data;\r\n\t\t\tif (pre) {\r\n\t\t\t\tstr = pre.innerHTML;\r\n\t\t\t} else {\r\n\t\t\t\tstr = doc.body.innerHTML;\r\n\t\t\t}\r\n\t\t\tstr = _unescape(str);\r\n\t\t\tiframe[0].src = 'javascript:false';\r\n\t\t\ttry {\r\n\t\t\t\tdata = K.json(str);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tself.options.afterError.call(self, '<!doctype html><html>' + doc.body.parentNode.innerHTML + '</html>');\r\n\t\t\t}\r\n\t\t\tif (data) {\r\n\t\t\t\tself.options.afterUpload.call(self, data);\r\n\t\t\t}\r\n\t\t});\r\n\t\tself.form[0].submit();\r\n\t\treturn self;\r\n\t},\r\n\tremove : function() {\r\n\t\tvar self = this;\r\n\t\tif (self.fileBox) {\r\n\t\t\tself.fileBox.unbind();\r\n\t\t}\r\n\t\tself.iframe.remove();\r\n\t\tself.div.remove();\r\n\t\tself.button.show();\r\n\t\treturn self;\r\n\t}\r\n});\r\nfunction _uploadbutton(options) {\r\n\treturn new KUploadButton(options);\r\n}\r\nK.UploadButtonClass = KUploadButton;\r\nK.uploadbutton = _uploadbutton;\r\n\n\r\nfunction _createButton(arg) {\r\n\targ = arg || {};\r\n\tvar name = arg.name || '',\r\n\t\tspan = K('<span class=\"ke-button-common ke-button-outer\" title=\"' + name + '\"></span>'),\r\n\t\tbtn = K('<input class=\"ke-button-common ke-button\" type=\"button\" value=\"' + name + '\" />');\r\n\tif (arg.click) {\r\n\t\tbtn.click(arg.click);\r\n\t}\r\n\tspan.append(btn);\r\n\treturn span;\r\n}\r\n\r\r\nfunction KDialog(options) {\r\n\tthis.init(options);\r\n}\r\n_extend(KDialog, KWidget, {\r\n\tinit : function(options) {\r\n\t\tvar self = this;\r\n\t\tvar shadowMode = _undef(options.shadowMode, true);\r\n\t\toptions.z = options.z || 811213;\r\n\t\toptions.shadowMode = false;\r\n\t\toptions.autoScroll = _undef(options.autoScroll, true);\r\n\t\tKDialog.parent.init.call(self, options);\r\n\t\tvar title = options.title,\r\n\t\t\tbody = K(options.body, self.doc),\r\n\t\t\tpreviewBtn = options.previewBtn,\r\n\t\t\tyesBtn = options.yesBtn,\r\n\t\t\tnoBtn = options.noBtn,\r\n\t\t\tcloseBtn = options.closeBtn,\r\n\t\t\tshowMask = _undef(options.showMask, true);\r\n\t\tself.div.addClass('ke-dialog').bind('click,mousedown', function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\t\tvar contentDiv = K('<div class=\"ke-dialog-content\"></div>').appendTo(self.div);\r\n\t\tif (_IE && _V < 7) {\r\n\t\t\tself.iframeMask = K('<iframe src=\"about:blank\" class=\"ke-dialog-shadow\"></iframe>').appendTo(self.div);\r\n\t\t} else if (shadowMode) {\r\n\t\t\tK('<div class=\"ke-dialog-shadow\"></div>').appendTo(self.div);\r\n\t\t}\r\n\t\tvar headerDiv = K('<div class=\"ke-dialog-header\"></div>');\r\n\t\tcontentDiv.append(headerDiv);\r\n\t\theaderDiv.html(title);\r\n\t\tself.closeIcon = K('<span class=\"ke-dialog-icon-close\" title=\"' + closeBtn.name + '\"></span>').click(closeBtn.click);\r\n\t\theaderDiv.append(self.closeIcon);\r\n\t\tself.draggable({\r\n\t\t\tclickEl : headerDiv,\r\n\t\t\tbeforeDrag : options.beforeDrag\r\n\t\t});\r\n\t\tvar bodyDiv = K('<div class=\"ke-dialog-body\"></div>');\r\n\t\tcontentDiv.append(bodyDiv);\r\n\t\tbodyDiv.append(body);\r\n\t\tvar footerDiv = K('<div class=\"ke-dialog-footer\"></div>');\r\n\t\tif (previewBtn || yesBtn || noBtn) {\r\n\t\t\tcontentDiv.append(footerDiv);\r\n\t\t}\r\n\t\t_each([\r\n\t\t\t{ btn : previewBtn, name : 'preview' },\r\n\t\t\t{ btn : yesBtn, name : 'yes' },\r\n\t\t\t{ btn : noBtn, name : 'no' }\r\n\t\t], function() {\r\n\t\t\tif (this.btn) {\r\n\t\t\t\tvar button = _createButton(this.btn);\r\n\t\t\t\tbutton.addClass('ke-dialog-' + this.name);\r\n\t\t\t\tfooterDiv.append(button);\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (self.height) {\r\n\t\t\tbodyDiv.height(_removeUnit(self.height) - headerDiv.height() - footerDiv.height());\r\n\t\t}\r\n\t\tself.div.width(self.div.width());\r\n\t\tself.div.height(self.div.height());\r\n\t\tself.mask = null;\r\n\t\tif (showMask) {\r\n\t\t\tvar docEl = _docElement(self.doc),\r\n\t\t\t\tdocWidth = Math.max(docEl.scrollWidth, docEl.clientWidth),\r\n\t\t\t\tdocHeight = Math.max(docEl.scrollHeight, docEl.clientHeight);\r\n\t\t\tself.mask = _widget({\r\n\t\t\t\tx : 0,\r\n\t\t\t\ty : 0,\r\n\t\t\t\tz : self.z - 1,\r\n\t\t\t\tcls : 'ke-dialog-mask',\r\n\t\t\t\twidth : docWidth,\r\n\t\t\t\theight : docHeight\r\n\t\t\t});\r\n\t\t}\r\n\t\tself.autoPos(self.div.width(), self.div.height());\r\n\t\tself.footerDiv = footerDiv;\r\n\t\tself.bodyDiv = bodyDiv;\r\n\t\tself.headerDiv = headerDiv;\r\n\t\tself.isLoading = false;\r\n\t},\r\n\tsetMaskIndex : function(z) {\r\n\t\tvar self = this;\r\n\t\tself.mask.div.css('z-index', z);\r\n\t},\r\n\tshowLoading : function(msg) {\r\n\t\tmsg = _undef(msg, '');\r\n\t\tvar self = this, body = self.bodyDiv;\r\n\t\tself.loading = K('<div class=\"ke-dialog-loading\"><div class=\"ke-inline-block ke-dialog-loading-content\" style=\"margin-top:' + Math.round(body.height() / 3) + 'px;\">' + msg + '</div></div>')\r\n\t\t\t.width(body.width()).height(body.height())\r\n\t\t\t.css('top', self.headerDiv.height() + 'px');\r\n\t\tbody.css('visibility', 'hidden').after(self.loading);\r\n\t\tself.isLoading = true;\r\n\t\treturn self;\r\n\t},\r\n\thideLoading : function() {\r\n\t\tthis.loading && this.loading.remove();\r\n\t\tthis.bodyDiv.css('visibility', 'visible');\r\n\t\tthis.isLoading = false;\r\n\t\treturn this;\r\n\t},\r\n\tremove : function() {\r\n\t\tvar self = this;\r\n\t\tif (self.options.beforeRemove) {\r\n\t\t\tself.options.beforeRemove.call(self);\r\n\t\t}\r\n\t\tself.mask && self.mask.remove();\r\n\t\tself.iframeMask && self.iframeMask.remove();\r\n\t\tself.closeIcon.unbind();\r\n\t\tK('input', self.div).unbind();\r\n\t\tK('button', self.div).unbind();\r\n\t\tself.footerDiv.unbind();\r\n\t\tself.bodyDiv.unbind();\r\n\t\tself.headerDiv.unbind();\r\n\t\tK('iframe', self.div).each(function() {\r\n\t\t\tK(this).remove();\r\n\t\t});\r\n\t\tKDialog.parent.remove.call(self);\r\n\t\treturn self;\r\n\t}\r\n});\r\nfunction _dialog(options) {\r\n\treturn new KDialog(options);\r\n}\r\nK.DialogClass = KDialog;\r\nK.dialog = _dialog;\r\n\n\r\nfunction _tabs(options) {\r\n\tvar self = _widget(options),\r\n\t\tremove = self.remove,\r\n\t\tafterSelect = options.afterSelect,\r\n\t\tdiv = self.div,\r\n\t\tliList = [];\r\n\tdiv.addClass('ke-tabs')\r\n\t\t.bind('contextmenu,mousedown,mousemove', function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t});\r\n\tvar ul = K('<ul class=\"ke-tabs-ul ke-clearfix\"></ul>');\r\n\tdiv.append(ul);\r\n\tself.add = function(tab) {\r\n\t\tvar li = K('<li class=\"ke-tabs-li\">' + tab.title + '</li>');\r\n\t\tli.data('tab', tab);\r\n\t\tliList.push(li);\r\n\t\tul.append(li);\r\n\t};\r\n\tself.selectedIndex = 0;\r\n\tself.select = function(index) {\r\n\t\tself.selectedIndex = index;\r\n\t\t_each(liList, function(i, li) {\r\n\t\t\tli.unbind();\r\n\t\t\tif (i === index) {\r\n\t\t\t\tli.addClass('ke-tabs-li-selected');\r\n\t\t\t\tK(li.data('tab').panel).show('');\r\n\t\t\t} else {\r\n\t\t\t\tli.removeClass('ke-tabs-li-selected').removeClass('ke-tabs-li-on')\r\n\t\t\t\t.mouseover(function() {\r\n\t\t\t\t\tK(this).addClass('ke-tabs-li-on');\r\n\t\t\t\t})\r\n\t\t\t\t.mouseout(function() {\r\n\t\t\t\t\tK(this).removeClass('ke-tabs-li-on');\r\n\t\t\t\t})\r\n\t\t\t\t.click(function() {\r\n\t\t\t\t\tself.select(i);\r\n\t\t\t\t});\r\n\t\t\t\tK(li.data('tab').panel).hide();\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (afterSelect) {\r\n\t\t\tafterSelect.call(self, index);\r\n\t\t}\r\n\t};\r\n\tself.remove = function() {\r\n\t\t_each(liList, function() {\r\n\t\t\tthis.remove();\r\n\t\t});\r\n\t\tul.remove();\r\n\t\tremove.call(self);\r\n\t};\r\n\treturn self;\r\n}\r\nK.tabs = _tabs;\r\n\n\r\nfunction _loadScript(url, fn) {\r\n\tvar head = document.getElementsByTagName('head')[0] || (_QUIRKS ? document.body : document.documentElement),\r\n\t\tscript = document.createElement('script');\r\n\thead.appendChild(script);\r\n\tscript.src = url;\r\n\tscript.charset = 'utf-8';\r\n\tscript.onload = script.onreadystatechange = function() {\r\n\t\tif (!this.readyState || this.readyState === 'loaded') {\r\n\t\t\tif (fn) {\r\n\t\t\t\tfn();\r\n\t\t\t}\r\n\t\t\tscript.onload = script.onreadystatechange = null;\r\n\t\t\thead.removeChild(script);\r\n\t\t}\r\n\t};\r\n}\r\n\r\r\nfunction _chopQuery(url) {\r\n\tvar index = url.indexOf('?');\r\n\treturn index > 0 ? url.substr(0, index) : url;\r\n}\r\nfunction _loadStyle(url) {\r\n\tvar head = document.getElementsByTagName('head')[0] || (_QUIRKS ? document.body : document.documentElement),\r\n\t\tlink = document.createElement('link'),\r\n\t\tabsoluteUrl = _chopQuery(_formatUrl(url, 'absolute'));\r\n\tvar links = K('link[rel=\"stylesheet\"]', head);\r\n\tfor (var i = 0, len = links.length; i < len; i++) {\r\n\t\tif (_chopQuery(_formatUrl(links[i].href, 'absolute')) === absoluteUrl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\thead.appendChild(link);\r\n\tlink.href = url;\r\n\tlink.rel = 'stylesheet';\r\n}\r\nfunction _ajax(url, fn, method, param, dataType) {\r\n\tmethod = method || 'GET';\r\n\tdataType = dataType || 'json';\r\n\tvar xhr = window.XMLHttpRequest ? new window.XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');\r\n\txhr.open(method, url, true);\r\n\txhr.onreadystatechange = function () {\r\n\t\tif (xhr.readyState == 4 && xhr.status == 200) {\r\n\t\t\tif (fn) {\r\n\t\t\t\tvar data = _trim(xhr.responseText);\r\n\t\t\t\tif (dataType == 'json') {\r\n\t\t\t\t\tdata = _json(data);\r\n\t\t\t\t}\r\n\t\t\t\tfn(data);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tif (method == 'POST') {\r\n\t\tvar params = [];\r\n\t\t_each(param, function(key, val) {\r\n\t\t\tparams.push(encodeURIComponent(key) + '=' + encodeURIComponent(val));\r\n\t\t});\r\n\t\ttry {\r\n\t\t\txhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n\t\t} catch (e) {}\r\n\t\txhr.send(params.join('&'));\r\n\t} else {\r\n\t\txhr.send(null);\r\n\t}\r\n}\r\nK.loadScript = _loadScript;\r\nK.loadStyle = _loadStyle;\r\nK.ajax = _ajax;\r\n\n\r\nvar _plugins = {};\r\nfunction _plugin(name, fn) {\r\n\tif (name === undefined) {\r\n\t\treturn _plugins;\r\n\t}\r\n\tif (!fn) {\r\n\t\treturn _plugins[name];\r\n\t}\r\n\t_plugins[name] = fn;\r\n}\r\nvar _language = {};\r\nfunction _parseLangKey(key) {\r\n\tvar match, ns = 'core';\r\n\tif ((match = /^(\\w+)\\.(\\w+)$/.exec(key))) {\r\n\t\tns = match[1];\r\n\t\tkey = match[2];\r\n\t}\r\n\treturn { ns : ns, key : key };\r\n}\r\nfunction _lang(mixed, langType) {\r\n\tlangType = langType === undefined ? K.options.langType : langType;\r\n\tif (typeof mixed === 'string') {\r\n\t\tif (!_language[langType]) {\r\n\t\t\treturn 'no language';\r\n\t\t}\r\n\t\tvar pos = mixed.length - 1;\r\n\t\tif (mixed.substr(pos) === '.') {\r\n\t\t\treturn _language[langType][mixed.substr(0, pos)];\r\n\t\t}\r\n\t\tvar obj = _parseLangKey(mixed);\r\n\t\treturn _language[langType][obj.ns][obj.key];\r\n\t}\r\n\t_each(mixed, function(key, val) {\r\n\t\tvar obj = _parseLangKey(key);\r\n\t\tif (!_language[langType]) {\r\n\t\t\t_language[langType] = {};\r\n\t\t}\r\n\t\tif (!_language[langType][obj.ns]) {\r\n\t\t\t_language[langType][obj.ns] = {};\r\n\t\t}\r\n\t\t_language[langType][obj.ns][obj.key] = val;\r\n\t});\r\n}\r\n\r\r\nfunction _getImageFromRange(range, fn) {\r\n\tif (range.collapsed) {\r\n\t\treturn;\r\n\t}\r\n\trange = range.cloneRange().up();\r\n\tvar sc = range.startContainer, so = range.startOffset;\r\n\tif (!_WEBKIT && !range.isControl()) {\r\n\t\treturn;\r\n\t}\r\n\tvar img = K(sc.childNodes[so]);\r\n\tif (!img || img.name != 'img') {\r\n\t\treturn;\r\n\t}\r\n\tif (fn(img)) {\r\n\t\treturn img;\r\n\t}\r\n}\r\nfunction _bindContextmenuEvent() {\r\n\tvar self = this, doc = self.edit.doc;\r\n\tK(doc).contextmenu(function(e) {\r\n\t\tif (self.menu) {\r\n\t\t\tself.hideMenu();\r\n\t\t}\r\n\t\tif (!self.useContextmenu) {\r\n\t\t\te.preventDefault();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (self._contextmenus.length === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar maxWidth = 0, items = [];\r\n\t\t_each(self._contextmenus, function() {\r\n\t\t\tif (this.title == '-') {\r\n\t\t\t\titems.push(this);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.cond && this.cond()) {\r\n\t\t\t\titems.push(this);\r\n\t\t\t\tif (this.width && this.width > maxWidth) {\r\n\t\t\t\t\tmaxWidth = this.width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\twhile (items.length > 0 && items[0].title == '-') {\r\n\t\t\titems.shift();\r\n\t\t}\r\n\t\twhile (items.length > 0 && items[items.length - 1].title == '-') {\r\n\t\t\titems.pop();\r\n\t\t}\r\n\t\tvar prevItem = null;\r\n\t\t_each(items, function(i) {\r\n\t\t\tif (this.title == '-' && prevItem.title == '-') {\r\n\t\t\t\tdelete items[i];\r\n\t\t\t}\r\n\t\t\tprevItem = this;\r\n\t\t});\r\n\t\tif (items.length > 0) {\r\n\t\t\te.preventDefault();\r\n\t\t\tvar pos = K(self.edit.iframe).pos(),\r\n\t\t\t\tmenu = _menu({\r\n\t\t\t\t\tx : pos.x + e.clientX,\r\n\t\t\t\t\ty : pos.y + e.clientY,\r\n\t\t\t\t\twidth : maxWidth,\r\n\t\t\t\t\tcss : { visibility: 'hidden' },\r\n\t\t\t\t\tshadowMode : self.shadowMode\r\n\t\t\t\t});\r\n\t\t\t_each(items, function() {\r\n\t\t\t\tif (this.title) {\r\n\t\t\t\t\tmenu.addItem(this);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tvar docEl = _docElement(menu.doc),\r\n\t\t\t\tmenuHeight = menu.div.height();\r\n\t\t\tif (e.clientY + menuHeight >= docEl.clientHeight - 100) {\r\n\t\t\t\tmenu.pos(menu.x, _removeUnit(menu.y) - menuHeight);\r\n\t\t\t}\r\n\t\t\tmenu.div.css('visibility', 'visible');\r\n\t\t\tself.menu = menu;\r\n\t\t}\r\n\t});\r\n}\r\nfunction _bindNewlineEvent() {\r\n\tvar self = this, doc = self.edit.doc, newlineTag = self.newlineTag;\r\n\tif (_IE && newlineTag !== 'br') {\r\n\t\treturn;\r\n\t}\r\n\tif (_GECKO && _V < 3 && newlineTag !== 'p') {\r\n\t\treturn;\r\n\t}\r\n\tif (_OPERA && _V < 9) {\r\n\t\treturn;\r\n\t}\r\n\tvar brSkipTagMap = _toMap('h1,h2,h3,h4,h5,h6,pre,li'),\r\n\t\tpSkipTagMap = _toMap('p,h1,h2,h3,h4,h5,h6,pre,li,blockquote');\r\n\tfunction getAncestorTagName(range) {\r\n\t\tvar ancestor = K(range.commonAncestor());\r\n\t\twhile (ancestor) {\r\n\t\t\tif (ancestor.type == 1 && !ancestor.isStyle()) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tancestor = ancestor.parent();\r\n\t\t}\r\n\t\treturn ancestor.name;\r\n\t}\r\n\tK(doc).keydown(function(e) {\r\n\t\tif (e.which != 13 || e.shiftKey || e.ctrlKey || e.altKey) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tself.cmd.selection();\r\n\t\tvar tagName = getAncestorTagName(self.cmd.range);\r\n\t\tif (tagName == 'marquee' || tagName == 'select') {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (newlineTag === 'br' && !brSkipTagMap[tagName]) {\r\n\t\t\te.preventDefault();\r\n\t\t\tself.insertHtml('<br />' + (_IE && _V < 9 ? '' : '\\u200B'));\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!pSkipTagMap[tagName]) {\r\n\t\t\t_nativeCommand(doc, 'formatblock', '<p>');\r\n\t\t}\r\n\t});\r\n\tK(doc).keyup(function(e) {\r\n\t\tif (e.which != 13 || e.shiftKey || e.ctrlKey || e.altKey) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (newlineTag == 'br') {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (_GECKO) {\r\n\t\t\tvar root = self.cmd.commonAncestor('p');\r\n\t\t\tvar a = self.cmd.commonAncestor('a');\r\n\t\t\tif (a && a.text() == '') {\r\n\t\t\t\ta.remove(true);\r\n\t\t\t\tself.cmd.range.selectNodeContents(root[0]).collapse(true);\r\n\t\t\t\tself.cmd.select();\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tself.cmd.selection();\r\n\t\tvar tagName = getAncestorTagName(self.cmd.range);\r\n\t\tif (tagName == 'marquee' || tagName == 'select') {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!pSkipTagMap[tagName]) {\r\n\t\t\t_nativeCommand(doc, 'formatblock', '<p>');\r\n\t\t}\r\n\t\tvar div = self.cmd.commonAncestor('div');\r\n\t\tif (div) {\r\n\t\t\tvar p = K('<p></p>'),\r\n\t\t\t\tchild = div[0].firstChild;\r\n\t\t\twhile (child) {\r\n\t\t\t\tvar next = child.nextSibling;\r\n\t\t\t\tp.append(child);\r\n\t\t\t\tchild = next;\r\n\t\t\t}\r\n\t\t\tdiv.before(p);\r\n\t\t\tdiv.remove();\r\n\t\t\tself.cmd.range.selectNodeContents(p[0]);\r\n\t\t\tself.cmd.select();\r\n\t\t}\r\n\t});\r\n}\r\nfunction _bindTabEvent() {\r\n\tvar self = this, doc = self.edit.doc;\r\n\tK(doc).keydown(function(e) {\r\n\t\tif (e.which == 9) {\r\n\t\t\te.preventDefault();\r\n\t\t\tif (self.afterTab) {\r\n\t\t\t\tself.afterTab.call(self, e);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar cmd = self.cmd, range = cmd.range;\r\n\t\t\trange.shrink();\r\n\t\t\tif (range.collapsed && range.startContainer.nodeType == 1) {\r\n\t\t\t\trange.insertNode(K('@&nbsp;', doc)[0]);\r\n\t\t\t\tcmd.select();\r\n\t\t\t}\r\n\t\t\tself.insertHtml('&nbsp;&nbsp;&nbsp;&nbsp;');\r\n\t\t}\r\n\t});\r\n}\r\nfunction _bindFocusEvent() {\r\n\tvar self = this;\r\n\tK(self.edit.textarea[0], self.edit.win).focus(function(e) {\r\n\t\tif (self.afterFocus) {\r\n\t\t\tself.afterFocus.call(self, e);\r\n\t\t}\r\n\t}).blur(function(e) {\r\n\t\tif (self.afterBlur) {\r\n\t\t\tself.afterBlur.call(self, e);\r\n\t\t}\r\n\t});\r\n}\r\nfunction _removeBookmarkTag(html) {\r\n\treturn _trim(html.replace(/<span [^>]*id=\"?__kindeditor_bookmark_\\w+_\\d+__\"?[^>]*><\\/span>/ig, ''));\r\n}\r\nfunction _removeTempTag(html) {\r\n\treturn html.replace(/<div[^>]+class=\"?__kindeditor_paste__\"?[^>]*>[\\s\\S]*?<\\/div>/ig, '');\r\n}\r\nfunction _addBookmarkToStack(stack, bookmark) {\r\n\tif (stack.length === 0) {\r\n\t\tstack.push(bookmark);\r\n\t\treturn;\r\n\t}\r\n\tvar prev = stack[stack.length - 1];\r\n\tif (_removeBookmarkTag(bookmark.html) !== _removeBookmarkTag(prev.html)) {\r\n\t\tstack.push(bookmark);\r\n\t}\r\n}\r\n\r\r\r\nfunction _undoToRedo(fromStack, toStack) {\r\n\tvar self = this, edit = self.edit,\r\n\t\tbody = edit.doc.body,\r\n\t\trange, bookmark;\r\n\tif (fromStack.length === 0) {\r\n\t\treturn self;\r\n\t}\r\n\tif (edit.designMode) {\r\n\t\trange = self.cmd.range;\r\n\t\tbookmark = range.createBookmark(true);\r\n\t\tbookmark.html = body.innerHTML;\r\n\t} else {\r\n\t\tbookmark = {\r\n\t\t\thtml : body.innerHTML\r\n\t\t};\r\n\t}\r\n\t_addBookmarkToStack(toStack, bookmark);\r\n\tvar prev = fromStack.pop();\r\n\tif (_removeBookmarkTag(bookmark.html) === _removeBookmarkTag(prev.html) && fromStack.length > 0) {\r\n\t\tprev = fromStack.pop();\r\n\t}\r\n\tif (edit.designMode) {\r\n\t\tedit.html(prev.html);\r\n\t\tif (prev.start) {\r\n\t\t\trange.moveToBookmark(prev);\r\n\t\t\tself.select();\r\n\t\t}\r\n\t} else {\r\n\t\tK(body).html(_removeBookmarkTag(prev.html));\r\n\t}\r\n\treturn self;\r\n}\r\nfunction KEditor(options) {\r\n\tvar self = this;\r\n\tself.options = {};\r\n\tfunction setOption(key, val) {\r\n\t\tif (KEditor.prototype[key] === undefined) {\r\n\t\t\tself[key] = val;\r\n\t\t}\r\n\t\tself.options[key] = val;\r\n\t}\r\n\t_each(options, function(key, val) {\r\n\t\tsetOption(key, options[key]);\r\n\t});\r\n\t_each(K.options, function(key, val) {\r\n\t\tif (self[key] === undefined) {\r\n\t\t\tsetOption(key, val);\r\n\t\t}\r\n\t});\r\n\tvar se = K(self.srcElement || '<textarea/>');\r\n\tif (!self.width) {\r\n\t\tself.width = se[0].style.width || se.width();\r\n\t}\r\n\tif (!self.height) {\r\n\t\tself.height = se[0].style.height || se.height();\r\n\t}\r\n\tsetOption('width', _undef(self.width, self.minWidth));\r\n\tsetOption('height', _undef(self.height, self.minHeight));\r\n\tsetOption('width', _addUnit(self.width));\r\n\tsetOption('height', _addUnit(self.height));\r\n\tif (_MOBILE && (!_IOS || _V < 534)) {\r\n\t\tself.designMode = false;\r\n\t}\r\n\tself.srcElement = se;\r\n\tself.initContent = '';\r\n\tself.plugin = {};\r\n\tself.isCreated = false;\r\n\tself._handlers = {};\r\n\tself._contextmenus = [];\r\n\tself._undoStack = [];\r\n\tself._redoStack = [];\r\n\tself._firstAddBookmark = true;\r\n\tself.menu = self.contextmenu = null;\r\n\tself.dialogs = [];\r\n}\r\nKEditor.prototype = {\r\n\tlang : function(mixed) {\r\n\t\treturn _lang(mixed, this.langType);\r\n\t},\r\n\tloadPlugin : function(name, fn) {\r\n\t\tvar self = this;\r\n\t\tvar _pluginStatus = this._pluginStatus;\r\n\t\tif (!_pluginStatus) {\r\n\t\t\t_pluginStatus = this._pluginStatus = {};\r\n\t\t}\r\n\t\tif (_plugins[name]) {\r\n\t\t\tif (!_isFunction(_plugins[name])) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tself.loadPlugin(name, fn);\r\n\t\t\t\t}, 100);\r\n\t\t\t\treturn self;\r\n\t\t\t}\r\n\t\t\tif(!_pluginStatus[name]) {\r\n\t\t\t\t_plugins[name].call(self, KindEditor);\r\n\t\t\t\t_pluginStatus[name] = 'inited';\r\n\t\t\t}\r\n\t\t\tif (fn) {\r\n\t\t\t\tfn.call(self);\r\n\t\t\t}\r\n\t\t\treturn self;\r\n\t\t}\r\n\t\t_plugins[name] = 'loading';\r\n\t\t_loadScript(self.pluginsPath + name + '/' + name + '.js?ver=' + encodeURIComponent(K.DEBUG ? _TIME : _VERSION), function() {\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tif (_plugins[name]) {\r\n\t\t\t\t\tself.loadPlugin(name, fn);\r\n\t\t\t\t}\r\n\t\t\t}, 0);\r\n\t\t});\r\n\t\treturn self;\r\n\t},\r\n\thandler : function(key, fn) {\r\n\t\tvar self = this;\r\n\t\tif (!self._handlers[key]) {\r\n\t\t\tself._handlers[key] = [];\r\n\t\t}\r\n\t\tif (_isFunction(fn)) {\r\n\t\t\tself._handlers[key].push(fn);\r\n\t\t\treturn self;\r\n\t\t}\r\n\t\t_each(self._handlers[key], function() {\r\n\t\t\tfn = this.call(self, fn);\r\n\t\t});\r\n\t\treturn fn;\r\n\t},\r\n\tclickToolbar : function(name, fn) {\r\n\t\tvar self = this, key = 'clickToolbar' + name;\r\n\t\tif (fn === undefined) {\r\n\t\t\tif (self._handlers[key]) {\r\n\t\t\t\treturn self.handler(key);\r\n\t\t\t}\r\n\t\t\tself.loadPlugin(name, function() {\r\n\t\t\t\tself.handler(key);\r\n\t\t\t});\r\n\t\t\treturn self;\r\n\t\t}\r\n\t\treturn self.handler(key, fn);\r\n\t},\r\n\tupdateState : function() {\r\n\t\tvar self = this;\r\n\t\t_each(('justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,' +\r\n\t\t\t'subscript,superscript,bold,italic,underline,strikethrough').split(','), function(i, name) {\r\n\t\t\tself.cmd.state(name) ? self.toolbar.select(name) : self.toolbar.unselect(name);\r\n\t\t});\r\n\t\treturn self;\r\n\t},\r\n\taddContextmenu : function(item) {\r\n\t\tthis._contextmenus.push(item);\r\n\t\treturn this;\r\n\t},\r\n\tafterCreate : function(fn) {\r\n\t\treturn this.handler('afterCreate', fn);\r\n\t},\r\n\tbeforeRemove : function(fn) {\r\n\t\treturn this.handler('beforeRemove', fn);\r\n\t},\r\n\tbeforeGetHtml : function(fn) {\r\n\t\treturn this.handler('beforeGetHtml', fn);\r\n\t},\r\n\tbeforeSetHtml : function(fn) {\r\n\t\treturn this.handler('beforeSetHtml', fn);\r\n\t},\r\n\tafterSetHtml : function(fn) {\r\n\t\treturn this.handler('afterSetHtml', fn);\r\n\t},\r\n\tcreate : function() {\r\n\t\tvar self = this, fullscreenMode = self.fullscreenMode;\r\n\t\tif (self.isCreated) {\r\n\t\t\treturn self;\r\n\t\t}\r\n\t\tif (self.srcElement.data('kindeditor')) {\r\n\t\t\treturn self;\r\n\t\t}\r\n\t\tself.srcElement.data('kindeditor', 'true');\r\n\t\tif (fullscreenMode) {\r\n\t\t\t_docElement().style.overflow = 'hidden';\r\n\t\t} else {\r\n\t\t\t_docElement().style.overflow = '';\r\n\t\t}\r\n\t\tvar width = fullscreenMode ? _docElement().clientWidth + 'px' : self.width,\r\n\t\t\theight = fullscreenMode ? _docElement().clientHeight + 'px' : self.height;\r\n\t\tif ((_IE && _V < 8) || _QUIRKS) {\r\n\t\t\theight = _addUnit(_removeUnit(height) + 2);\r\n\t\t}\r\n\t\tvar container = self.container = K(self.layout);\r\n\t\tif (fullscreenMode) {\r\n\t\t\tK(document.body).append(container);\r\n\t\t} else {\r\n\t\t\tself.srcElement.before(container);\r\n\t\t}\r\n\t\tvar toolbarDiv = K('.toolbar', container),\r\n\t\t\teditDiv = K('.edit', container),\r\n\t\t\tstatusbar = self.statusbar = K('.statusbar', container);\r\n\t\tcontainer.removeClass('container')\r\n\t\t\t.addClass('ke-container ke-container-' + self.themeType).css('width', width);\r\n\t\tif (fullscreenMode) {\r\n\t\t\tcontainer.css({\r\n\t\t\t\tposition : 'absolute',\r\n\t\t\t\tleft : 0,\r\n\t\t\t\ttop : 0,\r\n\t\t\t\t'z-index' : 811211\r\n\t\t\t});\r\n\t\t\tif (!_GECKO) {\r\n\t\t\t\tself._scrollPos = _getScrollPos();\r\n\t\t\t}\r\n\t\t\twindow.scrollTo(0, 0);\r\n\t\t\tK(document.body).css({\r\n\t\t\t\t'height' : '1px',\r\n\t\t\t\t'overflow' : 'hidden'\r\n\t\t\t});\r\n\t\t\tK(document.body.parentNode).css('overflow', 'hidden');\r\n\t\t\tself._fullscreenExecuted = true;\r\n\t\t} else {\r\n\t\t\tif (self._fullscreenExecuted) {\r\n\t\t\t\tK(document.body).css({\r\n\t\t\t\t\t'height' : '',\r\n\t\t\t\t\t'overflow' : ''\r\n\t\t\t\t});\r\n\t\t\t\tK(document.body.parentNode).css('overflow', '');\r\n\t\t\t}\r\n\t\t\tif (self._scrollPos) {\r\n\t\t\t\twindow.scrollTo(self._scrollPos.x, self._scrollPos.y);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar htmlList = [];\r\n\t\tK.each(self.items, function(i, name) {\r\n\t\t\tif (name == '|') {\r\n\t\t\t\thtmlList.push('<span class=\"ke-inline-block ke-separator\"></span>');\r\n\t\t\t} else if (name == '/') {\r\n\t\t\t\thtmlList.push('<div class=\"ke-hr\"></div>');\r\n\t\t\t} else {\r\n\t\t\t\thtmlList.push('<span class=\"ke-outline\" data-name=\"' + name + '\" title=\"' + self.lang(name) + '\" unselectable=\"on\">');\r\n\t\t\t\thtmlList.push('<span class=\"ke-toolbar-icon ke-toolbar-icon-url ke-icon-' + name + '\" unselectable=\"on\"></span></span>');\r\n\t\t\t}\r\n\t\t});\r\n\t\tvar toolbar = self.toolbar = _toolbar({\r\n\t\t\tsrc : toolbarDiv,\r\n\t\t\thtml : htmlList.join(''),\r\n\t\t\tnoDisableItems : self.noDisableItems,\r\n\t\t\tclick : function(e, name) {\r\n\t\t\t\te.stop();\r\n\t\t\t\tif (self.menu) {\r\n\t\t\t\t\tvar menuName = self.menu.name;\r\n\t\t\t\t\tself.hideMenu();\r\n\t\t\t\t\tif (menuName === name) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tself.clickToolbar(name);\r\n\t\t\t}\r\n\t\t});\r\n\t\tvar editHeight = _removeUnit(height) - toolbar.div.height();\r\n\t\tvar edit = self.edit = _edit({\r\n\t\t\theight : editHeight > 0 && _removeUnit(height) > self.minHeight ? editHeight : self.minHeight,\r\n\t\t\tsrc : editDiv,\r\n\t\t\tsrcElement : self.srcElement,\r\n\t\t\tdesignMode : self.designMode,\r\n\t\t\tthemesPath : self.themesPath,\r\n\t\t\tbodyClass : self.bodyClass,\r\n\t\t\tcssPath : self.cssPath,\r\n\t\t\tcssData : self.cssData,\r\n\t\t\tbeforeGetHtml : function(html) {\r\n\t\t\t\thtml = self.beforeGetHtml(html);\r\n\t\t\t\thtml = _removeBookmarkTag(_removeTempTag(html));\r\n\t\t\t\treturn _formatHtml(html, self.filterMode ? self.htmlTags : null, self.urlType, self.wellFormatMode, self.indentChar);\r\n\t\t\t},\r\n\t\t\tbeforeSetHtml : function(html) {\r\n\t\t\t\thtml = _formatHtml(html, self.filterMode ? self.htmlTags : null, '', false);\r\n\t\t\t\treturn self.beforeSetHtml(html);\r\n\t\t\t},\r\n\t\t\tafterSetHtml : function() {\r\n\t\t\t\tself.edit = edit = this;\r\n\t\t\t\tself.afterSetHtml();\r\n\t\t\t},\r\n\t\t\tafterCreate : function() {\r\n\t\t\t\tself.edit = edit = this;\r\n\t\t\t\tself.cmd = edit.cmd;\r\n\t\t\t\tself._docMousedownFn = function(e) {\r\n\t\t\t\t\tif (self.menu) {\r\n\t\t\t\t\t\tself.hideMenu();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tK(edit.doc, document).mousedown(self._docMousedownFn);\r\n\t\t\t\t_bindContextmenuEvent.call(self);\r\n\t\t\t\t_bindNewlineEvent.call(self);\r\n\t\t\t\t_bindTabEvent.call(self);\r\n\t\t\t\t_bindFocusEvent.call(self);\r\n\t\t\t\tedit.afterChange(function(e) {\r\n\t\t\t\t\tif (!edit.designMode) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.updateState();\r\n\t\t\t\t\tself.addBookmark();\r\n\t\t\t\t\tif (self.options.afterChange) {\r\n\t\t\t\t\t\tself.options.afterChange.call(self);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tedit.textarea.keyup(function(e) {\r\n\t\t\t\t\tif (!e.ctrlKey && !e.altKey && _INPUT_KEY_MAP[e.which]) {\r\n\t\t\t\t\t\tif (self.options.afterChange) {\r\n\t\t\t\t\t\t\tself.options.afterChange.call(self);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (self.readonlyMode) {\r\n\t\t\t\t\tself.readonly();\r\n\t\t\t\t}\r\n\t\t\t\tself.isCreated = true;\r\n\t\t\t\tif (self.initContent === '') {\r\n\t\t\t\t\tself.initContent = self.html();\r\n\t\t\t\t}\r\n\t\t\t\tif (self._undoStack.length > 0) {\r\n\t\t\t\t\tvar prev = self._undoStack.pop();\r\n\t\t\t\t\tif (prev.start) {\r\n\t\t\t\t\t\tself.html(prev.html);\r\n\t\t\t\t\t\tedit.cmd.range.moveToBookmark(prev);\r\n\t\t\t\t\t\tself.select();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tself.afterCreate();\r\n\t\t\t\tif (self.options.afterCreate) {\r\n\t\t\t\t\tself.options.afterCreate.call(self);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tstatusbar.removeClass('statusbar').addClass('ke-statusbar')\r\n\t\t\t.append('<span class=\"ke-inline-block ke-statusbar-center-icon\"></span>')\r\n\t\t\t.append('<span class=\"ke-inline-block ke-statusbar-right-icon\"></span>');\r\n\t\tif (self._fullscreenResizeHandler) {\r\n\t\t\tK(window).unbind('resize', self._fullscreenResizeHandler);\r\n\t\t\tself._fullscreenResizeHandler = null;\r\n\t\t}\r\n\t\tfunction initResize() {\r\n\t\t\tif (statusbar.height() === 0) {\r\n\t\t\t\tsetTimeout(initResize, 100);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tself.resize(width, height, false);\r\n\t\t}\r\n\t\tinitResize();\r\n\t\tif (fullscreenMode) {\r\n\t\t\tself._fullscreenResizeHandler = function(e) {\r\n\t\t\t\tif (self.isCreated) {\r\n\t\t\t\t\tself.resize(_docElement().clientWidth, _docElement().clientHeight, false);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tK(window).bind('resize', self._fullscreenResizeHandler);\r\n\t\t\ttoolbar.select('fullscreen');\r\n\t\t\tstatusbar.first().css('visibility', 'hidden');\r\n\t\t\tstatusbar.last().css('visibility', 'hidden');\r\n\t\t} else {\r\n\t\t\tif (_GECKO) {\r\n\t\t\t\tK(window).bind('scroll', function(e) {\r\n\t\t\t\t\tself._scrollPos = _getScrollPos();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (self.resizeType > 0) {\r\n\t\t\t\t_drag({\r\n\t\t\t\t\tmoveEl : container,\r\n\t\t\t\t\tclickEl : statusbar,\r\n\t\t\t\t\tmoveFn : function(x, y, width, height, diffX, diffY) {\r\n\t\t\t\t\t\theight += diffY;\r\n\t\t\t\t\t\tself.resize(null, height);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tstatusbar.first().css('visibility', 'hidden');\r\n\t\t\t}\r\n\t\t\tif (self.resizeType === 2) {\r\n\t\t\t\t_drag({\r\n\t\t\t\t\tmoveEl : container,\r\n\t\t\t\t\tclickEl : statusbar.last(),\r\n\t\t\t\t\tmoveFn : function(x, y, width, height, diffX, diffY) {\r\n\t\t\t\t\t\twidth += diffX;\r\n\t\t\t\t\t\theight += diffY;\r\n\t\t\t\t\t\tself.resize(width, height);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tstatusbar.last().css('visibility', 'hidden');\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn self;\r\n\t},\r\n\tremove : function() {\r\n\t\tvar self = this;\r\n\t\tif (!self.isCreated) {\r\n\t\t\treturn self;\r\n\t\t}\r\n\t\tself.beforeRemove();\r\n\t\tself.srcElement.data('kindeditor', '');\r\n\t\tif (self.menu) {\r\n\t\t\tself.hideMenu();\r\n\t\t}\r\n\t\t_each(self.dialogs, function() {\r\n\t\t\tself.hideDialog();\r\n\t\t});\r\n\t\tK(document).unbind('mousedown', self._docMousedownFn);\r\n\t\tself.toolbar.remove();\r\n\t\tself.edit.remove();\r\n\t\tself.statusbar.last().unbind();\r\n\t\tself.statusbar.unbind();\r\n\t\tself.container.remove();\r\n\t\tself.container = self.toolbar = self.edit = self.menu = null;\r\n\t\tself.dialogs = [];\r\n\t\tself.isCreated = false;\r\n\t\treturn self;\r\n\t},\r\n\tresize : function(width, height, updateProp) {\r\n\t\tvar self = this;\r\n\t\tupdateProp = _undef(updateProp, true);\r\n\t\tif (width) {\r\n\t\t\tif (!/%/.test(width)) {\r\n\t\t\t\twidth = _removeUnit(width);\r\n\t\t\t\twidth = width < self.minWidth ? self.minWidth : width;\r\n\t\t\t}\r\n\t\t\tself.container.css('width', _addUnit(width));\r\n\t\t\tif (updateProp) {\r\n\t\t\t\tself.width = _addUnit(width);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (height) {\r\n\t\t\theight = _removeUnit(height);\r\n\t\t\teditHeight = _removeUnit(height) - self.toolbar.div.height() - self.statusbar.height();\r\n\t\t\teditHeight = editHeight < self.minHeight ? self.minHeight : editHeight;\r\n\t\t\tself.edit.setHeight(editHeight);\r\n\t\t\tif (updateProp) {\r\n\t\t\t\tself.height = _addUnit(height);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn self;\r\n\t},\r\n\tselect : function() {\r\n\t\tthis.isCreated && this.cmd.select();\r\n\t\treturn this;\r\n\t},\r\n\thtml : function(val) {\r\n\t\tvar self = this;\r\n\t\tif (val === undefined) {\r\n\t\t\treturn self.isCreated ? self.edit.html() : _elementVal(self.srcElement);\r\n\t\t}\r\n\t\tself.isCreated ? self.edit.html(val) : _elementVal(self.srcElement, val);\r\n\t\tif (self.isCreated) {\r\n\t\t\tself.cmd.selection();\r\n\t\t}\r\n\t\treturn self;\r\n\t},\r\n\tfullHtml : function() {\r\n\t\treturn this.isCreated ? this.edit.html(undefined, true) : '';\r\n\t},\r\n\ttext : function(val) {\r\n\t\tvar self = this;\r\n\t\tif (val === undefined) {\r\n\t\t\treturn _trim(self.html().replace(/<(?!img|embed).*?>/ig, '').replace(/&nbsp;/ig, ' '));\r\n\t\t} else {\r\n\t\t\treturn self.html(_escape(val));\r\n\t\t}\r\n\t},\r\n\tisEmpty : function() {\r\n\t\treturn _trim(this.text().replace(/\\r\\n|\\n|\\r/, '')) === '';\r\n\t},\r\n\tisDirty : function() {\r\n\t\treturn _trim(this.initContent.replace(/\\r\\n|\\n|\\r|t/g, '')) !== _trim(this.html().replace(/\\r\\n|\\n|\\r|t/g, ''));\r\n\t},\r\n\tselectedHtml : function() {\r\n\t\tvar val = this.isCreated ? this.cmd.range.html() : '';\r\n\t\tval = _removeBookmarkTag(_removeTempTag(val));\r\n\t\treturn val;\r\n\t},\r\n\tcount : function(mode) {\r\n\t\tvar self = this;\r\n\t\tmode = (mode || 'html').toLowerCase();\r\n\t\tif (mode === 'html') {\r\n\t\t\treturn self.html().length;\r\n\t\t}\r\n\t\tif (mode === 'text') {\r\n\t\t\treturn self.text().replace(/<(?:img|embed).*?>/ig, 'K').replace(/\\r\\n|\\n|\\r/g, '').length;\r\n\t\t}\r\n\t\treturn 0;\r\n\t},\r\n\texec : function(key) {\r\n\t\tkey = key.toLowerCase();\r\n\t\tvar self = this, cmd = self.cmd,\r\n\t\t\tchangeFlag = _inArray(key, 'selectall,copy,paste,print'.split(',')) < 0;\r\n\t\tif (changeFlag) {\r\n\t\t\tself.addBookmark(false);\r\n\t\t}\r\n\t\tcmd[key].apply(cmd, _toArray(arguments, 1));\r\n\t\tif (changeFlag) {\r\n\t\t\tself.updateState();\r\n\t\t\tself.addBookmark(false);\r\n\t\t\tif (self.options.afterChange) {\r\n\t\t\t\tself.options.afterChange.call(self);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn self;\r\n\t},\r\n\tinsertHtml : function(val, quickMode) {\r\n\t\tif (!this.isCreated) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\tval = this.beforeSetHtml(val);\r\n\t\tthis.exec('inserthtml', val, quickMode);\r\n\t\treturn this;\r\n\t},\r\n\tappendHtml : function(val) {\r\n\t\tthis.html(this.html() + val);\r\n\t\tif (this.isCreated) {\r\n\t\t\tvar cmd = this.cmd;\r\n\t\t\tcmd.range.selectNodeContents(cmd.doc.body).collapse(false);\r\n\t\t\tcmd.select();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\tsync : function() {\r\n\t\t_elementVal(this.srcElement, this.html());\r\n\t\treturn this;\r\n\t},\r\n\tfocus : function() {\r\n\t\tthis.isCreated ? this.edit.focus() : this.srcElement[0].focus();\r\n\t\treturn this;\r\n\t},\r\n\tblur : function() {\r\n\t\tthis.isCreated ? this.edit.blur() : this.srcElement[0].blur();\r\n\t\treturn this;\r\n\t},\r\n\taddBookmark : function(checkSize) {\r\n\t\tcheckSize = _undef(checkSize, true);\r\n\t\tvar self = this, edit = self.edit,\r\n\t\t\tbody = edit.doc.body,\r\n\t\t\thtml = _removeTempTag(body.innerHTML), bookmark;\r\n\t\tif (checkSize && self._undoStack.length > 0) {\r\n\t\t\tvar prev = self._undoStack[self._undoStack.length - 1];\r\n\t\t\tif (Math.abs(html.length - _removeBookmarkTag(prev.html).length) < self.minChangeSize) {\r\n\t\t\t\treturn self;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (edit.designMode && !self._firstAddBookmark) {\r\n\t\t\tvar range = self.cmd.range;\r\n\t\t\tbookmark = range.createBookmark(true);\r\n\t\t\tbookmark.html = _removeTempTag(body.innerHTML);\r\n\t\t\trange.moveToBookmark(bookmark);\r\n\t\t} else {\r\n\t\t\tbookmark = {\r\n\t\t\t\thtml : html\r\n\t\t\t};\r\n\t\t}\r\n\t\tself._firstAddBookmark = false;\r\n\t\t_addBookmarkToStack(self._undoStack, bookmark);\r\n\t\treturn self;\r\n\t},\r\n\tundo : function() {\r\n\t\treturn _undoToRedo.call(this, this._undoStack, this._redoStack);\r\n\t},\r\n\tredo : function() {\r\n\t\treturn _undoToRedo.call(this, this._redoStack, this._undoStack);\r\n\t},\r\n\tfullscreen : function(bool) {\r\n\t\tthis.fullscreenMode = (bool === undefined ? !this.fullscreenMode : bool);\r\n\t\tthis.addBookmark(false);\r\n\t\treturn this.remove().create();\r\n\t},\r\n\treadonly : function(isReadonly) {\r\n\t\tisReadonly = _undef(isReadonly, true);\r\n\t\tvar self = this, edit = self.edit, doc = edit.doc;\r\n\t\tif (self.designMode) {\r\n\t\t\tself.toolbar.disableAll(isReadonly, []);\r\n\t\t} else {\r\n\t\t\t_each(self.noDisableItems, function() {\r\n\t\t\t\tself.toolbar[isReadonly ? 'disable' : 'enable'](this);\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (_IE) {\r\n\t\t\tdoc.body.contentEditable = !isReadonly;\r\n\t\t} else {\r\n\t\t\tdoc.designMode = isReadonly ? 'off' : 'on';\r\n\t\t}\r\n\t\tedit.textarea[0].disabled = isReadonly;\r\n\t},\r\n\tcreateMenu : function(options) {\r\n\t\tvar self = this,\r\n\t\t\tname = options.name,\r\n\t\t\tknode = self.toolbar.get(name),\r\n\t\t\tpos = knode.pos();\r\n\t\toptions.x = pos.x;\r\n\t\toptions.y = pos.y + knode.height();\r\n\t\toptions.z = self.options.zIndex;\r\n\t\toptions.shadowMode = _undef(options.shadowMode, self.shadowMode);\r\n\t\tif (options.selectedColor !== undefined) {\r\n\t\t\toptions.cls = 'ke-colorpicker-' + self.themeType;\r\n\t\t\toptions.noColor = self.lang('noColor');\r\n\t\t\tself.menu = _colorpicker(options);\r\n\t\t} else {\r\n\t\t\toptions.cls = 'ke-menu-' + self.themeType;\r\n\t\t\toptions.centerLineMode = false;\r\n\t\t\tself.menu = _menu(options);\r\n\t\t}\r\n\t\treturn self.menu;\r\n\t},\r\n\thideMenu : function() {\r\n\t\tthis.menu.remove();\r\n\t\tthis.menu = null;\r\n\t\treturn this;\r\n\t},\r\n\thideContextmenu : function() {\r\n\t\tthis.contextmenu.remove();\r\n\t\tthis.contextmenu = null;\r\n\t\treturn this;\r\n\t},\r\n\tcreateDialog : function(options) {\r\n\t\tvar self = this, name = options.name;\r\n\t\toptions.z = self.options.zIndex;\r\n\t\toptions.shadowMode = _undef(options.shadowMode, self.shadowMode);\r\n\t\toptions.closeBtn = _undef(options.closeBtn, {\r\n\t\t\tname : self.lang('close'),\r\n\t\t\tclick : function(e) {\r\n\t\t\t\tself.hideDialog();\r\n\t\t\t\tif (_IE && self.cmd) {\r\n\t\t\t\t\tself.cmd.select();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\toptions.noBtn = _undef(options.noBtn, {\r\n\t\t\tname : self.lang(options.yesBtn ? 'no' : 'close'),\r\n\t\t\tclick : function(e) {\r\n\t\t\t\tself.hideDialog();\r\n\t\t\t\tif (_IE && self.cmd) {\r\n\t\t\t\t\tself.cmd.select();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (self.dialogAlignType != 'page') {\r\n\t\t\toptions.alignEl = self.container;\r\n\t\t}\r\n\t\toptions.cls = 'ke-dialog-' + self.themeType;\r\n\t\tif (self.dialogs.length > 0) {\r\n\t\t\tvar firstDialog = self.dialogs[0],\r\n\t\t\t\tparentDialog = self.dialogs[self.dialogs.length - 1];\r\n\t\t\tfirstDialog.setMaskIndex(parentDialog.z + 2);\r\n\t\t\toptions.z = parentDialog.z + 3;\r\n\t\t\toptions.showMask = false;\r\n\t\t}\r\n\t\tvar dialog = _dialog(options);\r\n\t\tself.dialogs.push(dialog);\r\n\t\treturn dialog;\r\n\t},\r\n\thideDialog : function() {\r\n\t\tvar self = this;\r\n\t\tif (self.dialogs.length > 0) {\r\n\t\t\tself.dialogs.pop().remove();\r\n\t\t}\r\n\t\tif (self.dialogs.length > 0) {\r\n\t\t\tvar firstDialog = self.dialogs[0],\r\n\t\t\t\tparentDialog = self.dialogs[self.dialogs.length - 1];\r\n\t\t\tfirstDialog.setMaskIndex(parentDialog.z - 1);\r\n\t\t}\r\n\t\treturn self;\r\n\t},\r\n\terrorDialog : function(html) {\r\n\t\tvar self = this;\r\n\t\tvar dialog = self.createDialog({\r\n\t\t\twidth : 750,\r\n\t\t\ttitle : self.lang('uploadError'),\r\n\t\t\tbody : '<div style=\"padding:10px 20px;\"><iframe frameborder=\"0\" style=\"width:708px;height:400px;\"></iframe></div>'\r\n\t\t});\r\n\t\tvar iframe = K('iframe', dialog.div), doc = K.iframeDoc(iframe);\r\n\t\tdoc.open();\r\n\t\tdoc.write(html);\r\n\t\tdoc.close();\r\n\t\tK(doc.body).css('background-color', '#FFF');\r\n\t\tiframe[0].contentWindow.focus();\r\n\t\treturn self;\r\n\t}\r\n};\r\nfunction _editor(options) {\r\n\treturn new KEditor(options);\r\n}\r\n_instances = [];\r\nfunction _create(expr, options) {\r\n\toptions = options || {};\r\n\toptions.basePath = _undef(options.basePath, K.basePath);\r\n\toptions.themesPath = _undef(options.themesPath, options.basePath + 'themes/');\r\n\toptions.langPath = _undef(options.langPath, options.basePath + 'lang/');\r\n\toptions.pluginsPath = _undef(options.pluginsPath, options.basePath + 'plugins/');\r\n\tif (_undef(options.loadStyleMode, K.options.loadStyleMode)) {\r\n\t\tvar themeType = _undef(options.themeType, K.options.themeType);\r\n\t\t_loadStyle(options.themesPath + 'default/default.css');\r\n\t\t_loadStyle(options.themesPath + themeType + '/' + themeType + '.css');\r\n\t}\r\n\tfunction create(editor) {\r\n\t\t_each(_plugins, function(name, fn) {\r\n\t\t\tif (_isFunction(fn)) {\r\n\t\t\t\tfn.call(editor, KindEditor);\r\n\t\t\t\tif (!editor._pluginStatus) {\r\n\t\t\t\t\teditor._pluginStatus = {};\r\n\t\t\t\t}\r\n\t\t\t\teditor._pluginStatus[name] = 'inited';\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn editor.create();\r\n\t}\r\n\tvar knode = K(expr);\r\n\tif (!knode || knode.length === 0) {\r\n\t\treturn;\r\n\t}\r\n\tif (knode.length > 1) {\r\n\t\tknode.each(function() {\r\n\t\t\t_create(this, options);\r\n\t\t});\r\n\t\treturn _instances[0];\r\n\t}\r\n\toptions.srcElement = knode[0];\r\n\tvar editor = new KEditor(options);\r\n\t_instances.push(editor);\r\n\tif (_language[editor.langType]) {\r\n\t\treturn create(editor);\r\n\t}\r\n\t_loadScript(editor.langPath + editor.langType + '.js?ver=' + encodeURIComponent(K.DEBUG ? _TIME : _VERSION), function() {\r\n\t\tcreate(editor);\r\n\t});\r\n\treturn editor;\r\n}\r\nfunction _eachEditor(expr, fn) {\r\n\tK(expr).each(function(i, el) {\r\n\t\tK.each(_instances, function(j, editor) {\r\n\t\t\tif (editor && editor.srcElement[0] == el) {\r\n\t\t\t\tfn.call(editor, j);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\nK.remove = function(expr) {\r\n\t_eachEditor(expr, function(i) {\r\n\t\tthis.remove();\r\n\t\t_instances.splice(i, 1);\r\n\t});\r\n};\r\nK.sync = function(expr) {\r\n\t_eachEditor(expr, function() {\r\n\t\tthis.sync();\r\n\t});\r\n};\r\nK.html = function(expr, val) {\r\n\t_eachEditor(expr, function() {\r\n\t\tthis.html(val);\r\n\t});\r\n};\r\nK.insertHtml = function(expr, val) {\r\n\t_eachEditor(expr, function() {\r\n\t\tthis.insertHtml(val);\r\n\t});\r\n};\r\nK.appendHtml = function(expr, val) {\r\n\t_eachEditor(expr, function() {\r\n\t\tthis.appendHtml(val);\r\n\t});\r\n};\r\n\r\r\nif (_IE && _V < 7) {\r\n\t_nativeCommand(document, 'BackgroundImageCache', true);\r\n}\r\nK.EditorClass = KEditor;\r\nK.editor = _editor;\r\nK.create = _create;\r\nK.instances = _instances;\r\nK.plugin = _plugin;\r\nK.lang = _lang;\r\n\r\r\n_plugin('core', function(K) {\r\n\tvar self = this,\r\n\t\tshortcutKeys = {\r\n\t\t\tundo : 'Z', redo : 'Y', bold : 'B', italic : 'I', underline : 'U', print : 'P', selectall : 'A'\r\n\t\t};\r\n\tself.afterSetHtml(function() {\r\n\t\tif (self.options.afterChange) {\r\n\t\t\tself.options.afterChange.call(self);\r\n\t\t}\r\n\t});\r\n\tself.afterCreate(function() {\r\n\t\tif (self.syncType != 'form') {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar el = K(self.srcElement), hasForm = false;\r\n\t\twhile ((el = el.parent())) {\r\n\t\t\tif (el.name == 'form') {\r\n\t\t\t\thasForm = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (hasForm) {\r\n\t\t\tel.bind('submit', function(e) {\r\n\t\t\t\tself.sync();\r\n\t\t\t\tK(window).bind('unload', function() {\r\n\t\t\t\t\tself.edit.textarea.remove();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tvar resetBtn = K('[type=\"reset\"]', el);\r\n\t\t\tresetBtn.click(function() {\r\n\t\t\t\tself.html(self.initContent);\r\n\t\t\t\tself.cmd.selection();\r\n\t\t\t});\r\n\t\t\tself.beforeRemove(function() {\r\n\t\t\t\tel.unbind();\r\n\t\t\t\tresetBtn.unbind();\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\tself.clickToolbar('source', function() {\r\n\t\tif (self.edit.designMode) {\r\n\t\t\tself.toolbar.disableAll(true);\r\n\t\t\tself.edit.design(false);\r\n\t\t\tself.toolbar.select('source');\r\n\t\t} else {\r\n\t\t\tself.toolbar.disableAll(false);\r\n\t\t\tself.edit.design(true);\r\n\t\t\tself.toolbar.unselect('source');\r\n\t\t\tif (_GECKO) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tself.cmd.selection();\r\n\t\t\t\t}, 0);\r\n\t\t\t} else {\r\n\t\t\t\tself.cmd.selection();\r\n\t\t\t}\r\n\t\t}\r\n\t\tself.designMode = self.edit.designMode;\r\n\t});\r\n\tself.afterCreate(function() {\r\n\t\tif (!self.designMode) {\r\n\t\t\tself.toolbar.disableAll(true).select('source');\r\n\t\t}\r\n\t});\r\n\tself.clickToolbar('fullscreen', function() {\r\n\t\tself.fullscreen();\r\n\t});\r\n\tif (self.fullscreenShortcut) {\r\n\t\tvar loaded = false;\r\n\t\tself.afterCreate(function() {\r\n\t\t\tK(self.edit.doc, self.edit.textarea).keyup(function(e) {\r\n\t\t\t\tif (e.which == 27) {\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tself.fullscreen();\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (loaded) {\r\n\t\t\t\tif (_IE && !self.designMode) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tself.focus();\r\n\t\t\t}\r\n\t\t\tif (!loaded) {\r\n\t\t\t\tloaded = true;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t_each('undo,redo'.split(','), function(i, name) {\r\n\t\tif (shortcutKeys[name]) {\r\n\t\t\tself.afterCreate(function() {\r\n\t\t\t\t_ctrl(this.edit.doc, shortcutKeys[name], function() {\r\n\t\t\t\t\tself.clickToolbar(name);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tself.clickToolbar(name, function() {\r\n\t\t\tself[name]();\r\n\t\t});\r\n\t});\r\n\tself.clickToolbar('formatblock', function() {\r\n\t\tvar blocks = self.lang('formatblock.formatBlock'),\r\n\t\t\theights = {\r\n\t\t\t\th1 : 28,\r\n\t\t\t\th2 : 24,\r\n\t\t\t\th3 : 18,\r\n\t\t\t\tH4 : 14,\r\n\t\t\t\tp : 12\r\n\t\t\t},\r\n\t\t\tcurVal = self.cmd.val('formatblock'),\r\n\t\t\tmenu = self.createMenu({\r\n\t\t\t\tname : 'formatblock',\r\n\t\t\t\twidth : self.langType == 'en' ? 200 : 150\r\n\t\t\t});\r\n\t\t_each(blocks, function(key, val) {\r\n\t\t\tvar style = 'font-size:' + heights[key] + 'px;';\r\n\t\t\tif (key.charAt(0) === 'h') {\r\n\t\t\t\tstyle += 'font-weight:bold;';\r\n\t\t\t}\r\n\t\t\tmenu.addItem({\r\n\t\t\t\ttitle : '<span style=\"' + style + '\" unselectable=\"on\">' + val + '</span>',\r\n\t\t\t\theight : heights[key] + 12,\r\n\t\t\t\tchecked : (curVal === key || curVal === val),\r\n\t\t\t\tclick : function() {\r\n\t\t\t\t\tself.select().exec('formatblock', '<' + key + '>').hideMenu();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n\tself.clickToolbar('fontname', function() {\r\n\t\tvar curVal = self.cmd.val('fontname'),\r\n\t\t\tmenu = self.createMenu({\r\n\t\t\t\tname : 'fontname',\r\n\t\t\t\twidth : 150\r\n\t\t\t});\r\n\t\t_each(self.lang('fontname.fontName'), function(key, val) {\r\n\t\t\tmenu.addItem({\r\n\t\t\t\ttitle : '<span style=\"font-family: ' + key + ';\" unselectable=\"on\">' + val + '</span>',\r\n\t\t\t\tchecked : (curVal === key.toLowerCase() || curVal === val.toLowerCase()),\r\n\t\t\t\tclick : function() {\r\n\t\t\t\t\tself.exec('fontname', key).hideMenu();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n\tself.clickToolbar('fontsize', function() {\r\n\t\tvar curVal = self.cmd.val('fontsize'),\r\n\t\t\tmenu = self.createMenu({\r\n\t\t\t\tname : 'fontsize',\r\n\t\t\t\twidth : 150\r\n\t\t\t});\r\n\t\t_each(self.fontSizeTable, function(i, val) {\r\n\t\t\tmenu.addItem({\r\n\t\t\t\ttitle : '<span style=\"font-size:' + val + ';\" unselectable=\"on\">' + val + '</span>',\r\n\t\t\t\theight : _removeUnit(val) + 12,\r\n\t\t\t\tchecked : curVal === val,\r\n\t\t\t\tclick : function() {\r\n\t\t\t\t\tself.exec('fontsize', val).hideMenu();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n\t_each('forecolor,hilitecolor'.split(','), function(i, name) {\r\n\t\tself.clickToolbar(name, function() {\r\n\t\t\tself.createMenu({\r\n\t\t\t\tname : name,\r\n\t\t\t\tselectedColor : self.cmd.val(name) || 'default',\r\n\t\t\t\tcolors : self.colorTable,\r\n\t\t\t\tclick : function(color) {\r\n\t\t\t\t\tself.exec(name, color).hideMenu();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n\t_each(('cut,copy,paste').split(','), function(i, name) {\r\n\t\tself.clickToolbar(name, function() {\r\n\t\t\tself.focus();\r\n\t\t\ttry {\r\n\t\t\t\tself.exec(name, null);\r\n\t\t\t} catch(e) {\r\n\t\t\t\talert(self.lang(name + 'Error'));\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\tself.clickToolbar('about', function() {\r\n\t\tvar html = '<div style=\"margin:20px;\">' +\r\n\t\t\t'<div>KindEditor ' + _VERSION + '</div>' +\r\n\t\t\t'<div>Copyright &copy; <a href=\"http://www.kindsoft.net/\" target=\"_blank\">kindsoft.net</a> All rights reserved.</div>' +\r\n\t\t\t'</div>';\r\n\t\tself.createDialog({\r\n\t\t\tname : 'about',\r\n\t\t\twidth : 350,\r\n\t\t\ttitle : self.lang('about'),\r\n\t\t\tbody : html\r\n\t\t});\r\n\t});\r\n\tself.plugin.getSelectedLink = function() {\r\n\t\treturn self.cmd.commonAncestor('a');\r\n\t};\r\n\tself.plugin.getSelectedImage = function() {\r\n\t\treturn _getImageFromRange(self.edit.cmd.range, function(img) {\r\n\t\t\treturn !/^ke-\\w+$/i.test(img[0].className);\r\n\t\t});\r\n\t};\r\n\tself.plugin.getSelectedFlash = function() {\r\n\t\treturn _getImageFromRange(self.edit.cmd.range, function(img) {\r\n\t\t\treturn img[0].className == 'ke-flash';\r\n\t\t});\r\n\t};\r\n\tself.plugin.getSelectedMedia = function() {\r\n\t\treturn _getImageFromRange(self.edit.cmd.range, function(img) {\r\n\t\t\treturn img[0].className == 'ke-media' || img[0].className == 'ke-rm';\r\n\t\t});\r\n\t};\r\n\tself.plugin.getSelectedAnchor = function() {\r\n\t\treturn _getImageFromRange(self.edit.cmd.range, function(img) {\r\n\t\t\treturn img[0].className == 'ke-anchor';\r\n\t\t});\r\n\t};\r\n\t_each('link,image,flash,media,anchor'.split(','), function(i, name) {\r\n\t\tvar uName = name.charAt(0).toUpperCase() + name.substr(1);\r\n\t\t_each('edit,delete'.split(','), function(j, val) {\r\n\t\t\tself.addContextmenu({\r\n\t\t\t\ttitle : self.lang(val + uName),\r\n\t\t\t\tclick : function() {\r\n\t\t\t\t\tself.loadPlugin(name, function() {\r\n\t\t\t\t\t\tself.plugin[name][val]();\r\n\t\t\t\t\t\tself.hideMenu();\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcond : self.plugin['getSelected' + uName],\r\n\t\t\t\twidth : 150,\r\n\t\t\t\ticonClass : val == 'edit' ? 'ke-icon-' + name : undefined\r\n\t\t\t});\r\n\t\t});\r\n\t\tself.addContextmenu({ title : '-' });\r\n\t});\r\n\tself.plugin.getSelectedTable = function() {\r\n\t\treturn self.cmd.commonAncestor('table');\r\n\t};\r\n\tself.plugin.getSelectedRow = function() {\r\n\t\treturn self.cmd.commonAncestor('tr');\r\n\t};\r\n\tself.plugin.getSelectedCell = function() {\r\n\t\treturn self.cmd.commonAncestor('td');\r\n\t};\r\n\t_each(('prop,cellprop,colinsertleft,colinsertright,rowinsertabove,rowinsertbelow,rowmerge,colmerge,' +\r\n\t'rowsplit,colsplit,coldelete,rowdelete,insert,delete').split(','), function(i, val) {\r\n\t\tvar cond = _inArray(val, ['prop', 'delete']) < 0 ? self.plugin.getSelectedCell : self.plugin.getSelectedTable;\r\n\t\tself.addContextmenu({\r\n\t\t\ttitle : self.lang('table' + val),\r\n\t\t\tclick : function() {\r\n\t\t\t\tself.loadPlugin('table', function() {\r\n\t\t\t\t\tself.plugin.table[val]();\r\n\t\t\t\t\tself.hideMenu();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcond : cond,\r\n\t\t\twidth : 170,\r\n\t\t\ticonClass : 'ke-icon-table' + val\r\n\t\t});\r\n\t});\r\n\tself.addContextmenu({ title : '-' });\r\n\t_each(('selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,' +\r\n\t\t'insertunorderedlist,indent,outdent,subscript,superscript,hr,print,' +\r\n\t\t'bold,italic,underline,strikethrough,removeformat,unlink').split(','), function(i, name) {\r\n\t\tif (shortcutKeys[name]) {\r\n\t\t\tself.afterCreate(function() {\r\n\t\t\t\t_ctrl(this.edit.doc, shortcutKeys[name], function() {\r\n\t\t\t\t\tself.cmd.selection();\r\n\t\t\t\t\tself.clickToolbar(name);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tself.clickToolbar(name, function() {\r\n\t\t\tself.focus().exec(name, null);\r\n\t\t});\r\n\t});\r\n\tself.afterCreate(function() {\r\n\t\tvar doc = self.edit.doc, cmd, bookmark, div,\r\n\t\t\tcls = '__kindeditor_paste__', pasting = false;\r\n\t\tfunction movePastedData() {\r\n\t\t\tcmd.range.moveToBookmark(bookmark);\r\n\t\t\tcmd.select();\r\n\t\t\tif (_WEBKIT) {\r\n\t\t\t\tK('div.' + cls, div).each(function() {\r\n\t\t\t\t\tK(this).after('<br />').remove(true);\r\n\t\t\t\t});\r\n\t\t\t\tK('span.Apple-style-span', div).remove(true);\r\n\t\t\t\tK('span.Apple-tab-span', div).remove(true);\r\n\t\t\t\tK('span[style]', div).each(function() {\r\n\t\t\t\t\tif (K(this).css('white-space') == 'nowrap') {\r\n\t\t\t\t\t\tK(this).remove(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tK('meta', div).remove();\r\n\t\t\t}\r\n\t\t\tvar html = div[0].innerHTML;\r\n\t\t\tdiv.remove();\r\n\t\t\tif (html === '') {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (_WEBKIT) {\r\n\t\t\t\thtml = html.replace(/(<br>)\\1/ig, '$1');\r\n\t\t\t}\r\n\t\t\tif (self.pasteType === 2) {\r\n\t\t\t\thtml = html.replace(/(<(?:p|p\\s[^>]*)>) *(<\\/p>)/ig, '');\r\n\t\t\t\tif (/schemas-microsoft-com|worddocument|mso-\\w+/i.test(html)) {\r\n\t\t\t\t\thtml = _clearMsWord(html, self.filterMode ? self.htmlTags : K.options.htmlTags);\r\n\t\t\t\t} else {\r\n\t\t\t\t\thtml = _formatHtml(html, self.filterMode ? self.htmlTags : null);\r\n\t\t\t\t\thtml = self.beforeSetHtml(html);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (self.pasteType === 1) {\r\n\t\t\t\thtml = html.replace(/&nbsp;/ig, ' ');\r\n\t\t\t\thtml = html.replace(/\\n\\s*\\n/g, '\\n');\r\n\t\t\t\thtml = html.replace(/<br[^>]*>/ig, '\\n');\r\n\t\t\t\thtml = html.replace(/<\\/p><p[^>]*>/ig, '\\n');\r\n\t\t\t\thtml = html.replace(/<[^>]+>/g, '');\r\n\t\t\t\thtml = html.replace(/ {2}/g, ' &nbsp;');\r\n\t\t\t\tif (self.newlineTag == 'p') {\r\n\t\t\t\t\tif (/\\n/.test(html)) {\r\n\t\t\t\t\t\thtml = html.replace(/^/, '<p>').replace(/$/, '<br /></p>').replace(/\\n/g, '<br /></p><p>');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\thtml = html.replace(/\\n/g, '<br />$&');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tself.insertHtml(html, true);\r\n\t\t}\r\n\t\tK(doc.body).bind('paste', function(e){\r\n\t\t\tif (self.pasteType === 0) {\r\n\t\t\t\te.stop();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (pasting) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tpasting = true;\r\n\t\t\tK('div.' + cls, doc).remove();\r\n\t\t\tcmd = self.cmd.selection();\r\n\t\t\tbookmark = cmd.range.createBookmark();\r\n\t\t\tdiv = K('<div class=\"' + cls + '\"></div>', doc).css({\r\n\t\t\t\tposition : 'absolute',\r\n\t\t\t\twidth : '1px',\r\n\t\t\t\theight : '1px',\r\n\t\t\t\toverflow : 'hidden',\r\n\t\t\t\tleft : '-1981px',\r\n\t\t\t\ttop : K(bookmark.start).pos().y + 'px',\r\n\t\t\t\t'white-space' : 'nowrap'\r\n\t\t\t});\r\n\t\t\tK(doc.body).append(div);\r\n\t\t\tif (_IE) {\r\n\t\t\t\tvar rng = cmd.range.get(true);\r\n\t\t\t\trng.moveToElementText(div[0]);\r\n\t\t\t\trng.select();\r\n\t\t\t\trng.execCommand('paste');\r\n\t\t\t\te.preventDefault();\r\n\t\t\t} else {\r\n\t\t\t\tcmd.range.selectNodeContents(div[0]);\r\n\t\t\t\tcmd.select();\r\n\t\t\t\tdiv[0].tabIndex = -1;\r\n\t\t\t\tdiv[0].focus();\r\n\t\t\t}\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tmovePastedData();\r\n\t\t\t\tpasting = false;\r\n\t\t\t}, 0);\r\n\t\t});\r\n\t});\r\n\tself.beforeGetHtml(function(html) {\r\n\t\tif (_IE && _V <= 8) {\r\n\t\t\thtml = html.replace(/<div\\s+[^>]*data-ke-input-tag=\"([^\"]*)\"[^>]*>([\\s\\S]*?)<\\/div>/ig, function(full, tag) {\r\n\t\t\t\treturn unescape(tag);\r\n\t\t\t});\r\n\t\t\thtml = html.replace(/(<input)((?:\\s+[^>]*)?>)/ig, function($0, $1, $2) {\r\n\t\t\t\tif (!/\\s+type=\"[^\"]+\"/i.test($0)) {\r\n\t\t\t\t\treturn $1 + ' type=\"text\"' + $2;\r\n\t\t\t\t}\r\n\t\t\t\treturn $0;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn html.replace(/(<(?:noscript|noscript\\s[^>]*)>)([\\s\\S]*?)(<\\/noscript>)/ig, function($0, $1, $2, $3) {\r\n\t\t\treturn $1 + _unescape($2).replace(/\\s+/g, ' ') + $3;\r\n\t\t})\r\n\t\t.replace(/<img[^>]*class=\"?ke-(flash|rm|media)\"?[^>]*>/ig, function(full) {\r\n\t\t\tvar imgAttrs = _getAttrList(full);\r\n\t\t\tvar styles = _getCssList(imgAttrs.style || '');\r\n\t\t\tvar attrs = _mediaAttrs(imgAttrs['data-ke-tag']);\r\n\t\t\tvar width = _undef(styles.width, '');\r\n\t\t\tvar height = _undef(styles.height, '');\r\n\t\t\tif (/px/i.test(width)) {\r\n\t\t\t\twidth = _removeUnit(width);\r\n\t\t\t}\r\n\t\t\tif (/px/i.test(height)) {\r\n\t\t\t\theight = _removeUnit(height);\r\n\t\t\t}\r\n\t\t\tattrs.width = _undef(imgAttrs.width, width);\r\n\t\t\tattrs.height = _undef(imgAttrs.height, height);\r\n\t\t\treturn _mediaEmbed(attrs);\r\n\t\t})\r\n\t\t.replace(/<img[^>]*class=\"?ke-anchor\"?[^>]*>/ig, function(full) {\r\n\t\t\tvar imgAttrs = _getAttrList(full);\r\n\t\t\treturn '<a name=\"' + unescape(imgAttrs['data-ke-name']) + '\"></a>';\r\n\t\t})\r\n\t\t.replace(/<div\\s+[^>]*data-ke-script-attr=\"([^\"]*)\"[^>]*>([\\s\\S]*?)<\\/div>/ig, function(full, attr, code) {\r\n\t\t\treturn '<script' + unescape(attr) + '>' + unescape(code) + '</script>';\r\n\t\t})\r\n\t\t.replace(/<div\\s+[^>]*data-ke-noscript-attr=\"([^\"]*)\"[^>]*>([\\s\\S]*?)<\\/div>/ig, function(full, attr, code) {\r\n\t\t\treturn '<noscript' + unescape(attr) + '>' + unescape(code) + '</noscript>';\r\n\t\t})\r\n\t\t.replace(/(<[^>]*)data-ke-src=\"([^\"]*)\"([^>]*>)/ig, function(full, start, src, end) {\r\n\t\t\tfull = full.replace(/(\\s+(?:href|src)=\")[^\"]*(\")/i, function($0, $1, $2) {\r\n\t\t\t\treturn $1 + _unescape(src) + $2;\r\n\t\t\t});\r\n\t\t\tfull = full.replace(/\\s+data-ke-src=\"[^\"]*\"/i, '');\r\n\t\t\treturn full;\r\n\t\t})\r\n\t\t.replace(/(<[^>]+\\s)data-ke-(on\\w+=\"[^\"]*\"[^>]*>)/ig, function(full, start, end) {\r\n\t\t\treturn start + end;\r\n\t\t});\r\n\t});\r\n\tself.beforeSetHtml(function(html) {\r\n\t\tif (_IE && _V <= 8) {\r\n\t\t\thtml = html.replace(/<input[^>]*>|<(select|button)[^>]*>[\\s\\S]*?<\\/\\1>/ig, function(full) {\r\n\t\t\t\tvar attrs = _getAttrList(full);\r\n\t\t\t\tvar styles = _getCssList(attrs.style || '');\r\n\t\t\t\tif (styles.display == 'none') {\r\n\t\t\t\t\treturn '<div class=\"ke-display-none\" data-ke-input-tag=\"' + escape(full) + '\"></div>';\r\n\t\t\t\t}\r\n\t\t\t\treturn full;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn html.replace(/<embed[^>]*type=\"([^\"]+)\"[^>]*>(?:<\\/embed>)?/ig, function(full) {\r\n\t\t\tvar attrs = _getAttrList(full);\r\n\t\t\tattrs.src = _undef(attrs.src, '');\r\n\t\t\tattrs.width = _undef(attrs.width, 0);\r\n\t\t\tattrs.height = _undef(attrs.height, 0);\r\n\t\t\treturn _mediaImg(self.themesPath + 'common/blank.gif', attrs);\r\n\t\t})\r\n\t\t.replace(/<a[^>]*name=\"([^\"]+)\"[^>]*>(?:<\\/a>)?/ig, function(full) {\r\n\t\t\tvar attrs = _getAttrList(full);\r\n\t\t\tif (attrs.href !== undefined) {\r\n\t\t\t\treturn full;\r\n\t\t\t}\r\n\t\t\treturn '<img class=\"ke-anchor\" src=\"' + self.themesPath + 'common/anchor.gif\" data-ke-name=\"' + escape(attrs.name) + '\" />';\r\n\t\t})\r\n\t\t.replace(/<script([^>]*)>([\\s\\S]*?)<\\/script>/ig, function(full, attr, code) {\r\n\t\t\treturn '<div class=\"ke-script\" data-ke-script-attr=\"' + escape(attr) + '\">' + escape(code) + '</div>';\r\n\t\t})\r\n\t\t.replace(/<noscript([^>]*)>([\\s\\S]*?)<\\/noscript>/ig, function(full, attr, code) {\r\n\t\t\treturn '<div class=\"ke-noscript\" data-ke-noscript-attr=\"' + escape(attr) + '\">' + escape(code) + '</div>';\r\n\t\t})\r\n\t\t.replace(/(<[^>]*)(href|src)=\"([^\"]*)\"([^>]*>)/ig, function(full, start, key, src, end) {\r\n\t\t\tif (full.match(/\\sdata-ke-src=\"[^\"]*\"/i)) {\r\n\t\t\t\treturn full;\r\n\t\t\t}\r\n\t\t\tfull = start + key + '=\"' + src + '\"' + ' data-ke-src=\"' + _escape(src) + '\"' + end;\r\n\t\t\treturn full;\r\n\t\t})\r\n\t\t.replace(/(<[^>]+\\s)(on\\w+=\"[^\"]*\"[^>]*>)/ig, function(full, start, end) {\r\n\t\t\treturn start + 'data-ke-' + end;\r\n\t\t})\r\n\t\t.replace(/<table[^>]*\\s+border=\"0\"[^>]*>/ig, function(full) {\r\n\t\t\tif (full.indexOf('ke-zeroborder') >= 0) {\r\n\t\t\t\treturn full;\r\n\t\t\t}\r\n\t\t\treturn _addClassToTag(full, 'ke-zeroborder');\r\n\t\t});\r\n\t});\r\n});\r\n\n\r\n})(window);\r\n\n/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2011 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @site http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n*******************************************************************************/\r\nKindEditor.lang({\r\n\tsource : 'HTML',\r\n\tpreview : '',\r\n\tundo : '(Ctrl+Z)',\r\n\tredo : '(Ctrl+Y)',\r\n\tcut : '(Ctrl+X)',\r\n\tcopy : '(Ctrl+C)',\r\n\tpaste : '(Ctrl+V)',\r\n\tplainpaste : '',\r\n\twordpaste : 'Word',\r\n\tselectall : '(Ctrl+A)',\r\n\tjustifyleft : '',\r\n\tjustifycenter : '',\r\n\tjustifyright : '',\r\n\tjustifyfull : '',\r\n\tinsertorderedlist : '',\r\n\tinsertunorderedlist : '',\r\n\tindent : '',\r\n\toutdent : '',\r\n\tsubscript : '',\r\n\tsuperscript : '',\r\n\tformatblock : '',\r\n\tfontname : '',\r\n\tfontsize : '',\r\n\tforecolor : '',\r\n\thilitecolor : '',\r\n\tbold : '(Ctrl+B)',\r\n\titalic : '(Ctrl+I)',\r\n\tunderline : '(Ctrl+U)',\r\n\tstrikethrough : '',\r\n\tremoveformat : '',\r\n\timage : '',\r\n\tmultiimage : '',\r\n\tflash : 'Flash',\r\n\tmedia : '',\r\n\ttable : '',\r\n\ttablecell : '',\r\n\thr : '',\r\n\temoticons : '',\r\n\tlink : '',\r\n\tunlink : '',\r\n\tfullscreen : '',\r\n\tabout : '',\r\n\tprint : '(Ctrl+P)',\r\n\tfilemanager : '',\r\n\tcode : '',\r\n\tmap : 'Google',\r\n\tbaidumap : '',\r\n\tlineheight : '',\r\n\tclearhtml : 'HTML',\r\n\tpagebreak : '',\r\n\tquickformat : '',\r\n\tinsertfile : '',\r\n\ttemplate : '',\r\n\tanchor : '',\r\n\tyes : '',\r\n\tno : '',\r\n\tclose : '',\r\n\teditImage : '',\r\n\tdeleteImage : '',\r\n\teditFlash : 'Flash',\r\n\tdeleteFlash : 'Flash',\r\n\teditMedia : '',\r\n\tdeleteMedia : '',\r\n\teditLink : '',\r\n\tdeleteLink : '',\r\n\teditAnchor : '',\r\n\tdeleteAnchor : '',\r\n\ttableprop : '',\r\n\ttablecellprop : '',\r\n\ttableinsert : '',\r\n\ttabledelete : '',\r\n\ttablecolinsertleft : '',\r\n\ttablecolinsertright : '',\r\n\ttablerowinsertabove : '',\r\n\ttablerowinsertbelow : '',\r\n\ttablerowmerge : '',\r\n\ttablecolmerge : '',\r\n\ttablerowsplit : '',\r\n\ttablecolsplit : '',\r\n\ttablecoldelete : '',\r\n\ttablerowdelete : '',\r\n\tnoColor : '',\r\n\tpleaseSelectFile : '',\r\n\tinvalidImg : \"URL\\njpg,gif,bmp,png\",\r\n\tinvalidMedia : \"URL\\nswf,flv,mp3,wav,wma,wmv,mid,avi,mpg,asf,rm,rmvb\",\r\n\tinvalidWidth : \"\",\r\n\tinvalidHeight : \"\",\r\n\tinvalidBorder : \"\",\r\n\tinvalidUrl : \"URL\",\r\n\tinvalidRows : '0',\r\n\tinvalidCols : '0',\r\n\tinvalidPadding : '',\r\n\tinvalidSpacing : '',\r\n\tinvalidJson : '',\r\n\tuploadSuccess : '',\r\n\tcutError : '(Ctrl+X)',\r\n\tcopyError : '(Ctrl+C)',\r\n\tpasteError : '(Ctrl+V)',\r\n\tajaxLoading : ' ...',\r\n\tuploadLoading : ' ...',\r\n\tuploadError : '',\r\n\t'plainpaste.comment' : '(Ctrl+V)',\r\n\t'wordpaste.comment' : '(Ctrl+V)',\r\n\t'code.pleaseInput' : '',\r\n\t'link.url' : 'URL',\r\n\t'link.linkType' : '',\r\n\t'link.newWindow' : '',\r\n\t'link.selfWindow' : '',\r\n\t'flash.url' : 'URL',\r\n\t'flash.width' : '',\r\n\t'flash.height' : '',\r\n\t'flash.upload' : '',\r\n\t'flash.viewServer' : '',\r\n\t'media.url' : 'URL',\r\n\t'media.width' : '',\r\n\t'media.height' : '',\r\n\t'media.autostart' : '',\r\n\t'media.upload' : '',\r\n\t'media.viewServer' : '',\r\n\t'image.remoteImage' : '',\r\n\t'image.localImage' : '',\r\n\t'image.remoteUrl' : '',\r\n\t'image.localUrl' : '',\r\n\t'image.size' : '',\r\n\t'image.width' : '',\r\n\t'image.height' : '',\r\n\t'image.resetSize' : '',\r\n\t'image.align' : '',\r\n\t'image.defaultAlign' : '',\r\n\t'image.leftAlign' : '',\r\n\t'image.rightAlign' : '',\r\n\t'image.imgTitle' : '',\r\n\t'image.upload' : '...',\r\n\t'image.viewServer' : '',\r\n\t'multiimage.uploadDesc' : '<%=uploadLimit%><%=sizeLimit%>',\r\n\t'multiimage.startUpload' : '',\r\n\t'multiimage.clearAll' : '',\r\n\t'multiimage.insertAll' : '',\r\n\t'multiimage.queueLimitExceeded' : '',\r\n\t'multiimage.fileExceedsSizeLimit' : '',\r\n\t'multiimage.zeroByteFile' : '',\r\n\t'multiimage.invalidFiletype' : '',\r\n\t'multiimage.unknownError' : '',\r\n\t'multiimage.pending' : '',\r\n\t'multiimage.uploadError' : '',\r\n\t'filemanager.emptyFolder' : '',\r\n\t'filemanager.moveup' : '',\r\n\t'filemanager.viewType' : '',\r\n\t'filemanager.viewImage' : '',\r\n\t'filemanager.listImage' : '',\r\n\t'filemanager.orderType' : '',\r\n\t'filemanager.fileName' : '',\r\n\t'filemanager.fileSize' : '',\r\n\t'filemanager.fileType' : '',\r\n\t'insertfile.url' : 'URL',\r\n\t'insertfile.title' : '',\r\n\t'insertfile.upload' : '',\r\n\t'insertfile.viewServer' : '',\r\n\t'table.cells' : '',\r\n\t'table.rows' : '',\r\n\t'table.cols' : '',\r\n\t'table.size' : '',\r\n\t'table.width' : '',\r\n\t'table.height' : '',\r\n\t'table.percent' : '%',\r\n\t'table.px' : 'px',\r\n\t'table.space' : '',\r\n\t'table.padding' : '',\r\n\t'table.spacing' : '',\r\n\t'table.align' : '',\r\n\t'table.textAlign' : '',\r\n\t'table.verticalAlign' : '',\r\n\t'table.alignDefault' : '',\r\n\t'table.alignLeft' : '',\r\n\t'table.alignCenter' : '',\r\n\t'table.alignRight' : '',\r\n\t'table.alignTop' : '',\r\n\t'table.alignMiddle' : '',\r\n\t'table.alignBottom' : '',\r\n\t'table.alignBaseline' : '',\r\n\t'table.border' : '',\r\n\t'table.borderWidth' : '',\r\n\t'table.borderColor' : '',\r\n\t'table.backgroundColor' : '',\r\n\t'map.address' : ': ',\r\n\t'map.search' : '',\r\n\t'baidumap.address' : ': ',\r\n\t'baidumap.search' : '',\r\n\t'baidumap.insertDynamicMap' : '',\r\n\t'anchor.name' : '',\r\n\t'formatblock.formatBlock' : {\r\n\t\th1 : ' 1',\r\n\t\th2 : ' 2',\r\n\t\th3 : ' 3',\r\n\t\th4 : ' 4',\r\n\t\tp : ' '\r\n\t},\r\n\t'fontname.fontName' : {\r\n\t\t'SimSun' : '',\r\n\t\t'NSimSun' : '',\r\n\t\t'FangSong_GB2312' : '_GB2312',\r\n\t\t'KaiTi_GB2312' : '_GB2312',\r\n\t\t'SimHei' : '',\r\n\t\t'Microsoft YaHei' : '',\r\n\t\t'Arial' : 'Arial',\r\n\t\t'Arial Black' : 'Arial Black',\r\n\t\t'Times New Roman' : 'Times New Roman',\r\n\t\t'Courier New' : 'Courier New',\r\n\t\t'Tahoma' : 'Tahoma',\r\n\t\t'Verdana' : 'Verdana'\r\n\t},\r\n\t'lineheight.lineHeight' : [\r\n\t\t{'1' : ''},\r\n\t\t{'1.5' : '1.5'},\r\n\t\t{'2' : '2'},\r\n\t\t{'2.5' : '2.5'},\r\n\t\t{'3' : '3'}\r\n\t],\r\n\t'template.selectTemplate' : '',\r\n\t'template.replaceContent' : '',\r\n\t'template.fileList' : {\r\n\t\t'1.html' : '',\r\n\t\t'2.html' : '',\r\n\t\t'3.html' : ''\r\n\t}\r\n}, 'zh-CN');\r\nKindEditor.options.langType = 'zh-CN';\n/*******************************************************************************\n* KindEditor - WYSIWYG HTML Editor for Internet\n* Copyright (C) 2006-2011 kindsoft.net\n*\n* @author Roddy <luolonghao@gmail.com>\n* @site http://www.kindsoft.net/\n* @licence http://www.kindsoft.net/license.php\n*******************************************************************************/\nKindEditor.plugin('anchor', function(K) {\n\tvar self = this, name = 'anchor', lang = self.lang(name + '.');\n\tself.plugin.anchor = {\n\t\tedit : function() {\n\t\t\tvar html = ['<div style=\"padding:20px;\">',\n\t\t\t\t\t'<div class=\"ke-dialog-row\">',\n\t\t\t\t\t'<label for=\"keName\">' + lang.name + '</label>',\n\t\t\t\t\t'<input class=\"ke-input-text\" type=\"text\" id=\"keName\" name=\"name\" value=\"\" style=\"width:100px;\" />',\n\t\t\t\t\t'</div>',\n\t\t\t\t\t'</div>'].join('');\n\t\t\tvar dialog = self.createDialog({\n\t\t\t\tname : name,\n\t\t\t\twidth : 300,\n\t\t\t\ttitle : self.lang(name),\n\t\t\t\tbody : html,\n\t\t\t\tyesBtn : {\n\t\t\t\t\tname : self.lang('yes'),\n\t\t\t\t\tclick : function(e) {\n\t\t\t\t\t\tself.insertHtml('<a name=\"' + nameBox.val() + '\">').hideDialog().focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar div = dialog.div,\n\t\t\t\tnameBox = K('input[name=\"name\"]', div);\n\t\t\tvar img = self.plugin.getSelectedAnchor();\n\t\t\tif (img) {\n\t\t\t\tnameBox.val(unescape(img.attr('data-ke-name')));\n\t\t\t}\n\t\t\tnameBox[0].focus();\n\t\t\tnameBox[0].select();\n\t\t},\n\t\t'delete' : function() {\n\t\t\tself.plugin.getSelectedAnchor().remove();\n\t\t}\n\t};\n\tself.clickToolbar(name, self.plugin.anchor.edit);\n});\n\n/*******************************************************************************\n* KindEditor - WYSIWYG HTML Editor for Internet\n* Copyright (C) 2006-2011 kindsoft.net\n*\n* @author Roddy <luolonghao@gmail.com>\n* @site http://www.kindsoft.net/\n* @licence http://www.kindsoft.net/license.php\n*******************************************************************************/\nKindEditor.plugin('autoheight', function(K) {\n\tvar self = this;\n\tif (!self.autoHeightMode) {\n\t\treturn;\n\t}\n\tvar minHeight;\n\tfunction hideScroll() {\n\t\tvar edit = self.edit;\n\t\tvar body = edit.doc.body;\n\t\tedit.iframe[0].scroll = 'no';\n\t\tbody.style.overflowY = 'hidden';\n\t}\n\tfunction resetHeight() {\n\t\tvar edit = self.edit;\n\t\tvar body = edit.doc.body;\n\t\tedit.iframe.height(minHeight);\n\t\tself.resize(null, Math.max((K.IE ? body.scrollHeight : body.offsetHeight) + 76, minHeight));\n\t}\n\tfunction init() {\n\t\tminHeight = K.removeUnit(self.height);\n\t\tself.edit.afterChange(resetHeight);\n\t\thideScroll();\n\t\tresetHeight();\n\t}\n\tif (self.isCreated) {\n\t\tinit();\n\t} else {\n\t\tself.afterCreate(init);\n\t}\n});\n/*\n* \n* bodyiframe\n* bodyiframebody\n* \n* chromefirefoxIE9IE8\n* */\n\n/*******************************************************************************\n* KindEditor - WYSIWYG HTML Editor for Internet\n* Copyright (C) 2006-2011 kindsoft.net\n*\n* @author Roddy <luolonghao@gmail.com>\n* @site http://www.kindsoft.net/\n* @licence http://www.kindsoft.net/license.php\n*******************************************************************************/\nKindEditor.plugin('baidumap', function(K) {\n\tvar self = this, name = 'baidumap', lang = self.lang(name + '.');\n\tvar mapWidth = K.undef(self.mapWidth, 558);\n\tvar mapHeight = K.undef(self.mapHeight, 360);\n\tself.clickToolbar(name, function() {\n\t\tvar html = ['<div style=\"padding:10px 20px;\">',\n\t\t\t'<div class=\"ke-header\">',\n\t\t\t'<div class=\"ke-left\">',\n\t\t\tlang.address + ' <input id=\"kindeditor_plugin_map_address\" name=\"address\" class=\"ke-input-text\" value=\"\" style=\"width:200px;\" /> ',\n\t\t\t'<span class=\"ke-button-common ke-button-outer\">',\n\t\t\t'<input type=\"button\" name=\"searchBtn\" class=\"ke-button-common ke-button\" value=\"' + lang.search + '\" />',\n\t\t\t'</span>',\n\t\t\t'</div>',\n\t\t\t'<div class=\"ke-right\">',\n\t\t\t'<input type=\"checkbox\" id=\"keInsertDynamicMap\" name=\"insertDynamicMap\" value=\"1\" /> <label for=\"keInsertDynamicMap\">' + lang.insertDynamicMap + '</label>',\n\t\t\t'</div>',\n\t\t\t'<div class=\"ke-clearfix\"></div>',\n\t\t\t'</div>',\n\t\t\t'<div class=\"ke-map\" style=\"width:' + mapWidth + 'px;height:' + mapHeight + 'px;\"></div>',\n\t\t\t'</div>'].join('');\n\t\tvar dialog = self.createDialog({\n\t\t\tname : name,\n\t\t\twidth : mapWidth + 42,\n\t\t\ttitle : self.lang(name),\n\t\t\tbody : html,\n\t\t\tyesBtn : {\n\t\t\t\tname : self.lang('yes'),\n\t\t\t\tclick : function(e) {\n\t\t\t\t\tvar map = win.map;\n\t\t\t\t\tvar centerObj = map.getCenter();\n\t\t\t\t\tvar center = centerObj.lng + ',' + centerObj.lat;\n\t\t\t\t\tvar zoom = map.getZoom();\n\t\t\t\t\tvar url = [checkbox[0].checked ? self.pluginsPath + 'baidumap/index.html' : 'http://api.map.baidu.com/staticimage',\n\t\t\t\t\t\t'?center=' + encodeURIComponent(center),\n\t\t\t\t\t\t'&zoom=' + encodeURIComponent(zoom),\n\t\t\t\t\t\t'&width=' + mapWidth,\n\t\t\t\t\t\t'&height=' + mapHeight,\n\t\t\t\t\t\t'&markers=' + encodeURIComponent(center),\n\t\t\t\t\t\t'&markerStyles=' + encodeURIComponent('l,A')].join('');\n\t\t\t\t\tif (checkbox[0].checked) {\n\t\t\t\t\t\tself.insertHtml('<iframe src=\"' + url + '\" frameborder=\"0\" style=\"width:' + (mapWidth + 2) + 'px;height:' + (mapHeight + 2) + 'px;\"></iframe>');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.exec('insertimage', url);\n\t\t\t\t\t}\n\t\t\t\t\tself.hideDialog().focus();\n\t\t\t\t}\n\t\t\t},\n\t\t\tbeforeRemove : function() {\n\t\t\t\tsearchBtn.remove();\n\t\t\t\tif (doc) {\n\t\t\t\t\tdoc.write('');\n\t\t\t\t}\n\t\t\t\tiframe.remove();\n\t\t\t}\n\t\t});\n\t\tvar div = dialog.div,\n\t\t\taddressBox = K('[name=\"address\"]', div),\n\t\t\tsearchBtn = K('[name=\"searchBtn\"]', div),\n\t\t\tcheckbox = K('[name=\"insertDynamicMap\"]', dialog.div),\n\t\t\twin, doc;\n\t\tvar iframe = K('<iframe class=\"ke-textarea\" frameborder=\"0\" src=\"' + self.pluginsPath + 'baidumap/map.html\" style=\"width:' + mapWidth + 'px;height:' + mapHeight + 'px;\"></iframe>');\n\t\tfunction ready() {\n\t\t\twin = iframe[0].contentWindow;\n\t\t\tdoc = K.iframeDoc(iframe);\n\t\t}\n\t\tiframe.bind('load', function() {\n\t\t\tiframe.unbind('load');\n\t\t\tif (K.IE) {\n\t\t\t\tready();\n\t\t\t} else {\n\t\t\t\tsetTimeout(ready, 0);\n\t\t\t}\n\t\t});\n\t\tK('.ke-map', div).replaceWith(iframe);\n\t\tsearchBtn.click(function() {\n\t\t\twin.search(addressBox.val());\n\t\t});\n\t});\n});\n\n/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2011 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @site http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n*******************************************************************************/\r\n\r\r\nKindEditor.plugin('map', function(K) {\r\n\tvar self = this, name = 'map', lang = self.lang(name + '.');\r\n\tself.clickToolbar(name, function() {\r\n\t\tvar html = ['<div style=\"padding:10px 20px;\">',\r\n\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\tlang.address + ' <input id=\"kindeditor_plugin_map_address\" name=\"address\" class=\"ke-input-text\" value=\"\" style=\"width:200px;\" /> ',\r\n\t\t\t'<span class=\"ke-button-common ke-button-outer\">',\r\n\t\t\t'<input type=\"button\" name=\"searchBtn\" class=\"ke-button-common ke-button\" value=\"' + lang.search + '\" />',\r\n\t\t\t'</span>',\r\n\t\t\t'</div>',\r\n\t\t\t'<div class=\"ke-map\" style=\"width:558px;height:360px;\"></div>',\r\n\t\t\t'</div>'].join('');\r\n\t\tvar dialog = self.createDialog({\r\n\t\t\tname : name,\r\n\t\t\twidth : 600,\r\n\t\t\ttitle : self.lang(name),\r\n\t\t\tbody : html,\r\n\t\t\tyesBtn : {\r\n\t\t\t\tname : self.lang('yes'),\r\n\t\t\t\tclick : function(e) {\r\n\t\t\t\t\tvar geocoder = win.geocoder,\r\n\t\t\t\t\t\tmap = win.map,\r\n\t\t\t\t\t\tcenter = map.getCenter().lat() + ',' + map.getCenter().lng(),\r\n\t\t\t\t\t\tzoom = map.getZoom(),\r\n\t\t\t\t\t\tmaptype = map.getMapTypeId(),\r\n\t\t\t\t\t\turl = 'http://maps.googleapis.com/maps/api/staticmap';\r\n\t\t\t\t\t\turl += '?center=' + encodeURIComponent(center);\r\n\t\t\t\t\t\turl += '&zoom=' + encodeURIComponent(zoom);\r\n\t\t\t\t\t\turl += '&size=558x360';\r\n\t\t\t\t\t\turl += '&maptype=' + encodeURIComponent(maptype);\r\n\t\t\t\t\t\turl += '&markers=' + encodeURIComponent(center);\r\n\t\t\t\t\t\turl += '&language=' + self.langType;\r\n\t\t\t\t\t\turl += '&sensor=false';\r\n\t\t\t\t\tself.exec('insertimage', url).hideDialog().focus();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbeforeRemove : function() {\r\n\t\t\t\tsearchBtn.remove();\r\n\t\t\t\tif (doc) {\r\n\t\t\t\t\tdoc.write('');\r\n\t\t\t\t}\r\n\t\t\t\tiframe.remove();\r\n\t\t\t}\r\n\t\t});\r\n\t\tvar div = dialog.div,\r\n\t\t\taddressBox = K('[name=\"address\"]', div),\r\n\t\t\tsearchBtn = K('[name=\"searchBtn\"]', div),\r\n\t\t\twin, doc;\r\n\t\tvar iframeHtml = ['<!doctype html><html><head>',\r\n\t\t\t'<meta name=\"viewport\" content=\"initial-scale=1.0, user-scalable=no\" />',\r\n\t\t\t'<style>',\r\n\t\t\t'\thtml { height: 100% }',\r\n\t\t\t'\tbody { height: 100%; margin: 0; padding: 0; background-color: #FFF }',\r\n\t\t\t'\t#map_canvas { height: 100% }',\r\n\t\t\t'</style>',\r\n\t\t\t'<script src=\"http://maps.googleapis.com/maps/api/js?sensor=false&language=' + self.langType + '\"></script>',\r\n\t\t\t'<script>',\r\n\t\t\t'var map, geocoder;',\r\n\t\t\t'function initialize() {',\r\n\t\t\t'\tvar latlng = new google.maps.LatLng(31.230393, 121.473704);',\r\n\t\t\t'\tvar options = {',\r\n\t\t\t'\t\tzoom: 11,',\r\n\t\t\t'\t\tcenter: latlng,',\r\n\t\t\t'\t\tdisableDefaultUI: true,',\r\n\t\t\t'\t\tpanControl: true,',\r\n\t\t\t'\t\tzoomControl: true,',\r\n\t\t\t'\t\tmapTypeControl: true,',\r\n\t\t\t'\t\tscaleControl: true,',\r\n\t\t\t'\t\tstreetViewControl: false,',\r\n\t\t\t'\t\toverviewMapControl: true,',\r\n\t\t\t'\t\tmapTypeId: google.maps.MapTypeId.ROADMAP',\r\n\t\t\t'\t};',\r\n\t\t\t'\tmap = new google.maps.Map(document.getElementById(\"map_canvas\"), options);',\r\n\t\t\t'\tgeocoder = new google.maps.Geocoder();',\r\n\t\t\t'\tgeocoder.geocode({latLng: latlng}, function(results, status) {',\r\n\t\t\t'\t\tif (status == google.maps.GeocoderStatus.OK) {',\r\n\t\t\t'\t\t\tif (results[3]) {',\r\n\t\t\t'\t\t\t\tparent.document.getElementById(\"kindeditor_plugin_map_address\").value = results[3].formatted_address;',\r\n\t\t\t'\t\t\t}',\r\n\t\t\t'\t\t}',\r\n\t\t\t'\t});',\r\n\t\t\t'}',\r\n\t\t\t'function search(address) {',\r\n\t\t\t'\tif (!map) return;',\r\n\t\t\t'\tgeocoder.geocode({address : address}, function(results, status) {',\r\n\t\t\t'\t\tif (status == google.maps.GeocoderStatus.OK) {',\r\n\t\t\t'\t\t\tmap.setZoom(11);',\r\n\t\t\t'\t\t\tmap.setCenter(results[0].geometry.location);',\r\n\t\t\t'\t\t\tvar marker = new google.maps.Marker({',\r\n\t\t\t'\t\t\t\tmap: map,',\r\n\t\t\t'\t\t\t\tposition: results[0].geometry.location',\r\n\t\t\t'\t\t\t});',\r\n\t\t\t'\t\t} else {',\r\n\t\t\t'\t\t\talert(\"Invalid address: \" + address);',\r\n\t\t\t'\t\t}',\r\n\t\t\t'\t});',\r\n\t\t\t'}',\r\n\t\t\t'</script>',\r\n\t\t\t'</head>',\r\n\t\t\t'<body onload=\"initialize();\">',\r\n\t\t\t'<div id=\"map_canvas\" style=\"width:100%; height:100%\"></div>',\r\n\t\t\t'</body></html>'].join('\\n');\r\n\t\tvar iframe = K('<iframe class=\"ke-textarea\" frameborder=\"0\" src=\"' + self.pluginsPath + 'map/map.html\" style=\"width:558px;height:360px;\"></iframe>');\r\n\t\tfunction ready() {\r\n\t\t\twin = iframe[0].contentWindow;\r\n\t\t\tdoc = K.iframeDoc(iframe);\r\n\t\t}\r\n\t\tiframe.bind('load', function() {\r\n\t\t\tiframe.unbind('load');\r\n\t\t\tif (K.IE) {\r\n\t\t\t\tready();\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(ready, 0);\r\n\t\t\t}\r\n\t\t});\r\n\t\tK('.ke-map', div).replaceWith(iframe);\r\n\t\tsearchBtn.click(function() {\r\n\t\t\twin.search(addressBox.val());\r\n\t\t});\r\n\t});\r\n});\r\n\n/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2011 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @site http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n*******************************************************************************/\r\nKindEditor.plugin('clearhtml', function(K) {\r\n\tvar self = this, name = 'clearhtml';\r\n\tself.clickToolbar(name, function() {\r\n\t\tself.focus();\r\n\t\tvar html = self.html();\r\n\t\thtml = html.replace(/(<script[^>]*>)([\\s\\S]*?)(<\\/script>)/ig, '');\r\n\t\thtml = html.replace(/(<style[^>]*>)([\\s\\S]*?)(<\\/style>)/ig, '');\r\n\t\thtml = K.formatHtml(html, {\r\n\t\t\ta : ['href', 'target'],\r\n\t\t\tembed : ['src', 'width', 'height', 'type', 'loop', 'autostart', 'quality', '.width', '.height', 'align', 'allowscriptaccess'],\r\n\t\t\timg : ['src', 'width', 'height', 'border', 'alt', 'title', '.width', '.height'],\r\n\t\t\ttable : ['border'],\r\n\t\t\t'td,th' : ['rowspan', 'colspan'],\r\n\t\t\t'div,hr,br,tbody,tr,p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6' : []\r\n\t\t});\r\n\t\tself.html(html);\r\n\t\tself.cmd.selection(true);\r\n\t\tself.addBookmark();\r\n\t});\r\n});\r\n\n/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2011 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @site http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n*******************************************************************************/\r\n\r\r\r\nKindEditor.plugin('code', function(K) {\r\n\tvar self = this, name = 'code';\r\n\tself.clickToolbar(name, function() {\r\n\t\tvar lang = self.lang(name + '.'),\r\n\t\t\thtml = ['<div style=\"padding:10px 20px;\">',\r\n\t\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t\t'<select class=\"ke-code-type\">',\r\n\t\t\t\t'<option value=\"js\">JavaScript</option>',\r\n\t\t\t\t'<option value=\"html\">HTML</option>',\r\n\t\t\t\t'<option value=\"css\">CSS</option>',\r\n\t\t\t\t'<option value=\"php\">PHP</option>',\r\n\t\t\t\t'<option value=\"pl\">Perl</option>',\r\n\t\t\t\t'<option value=\"py\">Python</option>',\r\n\t\t\t\t'<option value=\"rb\">Ruby</option>',\r\n\t\t\t\t'<option value=\"java\">Java</option>',\r\n\t\t\t\t'<option value=\"vb\">ASP/VB</option>',\r\n\t\t\t\t'<option value=\"cpp\">C/C++</option>',\r\n\t\t\t\t'<option value=\"cs\">C#</option>',\r\n\t\t\t\t'<option value=\"xml\">XML</option>',\r\n\t\t\t\t'<option value=\"bsh\">Shell</option>',\r\n\t\t\t\t'<option value=\"\">Other</option>',\r\n\t\t\t\t'</select>',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<textarea class=\"ke-textarea\" style=\"width:408px;height:260px;\"></textarea>',\r\n\t\t\t\t'</div>'].join(''),\r\n\t\t\tdialog = self.createDialog({\r\n\t\t\t\tname : name,\r\n\t\t\t\twidth : 450,\r\n\t\t\t\ttitle : self.lang(name),\r\n\t\t\t\tbody : html,\r\n\t\t\t\tyesBtn : {\r\n\t\t\t\t\tname : self.lang('yes'),\r\n\t\t\t\t\tclick : function(e) {\r\n\t\t\t\t\t\tvar type = K('.ke-code-type', dialog.div).val(),\r\n\t\t\t\t\t\t\tcode = textarea.val(),\r\n\t\t\t\t\t\t\tcls = type === '' ? '' :  ' lang-' + type,\r\n\t\t\t\t\t\t\thtml = '<pre class=\"prettyprint' + cls + '\">\\n' + K.escape(code) + '</pre> ';\r\n\t\t\t\t\t\tif (K.trim(code) === '') {\r\n\t\t\t\t\t\t\talert(lang.pleaseInput);\r\n\t\t\t\t\t\t\ttextarea[0].focus();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.insertHtml(html).hideDialog().focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\ttextarea = K('textarea', dialog.div);\r\n\t\ttextarea[0].focus();\r\n\t});\r\n});\r\n\n/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2011 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @site http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n*******************************************************************************/\r\nKindEditor.plugin('emoticons', function(K) {\r\n\tvar self = this, name = 'emoticons',\r\n\t\tpath = (self.emoticonsPath || self.pluginsPath + 'emoticons/images/'),\r\n\t\tallowPreview = self.allowPreviewEmoticons === undefined ? true : self.allowPreviewEmoticons,\r\n\t\tcurrentPageNum = 1;\r\n\tself.clickToolbar(name, function() {\r\n\t\tvar rows = 5, cols = 9, total = 135, startNum = 0,\r\n\t\t\tcells = rows * cols, pages = Math.ceil(total / cells),\r\n\t\t\tcolsHalf = Math.floor(cols / 2),\r\n\t\t\twrapperDiv = K('<div class=\"ke-plugin-emoticons\"></div>'),\r\n\t\t\telements = [],\r\n\t\t\tmenu = self.createMenu({\r\n\t\t\t\tname : name,\r\n\t\t\t\tbeforeRemove : function() {\r\n\t\t\t\t\tremoveEvent();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\tmenu.div.append(wrapperDiv);\r\n\t\tvar previewDiv, previewImg;\r\n\t\tif (allowPreview) {\r\n\t\t\tpreviewDiv = K('<div class=\"ke-preview\"></div>').css('right', 0);\r\n\t\t\tpreviewImg = K('<img class=\"ke-preview-img\" src=\"' + path + startNum + '.gif\" />');\r\n\t\t\twrapperDiv.append(previewDiv);\r\n\t\t\tpreviewDiv.append(previewImg);\r\n\t\t}\r\n\t\tfunction bindCellEvent(cell, j, num) {\r\n\t\t\tif (previewDiv) {\r\n\t\t\t\tcell.mouseover(function() {\r\n\t\t\t\t\tif (j > colsHalf) {\r\n\t\t\t\t\t\tpreviewDiv.css('left', 0);\r\n\t\t\t\t\t\tpreviewDiv.css('right', '');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpreviewDiv.css('left', '');\r\n\t\t\t\t\t\tpreviewDiv.css('right', 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpreviewImg.attr('src', path + num + '.gif');\r\n\t\t\t\t\tK(this).addClass('ke-on');\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tcell.mouseover(function() {\r\n\t\t\t\t\tK(this).addClass('ke-on');\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tcell.mouseout(function() {\r\n\t\t\t\tK(this).removeClass('ke-on');\r\n\t\t\t});\r\n\t\t\tcell.click(function(e) {\r\n\t\t\t\tself.insertHtml('<img src=\"' + path + num + '.gif\" border=\"0\" alt=\"\" />').hideMenu().focus();\r\n\t\t\t\te.stop();\r\n\t\t\t});\r\n\t\t}\r\n\t\tfunction createEmoticonsTable(pageNum, parentDiv) {\r\n\t\t\tvar table = document.createElement('table');\r\n\t\t\tparentDiv.append(table);\r\n\t\t\tif (previewDiv) {\r\n\t\t\t\tK(table).mouseover(function() {\r\n\t\t\t\t\tpreviewDiv.show('block');\r\n\t\t\t\t});\r\n\t\t\t\tK(table).mouseout(function() {\r\n\t\t\t\t\tpreviewDiv.hide();\r\n\t\t\t\t});\r\n\t\t\t\telements.push(K(table));\r\n\t\t\t}\r\n\t\t\ttable.className = 'ke-table';\r\n\t\t\ttable.cellPadding = 0;\r\n\t\t\ttable.cellSpacing = 0;\r\n\t\t\ttable.border = 0;\r\n\t\t\tvar num = (pageNum - 1) * cells + startNum;\r\n\t\t\tfor (var i = 0; i < rows; i++) {\r\n\t\t\t\tvar row = table.insertRow(i);\r\n\t\t\t\tfor (var j = 0; j < cols; j++) {\r\n\t\t\t\t\tvar cell = K(row.insertCell(j));\r\n\t\t\t\t\tcell.addClass('ke-cell');\r\n\t\t\t\t\tbindCellEvent(cell, j, num);\r\n\t\t\t\t\tvar span = K('<span class=\"ke-img\"></span>')\r\n\t\t\t\t\t\t.css('background-position', '-' + (24 * num) + 'px 0px')\r\n\t\t\t\t\t\t.css('background-image', 'url(' + path + 'static.gif)');\r\n\t\t\t\t\tcell.append(span);\r\n\t\t\t\t\telements.push(cell);\r\n\t\t\t\t\tnum++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn table;\r\n\t\t}\r\n\t\tvar table = createEmoticonsTable(currentPageNum, wrapperDiv);\r\n\t\tfunction removeEvent() {\r\n\t\t\tK.each(elements, function() {\r\n\t\t\t\tthis.unbind();\r\n\t\t\t});\r\n\t\t}\r\n\t\tvar pageDiv;\r\n\t\tfunction bindPageEvent(el, pageNum) {\r\n\t\t\tel.click(function(e) {\r\n\t\t\t\tremoveEvent();\r\n\t\t\t\ttable.parentNode.removeChild(table);\r\n\t\t\t\tpageDiv.remove();\r\n\t\t\t\ttable = createEmoticonsTable(pageNum, wrapperDiv);\r\n\t\t\t\tcreatePageTable(pageNum);\r\n\t\t\t\tcurrentPageNum = pageNum;\r\n\t\t\t\te.stop();\r\n\t\t\t});\r\n\t\t}\r\n\t\tfunction createPageTable(currentPageNum) {\r\n\t\t\tpageDiv = K('<div class=\"ke-page\"></div>');\r\n\t\t\twrapperDiv.append(pageDiv);\r\n\t\t\tfor (var pageNum = 1; pageNum <= pages; pageNum++) {\r\n\t\t\t\tif (currentPageNum !== pageNum) {\r\n\t\t\t\t\tvar a = K('<a href=\"javascript:;\">[' + pageNum + ']</a>');\r\n\t\t\t\t\tbindPageEvent(a, pageNum);\r\n\t\t\t\t\tpageDiv.append(a);\r\n\t\t\t\t\telements.push(a);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpageDiv.append(K('@[' + pageNum + ']'));\r\n\t\t\t\t}\r\n\t\t\t\tpageDiv.append(K('@&nbsp;'));\r\n\t\t\t}\r\n\t\t}\r\n\t\tcreatePageTable(currentPageNum);\r\n\t});\r\n});\r\n\n/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2011 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @site http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n*******************************************************************************/\r\nKindEditor.plugin('filemanager', function(K) {\r\n\tvar self = this, name = 'filemanager',\r\n\t\tfileManagerJson = K.undef(self.fileManagerJson, self.basePath + 'php/file_manager_json.php'),\r\n\t\timgPath = self.pluginsPath + name + '/images/',\r\n\t\tlang = self.lang(name + '.');\r\n\tfunction makeFileTitle(filename, filesize, datetime) {\r\n\t\treturn filename + ' (' + Math.ceil(filesize / 1024) + 'KB, ' + datetime + ')';\r\n\t}\r\n\tfunction bindTitle(el, data) {\r\n\t\tif (data.is_dir) {\r\n\t\t\tel.attr('title', data.filename);\r\n\t\t} else {\r\n\t\t\tel.attr('title', makeFileTitle(data.filename, data.filesize, data.datetime));\r\n\t\t}\r\n\t}\r\n\tself.plugin.filemanagerDialog = function(options) {\r\n\t\tvar width = K.undef(options.width, 650),\r\n\t\t\theight = K.undef(options.height, 510),\r\n\t\t\tdirName = K.undef(options.dirName, ''),\r\n\t\t\tviewType = K.undef(options.viewType, 'VIEW').toUpperCase(),\r\n\t\t\tclickFn = options.clickFn;\r\n\t\tvar html = [\r\n\t\t\t'<div style=\"padding:10px 20px;\">',\r\n\t\t\t'<div class=\"ke-plugin-filemanager-header\">',\r\n\t\t\t'<div class=\"ke-left\">',\r\n\t\t\t'<img class=\"ke-inline-block\" name=\"moveupImg\" src=\"' + imgPath + 'go-up.gif\" width=\"16\" height=\"16\" border=\"0\" alt=\"\" /> ',\r\n\t\t\t'<a class=\"ke-inline-block\" name=\"moveupLink\" href=\"javascript:;\">' + lang.moveup + '</a>',\r\n\t\t\t'</div>',\r\n\t\t\t'<div class=\"ke-right\">',\r\n\t\t\tlang.viewType + ' <select class=\"ke-inline-block\" name=\"viewType\">',\r\n\t\t\t'<option value=\"VIEW\">' + lang.viewImage + '</option>',\r\n\t\t\t'<option value=\"LIST\">' + lang.listImage + '</option>',\r\n\t\t\t'</select> ',\r\n\t\t\tlang.orderType + ' <select class=\"ke-inline-block\" name=\"orderType\">',\r\n\t\t\t'<option value=\"NAME\">' + lang.fileName + '</option>',\r\n\t\t\t'<option value=\"SIZE\">' + lang.fileSize + '</option>',\r\n\t\t\t'<option value=\"TYPE\">' + lang.fileType + '</option>',\r\n\t\t\t'</select>',\r\n\t\t\t'</div>',\r\n\t\t\t'<div class=\"ke-clearfix\"></div>',\r\n\t\t\t'</div>',\r\n\t\t\t'<div class=\"ke-plugin-filemanager-body\"></div>',\r\n\t\t\t'</div>'\r\n\t\t].join('');\r\n\t\tvar dialog = self.createDialog({\r\n\t\t\tname : name,\r\n\t\t\twidth : width,\r\n\t\t\theight : height,\r\n\t\t\ttitle : self.lang(name),\r\n\t\t\tbody : html\r\n\t\t}),\r\n\t\tdiv = dialog.div,\r\n\t\tbodyDiv = K('.ke-plugin-filemanager-body', div),\r\n\t\tmoveupImg = K('[name=\"moveupImg\"]', div),\r\n\t\tmoveupLink = K('[name=\"moveupLink\"]', div),\r\n\t\tviewServerBtn = K('[name=\"viewServer\"]', div),\r\n\t\tviewTypeBox = K('[name=\"viewType\"]', div),\r\n\t\torderTypeBox = K('[name=\"orderType\"]', div);\r\n\t\tfunction reloadPage(path, order, func) {\r\n\t\t\tvar param = 'path=' + path + '&order=' + order + '&dir=' + dirName;\r\n\t\t\tdialog.showLoading(self.lang('ajaxLoading'));\r\n\t\t\tK.ajax(K.addParam(fileManagerJson, param + '&' + new Date().getTime()), function(data) {\r\n\t\t\t\tdialog.hideLoading();\r\n\t\t\t\tfunc(data);\r\n\t\t\t});\r\n\t\t}\r\n\t\tvar elList = [];\r\n\t\tfunction bindEvent(el, result, data, createFunc) {\r\n\t\t\tvar fileUrl = K.formatUrl(result.current_url + data.filename, 'absolute'),\r\n\t\t\t\tdirPath = encodeURIComponent(result.current_dir_path + data.filename + '/');\r\n\t\t\tif (data.is_dir) {\r\n\t\t\t\tel.click(function(e) {\r\n\t\t\t\t\treloadPage(dirPath, orderTypeBox.val(), createFunc);\r\n\t\t\t\t});\r\n\t\t\t} else if (data.is_photo) {\r\n\t\t\t\tel.click(function(e) {\r\n\t\t\t\t\tclickFn.call(this, fileUrl, data.filename);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tel.click(function(e) {\r\n\t\t\t\t\tclickFn.call(this, fileUrl, data.filename);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telList.push(el);\r\n\t\t}\r\n\t\tfunction createCommon(result, createFunc) {\r\n\t\t\tK.each(elList, function() {\r\n\t\t\t\tthis.unbind();\r\n\t\t\t});\r\n\t\t\tmoveupLink.unbind();\r\n\t\t\tviewTypeBox.unbind();\r\n\t\t\torderTypeBox.unbind();\r\n\t\t\tif (result.current_dir_path) {\r\n\t\t\t\tmoveupLink.click(function(e) {\r\n\t\t\t\t\treloadPage(result.moveup_dir_path, orderTypeBox.val(), createFunc);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tfunction changeFunc() {\r\n\t\t\t\tif (viewTypeBox.val() == 'VIEW') {\r\n\t\t\t\t\treloadPage(result.current_dir_path, orderTypeBox.val(), createView);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treloadPage(result.current_dir_path, orderTypeBox.val(), createList);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tviewTypeBox.change(changeFunc);\r\n\t\t\torderTypeBox.change(changeFunc);\r\n\t\t\tbodyDiv.html('');\r\n\t\t}\r\n\t\tfunction createList(result) {\r\n\t\t\tcreateCommon(result, createList);\r\n\t\t\tvar table = document.createElement('table');\r\n\t\t\ttable.className = 'ke-table';\r\n\t\t\ttable.cellPadding = 0;\r\n\t\t\ttable.cellSpacing = 0;\r\n\t\t\ttable.border = 0;\r\n\t\t\tbodyDiv.append(table);\r\n\t\t\tvar fileList = result.file_list;\r\n\t\t\tfor (var i = 0, len = fileList.length; i < len; i++) {\r\n\t\t\t\tvar data = fileList[i], row = K(table.insertRow(i));\r\n\t\t\t\trow.mouseover(function(e) {\r\n\t\t\t\t\tK(this).addClass('ke-on');\r\n\t\t\t\t})\r\n\t\t\t\t.mouseout(function(e) {\r\n\t\t\t\t\tK(this).removeClass('ke-on');\r\n\t\t\t\t});\r\n\t\t\t\tvar iconUrl = imgPath + (data.is_dir ? 'folder-16.gif' : 'file-16.gif'),\r\n\t\t\t\t\timg = K('<img src=\"' + iconUrl + '\" width=\"16\" height=\"16\" alt=\"' + data.filename + '\" align=\"absmiddle\" />'),\r\n\t\t\t\t\tcell0 = K(row[0].insertCell(0)).addClass('ke-cell ke-name').append(img).append(document.createTextNode(' ' + data.filename));\r\n\t\t\t\tif (!data.is_dir || data.has_file) {\r\n\t\t\t\t\trow.css('cursor', 'pointer');\r\n\t\t\t\t\tcell0.attr('title', data.filename);\r\n\t\t\t\t\tbindEvent(cell0, result, data, createList);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcell0.attr('title', lang.emptyFolder);\r\n\t\t\t\t}\r\n\t\t\t\tK(row[0].insertCell(1)).addClass('ke-cell ke-size').html(data.is_dir ? '-' : Math.ceil(data.filesize / 1024) + 'KB');\r\n\t\t\t\tK(row[0].insertCell(2)).addClass('ke-cell ke-datetime').html(data.datetime);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction createView(result) {\r\n\t\t\tcreateCommon(result, createView);\r\n\t\t\tvar fileList = result.file_list;\r\n\t\t\tfor (var i = 0, len = fileList.length; i < len; i++) {\r\n\t\t\t\tvar data = fileList[i],\r\n\t\t\t\t\tdiv = K('<div class=\"ke-inline-block ke-item\"></div>');\r\n\t\t\t\tbodyDiv.append(div);\r\n\t\t\t\tvar photoDiv = K('<div class=\"ke-inline-block ke-photo\"></div>')\r\n\t\t\t\t\t.mouseover(function(e) {\r\n\t\t\t\t\t\tK(this).addClass('ke-on');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.mouseout(function(e) {\r\n\t\t\t\t\t\tK(this).removeClass('ke-on');\r\n\t\t\t\t\t});\r\n\t\t\t\tdiv.append(photoDiv);\r\n\t\t\t\tvar fileUrl = result.current_url + data.filename,\r\n\t\t\t\t\ticonUrl = data.is_dir ? imgPath + 'folder-64.gif' : (data.is_photo ? fileUrl : imgPath + 'file-64.gif');\r\n\t\t\t\tvar img = K('<img src=\"' + iconUrl + '\" width=\"80\" height=\"80\" alt=\"' + data.filename + '\" />');\r\n\t\t\t\tif (!data.is_dir || data.has_file) {\r\n\t\t\t\t\tphotoDiv.css('cursor', 'pointer');\r\n\t\t\t\t\tbindTitle(photoDiv, data);\r\n\t\t\t\t\tbindEvent(photoDiv, result, data, createView);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tphotoDiv.attr('title', lang.emptyFolder);\r\n\t\t\t\t}\r\n\t\t\t\tphotoDiv.append(img);\r\n\t\t\t\tdiv.append('<div class=\"ke-name\" title=\"' + data.filename + '\">' + data.filename + '</div>');\r\n\t\t\t}\r\n\t\t}\r\n\t\tviewTypeBox.val(viewType);\r\n\t\treloadPage('', orderTypeBox.val(), viewType == 'VIEW' ? createView : createList);\r\n\t\treturn dialog;\r\n\t}\r\n});\r\n\n/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2011 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @site http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n*******************************************************************************/\r\nKindEditor.plugin('flash', function(K) {\r\n\tvar self = this, name = 'flash', lang = self.lang(name + '.'),\r\n\t\tallowFlashUpload = K.undef(self.allowFlashUpload, true),\r\n\t\tallowFileManager = K.undef(self.allowFileManager, false),\r\n\t\tformatUploadUrl = K.undef(self.formatUploadUrl, true),\r\n\t\textraParams = K.undef(self.extraFileUploadParams, {}),\r\n\t\tfilePostName = K.undef(self.filePostName, 'imgFile'),\r\n\t\tuploadJson = K.undef(self.uploadJson, self.basePath + 'php/upload_json.php');\r\n\tself.plugin.flash = {\r\n\t\tedit : function() {\r\n\t\t\tvar html = [\r\n\t\t\t\t'<div style=\"padding:20px;\">',\r\n\t\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t\t'<label for=\"keUrl\" style=\"width:60px;\">' + lang.url + '</label>',\r\n\t\t\t\t'<input class=\"ke-input-text\" type=\"text\" id=\"keUrl\" name=\"url\" value=\"\" style=\"width:160px;\" /> &nbsp;',\r\n\t\t\t\t'<input type=\"button\" class=\"ke-upload-button\" value=\"' + lang.upload + '\" /> &nbsp;',\r\n\t\t\t\t'<span class=\"ke-button-common ke-button-outer\">',\r\n\t\t\t\t'<input type=\"button\" class=\"ke-button-common ke-button\" name=\"viewServer\" value=\"' + lang.viewServer + '\" />',\r\n\t\t\t\t'</span>',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t\t'<label for=\"keWidth\" style=\"width:60px;\">' + lang.width + '</label>',\r\n\t\t\t\t'<input type=\"text\" id=\"keWidth\" class=\"ke-input-text ke-input-number\" name=\"width\" value=\"550\" maxlength=\"4\" /> ',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t\t'<label for=\"keHeight\" style=\"width:60px;\">' + lang.height + '</label>',\r\n\t\t\t\t'<input type=\"text\" id=\"keHeight\" class=\"ke-input-text ke-input-number\" name=\"height\" value=\"400\" maxlength=\"4\" /> ',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'</div>'\r\n\t\t\t].join('');\r\n\t\t\tvar dialog = self.createDialog({\r\n\t\t\t\tname : name,\r\n\t\t\t\twidth : 450,\r\n\t\t\t\ttitle : self.lang(name),\r\n\t\t\t\tbody : html,\r\n\t\t\t\tyesBtn : {\r\n\t\t\t\t\tname : self.lang('yes'),\r\n\t\t\t\t\tclick : function(e) {\r\n\t\t\t\t\t\tvar url = K.trim(urlBox.val()),\r\n\t\t\t\t\t\t\twidth = widthBox.val(),\r\n\t\t\t\t\t\t\theight = heightBox.val();\r\n\t\t\t\t\t\tif (url == 'http://' || K.invalidUrl(url)) {\r\n\t\t\t\t\t\t\talert(self.lang('invalidUrl'));\r\n\t\t\t\t\t\t\turlBox[0].focus();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!/^\\d*$/.test(width)) {\r\n\t\t\t\t\t\t\talert(self.lang('invalidWidth'));\r\n\t\t\t\t\t\t\twidthBox[0].focus();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!/^\\d*$/.test(height)) {\r\n\t\t\t\t\t\t\talert(self.lang('invalidHeight'));\r\n\t\t\t\t\t\t\theightBox[0].focus();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar html = K.mediaImg(self.themesPath + 'common/blank.gif', {\r\n\t\t\t\t\t\t\t\tsrc : url,\r\n\t\t\t\t\t\t\t\ttype : K.mediaType('.swf'),\r\n\t\t\t\t\t\t\t\twidth : width,\r\n\t\t\t\t\t\t\t\theight : height,\r\n\t\t\t\t\t\t\t\tquality : 'high'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tself.insertHtml(html).hideDialog().focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tdiv = dialog.div,\r\n\t\t\turlBox = K('[name=\"url\"]', div),\r\n\t\t\tviewServerBtn = K('[name=\"viewServer\"]', div),\r\n\t\t\twidthBox = K('[name=\"width\"]', div),\r\n\t\t\theightBox = K('[name=\"height\"]', div);\r\n\t\t\turlBox.val('http://');\r\n\t\t\tif (allowFlashUpload) {\r\n\t\t\t\tvar uploadbutton = K.uploadbutton({\r\n\t\t\t\t\tbutton : K('.ke-upload-button', div)[0],\r\n\t\t\t\t\tfieldName : filePostName,\r\n\t\t\t\t\textraParams : extraParams,\r\n\t\t\t\t\turl : K.addParam(uploadJson, 'dir=flash'),\r\n\t\t\t\t\tafterUpload : function(data) {\r\n\t\t\t\t\t\tdialog.hideLoading();\r\n\t\t\t\t\t\tif (data.error === 0) {\r\n\t\t\t\t\t\t\tvar url = data.url;\r\n\t\t\t\t\t\t\tif (formatUploadUrl) {\r\n\t\t\t\t\t\t\t\turl = K.formatUrl(url, 'absolute');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\turlBox.val(url);\r\n\t\t\t\t\t\t\tif (self.afterUpload) {\r\n\t\t\t\t\t\t\t\tself.afterUpload.call(self, url, data, name);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\talert(self.lang('uploadSuccess'));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\talert(data.message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tafterError : function(html) {\r\n\t\t\t\t\t\tdialog.hideLoading();\r\n\t\t\t\t\t\tself.errorDialog(html);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tuploadbutton.fileBox.change(function(e) {\r\n\t\t\t\t\tdialog.showLoading(self.lang('uploadLoading'));\r\n\t\t\t\t\tuploadbutton.submit();\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tK('.ke-upload-button', div).hide();\r\n\t\t\t}\r\n\t\t\tif (allowFileManager) {\r\n\t\t\t\tviewServerBtn.click(function(e) {\r\n\t\t\t\t\tself.loadPlugin('filemanager', function() {\r\n\t\t\t\t\t\tself.plugin.filemanagerDialog({\r\n\t\t\t\t\t\t\tviewType : 'LIST',\r\n\t\t\t\t\t\t\tdirName : 'flash',\r\n\t\t\t\t\t\t\tclickFn : function(url, title) {\r\n\t\t\t\t\t\t\t\tif (self.dialogs.length > 1) {\r\n\t\t\t\t\t\t\t\t\tK('[name=\"url\"]', div).val(url);\r\n\t\t\t\t\t\t\t\t\tif (self.afterSelectFile) {\r\n\t\t\t\t\t\t\t\t\t\tself.afterSelectFile.call(self, url);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tself.hideDialog();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tviewServerBtn.hide();\r\n\t\t\t}\r\n\t\t\tvar img = self.plugin.getSelectedFlash();\r\n\t\t\tif (img) {\r\n\t\t\t\tvar attrs = K.mediaAttrs(img.attr('data-ke-tag'));\r\n\t\t\t\turlBox.val(attrs.src);\r\n\t\t\t\twidthBox.val(K.removeUnit(img.css('width')) || attrs.width || 0);\r\n\t\t\t\theightBox.val(K.removeUnit(img.css('height')) || attrs.height || 0);\r\n\t\t\t}\r\n\t\t\turlBox[0].focus();\r\n\t\t\turlBox[0].select();\r\n\t\t},\r\n\t\t'delete' : function() {\r\n\t\t\tself.plugin.getSelectedFlash().remove();\r\n\t\t\tself.addBookmark();\r\n\t\t}\r\n\t};\r\n\tself.clickToolbar(name, self.plugin.flash.edit);\r\n});\r\n\n/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2011 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @site http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n*******************************************************************************/\r\nKindEditor.plugin('image', function(K) {\r\n\tvar self = this, name = 'image',\r\n\t\tallowImageUpload = K.undef(self.allowImageUpload, true),\r\n\t\tallowImageRemote = K.undef(self.allowImageRemote, true),\r\n\t\tformatUploadUrl = K.undef(self.formatUploadUrl, true),\r\n\t\tallowFileManager = K.undef(self.allowFileManager, false),\r\n\t\tuploadJson = K.undef(self.uploadJson, self.basePath + 'php/upload_json.php'),\r\n\t\timageTabIndex = K.undef(self.imageTabIndex, 0),\r\n\t\timgPath = self.pluginsPath + 'image/images/',\r\n\t\textraParams = K.undef(self.extraFileUploadParams, {}),\r\n\t\tfilePostName = K.undef(self.filePostName, 'imgFile'),\r\n\t\tfillDescAfterUploadImage = K.undef(self.fillDescAfterUploadImage, false),\r\n\t\tlang = self.lang(name + '.');\r\n\tself.plugin.imageDialog = function(options) {\r\n\t\tvar imageUrl = options.imageUrl,\r\n\t\t\timageWidth = K.undef(options.imageWidth, ''),\r\n\t\t\timageHeight = K.undef(options.imageHeight, ''),\r\n\t\t\timageTitle = K.undef(options.imageTitle, ''),\r\n\t\t\timageAlign = K.undef(options.imageAlign, ''),\r\n\t\t\tshowRemote = K.undef(options.showRemote, true),\r\n\t\t\tshowLocal = K.undef(options.showLocal, true),\r\n\t\t\ttabIndex = K.undef(options.tabIndex, 0),\r\n\t\t\tclickFn = options.clickFn;\r\n\t\tvar target = 'kindeditor_upload_iframe_' + new Date().getTime();\r\n\t\tvar hiddenElements = [];\r\n\t\tfor(var k in extraParams){\r\n\t\t\thiddenElements.push('<input type=\"hidden\" name=\"' + k + '\" value=\"' + extraParams[k] + '\" />');\r\n\t\t}\r\n\t\tvar html = [\r\n\t\t\t'<div style=\"padding:20px;\">',\r\n\t\t\t'<div class=\"tabs\"></div>',\r\n\t\t\t'<div class=\"tab1\" style=\"display:none;\">',\r\n\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t'<label for=\"remoteUrl\" style=\"width:60px;\">' + lang.remoteUrl + '</label>',\r\n\t\t\t'<input type=\"text\" id=\"remoteUrl\" class=\"ke-input-text\" name=\"url\" value=\"\" style=\"width:200px;\" /> &nbsp;',\r\n\t\t\t'<span class=\"ke-button-common ke-button-outer\">',\r\n\t\t\t'<input type=\"button\" class=\"ke-button-common ke-button\" name=\"viewServer\" value=\"' + lang.viewServer + '\" />',\r\n\t\t\t'</span>',\r\n\t\t\t'</div>',\r\n\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t'<label for=\"remoteWidth\" style=\"width:60px;\">' + lang.size + '</label>',\r\n\t\t\tlang.width + ' <input type=\"text\" id=\"remoteWidth\" class=\"ke-input-text ke-input-number\" name=\"width\" value=\"\" maxlength=\"4\" /> ',\r\n\t\t\tlang.height + ' <input type=\"text\" class=\"ke-input-text ke-input-number\" name=\"height\" value=\"\" maxlength=\"4\" /> ',\r\n\t\t\t'<img class=\"ke-refresh-btn\" src=\"' + imgPath + 'refresh.png\" width=\"16\" height=\"16\" alt=\"\" style=\"cursor:pointer;\" title=\"' + lang.resetSize + '\" />',\r\n\t\t\t'</div>',\r\n\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t'<label style=\"width:60px;\">' + lang.align + '</label>',\r\n\t\t\t'<input type=\"radio\" name=\"align\" class=\"ke-inline-block\" value=\"\" checked=\"checked\" /> <img name=\"defaultImg\" src=\"' + imgPath + 'align_top.gif\" width=\"23\" height=\"25\" alt=\"\" />',\r\n\t\t\t' <input type=\"radio\" name=\"align\" class=\"ke-inline-block\" value=\"left\" /> <img name=\"leftImg\" src=\"' + imgPath + 'align_left.gif\" width=\"23\" height=\"25\" alt=\"\" />',\r\n\t\t\t' <input type=\"radio\" name=\"align\" class=\"ke-inline-block\" value=\"right\" /> <img name=\"rightImg\" src=\"' + imgPath + 'align_right.gif\" width=\"23\" height=\"25\" alt=\"\" />',\r\n\t\t\t'</div>',\r\n\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t'<label for=\"remoteTitle\" style=\"width:60px;\">' + lang.imgTitle + '</label>',\r\n\t\t\t'<input type=\"text\" id=\"remoteTitle\" class=\"ke-input-text\" name=\"title\" value=\"\" style=\"width:200px;\" />',\r\n\t\t\t'</div>',\r\n\t\t\t'</div>',\r\n\t\t\t'<div class=\"tab2\" style=\"display:none;\">',\r\n\t\t\t'<iframe name=\"' + target + '\" style=\"display:none;\"></iframe>',\r\n\t\t\t'<form class=\"ke-upload-area ke-form\" method=\"post\" enctype=\"multipart/form-data\" target=\"' + target + '\" action=\"' + K.addParam(uploadJson, 'dir=image') + '\">',\r\n\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\thiddenElements.join(''),\r\n\t\t\t'<label style=\"width:60px;\">' + lang.localUrl + '</label>',\r\n\t\t\t'<input type=\"text\" name=\"localUrl\" class=\"ke-input-text\" tabindex=\"-1\" style=\"width:200px;\" readonly=\"true\" /> &nbsp;',\r\n\t\t\t'<input type=\"button\" class=\"ke-upload-button\" value=\"' + lang.upload + '\" />',\r\n\t\t\t'</div>',\r\n\t\t\t'</form>',\r\n\t\t\t'</div>',\r\n\t\t\t'</div>'\r\n\t\t].join('');\r\n\t\tvar dialogWidth = showLocal || allowFileManager ? 450 : 400,\r\n\t\t\tdialogHeight = showLocal && showRemote ? 300 : 250;\r\n\t\tvar dialog = self.createDialog({\r\n\t\t\tname : name,\r\n\t\t\twidth : dialogWidth,\r\n\t\t\theight : dialogHeight,\r\n\t\t\ttitle : self.lang(name),\r\n\t\t\tbody : html,\r\n\t\t\tyesBtn : {\r\n\t\t\t\tname : self.lang('yes'),\r\n\t\t\t\tclick : function(e) {\r\n\t\t\t\t\tif (dialog.isLoading) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (showLocal && showRemote && tabs && tabs.selectedIndex === 1 || !showRemote) {\r\n\t\t\t\t\t\tif (uploadbutton.fileBox.val() == '') {\r\n\t\t\t\t\t\t\talert(self.lang('pleaseSelectFile'));\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdialog.showLoading(self.lang('uploadLoading'));\r\n\t\t\t\t\t\tuploadbutton.submit();\r\n\t\t\t\t\t\tlocalUrlBox.val('');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar url = K.trim(urlBox.val()),\r\n\t\t\t\t\t\twidth = widthBox.val(),\r\n\t\t\t\t\t\theight = heightBox.val(),\r\n\t\t\t\t\t\ttitle = titleBox.val(),\r\n\t\t\t\t\t\talign = '';\r\n\t\t\t\t\talignBox.each(function() {\r\n\t\t\t\t\t\tif (this.checked) {\r\n\t\t\t\t\t\t\talign = this.value;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (url == 'http://' || K.invalidUrl(url)) {\r\n\t\t\t\t\t\talert(self.lang('invalidUrl'));\r\n\t\t\t\t\t\turlBox[0].focus();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!/^\\d*$/.test(width)) {\r\n\t\t\t\t\t\talert(self.lang('invalidWidth'));\r\n\t\t\t\t\t\twidthBox[0].focus();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!/^\\d*$/.test(height)) {\r\n\t\t\t\t\t\talert(self.lang('invalidHeight'));\r\n\t\t\t\t\t\theightBox[0].focus();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclickFn.call(self, url, title, width, height, 0, align);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbeforeRemove : function() {\r\n\t\t\t\tviewServerBtn.unbind();\r\n\t\t\t\twidthBox.unbind();\r\n\t\t\t\theightBox.unbind();\r\n\t\t\t\trefreshBtn.unbind();\r\n\t\t\t}\r\n\t\t}),\r\n\t\tdiv = dialog.div;\r\n\t\tvar urlBox = K('[name=\"url\"]', div),\r\n\t\t\tlocalUrlBox = K('[name=\"localUrl\"]', div),\r\n\t\t\tviewServerBtn = K('[name=\"viewServer\"]', div),\r\n\t\t\twidthBox = K('.tab1 [name=\"width\"]', div),\r\n\t\t\theightBox = K('.tab1 [name=\"height\"]', div),\r\n\t\t\trefreshBtn = K('.ke-refresh-btn', div),\r\n\t\t\ttitleBox = K('.tab1 [name=\"title\"]', div),\r\n\t\t\talignBox = K('.tab1 [name=\"align\"]', div);\r\n\t\tvar tabs;\r\n\t\tif (showRemote && showLocal) {\r\n\t\t\ttabs = K.tabs({\r\n\t\t\t\tsrc : K('.tabs', div),\r\n\t\t\t\tafterSelect : function(i) {}\r\n\t\t\t});\r\n\t\t\ttabs.add({\r\n\t\t\t\ttitle : lang.remoteImage,\r\n\t\t\t\tpanel : K('.tab1', div)\r\n\t\t\t});\r\n\t\t\ttabs.add({\r\n\t\t\t\ttitle : lang.localImage,\r\n\t\t\t\tpanel : K('.tab2', div)\r\n\t\t\t});\r\n\t\t\ttabs.select(tabIndex);\r\n\t\t} else if (showRemote) {\r\n\t\t\tK('.tab1', div).show();\r\n\t\t} else if (showLocal) {\r\n\t\t\tK('.tab2', div).show();\r\n\t\t}\r\n\t\tvar uploadbutton = K.uploadbutton({\r\n\t\t\tbutton : K('.ke-upload-button', div)[0],\r\n\t\t\tfieldName : filePostName,\r\n\t\t\tform : K('.ke-form', div),\r\n\t\t\ttarget : target,\r\n\t\t\twidth: 60,\r\n\t\t\tafterUpload : function(data) {\r\n\t\t\t\tdialog.hideLoading();\r\n\t\t\t\tif (data.error === 0) {\r\n\t\t\t\t\tvar url = data.url;\r\n\t\t\t\t\tif (formatUploadUrl) {\r\n\t\t\t\t\t\turl = K.formatUrl(url, 'absolute');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.afterUpload) {\r\n\t\t\t\t\t\tself.afterUpload.call(self, url, data, name);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!fillDescAfterUploadImage) {\r\n\t\t\t\t\t\tclickFn.call(self, url, data.title, data.width, data.height, data.border, data.align);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tK(\".ke-dialog-row #remoteUrl\", div).val(url);\r\n\t\t\t\t\t\tK(\".ke-tabs-li\", div)[0].click();\r\n\t\t\t\t\t\tK(\".ke-refresh-btn\", div).click();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\talert(data.message);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tafterError : function(html) {\r\n\t\t\t\tdialog.hideLoading();\r\n\t\t\t\tself.errorDialog(html);\r\n\t\t\t}\r\n\t\t});\r\n\t\tuploadbutton.fileBox.change(function(e) {\r\n\t\t\tlocalUrlBox.val(uploadbutton.fileBox.val());\r\n\t\t});\r\n\t\tif (allowFileManager) {\r\n\t\t\tviewServerBtn.click(function(e) {\r\n\t\t\t\tself.loadPlugin('filemanager', function() {\r\n\t\t\t\t\tself.plugin.filemanagerDialog({\r\n\t\t\t\t\t\tviewType : 'VIEW',\r\n\t\t\t\t\t\tdirName : 'image',\r\n\t\t\t\t\t\tclickFn : function(url, title) {\r\n\t\t\t\t\t\t\tif (self.dialogs.length > 1) {\r\n\t\t\t\t\t\t\t\tK('[name=\"url\"]', div).val(url);\r\n\t\t\t\t\t\t\t\tif (self.afterSelectFile) {\r\n\t\t\t\t\t\t\t\t\tself.afterSelectFile.call(self, url);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tself.hideDialog();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tviewServerBtn.hide();\r\n\t\t}\r\n\t\tvar originalWidth = 0, originalHeight = 0;\r\n\t\tfunction setSize(width, height) {\r\n\t\t\twidthBox.val(width);\r\n\t\t\theightBox.val(height);\r\n\t\t\toriginalWidth = width;\r\n\t\t\toriginalHeight = height;\r\n\t\t}\r\n\t\trefreshBtn.click(function(e) {\r\n\t\t\tvar tempImg = K('<img src=\"' + urlBox.val() + '\" />', document).css({\r\n\t\t\t\tposition : 'absolute',\r\n\t\t\t\tvisibility : 'hidden',\r\n\t\t\t\ttop : 0,\r\n\t\t\t\tleft : '-1000px'\r\n\t\t\t});\r\n\t\t\ttempImg.bind('load', function() {\r\n\t\t\t\tsetSize(tempImg.width(), tempImg.height());\r\n\t\t\t\ttempImg.remove();\r\n\t\t\t});\r\n\t\t\tK(document.body).append(tempImg);\r\n\t\t});\r\n\t\twidthBox.change(function(e) {\r\n\t\t\tif (originalWidth > 0) {\r\n\t\t\t\theightBox.val(Math.round(originalHeight / originalWidth * parseInt(this.value, 10)));\r\n\t\t\t}\r\n\t\t});\r\n\t\theightBox.change(function(e) {\r\n\t\t\tif (originalHeight > 0) {\r\n\t\t\t\twidthBox.val(Math.round(originalWidth / originalHeight * parseInt(this.value, 10)));\r\n\t\t\t}\r\n\t\t});\r\n\t\turlBox.val(options.imageUrl);\r\n\t\tsetSize(options.imageWidth, options.imageHeight);\r\n\t\ttitleBox.val(options.imageTitle);\r\n\t\talignBox.each(function() {\r\n\t\t\tif (this.value === options.imageAlign) {\r\n\t\t\t\tthis.checked = true;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (showRemote && tabIndex === 0) {\r\n\t\t\turlBox[0].focus();\r\n\t\t\turlBox[0].select();\r\n\t\t}\r\n\t\treturn dialog;\r\n\t};\r\n\tself.plugin.image = {\r\n\t\tedit : function() {\r\n\t\t\tvar img = self.plugin.getSelectedImage();\r\n\t\t\tself.plugin.imageDialog({\r\n\t\t\t\timageUrl : img ? img.attr('data-ke-src') : 'http://',\r\n\t\t\t\timageWidth : img ? img.width() : '',\r\n\t\t\t\timageHeight : img ? img.height() : '',\r\n\t\t\t\timageTitle : img ? img.attr('title') : '',\r\n\t\t\t\timageAlign : img ? img.attr('align') : '',\r\n\t\t\t\tshowRemote : allowImageRemote,\r\n\t\t\t\tshowLocal : allowImageUpload,\r\n\t\t\t\ttabIndex: img ? 0 : imageTabIndex,\r\n\t\t\t\tclickFn : function(url, title, width, height, border, align) {\r\n\t\t\t\t\tif (img) {\r\n\t\t\t\t\t\timg.attr('src', url);\r\n\t\t\t\t\t\timg.attr('data-ke-src', url);\r\n\t\t\t\t\t\timg.attr('width', width);\r\n\t\t\t\t\t\timg.attr('height', height);\r\n\t\t\t\t\t\timg.attr('title', title);\r\n\t\t\t\t\t\timg.attr('align', align);\r\n\t\t\t\t\t\timg.attr('alt', title);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tself.exec('insertimage', url, title, width, height, border, align);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tself.hideDialog().focus();\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t'delete' : function() {\r\n\t\t\tvar target = self.plugin.getSelectedImage();\r\n\t\t\tif (target.parent().name == 'a') {\r\n\t\t\t\ttarget = target.parent();\r\n\t\t\t}\r\n\t\t\ttarget.remove();\r\n\t\t\tself.addBookmark();\r\n\t\t}\r\n\t};\r\n\tself.clickToolbar(name, self.plugin.image.edit);\r\n});\r\n\n/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2011 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @site http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n*******************************************************************************/\r\nKindEditor.plugin('insertfile', function(K) {\r\n\tvar self = this, name = 'insertfile',\r\n\t\tallowFileUpload = K.undef(self.allowFileUpload, true),\r\n\t\tallowFileManager = K.undef(self.allowFileManager, false),\r\n\t\tformatUploadUrl = K.undef(self.formatUploadUrl, true),\r\n\t\tuploadJson = K.undef(self.uploadJson, self.basePath + 'php/upload_json.php'),\r\n\t\textraParams = K.undef(self.extraFileUploadParams, {}),\r\n\t\tfilePostName = K.undef(self.filePostName, 'imgFile'),\r\n\t\tlang = self.lang(name + '.');\r\n\tself.plugin.fileDialog = function(options) {\r\n\t\tvar fileUrl = K.undef(options.fileUrl, 'http://'),\r\n\t\t\tfileTitle = K.undef(options.fileTitle, ''),\r\n\t\t\tclickFn = options.clickFn;\r\n\t\tvar html = [\r\n\t\t\t'<div style=\"padding:20px;\">',\r\n\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t'<label for=\"keUrl\" style=\"width:60px;\">' + lang.url + '</label>',\r\n\t\t\t'<input type=\"text\" id=\"keUrl\" name=\"url\" class=\"ke-input-text\" style=\"width:160px;\" /> &nbsp;',\r\n\t\t\t'<input type=\"button\" class=\"ke-upload-button\" value=\"' + lang.upload + '\" /> &nbsp;',\r\n\t\t\t'<span class=\"ke-button-common ke-button-outer\">',\r\n\t\t\t'<input type=\"button\" class=\"ke-button-common ke-button\" name=\"viewServer\" value=\"' + lang.viewServer + '\" />',\r\n\t\t\t'</span>',\r\n\t\t\t'</div>',\r\n\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t'<label for=\"keTitle\" style=\"width:60px;\">' + lang.title + '</label>',\r\n\t\t\t'<input type=\"text\" id=\"keTitle\" class=\"ke-input-text\" name=\"title\" value=\"\" style=\"width:160px;\" /></div>',\r\n\t\t\t'</div>',\r\n\t\t\t'</form>',\r\n\t\t\t'</div>'\r\n\t\t\t].join('');\r\n\t\tvar dialog = self.createDialog({\r\n\t\t\tname : name,\r\n\t\t\twidth : 450,\r\n\t\t\ttitle : self.lang(name),\r\n\t\t\tbody : html,\r\n\t\t\tyesBtn : {\r\n\t\t\t\tname : self.lang('yes'),\r\n\t\t\t\tclick : function(e) {\r\n\t\t\t\t\tvar url = K.trim(urlBox.val()),\r\n\t\t\t\t\t\ttitle = titleBox.val();\r\n\t\t\t\t\tif (url == 'http://' || K.invalidUrl(url)) {\r\n\t\t\t\t\t\talert(self.lang('invalidUrl'));\r\n\t\t\t\t\t\turlBox[0].focus();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (K.trim(title) === '') {\r\n\t\t\t\t\t\ttitle = url;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclickFn.call(self, url, title);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}),\r\n\t\tdiv = dialog.div;\r\n\t\tvar urlBox = K('[name=\"url\"]', div),\r\n\t\t\tviewServerBtn = K('[name=\"viewServer\"]', div),\r\n\t\t\ttitleBox = K('[name=\"title\"]', div);\r\n\t\tif (allowFileUpload) {\r\n\t\t\tvar uploadbutton = K.uploadbutton({\r\n\t\t\t\tbutton : K('.ke-upload-button', div)[0],\r\n\t\t\t\tfieldName : filePostName,\r\n\t\t\t\turl : K.addParam(uploadJson, 'dir=file'),\r\n\t\t\t\textraParams : extraParams,\r\n\t\t\t\tafterUpload : function(data) {\r\n\t\t\t\t\tdialog.hideLoading();\r\n\t\t\t\t\tif (data.error === 0) {\r\n\t\t\t\t\t\tvar url = data.url;\r\n\t\t\t\t\t\tif (formatUploadUrl) {\r\n\t\t\t\t\t\t\turl = K.formatUrl(url, 'absolute');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\turlBox.val(url);\r\n\t\t\t\t\t\tif (self.afterUpload) {\r\n\t\t\t\t\t\t\tself.afterUpload.call(self, url, data, name);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\talert(self.lang('uploadSuccess'));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\talert(data.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tafterError : function(html) {\r\n\t\t\t\t\tdialog.hideLoading();\r\n\t\t\t\t\tself.errorDialog(html);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tuploadbutton.fileBox.change(function(e) {\r\n\t\t\t\tdialog.showLoading(self.lang('uploadLoading'));\r\n\t\t\t\tuploadbutton.submit();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tK('.ke-upload-button', div).hide();\r\n\t\t}\r\n\t\tif (allowFileManager) {\r\n\t\t\tviewServerBtn.click(function(e) {\r\n\t\t\t\tself.loadPlugin('filemanager', function() {\r\n\t\t\t\t\tself.plugin.filemanagerDialog({\r\n\t\t\t\t\t\tviewType : 'LIST',\r\n\t\t\t\t\t\tdirName : 'file',\r\n\t\t\t\t\t\tclickFn : function(url, title) {\r\n\t\t\t\t\t\t\tif (self.dialogs.length > 1) {\r\n\t\t\t\t\t\t\t\tK('[name=\"url\"]', div).val(url);\r\n\t\t\t\t\t\t\t\tif (self.afterSelectFile) {\r\n\t\t\t\t\t\t\t\t\tself.afterSelectFile.call(self, url);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tself.hideDialog();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tviewServerBtn.hide();\r\n\t\t}\r\n\t\turlBox.val(fileUrl);\r\n\t\ttitleBox.val(fileTitle);\r\n\t\turlBox[0].focus();\r\n\t\turlBox[0].select();\r\n\t};\r\n\tself.clickToolbar(name, function() {\r\n\t\tself.plugin.fileDialog({\r\n\t\t\tclickFn : function(url, title) {\r\n\t\t\t\tvar html = '<a class=\"ke-insertfile\" href=\"' + url + '\" data-ke-src=\"' + url + '\" target=\"_blank\">' + title + '</a>';\r\n\t\t\t\tself.insertHtml(html).hideDialog().focus();\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n});\r\n\n/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2011 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @site http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n*******************************************************************************/\r\nKindEditor.plugin('lineheight', function(K) {\r\n\tvar self = this, name = 'lineheight', lang = self.lang(name + '.');\r\n\tself.clickToolbar(name, function() {\r\n\t\tvar curVal = '', commonNode = self.cmd.commonNode({'*' : '.line-height'});\r\n\t\tif (commonNode) {\r\n\t\t\tcurVal = commonNode.css('line-height');\r\n\t\t}\r\n\t\tvar menu = self.createMenu({\r\n\t\t\tname : name,\r\n\t\t\twidth : 150\r\n\t\t});\r\n\t\tK.each(lang.lineHeight, function(i, row) {\r\n\t\t\tK.each(row, function(key, val) {\r\n\t\t\t\tmenu.addItem({\r\n\t\t\t\t\ttitle : val,\r\n\t\t\t\t\tchecked : curVal === key,\r\n\t\t\t\t\tclick : function() {\r\n\t\t\t\t\t\tself.cmd.toggle('<span style=\"line-height:' + key + ';\"></span>', {\r\n\t\t\t\t\t\t\tspan : '.line-height=' + key\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tself.updateState();\r\n\t\t\t\t\t\tself.addBookmark();\r\n\t\t\t\t\t\tself.hideMenu();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n});\r\n\n/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2011 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @site http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n*******************************************************************************/\r\nKindEditor.plugin('link', function(K) {\r\n\tvar self = this, name = 'link';\r\n\tself.plugin.link = {\r\n\t\tedit : function() {\r\n\t\t\tvar lang = self.lang(name + '.'),\r\n\t\t\t\thtml = '<div style=\"padding:20px;\">' +\r\n\t\t\t\t\t'<div class=\"ke-dialog-row\">' +\r\n\t\t\t\t\t'<label for=\"keUrl\" style=\"width:60px;\">' + lang.url + '</label>' +\r\n\t\t\t\t\t'<input class=\"ke-input-text\" type=\"text\" id=\"keUrl\" name=\"url\" value=\"\" style=\"width:260px;\" /></div>' +\r\n\t\t\t\t\t'<div class=\"ke-dialog-row\"\">' +\r\n\t\t\t\t\t'<label for=\"keType\" style=\"width:60px;\">' + lang.linkType + '</label>' +\r\n\t\t\t\t\t'<select id=\"keType\" name=\"type\"></select>' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t'</div>',\r\n\t\t\t\tdialog = self.createDialog({\r\n\t\t\t\t\tname : name,\r\n\t\t\t\t\twidth : 450,\r\n\t\t\t\t\ttitle : self.lang(name),\r\n\t\t\t\t\tbody : html,\r\n\t\t\t\t\tyesBtn : {\r\n\t\t\t\t\t\tname : self.lang('yes'),\r\n\t\t\t\t\t\tclick : function(e) {\r\n\t\t\t\t\t\t\tvar url = K.trim(urlBox.val());\r\n\t\t\t\t\t\t\tif (url == 'http://' || K.invalidUrl(url)) {\r\n\t\t\t\t\t\t\t\talert(self.lang('invalidUrl'));\r\n\t\t\t\t\t\t\t\turlBox[0].focus();\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tself.exec('createlink', url, typeBox.val()).hideDialog().focus();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\tdiv = dialog.div,\r\n\t\t\t\turlBox = K('input[name=\"url\"]', div),\r\n\t\t\t\ttypeBox = K('select[name=\"type\"]', div);\r\n\t\t\turlBox.val('http://');\r\n\t\t\ttypeBox[0].options[0] = new Option(lang.newWindow, '_blank');\r\n\t\t\ttypeBox[0].options[1] = new Option(lang.selfWindow, '');\r\n\t\t\tself.cmd.selection();\r\n\t\t\tvar a = self.plugin.getSelectedLink();\r\n\t\t\tif (a) {\r\n\t\t\t\tself.cmd.range.selectNode(a[0]);\r\n\t\t\t\tself.cmd.select();\r\n\t\t\t\turlBox.val(a.attr('data-ke-src'));\r\n\t\t\t\ttypeBox.val(a.attr('target'));\r\n\t\t\t}\r\n\t\t\turlBox[0].focus();\r\n\t\t\turlBox[0].select();\r\n\t\t},\r\n\t\t'delete' : function() {\r\n\t\t\tself.exec('unlink', null);\r\n\t\t}\r\n\t};\r\n\tself.clickToolbar(name, self.plugin.link.edit);\r\n});\r\n\n/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2011 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @site http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n*******************************************************************************/\r\nKindEditor.plugin('media', function(K) {\r\n\tvar self = this, name = 'media', lang = self.lang(name + '.'),\r\n\t\tallowMediaUpload = K.undef(self.allowMediaUpload, true),\r\n\t\tallowFileManager = K.undef(self.allowFileManager, false),\r\n\t\tformatUploadUrl = K.undef(self.formatUploadUrl, true),\r\n\t\textraParams = K.undef(self.extraFileUploadParams, {}),\r\n\t\tfilePostName = K.undef(self.filePostName, 'imgFile'),\r\n\t\tuploadJson = K.undef(self.uploadJson, self.basePath + 'php/upload_json.php');\r\n\tself.plugin.media = {\r\n\t\tedit : function() {\r\n\t\t\tvar html = [\r\n\t\t\t\t'<div style=\"padding:20px;\">',\r\n\t\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t\t'<label for=\"keUrl\" style=\"width:60px;\">' + lang.url + '</label>',\r\n\t\t\t\t'<input class=\"ke-input-text\" type=\"text\" id=\"keUrl\" name=\"url\" value=\"\" style=\"width:160px;\" /> &nbsp;',\r\n\t\t\t\t'<input type=\"button\" class=\"ke-upload-button\" value=\"' + lang.upload + '\" /> &nbsp;',\r\n\t\t\t\t'<span class=\"ke-button-common ke-button-outer\">',\r\n\t\t\t\t'<input type=\"button\" class=\"ke-button-common ke-button\" name=\"viewServer\" value=\"' + lang.viewServer + '\" />',\r\n\t\t\t\t'</span>',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t\t'<label for=\"keWidth\" style=\"width:60px;\">' + lang.width + '</label>',\r\n\t\t\t\t'<input type=\"text\" id=\"keWidth\" class=\"ke-input-text ke-input-number\" name=\"width\" value=\"550\" maxlength=\"4\" />',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t\t'<label for=\"keHeight\" style=\"width:60px;\">' + lang.height + '</label>',\r\n\t\t\t\t'<input type=\"text\" id=\"keHeight\" class=\"ke-input-text ke-input-number\" name=\"height\" value=\"400\" maxlength=\"4\" />',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t\t'<label for=\"keAutostart\">' + lang.autostart + '</label>',\r\n\t\t\t\t'<input type=\"checkbox\" id=\"keAutostart\" name=\"autostart\" value=\"\" /> ',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'</div>'\r\n\t\t\t].join('');\r\n\t\t\tvar dialog = self.createDialog({\r\n\t\t\t\tname : name,\r\n\t\t\t\twidth : 450,\r\n\t\t\t\theight : 230,\r\n\t\t\t\ttitle : self.lang(name),\r\n\t\t\t\tbody : html,\r\n\t\t\t\tyesBtn : {\r\n\t\t\t\t\tname : self.lang('yes'),\r\n\t\t\t\t\tclick : function(e) {\r\n\t\t\t\t\t\tvar url = K.trim(urlBox.val()),\r\n\t\t\t\t\t\t\twidth = widthBox.val(),\r\n\t\t\t\t\t\t\theight = heightBox.val();\r\n\t\t\t\t\t\tif (url == 'http://' || K.invalidUrl(url)) {\r\n\t\t\t\t\t\t\talert(self.lang('invalidUrl'));\r\n\t\t\t\t\t\t\turlBox[0].focus();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!/^\\d*$/.test(width)) {\r\n\t\t\t\t\t\t\talert(self.lang('invalidWidth'));\r\n\t\t\t\t\t\t\twidthBox[0].focus();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!/^\\d*$/.test(height)) {\r\n\t\t\t\t\t\t\talert(self.lang('invalidHeight'));\r\n\t\t\t\t\t\t\theightBox[0].focus();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar html = K.mediaImg(self.themesPath + 'common/blank.gif', {\r\n\t\t\t\t\t\t\t\tsrc : url,\r\n\t\t\t\t\t\t\t\ttype : K.mediaType(url),\r\n\t\t\t\t\t\t\t\twidth : width,\r\n\t\t\t\t\t\t\t\theight : height,\r\n\t\t\t\t\t\t\t\tautostart : autostartBox[0].checked ? 'true' : 'false',\r\n\t\t\t\t\t\t\t\tloop : 'true'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tself.insertHtml(html).hideDialog().focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tdiv = dialog.div,\r\n\t\t\turlBox = K('[name=\"url\"]', div),\r\n\t\t\tviewServerBtn = K('[name=\"viewServer\"]', div),\r\n\t\t\twidthBox = K('[name=\"width\"]', div),\r\n\t\t\theightBox = K('[name=\"height\"]', div),\r\n\t\t\tautostartBox = K('[name=\"autostart\"]', div);\r\n\t\t\turlBox.val('http://');\r\n\t\t\tif (allowMediaUpload) {\r\n\t\t\t\tvar uploadbutton = K.uploadbutton({\r\n\t\t\t\t\tbutton : K('.ke-upload-button', div)[0],\r\n\t\t\t\t\tfieldName : filePostName,\r\n\t\t\t\t\textraParams : extraParams,\r\n\t\t\t\t\turl : K.addParam(uploadJson, 'dir=media'),\r\n\t\t\t\t\tafterUpload : function(data) {\r\n\t\t\t\t\t\tdialog.hideLoading();\r\n\t\t\t\t\t\tif (data.error === 0) {\r\n\t\t\t\t\t\t\tvar url = data.url;\r\n\t\t\t\t\t\t\tif (formatUploadUrl) {\r\n\t\t\t\t\t\t\t\turl = K.formatUrl(url, 'absolute');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\turlBox.val(url);\r\n\t\t\t\t\t\t\tif (self.afterUpload) {\r\n\t\t\t\t\t\t\t\tself.afterUpload.call(self, url, data, name);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\talert(self.lang('uploadSuccess'));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\talert(data.message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tafterError : function(html) {\r\n\t\t\t\t\t\tdialog.hideLoading();\r\n\t\t\t\t\t\tself.errorDialog(html);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tuploadbutton.fileBox.change(function(e) {\r\n\t\t\t\t\tdialog.showLoading(self.lang('uploadLoading'));\r\n\t\t\t\t\tuploadbutton.submit();\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tK('.ke-upload-button', div).hide();\r\n\t\t\t}\r\n\t\t\tif (allowFileManager) {\r\n\t\t\t\tviewServerBtn.click(function(e) {\r\n\t\t\t\t\tself.loadPlugin('filemanager', function() {\r\n\t\t\t\t\t\tself.plugin.filemanagerDialog({\r\n\t\t\t\t\t\t\tviewType : 'LIST',\r\n\t\t\t\t\t\t\tdirName : 'media',\r\n\t\t\t\t\t\t\tclickFn : function(url, title) {\r\n\t\t\t\t\t\t\t\tif (self.dialogs.length > 1) {\r\n\t\t\t\t\t\t\t\t\tK('[name=\"url\"]', div).val(url);\r\n\t\t\t\t\t\t\t\t\tif (self.afterSelectFile) {\r\n\t\t\t\t\t\t\t\t\t\tself.afterSelectFile.call(self, url);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tself.hideDialog();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tviewServerBtn.hide();\r\n\t\t\t}\r\n\t\t\tvar img = self.plugin.getSelectedMedia();\r\n\t\t\tif (img) {\r\n\t\t\t\tvar attrs = K.mediaAttrs(img.attr('data-ke-tag'));\r\n\t\t\t\turlBox.val(attrs.src);\r\n\t\t\t\twidthBox.val(K.removeUnit(img.css('width')) || attrs.width || 0);\r\n\t\t\t\theightBox.val(K.removeUnit(img.css('height')) || attrs.height || 0);\r\n\t\t\t\tautostartBox[0].checked = (attrs.autostart === 'true');\r\n\t\t\t}\r\n\t\t\turlBox[0].focus();\r\n\t\t\turlBox[0].select();\r\n\t\t},\r\n\t\t'delete' : function() {\r\n\t\t\tself.plugin.getSelectedMedia().remove();\r\n\t\t\tself.addBookmark();\r\n\t\t}\r\n\t};\r\n\tself.clickToolbar(name, self.plugin.media.edit);\r\n});\r\n\n/*******************************************************************************\n* KindEditor - WYSIWYG HTML Editor for Internet\n* Copyright (C) 2006-2011 kindsoft.net\n*\n* @author Roddy <luolonghao@gmail.com>\n* @site http://www.kindsoft.net/\n* @licence http://www.kindsoft.net/license.php\n*******************************************************************************/\n(function(K) {\nfunction KSWFUpload(options) {\n\tthis.init(options);\n}\nK.extend(KSWFUpload, {\n\tinit : function(options) {\n\t\tvar self = this;\n\t\toptions.afterError = options.afterError || function(str) {\n\t\t\talert(str);\n\t\t};\n\t\tself.options = options;\n\t\tself.progressbars = {};\n\t\tself.div = K(options.container).html([\n\t\t\t'<div class=\"ke-swfupload\">',\n\t\t\t'<div class=\"ke-swfupload-top\">',\n\t\t\t'<div class=\"ke-inline-block ke-swfupload-button\">',\n\t\t\t'<input type=\"button\" value=\"Browse\" />',\n\t\t\t'</div>',\n\t\t\t'<div class=\"ke-inline-block ke-swfupload-desc\">' + options.uploadDesc + '</div>',\n\t\t\t'<span class=\"ke-button-common ke-button-outer ke-swfupload-startupload\">',\n\t\t\t'<input type=\"button\" class=\"ke-button-common ke-button\" value=\"' + options.startButtonValue + '\" />',\n\t\t\t'</span>',\n\t\t\t'</div>',\n\t\t\t'<div class=\"ke-swfupload-body\"></div>',\n\t\t\t'</div>'\n\t\t].join(''));\n\t\tself.bodyDiv = K('.ke-swfupload-body', self.div);\n\t\tfunction showError(itemDiv, msg) {\n\t\t\tK('.ke-status > div', itemDiv).hide();\n\t\t\tK('.ke-message', itemDiv).addClass('ke-error').show().html(K.escape(msg));\n\t\t}\n\t\tvar settings = {\n\t\t\tdebug : false,\n\t\t\tupload_url : options.uploadUrl,\n\t\t\tflash_url : options.flashUrl,\n\t\t\tfile_post_name : options.filePostName,\n\t\t\tbutton_placeholder : K('.ke-swfupload-button > input', self.div)[0],\n\t\t\tbutton_image_url: options.buttonImageUrl,\n\t\t\tbutton_width: options.buttonWidth,\n\t\t\tbutton_height: options.buttonHeight,\n\t\t\tbutton_cursor : SWFUpload.CURSOR.HAND,\n\t\t\tfile_types : options.fileTypes,\n\t\t\tfile_types_description : options.fileTypesDesc,\n\t\t\tfile_upload_limit : options.fileUploadLimit,\n\t\t\tfile_size_limit : options.fileSizeLimit,\n\t\t\tpost_params : options.postParams,\n\t\t\tfile_queued_handler : function(file) {\n\t\t\t\tfile.url = self.options.fileIconUrl;\n\t\t\t\tself.appendFile(file);\n\t\t\t},\n\t\t\tfile_queue_error_handler : function(file, errorCode, message) {\n\t\t\t\tvar errorName = '';\n\t\t\t\tswitch (errorCode) {\n\t\t\t\t\tcase SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:\n\t\t\t\t\t\terrorName = options.queueLimitExceeded;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:\n\t\t\t\t\t\terrorName = options.fileExceedsSizeLimit;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:\n\t\t\t\t\t\terrorName = options.zeroByteFile;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:\n\t\t\t\t\t\terrorName = options.invalidFiletype;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\terrorName = options.unknownError;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tK.DEBUG && alert(errorName);\n\t\t\t},\n\t\t\tupload_start_handler : function(file) {\n\t\t\t\tvar self = this;\n\t\t\t\tvar itemDiv = K('div[data-id=\"' + file.id + '\"]', self.bodyDiv);\n\t\t\t\tK('.ke-status > div', itemDiv).hide();\n\t\t\t\tK('.ke-progressbar', itemDiv).show();\n\t\t\t},\n\t\t\tupload_progress_handler : function(file, bytesLoaded, bytesTotal) {\n\t\t\t\tvar percent = Math.round(bytesLoaded * 100 / bytesTotal);\n\t\t\t\tvar progressbar = self.progressbars[file.id];\n\t\t\t\tprogressbar.bar.css('width', Math.round(percent * 80 / 100) + 'px');\n\t\t\t\tprogressbar.percent.html(percent + '%');\n\t\t\t},\n\t\t\tupload_error_handler : function(file, errorCode, message) {\n\t\t\t\tif (file && file.filestatus == SWFUpload.FILE_STATUS.ERROR) {\n\t\t\t\t\tvar itemDiv = K('div[data-id=\"' + file.id + '\"]', self.bodyDiv).eq(0);\n\t\t\t\t\tshowError(itemDiv, self.options.errorMessage);\n\t\t\t\t}\n\t\t\t},\n\t\t\tupload_success_handler : function(file, serverData) {\n\t\t\t\tvar itemDiv = K('div[data-id=\"' + file.id + '\"]', self.bodyDiv).eq(0);\n\t\t\t\tvar data = {};\n\t\t\t\ttry {\n\t\t\t\t\tdata = K.json(serverData);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tself.options.afterError.call(this, '<!doctype html><html>' + serverData + '</html>');\n\t\t\t\t}\n\t\t\t\tif (data.error !== 0) {\n\t\t\t\t\tshowError(itemDiv, K.DEBUG ? data.message : self.options.errorMessage);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfile.url = data.url;\n\t\t\t\tK('.ke-img', itemDiv).attr('src', file.url).attr('data-status', file.filestatus).data('data', data);\n\t\t\t\tK('.ke-status > div', itemDiv).hide();\n\t\t\t}\n\t\t};\n\t\tself.swfu = new SWFUpload(settings);\n\t\tK('.ke-swfupload-startupload input', self.div).click(function() {\n\t\t\tself.swfu.startUpload();\n\t\t});\n\t},\n\tgetUrlList : function() {\n\t\tvar list = [];\n\t\tK('.ke-img', self.bodyDiv).each(function() {\n\t\t\tvar img = K(this);\n\t\t\tvar status = img.attr('data-status');\n\t\t\tif (status == SWFUpload.FILE_STATUS.COMPLETE) {\n\t\t\t\tlist.push(img.data('data'));\n\t\t\t}\n\t\t});\n\t\treturn list;\n\t},\n\tremoveFile : function(fileId) {\n\t\tvar self = this;\n\t\tself.swfu.cancelUpload(fileId);\n\t\tvar itemDiv = K('div[data-id=\"' + fileId + '\"]', self.bodyDiv);\n\t\tK('.ke-photo', itemDiv).unbind();\n\t\tK('.ke-delete', itemDiv).unbind();\n\t\titemDiv.remove();\n\t},\n\tremoveFiles : function() {\n\t\tvar self = this;\n\t\tK('.ke-item', self.bodyDiv).each(function() {\n\t\t\tself.removeFile(K(this).attr('data-id'));\n\t\t});\n\t},\n\tappendFile : function(file) {\n\t\tvar self = this;\n\t\tvar itemDiv = K('<div class=\"ke-inline-block ke-item\" data-id=\"' + file.id + '\"></div>');\n\t\tself.bodyDiv.append(itemDiv);\n\t\tvar photoDiv = K('<div class=\"ke-inline-block ke-photo\"></div>')\n\t\t\t.mouseover(function(e) {\n\t\t\t\tK(this).addClass('ke-on');\n\t\t\t})\n\t\t\t.mouseout(function(e) {\n\t\t\t\tK(this).removeClass('ke-on');\n\t\t\t});\n\t\titemDiv.append(photoDiv);\n\t\tvar img = K('<img src=\"' + file.url + '\" class=\"ke-img\" data-status=\"' + file.filestatus + '\" width=\"80\" height=\"80\" alt=\"' + file.name + '\" />');\n\t\tphotoDiv.append(img);\n\t\tK('<span class=\"ke-delete\"></span>').appendTo(photoDiv).click(function() {\n\t\t\tself.removeFile(file.id);\n\t\t});\n\t\tvar statusDiv = K('<div class=\"ke-status\"></div>').appendTo(photoDiv);\n\t\tK(['<div class=\"ke-progressbar\">',\n\t\t\t'<div class=\"ke-progressbar-bar\"><div class=\"ke-progressbar-bar-inner\"></div></div>',\n\t\t\t'<div class=\"ke-progressbar-percent\">0%</div></div>'].join('')).hide().appendTo(statusDiv);\n\t\tK('<div class=\"ke-message\">' + self.options.pendingMessage + '</div>').appendTo(statusDiv);\n\t\titemDiv.append('<div class=\"ke-name\">' + file.name + '</div>');\n\t\tself.progressbars[file.id] = {\n\t\t\tbar : K('.ke-progressbar-bar-inner', photoDiv),\n\t\t\tpercent : K('.ke-progressbar-percent', photoDiv)\n\t\t};\n\t},\n\tremove : function() {\n\t\tthis.removeFiles();\n\t\tthis.swfu.destroy();\n\t\tthis.div.html('');\n\t}\n});\nK.swfupload = function(element, options) {\n\treturn new KSWFUpload(element, options);\n};\n})(KindEditor);\nKindEditor.plugin('multiimage', function(K) {\n\tvar self = this, name = 'multiimage',\n\t\tformatUploadUrl = K.undef(self.formatUploadUrl, true),\n\t\tuploadJson = K.undef(self.uploadJson, self.basePath + 'php/upload_json.php'),\n\t\timgPath = self.pluginsPath + 'multiimage/images/',\n\t\timageSizeLimit = K.undef(self.imageSizeLimit, '1MB'),\n\t\timageFileTypes = K.undef(self.imageFileTypes, '*.jpg;*.gif;*.png'),\n\t\timageUploadLimit = K.undef(self.imageUploadLimit, 20),\n\t\tfilePostName = K.undef(self.filePostName, 'imgFile'),\n\t\tlang = self.lang(name + '.');\n\tself.plugin.multiImageDialog = function(options) {\n\t\tvar clickFn = options.clickFn,\n\t\t\tuploadDesc = K.tmpl(lang.uploadDesc, {uploadLimit : imageUploadLimit, sizeLimit : imageSizeLimit});\n\t\tvar html = [\n\t\t\t'<div style=\"padding:20px;\">',\n\t\t\t'<div class=\"swfupload\">',\n\t\t\t'</div>',\n\t\t\t'</div>'\n\t\t].join('');\n\t\tvar dialog = self.createDialog({\n\t\t\tname : name,\n\t\t\twidth : 650,\n\t\t\theight : 510,\n\t\t\ttitle : self.lang(name),\n\t\t\tbody : html,\n\t\t\tpreviewBtn : {\n\t\t\t\tname : lang.insertAll,\n\t\t\t\tclick : function(e) {\n\t\t\t\t\tclickFn.call(self, swfupload.getUrlList());\n\t\t\t\t}\n\t\t\t},\n\t\t\tyesBtn : {\n\t\t\t\tname : lang.clearAll,\n\t\t\t\tclick : function(e) {\n\t\t\t\t\tswfupload.removeFiles();\n\t\t\t\t}\n\t\t\t},\n\t\t\tbeforeRemove : function() {\n\t\t\t\tif (!K.IE || K.V <= 8) {\n\t\t\t\t\tswfupload.remove();\n\t\t\t\t}\n\t\t\t}\n\t\t}),\n\t\tdiv = dialog.div;\n\t\tvar swfupload = K.swfupload({\n\t\t\tcontainer : K('.swfupload', div),\n\t\t\tbuttonImageUrl : imgPath + (self.langType == 'zh-CN' ? 'select-files-zh-CN.png' : 'select-files-en.png'),\n\t\t\tbuttonWidth : self.langType == 'zh-CN' ? 72 : 88,\n\t\t\tbuttonHeight : 23,\n\t\t\tfileIconUrl : imgPath + 'image.png',\n\t\t\tuploadDesc : uploadDesc,\n\t\t\tstartButtonValue : lang.startUpload,\n\t\t\tuploadUrl : K.addParam(uploadJson, 'dir=image'),\n\t\t\tflashUrl : imgPath + 'swfupload.swf',\n\t\t\tfilePostName : filePostName,\n\t\t\tfileTypes : '*.jpg;*.jpeg;*.gif;*.png;*.bmp',\n\t\t\tfileTypesDesc : 'Image Files',\n\t\t\tfileUploadLimit : imageUploadLimit,\n\t\t\tfileSizeLimit : imageSizeLimit,\n\t\t\tpostParams :  K.undef(self.extraFileUploadParams, {}),\n\t\t\tqueueLimitExceeded : lang.queueLimitExceeded,\n\t\t\tfileExceedsSizeLimit : lang.fileExceedsSizeLimit,\n\t\t\tzeroByteFile : lang.zeroByteFile,\n\t\t\tinvalidFiletype : lang.invalidFiletype,\n\t\t\tunknownError : lang.unknownError,\n\t\t\tpendingMessage : lang.pending,\n\t\t\terrorMessage : lang.uploadError,\n\t\t\tafterError : function(html) {\n\t\t\t\tself.errorDialog(html);\n\t\t\t}\n\t\t});\n\t\treturn dialog;\n\t};\n\tself.clickToolbar(name, function() {\n\t\tself.plugin.multiImageDialog({\n\t\t\tclickFn : function (urlList) {\n\t\t\t\tif (urlList.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tK.each(urlList, function(i, data) {\n\t\t\t\t\tif (self.afterUpload) {\n\t\t\t\t\t\tself.afterUpload.call(self, data.url, data, 'multiimage');\n\t\t\t\t\t}\n\t\t\t\t\tself.exec('insertimage', data.url, data.title, data.width, data.height, data.border, data.align);\n\t\t\t\t});\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tself.hideDialog().focus();\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t});\n\t});\n});\n/* ******************* */\n/* Constructor & Init  */\n/* ******************* */\n(function() {\nwindow.SWFUpload = function (settings) {\n\tthis.initSWFUpload(settings);\n};\nSWFUpload.prototype.initSWFUpload = function (settings) {\n\ttry {\n\t\tthis.customSettings = {};\n\t\tthis.settings = settings;\n\t\tthis.eventQueue = [];\n\t\tthis.movieName = \"KindEditor_SWFUpload_\" + SWFUpload.movieCount++;\n\t\tthis.movieElement = null;\n\t\tSWFUpload.instances[this.movieName] = this;\n\t\tthis.initSettings();\n\t\tthis.loadFlash();\n\t\tthis.displayDebugInfo();\n\t} catch (ex) {\n\t\tdelete SWFUpload.instances[this.movieName];\n\t\tthrow ex;\n\t}\n};\n/* *************** */\n/* Static Members  */\n/* *************** */\nSWFUpload.instances = {};\nSWFUpload.movieCount = 0;\nSWFUpload.version = \"2.2.0 2009-03-25\";\nSWFUpload.QUEUE_ERROR = {\n\tQUEUE_LIMIT_EXCEEDED\t  \t\t: -100,\n\tFILE_EXCEEDS_SIZE_LIMIT  \t\t: -110,\n\tZERO_BYTE_FILE\t\t\t  \t\t: -120,\n\tINVALID_FILETYPE\t\t  \t\t: -130\n};\nSWFUpload.UPLOAD_ERROR = {\n\tHTTP_ERROR\t\t\t\t  \t\t: -200,\n\tMISSING_UPLOAD_URL\t      \t\t: -210,\n\tIO_ERROR\t\t\t\t  \t\t: -220,\n\tSECURITY_ERROR\t\t\t  \t\t: -230,\n\tUPLOAD_LIMIT_EXCEEDED\t  \t\t: -240,\n\tUPLOAD_FAILED\t\t\t  \t\t: -250,\n\tSPECIFIED_FILE_ID_NOT_FOUND\t\t: -260,\n\tFILE_VALIDATION_FAILED\t  \t\t: -270,\n\tFILE_CANCELLED\t\t\t  \t\t: -280,\n\tUPLOAD_STOPPED\t\t\t\t\t: -290\n};\nSWFUpload.FILE_STATUS = {\n\tQUEUED\t\t : -1,\n\tIN_PROGRESS\t : -2,\n\tERROR\t\t : -3,\n\tCOMPLETE\t : -4,\n\tCANCELLED\t : -5\n};\nSWFUpload.BUTTON_ACTION = {\n\tSELECT_FILE  : -100,\n\tSELECT_FILES : -110,\n\tSTART_UPLOAD : -120\n};\nSWFUpload.CURSOR = {\n\tARROW : -1,\n\tHAND : -2\n};\nSWFUpload.WINDOW_MODE = {\n\tWINDOW : \"window\",\n\tTRANSPARENT : \"transparent\",\n\tOPAQUE : \"opaque\"\n};\nSWFUpload.completeURL = function(url) {\n\tif (typeof(url) !== \"string\" || url.match(/^https?:\\/\\//i) || url.match(/^\\//)) {\n\t\treturn url;\n\t}\n\tvar currentURL = window.location.protocol + \"//\" + window.location.hostname + (window.location.port ? \":\" + window.location.port : \"\");\n\tvar indexSlash = window.location.pathname.lastIndexOf(\"/\");\n\tif (indexSlash <= 0) {\n\t\tpath = \"/\";\n\t} else {\n\t\tpath = window.location.pathname.substr(0, indexSlash) + \"/\";\n\t}\n\treturn /*currentURL +*/ path + url;\n};\n/* ******************** */\n/* Instance Members  */\n/* ******************** */\nSWFUpload.prototype.initSettings = function () {\n\tthis.ensureDefault = function (settingName, defaultValue) {\n\t\tthis.settings[settingName] = (this.settings[settingName] == undefined) ? defaultValue : this.settings[settingName];\n\t};\n\tthis.ensureDefault(\"upload_url\", \"\");\n\tthis.ensureDefault(\"preserve_relative_urls\", false);\n\tthis.ensureDefault(\"file_post_name\", \"Filedata\");\n\tthis.ensureDefault(\"post_params\", {});\n\tthis.ensureDefault(\"use_query_string\", false);\n\tthis.ensureDefault(\"requeue_on_error\", false);\n\tthis.ensureDefault(\"http_success\", []);\n\tthis.ensureDefault(\"assume_success_timeout\", 0);\n\tthis.ensureDefault(\"file_types\", \"*.*\");\n\tthis.ensureDefault(\"file_types_description\", \"All Files\");\n\tthis.ensureDefault(\"file_size_limit\", 0);\n\tthis.ensureDefault(\"file_upload_limit\", 0);\n\tthis.ensureDefault(\"file_queue_limit\", 0);\n\tthis.ensureDefault(\"flash_url\", \"swfupload.swf\");\n\tthis.ensureDefault(\"prevent_swf_caching\", true);\n\tthis.ensureDefault(\"button_image_url\", \"\");\n\tthis.ensureDefault(\"button_width\", 1);\n\tthis.ensureDefault(\"button_height\", 1);\n\tthis.ensureDefault(\"button_text\", \"\");\n\tthis.ensureDefault(\"button_text_style\", \"color: #000000; font-size: 16pt;\");\n\tthis.ensureDefault(\"button_text_top_padding\", 0);\n\tthis.ensureDefault(\"button_text_left_padding\", 0);\n\tthis.ensureDefault(\"button_action\", SWFUpload.BUTTON_ACTION.SELECT_FILES);\n\tthis.ensureDefault(\"button_disabled\", false);\n\tthis.ensureDefault(\"button_placeholder_id\", \"\");\n\tthis.ensureDefault(\"button_placeholder\", null);\n\tthis.ensureDefault(\"button_cursor\", SWFUpload.CURSOR.ARROW);\n\tthis.ensureDefault(\"button_window_mode\", SWFUpload.WINDOW_MODE.WINDOW);\n\tthis.ensureDefault(\"debug\", false);\n\tthis.settings.debug_enabled = this.settings.debug;\n\tthis.settings.return_upload_start_handler = this.returnUploadStart;\n\tthis.ensureDefault(\"swfupload_loaded_handler\", null);\n\tthis.ensureDefault(\"file_dialog_start_handler\", null);\n\tthis.ensureDefault(\"file_queued_handler\", null);\n\tthis.ensureDefault(\"file_queue_error_handler\", null);\n\tthis.ensureDefault(\"file_dialog_complete_handler\", null);\n\tthis.ensureDefault(\"upload_start_handler\", null);\n\tthis.ensureDefault(\"upload_progress_handler\", null);\n\tthis.ensureDefault(\"upload_error_handler\", null);\n\tthis.ensureDefault(\"upload_success_handler\", null);\n\tthis.ensureDefault(\"upload_complete_handler\", null);\n\tthis.ensureDefault(\"debug_handler\", this.debugMessage);\n\tthis.ensureDefault(\"custom_settings\", {});\n\tthis.customSettings = this.settings.custom_settings;\n\tif (!!this.settings.prevent_swf_caching) {\n\t\tthis.settings.flash_url = this.settings.flash_url + (this.settings.flash_url.indexOf(\"?\") < 0 ? \"?\" : \"&\") + \"preventswfcaching=\" + new Date().getTime();\n\t}\n\tif (!this.settings.preserve_relative_urls) {\n\t\tthis.settings.upload_url = SWFUpload.completeURL(this.settings.upload_url);\n\t\tthis.settings.button_image_url = SWFUpload.completeURL(this.settings.button_image_url);\n\t}\n\tdelete this.ensureDefault;\n};\nSWFUpload.prototype.loadFlash = function () {\n\tvar targetElement, tempParent;\n\tif (document.getElementById(this.movieName) !== null) {\n\t\tthrow \"ID \" + this.movieName + \" is already in use. The Flash Object could not be added\";\n\t}\n\ttargetElement = document.getElementById(this.settings.button_placeholder_id) || this.settings.button_placeholder;\n\tif (targetElement == undefined) {\n\t\tthrow \"Could not find the placeholder element: \" + this.settings.button_placeholder_id;\n\t}\n\ttempParent = document.createElement(\"div\");\n\ttempParent.innerHTML = this.getFlashHTML();\n\ttargetElement.parentNode.replaceChild(tempParent.firstChild, targetElement);\n\tif (window[this.movieName] == undefined) {\n\t\twindow[this.movieName] = this.getMovieElement();\n\t}\n};\nSWFUpload.prototype.getFlashHTML = function () {\n\tvar classid = '';\n\tif (KindEditor.IE && KindEditor.V > 8) {\n\t\tclassid = ' classid = \"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\"';\n\t}\n\treturn ['<object id=\"', this.movieName, '\"' + classid + ' type=\"application/x-shockwave-flash\" data=\"', this.settings.flash_url, '\" width=\"', this.settings.button_width, '\" height=\"', this.settings.button_height, '\" class=\"swfupload\">',\n\t\t\t\t'<param name=\"wmode\" value=\"', this.settings.button_window_mode, '\" />',\n\t\t\t\t'<param name=\"movie\" value=\"', this.settings.flash_url, '\" />',\n\t\t\t\t'<param name=\"quality\" value=\"high\" />',\n\t\t\t\t'<param name=\"menu\" value=\"false\" />',\n\t\t\t\t'<param name=\"allowScriptAccess\" value=\"always\" />',\n\t\t\t\t'<param name=\"flashvars\" value=\"' + this.getFlashVars() + '\" />',\n\t\t\t\t'</object>'].join(\"\");\n};\nSWFUpload.prototype.getFlashVars = function () {\n\tvar paramString = this.buildParamString();\n\tvar httpSuccessString = this.settings.http_success.join(\",\");\n\treturn [\"movieName=\", encodeURIComponent(this.movieName),\n\t\t\t\"&amp;uploadURL=\", encodeURIComponent(this.settings.upload_url),\n\t\t\t\"&amp;useQueryString=\", encodeURIComponent(this.settings.use_query_string),\n\t\t\t\"&amp;requeueOnError=\", encodeURIComponent(this.settings.requeue_on_error),\n\t\t\t\"&amp;httpSuccess=\", encodeURIComponent(httpSuccessString),\n\t\t\t\"&amp;assumeSuccessTimeout=\", encodeURIComponent(this.settings.assume_success_timeout),\n\t\t\t\"&amp;params=\", encodeURIComponent(paramString),\n\t\t\t\"&amp;filePostName=\", encodeURIComponent(this.settings.file_post_name),\n\t\t\t\"&amp;fileTypes=\", encodeURIComponent(this.settings.file_types),\n\t\t\t\"&amp;fileTypesDescription=\", encodeURIComponent(this.settings.file_types_description),\n\t\t\t\"&amp;fileSizeLimit=\", encodeURIComponent(this.settings.file_size_limit),\n\t\t\t\"&amp;fileUploadLimit=\", encodeURIComponent(this.settings.file_upload_limit),\n\t\t\t\"&amp;fileQueueLimit=\", encodeURIComponent(this.settings.file_queue_limit),\n\t\t\t\"&amp;debugEnabled=\", encodeURIComponent(this.settings.debug_enabled),\n\t\t\t\"&amp;buttonImageURL=\", encodeURIComponent(this.settings.button_image_url),\n\t\t\t\"&amp;buttonWidth=\", encodeURIComponent(this.settings.button_width),\n\t\t\t\"&amp;buttonHeight=\", encodeURIComponent(this.settings.button_height),\n\t\t\t\"&amp;buttonText=\", encodeURIComponent(this.settings.button_text),\n\t\t\t\"&amp;buttonTextTopPadding=\", encodeURIComponent(this.settings.button_text_top_padding),\n\t\t\t\"&amp;buttonTextLeftPadding=\", encodeURIComponent(this.settings.button_text_left_padding),\n\t\t\t\"&amp;buttonTextStyle=\", encodeURIComponent(this.settings.button_text_style),\n\t\t\t\"&amp;buttonAction=\", encodeURIComponent(this.settings.button_action),\n\t\t\t\"&amp;buttonDisabled=\", encodeURIComponent(this.settings.button_disabled),\n\t\t\t\"&amp;buttonCursor=\", encodeURIComponent(this.settings.button_cursor)\n\t\t].join(\"\");\n};\nSWFUpload.prototype.getMovieElement = function () {\n\tif (this.movieElement == undefined) {\n\t\tthis.movieElement = document.getElementById(this.movieName);\n\t}\n\tif (this.movieElement === null) {\n\t\tthrow \"Could not find Flash element\";\n\t}\n\treturn this.movieElement;\n};\nSWFUpload.prototype.buildParamString = function () {\n\tvar postParams = this.settings.post_params;\n\tvar paramStringPairs = [];\n\tif (typeof(postParams) === \"object\") {\n\t\tfor (var name in postParams) {\n\t\t\tif (postParams.hasOwnProperty(name)) {\n\t\t\t\tparamStringPairs.push(encodeURIComponent(name.toString()) + \"=\" + encodeURIComponent(postParams[name].toString()));\n\t\t\t}\n\t\t}\n\t}\n\treturn paramStringPairs.join(\"&amp;\");\n};\nSWFUpload.prototype.destroy = function () {\n\ttry {\n\t\tthis.cancelUpload(null, false);\n\t\tvar movieElement = null;\n\t\tmovieElement = this.getMovieElement();\n\t\tif (movieElement && typeof(movieElement.CallFunction) === \"unknown\") {\n\t\t\tfor (var i in movieElement) {\n\t\t\t\ttry {\n\t\t\t\t\tif (typeof(movieElement[i]) === \"function\") {\n\t\t\t\t\t\tmovieElement[i] = null;\n\t\t\t\t\t}\n\t\t\t\t} catch (ex1) {}\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tmovieElement.parentNode.removeChild(movieElement);\n\t\t\t} catch (ex) {}\n\t\t}\n\t\twindow[this.movieName] = null;\n\t\tSWFUpload.instances[this.movieName] = null;\n\t\tdelete SWFUpload.instances[this.movieName];\n\t\tthis.movieElement = null;\n\t\tthis.settings = null;\n\t\tthis.customSettings = null;\n\t\tthis.eventQueue = null;\n\t\tthis.movieName = null;\n\t\treturn true;\n\t} catch (ex2) {\n\t\treturn false;\n\t}\n};\nSWFUpload.prototype.displayDebugInfo = function () {\n\tthis.debug(\n\t\t[\n\t\t\t\"---SWFUpload Instance Info---\\n\",\n\t\t\t\"Version: \", SWFUpload.version, \"\\n\",\n\t\t\t\"Movie Name: \", this.movieName, \"\\n\",\n\t\t\t\"Settings:\\n\",\n\t\t\t\"\\t\", \"upload_url:               \", this.settings.upload_url, \"\\n\",\n\t\t\t\"\\t\", \"flash_url:                \", this.settings.flash_url, \"\\n\",\n\t\t\t\"\\t\", \"use_query_string:         \", this.settings.use_query_string.toString(), \"\\n\",\n\t\t\t\"\\t\", \"requeue_on_error:         \", this.settings.requeue_on_error.toString(), \"\\n\",\n\t\t\t\"\\t\", \"http_success:             \", this.settings.http_success.join(\", \"), \"\\n\",\n\t\t\t\"\\t\", \"assume_success_timeout:   \", this.settings.assume_success_timeout, \"\\n\",\n\t\t\t\"\\t\", \"file_post_name:           \", this.settings.file_post_name, \"\\n\",\n\t\t\t\"\\t\", \"post_params:              \", this.settings.post_params.toString(), \"\\n\",\n\t\t\t\"\\t\", \"file_types:               \", this.settings.file_types, \"\\n\",\n\t\t\t\"\\t\", \"file_types_description:   \", this.settings.file_types_description, \"\\n\",\n\t\t\t\"\\t\", \"file_size_limit:          \", this.settings.file_size_limit, \"\\n\",\n\t\t\t\"\\t\", \"file_upload_limit:        \", this.settings.file_upload_limit, \"\\n\",\n\t\t\t\"\\t\", \"file_queue_limit:         \", this.settings.file_queue_limit, \"\\n\",\n\t\t\t\"\\t\", \"debug:                    \", this.settings.debug.toString(), \"\\n\",\n\t\t\t\"\\t\", \"prevent_swf_caching:      \", this.settings.prevent_swf_caching.toString(), \"\\n\",\n\t\t\t\"\\t\", \"button_placeholder_id:    \", this.settings.button_placeholder_id.toString(), \"\\n\",\n\t\t\t\"\\t\", \"button_placeholder:       \", (this.settings.button_placeholder ? \"Set\" : \"Not Set\"), \"\\n\",\n\t\t\t\"\\t\", \"button_image_url:         \", this.settings.button_image_url.toString(), \"\\n\",\n\t\t\t\"\\t\", \"button_width:             \", this.settings.button_width.toString(), \"\\n\",\n\t\t\t\"\\t\", \"button_height:            \", this.settings.button_height.toString(), \"\\n\",\n\t\t\t\"\\t\", \"button_text:              \", this.settings.button_text.toString(), \"\\n\",\n\t\t\t\"\\t\", \"button_text_style:        \", this.settings.button_text_style.toString(), \"\\n\",\n\t\t\t\"\\t\", \"button_text_top_padding:  \", this.settings.button_text_top_padding.toString(), \"\\n\",\n\t\t\t\"\\t\", \"button_text_left_padding: \", this.settings.button_text_left_padding.toString(), \"\\n\",\n\t\t\t\"\\t\", \"button_action:            \", this.settings.button_action.toString(), \"\\n\",\n\t\t\t\"\\t\", \"button_disabled:          \", this.settings.button_disabled.toString(), \"\\n\",\n\t\t\t\"\\t\", \"custom_settings:          \", this.settings.custom_settings.toString(), \"\\n\",\n\t\t\t\"Event Handlers:\\n\",\n\t\t\t\"\\t\", \"swfupload_loaded_handler assigned:  \", (typeof this.settings.swfupload_loaded_handler === \"function\").toString(), \"\\n\",\n\t\t\t\"\\t\", \"file_dialog_start_handler assigned: \", (typeof this.settings.file_dialog_start_handler === \"function\").toString(), \"\\n\",\n\t\t\t\"\\t\", \"file_queued_handler assigned:       \", (typeof this.settings.file_queued_handler === \"function\").toString(), \"\\n\",\n\t\t\t\"\\t\", \"file_queue_error_handler assigned:  \", (typeof this.settings.file_queue_error_handler === \"function\").toString(), \"\\n\",\n\t\t\t\"\\t\", \"upload_start_handler assigned:      \", (typeof this.settings.upload_start_handler === \"function\").toString(), \"\\n\",\n\t\t\t\"\\t\", \"upload_progress_handler assigned:   \", (typeof this.settings.upload_progress_handler === \"function\").toString(), \"\\n\",\n\t\t\t\"\\t\", \"upload_error_handler assigned:      \", (typeof this.settings.upload_error_handler === \"function\").toString(), \"\\n\",\n\t\t\t\"\\t\", \"upload_success_handler assigned:    \", (typeof this.settings.upload_success_handler === \"function\").toString(), \"\\n\",\n\t\t\t\"\\t\", \"upload_complete_handler assigned:   \", (typeof this.settings.upload_complete_handler === \"function\").toString(), \"\\n\",\n\t\t\t\"\\t\", \"debug_handler assigned:             \", (typeof this.settings.debug_handler === \"function\").toString(), \"\\n\"\n\t\t].join(\"\")\n\t);\n};\n/* Note: addSetting and getSetting are no longer used by SWFUpload but are included\n\tthe maintain v2 API compatibility\n*/\nSWFUpload.prototype.addSetting = function (name, value, default_value) {\n    if (value == undefined) {\n        return (this.settings[name] = default_value);\n    } else {\n        return (this.settings[name] = value);\n\t}\n};\nSWFUpload.prototype.getSetting = function (name) {\n    if (this.settings[name] != undefined) {\n        return this.settings[name];\n\t}\n    return \"\";\n};\nSWFUpload.prototype.callFlash = function (functionName, argumentArray) {\n\targumentArray = argumentArray || [];\n\tvar movieElement = this.getMovieElement();\n\tvar returnValue, returnString;\n\ttry {\n\t\treturnString = movieElement.CallFunction('<invoke name=\"' + functionName + '\" returntype=\"javascript\">' + __flash__argumentsToXML(argumentArray, 0) + '</invoke>');\n\t\treturnValue = eval(returnString);\n\t} catch (ex) {\n\t\tthrow \"Call to \" + functionName + \" failed\";\n\t}\n\tif (returnValue != undefined && typeof returnValue.post === \"object\") {\n\t\treturnValue = this.unescapeFilePostParams(returnValue);\n\t}\n\treturn returnValue;\n};\n/* *****************************\n\t-- Flash control methods --\n\tYour UI should use these\n\tto operate SWFUpload\n   ***************************** */\nSWFUpload.prototype.selectFile = function () {\n\tthis.callFlash(\"SelectFile\");\n};\nSWFUpload.prototype.selectFiles = function () {\n\tthis.callFlash(\"SelectFiles\");\n};\nSWFUpload.prototype.startUpload = function (fileID) {\n\tthis.callFlash(\"StartUpload\", [fileID]);\n};\nSWFUpload.prototype.cancelUpload = function (fileID, triggerErrorEvent) {\n\tif (triggerErrorEvent !== false) {\n\t\ttriggerErrorEvent = true;\n\t}\n\tthis.callFlash(\"CancelUpload\", [fileID, triggerErrorEvent]);\n};\nSWFUpload.prototype.stopUpload = function () {\n\tthis.callFlash(\"StopUpload\");\n};\n/* ************************\n * Settings methods\n *   These methods change the SWFUpload settings.\n *   SWFUpload settings should not be changed directly on the settings object\n *   since many of the settings need to be passed to Flash in order to take\n *   effect.\n * *********************** */\nSWFUpload.prototype.getStats = function () {\n\treturn this.callFlash(\"GetStats\");\n};\nSWFUpload.prototype.setStats = function (statsObject) {\n\tthis.callFlash(\"SetStats\", [statsObject]);\n};\nSWFUpload.prototype.getFile = function (fileID) {\n\tif (typeof(fileID) === \"number\") {\n\t\treturn this.callFlash(\"GetFileByIndex\", [fileID]);\n\t} else {\n\t\treturn this.callFlash(\"GetFile\", [fileID]);\n\t}\n};\nSWFUpload.prototype.addFileParam = function (fileID, name, value) {\n\treturn this.callFlash(\"AddFileParam\", [fileID, name, value]);\n};\nSWFUpload.prototype.removeFileParam = function (fileID, name) {\n\tthis.callFlash(\"RemoveFileParam\", [fileID, name]);\n};\nSWFUpload.prototype.setUploadURL = function (url) {\n\tthis.settings.upload_url = url.toString();\n\tthis.callFlash(\"SetUploadURL\", [url]);\n};\nSWFUpload.prototype.setPostParams = function (paramsObject) {\n\tthis.settings.post_params = paramsObject;\n\tthis.callFlash(\"SetPostParams\", [paramsObject]);\n};\nSWFUpload.prototype.addPostParam = function (name, value) {\n\tthis.settings.post_params[name] = value;\n\tthis.callFlash(\"SetPostParams\", [this.settings.post_params]);\n};\nSWFUpload.prototype.removePostParam = function (name) {\n\tdelete this.settings.post_params[name];\n\tthis.callFlash(\"SetPostParams\", [this.settings.post_params]);\n};\nSWFUpload.prototype.setFileTypes = function (types, description) {\n\tthis.settings.file_types = types;\n\tthis.settings.file_types_description = description;\n\tthis.callFlash(\"SetFileTypes\", [types, description]);\n};\nSWFUpload.prototype.setFileSizeLimit = function (fileSizeLimit) {\n\tthis.settings.file_size_limit = fileSizeLimit;\n\tthis.callFlash(\"SetFileSizeLimit\", [fileSizeLimit]);\n};\nSWFUpload.prototype.setFileUploadLimit = function (fileUploadLimit) {\n\tthis.settings.file_upload_limit = fileUploadLimit;\n\tthis.callFlash(\"SetFileUploadLimit\", [fileUploadLimit]);\n};\nSWFUpload.prototype.setFileQueueLimit = function (fileQueueLimit) {\n\tthis.settings.file_queue_limit = fileQueueLimit;\n\tthis.callFlash(\"SetFileQueueLimit\", [fileQueueLimit]);\n};\nSWFUpload.prototype.setFilePostName = function (filePostName) {\n\tthis.settings.file_post_name = filePostName;\n\tthis.callFlash(\"SetFilePostName\", [filePostName]);\n};\nSWFUpload.prototype.setUseQueryString = function (useQueryString) {\n\tthis.settings.use_query_string = useQueryString;\n\tthis.callFlash(\"SetUseQueryString\", [useQueryString]);\n};\nSWFUpload.prototype.setRequeueOnError = function (requeueOnError) {\n\tthis.settings.requeue_on_error = requeueOnError;\n\tthis.callFlash(\"SetRequeueOnError\", [requeueOnError]);\n};\nSWFUpload.prototype.setHTTPSuccess = function (http_status_codes) {\n\tif (typeof http_status_codes === \"string\") {\n\t\thttp_status_codes = http_status_codes.replace(\" \", \"\").split(\",\");\n\t}\n\tthis.settings.http_success = http_status_codes;\n\tthis.callFlash(\"SetHTTPSuccess\", [http_status_codes]);\n};\nSWFUpload.prototype.setAssumeSuccessTimeout = function (timeout_seconds) {\n\tthis.settings.assume_success_timeout = timeout_seconds;\n\tthis.callFlash(\"SetAssumeSuccessTimeout\", [timeout_seconds]);\n};\nSWFUpload.prototype.setDebugEnabled = function (debugEnabled) {\n\tthis.settings.debug_enabled = debugEnabled;\n\tthis.callFlash(\"SetDebugEnabled\", [debugEnabled]);\n};\nSWFUpload.prototype.setButtonImageURL = function (buttonImageURL) {\n\tif (buttonImageURL == undefined) {\n\t\tbuttonImageURL = \"\";\n\t}\n\tthis.settings.button_image_url = buttonImageURL;\n\tthis.callFlash(\"SetButtonImageURL\", [buttonImageURL]);\n};\nSWFUpload.prototype.setButtonDimensions = function (width, height) {\n\tthis.settings.button_width = width;\n\tthis.settings.button_height = height;\n\tvar movie = this.getMovieElement();\n\tif (movie != undefined) {\n\t\tmovie.style.width = width + \"px\";\n\t\tmovie.style.height = height + \"px\";\n\t}\n\tthis.callFlash(\"SetButtonDimensions\", [width, height]);\n};\nSWFUpload.prototype.setButtonText = function (html) {\n\tthis.settings.button_text = html;\n\tthis.callFlash(\"SetButtonText\", [html]);\n};\nSWFUpload.prototype.setButtonTextPadding = function (left, top) {\n\tthis.settings.button_text_top_padding = top;\n\tthis.settings.button_text_left_padding = left;\n\tthis.callFlash(\"SetButtonTextPadding\", [left, top]);\n};\nSWFUpload.prototype.setButtonTextStyle = function (css) {\n\tthis.settings.button_text_style = css;\n\tthis.callFlash(\"SetButtonTextStyle\", [css]);\n};\nSWFUpload.prototype.setButtonDisabled = function (isDisabled) {\n\tthis.settings.button_disabled = isDisabled;\n\tthis.callFlash(\"SetButtonDisabled\", [isDisabled]);\n};\nSWFUpload.prototype.setButtonAction = function (buttonAction) {\n\tthis.settings.button_action = buttonAction;\n\tthis.callFlash(\"SetButtonAction\", [buttonAction]);\n};\nSWFUpload.prototype.setButtonCursor = function (cursor) {\n\tthis.settings.button_cursor = cursor;\n\tthis.callFlash(\"SetButtonCursor\", [cursor]);\n};\n/* *******************************\n\tFlash Event Interfaces\n\tThese functions are used by Flash to trigger the various\n\tevents.\n\tAll these functions a Private.\n\tBecause the ExternalInterface library is buggy the event calls\n\tare added to a queue and the queue then executed by a setTimeout.\n\tThis ensures that events are executed in a determinate order and that\n\tthe ExternalInterface bugs are avoided.\n******************************* */\nSWFUpload.prototype.queueEvent = function (handlerName, argumentArray) {\n\tif (argumentArray == undefined) {\n\t\targumentArray = [];\n\t} else if (!(argumentArray instanceof Array)) {\n\t\targumentArray = [argumentArray];\n\t}\n\tvar self = this;\n\tif (typeof this.settings[handlerName] === \"function\") {\n\t\tthis.eventQueue.push(function () {\n\t\t\tthis.settings[handlerName].apply(this, argumentArray);\n\t\t});\n\t\tsetTimeout(function () {\n\t\t\tself.executeNextEvent();\n\t\t}, 0);\n\t} else if (this.settings[handlerName] !== null) {\n\t\tthrow \"Event handler \" + handlerName + \" is unknown or is not a function\";\n\t}\n};\nSWFUpload.prototype.executeNextEvent = function () {\n\tvar  f = this.eventQueue ? this.eventQueue.shift() : null;\n\tif (typeof(f) === \"function\") {\n\t\tf.apply(this);\n\t}\n};\nSWFUpload.prototype.unescapeFilePostParams = function (file) {\n\tvar reg = /[$]([0-9a-f]{4})/i;\n\tvar unescapedPost = {};\n\tvar uk;\n\tif (file != undefined) {\n\t\tfor (var k in file.post) {\n\t\t\tif (file.post.hasOwnProperty(k)) {\n\t\t\t\tuk = k;\n\t\t\t\tvar match;\n\t\t\t\twhile ((match = reg.exec(uk)) !== null) {\n\t\t\t\t\tuk = uk.replace(match[0], String.fromCharCode(parseInt(\"0x\" + match[1], 16)));\n\t\t\t\t}\n\t\t\t\tunescapedPost[uk] = file.post[k];\n\t\t\t}\n\t\t}\n\t\tfile.post = unescapedPost;\n\t}\n\treturn file;\n};\nSWFUpload.prototype.testExternalInterface = function () {\n\ttry {\n\t\treturn this.callFlash(\"TestExternalInterface\");\n\t} catch (ex) {\n\t\treturn false;\n\t}\n};\nSWFUpload.prototype.flashReady = function () {\n\tvar movieElement = this.getMovieElement();\n\tif (!movieElement) {\n\t\tthis.debug(\"Flash called back ready but the flash movie can't be found.\");\n\t\treturn;\n\t}\n\tthis.cleanUp(movieElement);\n\tthis.queueEvent(\"swfupload_loaded_handler\");\n};\nSWFUpload.prototype.cleanUp = function (movieElement) {\n\ttry {\n\t\tif (this.movieElement && typeof(movieElement.CallFunction) === \"unknown\") {\n\t\t\tthis.debug(\"Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)\");\n\t\t\tfor (var key in movieElement) {\n\t\t\t\ttry {\n\t\t\t\t\tif (typeof(movieElement[key]) === \"function\") {\n\t\t\t\t\t\tmovieElement[key] = null;\n\t\t\t\t\t}\n\t\t\t\t} catch (ex) {\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} catch (ex1) {\n\t}\n\twindow[\"__flash__removeCallback\"] = function (instance, name) {\n\t\ttry {\n\t\t\tif (instance) {\n\t\t\t\tinstance[name] = null;\n\t\t\t}\n\t\t} catch (flashEx) {\n\t\t}\n\t};\n};\n/* This is a chance to do something before the browse window opens */\nSWFUpload.prototype.fileDialogStart = function () {\n\tthis.queueEvent(\"file_dialog_start_handler\");\n};\n/* Called when a file is successfully added to the queue. */\nSWFUpload.prototype.fileQueued = function (file) {\n\tfile = this.unescapeFilePostParams(file);\n\tthis.queueEvent(\"file_queued_handler\", file);\n};\n/* Handle errors that occur when an attempt to queue a file fails. */\nSWFUpload.prototype.fileQueueError = function (file, errorCode, message) {\n\tfile = this.unescapeFilePostParams(file);\n\tthis.queueEvent(\"file_queue_error_handler\", [file, errorCode, message]);\n};\n/* Called after the file dialog has closed and the selected files have been queued.\n\tYou could call startUpload here if you want the queued files to begin uploading immediately. */\nSWFUpload.prototype.fileDialogComplete = function (numFilesSelected, numFilesQueued, numFilesInQueue) {\n\tthis.queueEvent(\"file_dialog_complete_handler\", [numFilesSelected, numFilesQueued, numFilesInQueue]);\n};\nSWFUpload.prototype.uploadStart = function (file) {\n\tfile = this.unescapeFilePostParams(file);\n\tthis.queueEvent(\"return_upload_start_handler\", file);\n};\nSWFUpload.prototype.returnUploadStart = function (file) {\n\tvar returnValue;\n\tif (typeof this.settings.upload_start_handler === \"function\") {\n\t\tfile = this.unescapeFilePostParams(file);\n\t\treturnValue = this.settings.upload_start_handler.call(this, file);\n\t} else if (this.settings.upload_start_handler != undefined) {\n\t\tthrow \"upload_start_handler must be a function\";\n\t}\n\tif (returnValue === undefined) {\n\t\treturnValue = true;\n\t}\n\treturnValue = !!returnValue;\n\tthis.callFlash(\"ReturnUploadStart\", [returnValue]);\n};\nSWFUpload.prototype.uploadProgress = function (file, bytesComplete, bytesTotal) {\n\tfile = this.unescapeFilePostParams(file);\n\tthis.queueEvent(\"upload_progress_handler\", [file, bytesComplete, bytesTotal]);\n};\nSWFUpload.prototype.uploadError = function (file, errorCode, message) {\n\tfile = this.unescapeFilePostParams(file);\n\tthis.queueEvent(\"upload_error_handler\", [file, errorCode, message]);\n};\nSWFUpload.prototype.uploadSuccess = function (file, serverData, responseReceived) {\n\tfile = this.unescapeFilePostParams(file);\n\tthis.queueEvent(\"upload_success_handler\", [file, serverData, responseReceived]);\n};\nSWFUpload.prototype.uploadComplete = function (file) {\n\tfile = this.unescapeFilePostParams(file);\n\tthis.queueEvent(\"upload_complete_handler\", file);\n};\n/* Called by SWFUpload JavaScript and Flash functions when debug is enabled. By default it writes messages to the\n   internal debug console.  You can override this event and have messages written where you want. */\nSWFUpload.prototype.debug = function (message) {\n\tthis.queueEvent(\"debug_handler\", message);\n};\n/* **********************************\n\tDebug Console\n\tThe debug console is a self contained, in page location\n\tfor debug message to be sent.  The Debug Console adds\n\titself to the body if necessary.\n\tThe console is automatically scrolled as messages appear.\n\tIf you are using your own debug handler or when you deploy to production and\n\thave debug disabled you can remove these functions to reduce the file size\n\tand complexity.\n********************************** */\nSWFUpload.prototype.debugMessage = function (message) {\n\tif (this.settings.debug) {\n\t\tvar exceptionMessage, exceptionValues = [];\n\t\tif (typeof message === \"object\" && typeof message.name === \"string\" && typeof message.message === \"string\") {\n\t\t\tfor (var key in message) {\n\t\t\t\tif (message.hasOwnProperty(key)) {\n\t\t\t\t\texceptionValues.push(key + \": \" + message[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t\texceptionMessage = exceptionValues.join(\"\\n\") || \"\";\n\t\t\texceptionValues = exceptionMessage.split(\"\\n\");\n\t\t\texceptionMessage = \"EXCEPTION: \" + exceptionValues.join(\"\\nEXCEPTION: \");\n\t\t\tSWFUpload.Console.writeLine(exceptionMessage);\n\t\t} else {\n\t\t\tSWFUpload.Console.writeLine(message);\n\t\t}\n\t}\n};\nSWFUpload.Console = {};\nSWFUpload.Console.writeLine = function (message) {\n\tvar console, documentForm;\n\ttry {\n\t\tconsole = document.getElementById(\"SWFUpload_Console\");\n\t\tif (!console) {\n\t\t\tdocumentForm = document.createElement(\"form\");\n\t\t\tdocument.getElementsByTagName(\"body\")[0].appendChild(documentForm);\n\t\t\tconsole = document.createElement(\"textarea\");\n\t\t\tconsole.id = \"SWFUpload_Console\";\n\t\t\tconsole.style.fontFamily = \"monospace\";\n\t\t\tconsole.setAttribute(\"wrap\", \"off\");\n\t\t\tconsole.wrap = \"off\";\n\t\t\tconsole.style.overflow = \"auto\";\n\t\t\tconsole.style.width = \"700px\";\n\t\t\tconsole.style.height = \"350px\";\n\t\t\tconsole.style.margin = \"5px\";\n\t\t\tdocumentForm.appendChild(console);\n\t\t}\n\t\tconsole.value += message + \"\\n\";\n\t\tconsole.scrollTop = console.scrollHeight - console.clientHeight;\n\t} catch (ex) {\n\t\talert(\"Exception: \" + ex.name + \" Message: \" + ex.message);\n\t}\n};\n})();\n(function() {\n/*\n\tQueue Plug-in\n\tFeatures:\n\t\t*Adds a cancelQueue() method for cancelling the entire queue.\n\t\t*All queued files are uploaded when startUpload() is called.\n\t\t*If false is returned from uploadComplete then the queue upload is stopped.\n\t\t If false is not returned (strict comparison) then the queue upload is continued.\n\t\t*Adds a QueueComplete event that is fired when all the queued files have finished uploading.\n\t\t Set the event handler with the queue_complete_handler setting.\n\t*/\nif (typeof(SWFUpload) === \"function\") {\n\tSWFUpload.queue = {};\n\tSWFUpload.prototype.initSettings = (function (oldInitSettings) {\n\t\treturn function () {\n\t\t\tif (typeof(oldInitSettings) === \"function\") {\n\t\t\t\toldInitSettings.call(this);\n\t\t\t}\n\t\t\tthis.queueSettings = {};\n\t\t\tthis.queueSettings.queue_cancelled_flag = false;\n\t\t\tthis.queueSettings.queue_upload_count = 0;\n\t\t\tthis.queueSettings.user_upload_complete_handler = this.settings.upload_complete_handler;\n\t\t\tthis.queueSettings.user_upload_start_handler = this.settings.upload_start_handler;\n\t\t\tthis.settings.upload_complete_handler = SWFUpload.queue.uploadCompleteHandler;\n\t\t\tthis.settings.upload_start_handler = SWFUpload.queue.uploadStartHandler;\n\t\t\tthis.settings.queue_complete_handler = this.settings.queue_complete_handler || null;\n\t\t};\n\t})(SWFUpload.prototype.initSettings);\n\tSWFUpload.prototype.startUpload = function (fileID) {\n\t\tthis.queueSettings.queue_cancelled_flag = false;\n\t\tthis.callFlash(\"StartUpload\", [fileID]);\n\t};\n\tSWFUpload.prototype.cancelQueue = function () {\n\t\tthis.queueSettings.queue_cancelled_flag = true;\n\t\tthis.stopUpload();\n\t\tvar stats = this.getStats();\n\t\twhile (stats.files_queued > 0) {\n\t\t\tthis.cancelUpload();\n\t\t\tstats = this.getStats();\n\t\t}\n\t};\n\tSWFUpload.queue.uploadStartHandler = function (file) {\n\t\tvar returnValue;\n\t\tif (typeof(this.queueSettings.user_upload_start_handler) === \"function\") {\n\t\t\treturnValue = this.queueSettings.user_upload_start_handler.call(this, file);\n\t\t}\n\t\treturnValue = (returnValue === false) ? false : true;\n\t\tthis.queueSettings.queue_cancelled_flag = !returnValue;\n\t\treturn returnValue;\n\t};\n\tSWFUpload.queue.uploadCompleteHandler = function (file) {\n\t\tvar user_upload_complete_handler = this.queueSettings.user_upload_complete_handler;\n\t\tvar continueUpload;\n\t\tif (file.filestatus === SWFUpload.FILE_STATUS.COMPLETE) {\n\t\t\tthis.queueSettings.queue_upload_count++;\n\t\t}\n\t\tif (typeof(user_upload_complete_handler) === \"function\") {\n\t\t\tcontinueUpload = (user_upload_complete_handler.call(this, file) === false) ? false : true;\n\t\t} else if (file.filestatus === SWFUpload.FILE_STATUS.QUEUED) {\n\t\t\tcontinueUpload = false;\n\t\t} else {\n\t\t\tcontinueUpload = true;\n\t\t}\n\t\tif (continueUpload) {\n\t\t\tvar stats = this.getStats();\n\t\t\tif (stats.files_queued > 0 && this.queueSettings.queue_cancelled_flag === false) {\n\t\t\t\tthis.startUpload();\n\t\t\t} else if (this.queueSettings.queue_cancelled_flag === false) {\n\t\t\t\tthis.queueEvent(\"queue_complete_handler\", [this.queueSettings.queue_upload_count]);\n\t\t\t\tthis.queueSettings.queue_upload_count = 0;\n\t\t\t} else {\n\t\t\t\tthis.queueSettings.queue_cancelled_flag = false;\n\t\t\t\tthis.queueSettings.queue_upload_count = 0;\n\t\t\t}\n\t\t}\n\t};\n}\n})();\n\n/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2011 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @site http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n*******************************************************************************/\r\nKindEditor.plugin('pagebreak', function(K) {\r\n\tvar self = this;\r\n\tvar name = 'pagebreak';\r\n\tvar pagebreakHtml = K.undef(self.pagebreakHtml, '<hr style=\"page-break-after: always;\" class=\"ke-pagebreak\" />');\r\n\tself.clickToolbar(name, function() {\r\n\t\tvar cmd = self.cmd, range = cmd.range;\r\n\t\tself.focus();\r\n\t\tvar tail = self.newlineTag == 'br' || K.WEBKIT ? '' : '<span id=\"__kindeditor_tail_tag__\"></span>';\r\n\t\tself.insertHtml(pagebreakHtml + tail);\r\n\t\tif (tail !== '') {\r\n\t\t\tvar p = K('#__kindeditor_tail_tag__', self.edit.doc);\r\n\t\t\trange.selectNodeContents(p[0]);\r\n\t\t\tp.removeAttr('id');\r\n\t\t\tcmd.select();\r\n\t\t}\r\n\t});\r\n});\r\n\n/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2011 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @site http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n*******************************************************************************/\r\nKindEditor.plugin('plainpaste', function(K) {\r\n\tvar self = this, name = 'plainpaste';\r\n\tself.clickToolbar(name, function() {\r\n\t\tvar lang = self.lang(name + '.'),\r\n\t\t\thtml = '<div style=\"padding:10px 20px;\">' +\r\n\t\t\t\t'<div style=\"margin-bottom:10px;\">' + lang.comment + '</div>' +\r\n\t\t\t\t'<textarea class=\"ke-textarea\" style=\"width:408px;height:260px;\"></textarea>' +\r\n\t\t\t\t'</div>',\r\n\t\t\tdialog = self.createDialog({\r\n\t\t\t\tname : name,\r\n\t\t\t\twidth : 450,\r\n\t\t\t\ttitle : self.lang(name),\r\n\t\t\t\tbody : html,\r\n\t\t\t\tyesBtn : {\r\n\t\t\t\t\tname : self.lang('yes'),\r\n\t\t\t\t\tclick : function(e) {\r\n\t\t\t\t\t\tvar html = textarea.val();\r\n\t\t\t\t\t\thtml = K.escape(html);\r\n\t\t\t\t\t\thtml = html.replace(/ {2}/g, ' &nbsp;');\r\n\t\t\t\t\t\tif (self.newlineTag == 'p') {\r\n\t\t\t\t\t\t\thtml = html.replace(/^/, '<p>').replace(/$/, '</p>').replace(/\\n/g, '</p><p>');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\thtml = html.replace(/\\n/g, '<br />$&');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.insertHtml(html).hideDialog().focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\ttextarea = K('textarea', dialog.div);\r\n\t\ttextarea[0].focus();\r\n\t});\r\n});\r\n\n/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2011 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @site http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n*******************************************************************************/\r\nKindEditor.plugin('preview', function(K) {\r\n\tvar self = this, name = 'preview', undefined;\r\n\tself.clickToolbar(name, function() {\r\n\t\tvar lang = self.lang(name + '.'),\r\n\t\t\thtml = '<div style=\"padding:10px 20px;\">' +\r\n\t\t\t\t'<iframe class=\"ke-textarea\" frameborder=\"0\" style=\"width:708px;height:400px;\"></iframe>' +\r\n\t\t\t\t'</div>',\r\n\t\t\tdialog = self.createDialog({\r\n\t\t\t\tname : name,\r\n\t\t\t\twidth : 750,\r\n\t\t\t\ttitle : self.lang(name),\r\n\t\t\t\tbody : html\r\n\t\t\t}),\r\n\t\t\tiframe = K('iframe', dialog.div),\r\n\t\t\tdoc = K.iframeDoc(iframe);\r\n\t\tdoc.open();\r\n\t\tdoc.write(self.fullHtml());\r\n\t\tdoc.close();\r\n\t\tK(doc.body).css('background-color', '#FFF');\r\n\t\tiframe[0].contentWindow.focus();\r\n\t});\r\n});\r\n\n/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2011 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @site http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n*******************************************************************************/\r\nKindEditor.plugin('quickformat', function(K) {\r\n\tvar self = this, name = 'quickformat',\r\n\t\tblockMap = K.toMap('blockquote,center,div,h1,h2,h3,h4,h5,h6,p');\r\n\tfunction getFirstChild(knode) {\r\n\t\tvar child = knode.first();\r\n\t\twhile (child && child.first()) {\r\n\t\t\tchild = child.first();\r\n\t\t}\r\n\t\treturn child;\r\n\t}\r\n\tself.clickToolbar(name, function() {\r\n\t\tself.focus();\r\n\t\tvar doc = self.edit.doc,\r\n\t\t\trange = self.cmd.range,\r\n\t\t\tchild = K(doc.body).first(), next,\r\n\t\t\tnodeList = [], subList = [],\r\n\t\t\tbookmark = range.createBookmark(true);\r\n\t\twhile(child) {\r\n\t\t\tnext = child.next();\r\n\t\t\tvar firstChild = getFirstChild(child);\r\n\t\t\tif (!firstChild || firstChild.name != 'img') {\r\n\t\t\t\tif (blockMap[child.name]) {\r\n\t\t\t\t\tchild.html(child.html().replace(/^(\\s|&nbsp;|)+/ig, ''));\r\n\t\t\t\t\tchild.css('text-indent', '2em');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsubList.push(child);\r\n\t\t\t\t}\r\n\t\t\t\tif (!next || (blockMap[next.name] || blockMap[child.name] && !blockMap[next.name])) {\r\n\t\t\t\t\tif (subList.length > 0) {\r\n\t\t\t\t\t\tnodeList.push(subList);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsubList = [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tchild = next;\r\n\t\t}\r\n\t\tK.each(nodeList, function(i, subList) {\r\n\t\t\tvar wrapper = K('<p style=\"text-indent:2em;\"></p>', doc);\r\n\t\t\tsubList[0].before(wrapper);\r\n\t\t\tK.each(subList, function(i, knode) {\r\n\t\t\t\twrapper.append(knode);\r\n\t\t\t});\r\n\t\t});\r\n\t\trange.moveToBookmark(bookmark);\r\n\t\tself.addBookmark();\r\n\t});\r\n});\r\n\n/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2011 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @site http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n*******************************************************************************/\r\nKindEditor.plugin('table', function(K) {\r\n\tvar self = this, name = 'table', lang = self.lang(name + '.'), zeroborder = 'ke-zeroborder';\r\n\tfunction _setColor(box, color) {\r\n\t\tcolor = color.toUpperCase();\r\n\t\tbox.css('background-color', color);\r\n\t\tbox.css('color', color === '#000000' ? '#FFFFFF' : '#000000');\r\n\t\tbox.html(color);\r\n\t}\r\n\tvar pickerList = [];\r\n\tfunction _initColorPicker(dialogDiv, colorBox) {\r\n\t\tcolorBox.bind('click,mousedown', function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\t\tfunction removePicker() {\r\n\t\t\tK.each(pickerList, function() {\r\n\t\t\t\tthis.remove();\r\n\t\t\t});\r\n\t\t\tpickerList = [];\r\n\t\t\tK(document).unbind('click,mousedown', removePicker);\r\n\t\t\tdialogDiv.unbind('click,mousedown', removePicker);\r\n\t\t}\r\n\t\tcolorBox.click(function(e) {\r\n\t\t\tremovePicker();\r\n\t\t\tvar box = K(this),\r\n\t\t\t\tpos = box.pos();\r\n\t\t\tvar picker = K.colorpicker({\r\n\t\t\t\tx : pos.x,\r\n\t\t\t\ty : pos.y + box.height(),\r\n\t\t\t\tz : 811214,\r\n\t\t\t\tselectedColor : K(this).html(),\r\n\t\t\t\tcolors : self.colorTable,\r\n\t\t\t\tnoColor : self.lang('noColor'),\r\n\t\t\t\tshadowMode : self.shadowMode,\r\n\t\t\t\tclick : function(color) {\r\n\t\t\t\t\t_setColor(box, color);\r\n\t\t\t\t\tremovePicker();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tpickerList.push(picker);\r\n\t\t\tK(document).bind('click,mousedown', removePicker);\r\n\t\t\tdialogDiv.bind('click,mousedown', removePicker);\r\n\t\t});\r\n\t}\r\n\tfunction _getCellIndex(table, row, cell) {\r\n\t\tvar rowSpanCount = 0;\r\n\t\tfor (var i = 0, len = row.cells.length; i < len; i++) {\r\n\t\t\tif (row.cells[i] == cell) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\trowSpanCount += row.cells[i].rowSpan - 1;\r\n\t\t}\r\n\t\treturn cell.cellIndex - rowSpanCount;\r\n\t}\r\n\tself.plugin.table = {\r\n\t\tprop : function(isInsert) {\r\n\t\t\tvar html = [\r\n\t\t\t\t'<div style=\"padding:20px;\">',\r\n\t\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t\t'<label for=\"keRows\" style=\"width:90px;\">' + lang.cells + '</label>',\r\n\t\t\t\tlang.rows + ' <input type=\"text\" id=\"keRows\" class=\"ke-input-text ke-input-number\" name=\"rows\" value=\"\" maxlength=\"4\" /> &nbsp; ',\r\n\t\t\t\tlang.cols + ' <input type=\"text\" class=\"ke-input-text ke-input-number\" name=\"cols\" value=\"\" maxlength=\"4\" />',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t\t'<label for=\"keWidth\" style=\"width:90px;\">' + lang.size + '</label>',\r\n\t\t\t\tlang.width + ' <input type=\"text\" id=\"keWidth\" class=\"ke-input-text ke-input-number\" name=\"width\" value=\"\" maxlength=\"4\" /> &nbsp; ',\r\n\t\t\t\t'<select name=\"widthType\">',\r\n\t\t\t\t'<option value=\"%\">' + lang.percent + '</option>',\r\n\t\t\t\t'<option value=\"px\">' + lang.px + '</option>',\r\n\t\t\t\t'</select> &nbsp; ',\r\n\t\t\t\tlang.height + ' <input type=\"text\" class=\"ke-input-text ke-input-number\" name=\"height\" value=\"\" maxlength=\"4\" /> &nbsp; ',\r\n\t\t\t\t'<select name=\"heightType\">',\r\n\t\t\t\t'<option value=\"%\">' + lang.percent + '</option>',\r\n\t\t\t\t'<option value=\"px\">' + lang.px + '</option>',\r\n\t\t\t\t'</select>',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t\t'<label for=\"kePadding\" style=\"width:90px;\">' + lang.space + '</label>',\r\n\t\t\t\tlang.padding + ' <input type=\"text\" id=\"kePadding\" class=\"ke-input-text ke-input-number\" name=\"padding\" value=\"\" maxlength=\"4\" /> &nbsp; ',\r\n\t\t\t\tlang.spacing + ' <input type=\"text\" class=\"ke-input-text ke-input-number\" name=\"spacing\" value=\"\" maxlength=\"4\" />',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t\t'<label for=\"keAlign\" style=\"width:90px;\">' + lang.align + '</label>',\r\n\t\t\t\t'<select id=\"keAlign\" name=\"align\">',\r\n\t\t\t\t'<option value=\"\">' + lang.alignDefault + '</option>',\r\n\t\t\t\t'<option value=\"left\">' + lang.alignLeft + '</option>',\r\n\t\t\t\t'<option value=\"center\">' + lang.alignCenter + '</option>',\r\n\t\t\t\t'<option value=\"right\">' + lang.alignRight + '</option>',\r\n\t\t\t\t'</select>',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t\t'<label for=\"keBorder\" style=\"width:90px;\">' + lang.border + '</label>',\r\n\t\t\t\tlang.borderWidth + ' <input type=\"text\" id=\"keBorder\" class=\"ke-input-text ke-input-number\" name=\"border\" value=\"\" maxlength=\"4\" /> &nbsp; ',\r\n\t\t\t\tlang.borderColor + ' <span class=\"ke-inline-block ke-input-color\"></span>',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t\t'<label for=\"keBgColor\" style=\"width:90px;\">' + lang.backgroundColor + '</label>',\r\n\t\t\t\t'<span class=\"ke-inline-block ke-input-color\"></span>',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'</div>'\r\n\t\t\t].join('');\r\n\t\t\tvar bookmark = self.cmd.range.createBookmark();\r\n\t\t\tvar dialog = self.createDialog({\r\n\t\t\t\tname : name,\r\n\t\t\t\twidth : 500,\r\n\t\t\t\ttitle : self.lang(name),\r\n\t\t\t\tbody : html,\r\n\t\t\t\tbeforeRemove : function() {\r\n\t\t\t\t\tcolorBox.unbind();\r\n\t\t\t\t},\r\n\t\t\t\tyesBtn : {\r\n\t\t\t\t\tname : self.lang('yes'),\r\n\t\t\t\t\tclick : function(e) {\r\n\t\t\t\t\t\tvar rows = rowsBox.val(),\r\n\t\t\t\t\t\t\tcols = colsBox.val(),\r\n\t\t\t\t\t\t\twidth = widthBox.val(),\r\n\t\t\t\t\t\t\theight = heightBox.val(),\r\n\t\t\t\t\t\t\twidthType = widthTypeBox.val(),\r\n\t\t\t\t\t\t\theightType = heightTypeBox.val(),\r\n\t\t\t\t\t\t\tpadding = paddingBox.val(),\r\n\t\t\t\t\t\t\tspacing = spacingBox.val(),\r\n\t\t\t\t\t\t\talign = alignBox.val(),\r\n\t\t\t\t\t\t\tborder = borderBox.val(),\r\n\t\t\t\t\t\t\tborderColor = K(colorBox[0]).html() || '',\r\n\t\t\t\t\t\t\tbgColor = K(colorBox[1]).html() || '';\r\n\t\t\t\t\t\tif (rows == 0 || !/^\\d+$/.test(rows)) {\r\n\t\t\t\t\t\t\talert(self.lang('invalidRows'));\r\n\t\t\t\t\t\t\trowsBox[0].focus();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (cols == 0 || !/^\\d+$/.test(cols)) {\r\n\t\t\t\t\t\t\talert(self.lang('invalidRows'));\r\n\t\t\t\t\t\t\tcolsBox[0].focus();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!/^\\d*$/.test(width)) {\r\n\t\t\t\t\t\t\talert(self.lang('invalidWidth'));\r\n\t\t\t\t\t\t\twidthBox[0].focus();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!/^\\d*$/.test(height)) {\r\n\t\t\t\t\t\t\talert(self.lang('invalidHeight'));\r\n\t\t\t\t\t\t\theightBox[0].focus();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!/^\\d*$/.test(padding)) {\r\n\t\t\t\t\t\t\talert(self.lang('invalidPadding'));\r\n\t\t\t\t\t\t\tpaddingBox[0].focus();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!/^\\d*$/.test(spacing)) {\r\n\t\t\t\t\t\t\talert(self.lang('invalidSpacing'));\r\n\t\t\t\t\t\t\tspacingBox[0].focus();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!/^\\d*$/.test(border)) {\r\n\t\t\t\t\t\t\talert(self.lang('invalidBorder'));\r\n\t\t\t\t\t\t\tborderBox[0].focus();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (table) {\r\n\t\t\t\t\t\t\tif (width !== '') {\r\n\t\t\t\t\t\t\t\ttable.width(width + widthType);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttable.css('width', '');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (table[0].width !== undefined) {\r\n\t\t\t\t\t\t\t\ttable.removeAttr('width');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (height !== '') {\r\n\t\t\t\t\t\t\t\ttable.height(height + heightType);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttable.css('height', '');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (table[0].height !== undefined) {\r\n\t\t\t\t\t\t\t\ttable.removeAttr('height');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttable.css('background-color', bgColor);\r\n\t\t\t\t\t\t\tif (table[0].bgColor !== undefined) {\r\n\t\t\t\t\t\t\t\ttable.removeAttr('bgColor');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (padding !== '') {\r\n\t\t\t\t\t\t\t\ttable[0].cellPadding = padding;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttable.removeAttr('cellPadding');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (spacing !== '') {\r\n\t\t\t\t\t\t\t\ttable[0].cellSpacing = spacing;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttable.removeAttr('cellSpacing');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (align !== '') {\r\n\t\t\t\t\t\t\t\ttable[0].align = align;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttable.removeAttr('align');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (border !== '') {\r\n\t\t\t\t\t\t\t\ttable.attr('border', border);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttable.removeAttr('border');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (border === '' || border === '0') {\r\n\t\t\t\t\t\t\t\ttable.addClass(zeroborder);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttable.removeClass(zeroborder);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (borderColor !== '') {\r\n\t\t\t\t\t\t\t\ttable.attr('borderColor', borderColor);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttable.removeAttr('borderColor');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tself.hideDialog().focus();\r\n\t\t\t\t\t\t\tself.cmd.range.moveToBookmark(bookmark);\r\n\t\t\t\t\t\t\tself.cmd.select();\r\n\t\t\t\t\t\t\tself.addBookmark();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar style = '';\r\n\t\t\t\t\t\tif (width !== '') {\r\n\t\t\t\t\t\t\tstyle += 'width:' + width + widthType + ';';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (height !== '') {\r\n\t\t\t\t\t\t\tstyle += 'height:' + height + heightType + ';';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (bgColor !== '') {\r\n\t\t\t\t\t\t\tstyle += 'background-color:' + bgColor + ';';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar html = '<table';\r\n\t\t\t\t\t\tif (style !== '') {\r\n\t\t\t\t\t\t\thtml += ' style=\"' + style + '\"';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (padding !== '') {\r\n\t\t\t\t\t\t\thtml += ' cellpadding=\"' + padding + '\"';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (spacing !== '') {\r\n\t\t\t\t\t\t\thtml += ' cellspacing=\"' + spacing + '\"';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (align !== '') {\r\n\t\t\t\t\t\t\thtml += ' align=\"' + align + '\"';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (border !== '') {\r\n\t\t\t\t\t\t\thtml += ' border=\"' + border + '\"';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (border === '' || border === '0') {\r\n\t\t\t\t\t\t\thtml += ' class=\"' + zeroborder + '\"';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (borderColor !== '') {\r\n\t\t\t\t\t\t\thtml += ' bordercolor=\"' + borderColor + '\"';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thtml += '>';\r\n\t\t\t\t\t\tfor (var i = 0; i < rows; i++) {\r\n\t\t\t\t\t\t\thtml += '<tr>';\r\n\t\t\t\t\t\t\tfor (var j = 0; j < cols; j++) {\r\n\t\t\t\t\t\t\t\thtml += '<td>' + (K.IE ? '&nbsp;' : '<br />') + '</td>';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\thtml += '</tr>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thtml += '</table>';\r\n\t\t\t\t\t\tif (!K.IE) {\r\n\t\t\t\t\t\t\thtml += '<br />';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.insertHtml(html);\r\n\t\t\t\t\t\tself.select().hideDialog().focus();\r\n\t\t\t\t\t\tself.addBookmark();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tdiv = dialog.div,\r\n\t\t\trowsBox = K('[name=\"rows\"]', div).val(3),\r\n\t\t\tcolsBox = K('[name=\"cols\"]', div).val(2),\r\n\t\t\twidthBox = K('[name=\"width\"]', div).val(100),\r\n\t\t\theightBox = K('[name=\"height\"]', div),\r\n\t\t\twidthTypeBox = K('[name=\"widthType\"]', div),\r\n\t\t\theightTypeBox = K('[name=\"heightType\"]', div),\r\n\t\t\tpaddingBox = K('[name=\"padding\"]', div).val(2),\r\n\t\t\tspacingBox = K('[name=\"spacing\"]', div).val(0),\r\n\t\t\talignBox = K('[name=\"align\"]', div),\r\n\t\t\tborderBox = K('[name=\"border\"]', div).val(1),\r\n\t\t\tcolorBox = K('.ke-input-color', div);\r\n\t\t\t_initColorPicker(div, colorBox.eq(0));\r\n\t\t\t_initColorPicker(div, colorBox.eq(1));\r\n\t\t\t_setColor(colorBox.eq(0), '#000000');\r\n\t\t\t_setColor(colorBox.eq(1), '');\r\n\t\t\trowsBox[0].focus();\r\n\t\t\trowsBox[0].select();\r\n\t\t\tvar table;\r\n\t\t\tif (isInsert) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttable = self.plugin.getSelectedTable();\r\n\t\t\tif (table) {\r\n\t\t\t\trowsBox.val(table[0].rows.length);\r\n\t\t\t\tcolsBox.val(table[0].rows.length > 0 ? table[0].rows[0].cells.length : 0);\r\n\t\t\t\trowsBox.attr('disabled', true);\r\n\t\t\t\tcolsBox.attr('disabled', true);\r\n\t\t\t\tvar match,\r\n\t\t\t\t\ttableWidth = table[0].style.width || table[0].width,\r\n\t\t\t\t\ttableHeight = table[0].style.height || table[0].height;\r\n\t\t\t\tif (tableWidth !== undefined && (match = /^(\\d+)((?:px|%)*)$/.exec(tableWidth))) {\r\n\t\t\t\t\twidthBox.val(match[1]);\r\n\t\t\t\t\twidthTypeBox.val(match[2]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\twidthBox.val('');\r\n\t\t\t\t}\r\n\t\t\t\tif (tableHeight !== undefined && (match = /^(\\d+)((?:px|%)*)$/.exec(tableHeight))) {\r\n\t\t\t\t\theightBox.val(match[1]);\r\n\t\t\t\t\theightTypeBox.val(match[2]);\r\n\t\t\t\t}\r\n\t\t\t\tpaddingBox.val(table[0].cellPadding || '');\r\n\t\t\t\tspacingBox.val(table[0].cellSpacing || '');\r\n\t\t\t\talignBox.val(table[0].align || '');\r\n\t\t\t\tborderBox.val(table[0].border === undefined ? '' : table[0].border);\r\n\t\t\t\t_setColor(colorBox.eq(0), K.toHex(table.attr('borderColor') || ''));\r\n\t\t\t\t_setColor(colorBox.eq(1), K.toHex(table[0].style.backgroundColor || table[0].bgColor || ''));\r\n\t\t\t\twidthBox[0].focus();\r\n\t\t\t\twidthBox[0].select();\r\n\t\t\t}\r\n\t\t},\r\n\t\tcellprop : function() {\r\n\t\t\tvar html = [\r\n\t\t\t\t'<div style=\"padding:20px;\">',\r\n\t\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t\t'<label for=\"keWidth\" style=\"width:90px;\">' + lang.size + '</label>',\r\n\t\t\t\tlang.width + ' <input type=\"text\" id=\"keWidth\" class=\"ke-input-text ke-input-number\" name=\"width\" value=\"\" maxlength=\"4\" /> &nbsp; ',\r\n\t\t\t\t'<select name=\"widthType\">',\r\n\t\t\t\t'<option value=\"%\">' + lang.percent + '</option>',\r\n\t\t\t\t'<option value=\"px\">' + lang.px + '</option>',\r\n\t\t\t\t'</select> &nbsp; ',\r\n\t\t\t\tlang.height + ' <input type=\"text\" class=\"ke-input-text ke-input-number\" name=\"height\" value=\"\" maxlength=\"4\" /> &nbsp; ',\r\n\t\t\t\t'<select name=\"heightType\">',\r\n\t\t\t\t'<option value=\"%\">' + lang.percent + '</option>',\r\n\t\t\t\t'<option value=\"px\">' + lang.px + '</option>',\r\n\t\t\t\t'</select>',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t\t'<label for=\"keAlign\" style=\"width:90px;\">' + lang.align + '</label>',\r\n\t\t\t\tlang.textAlign + ' <select id=\"keAlign\" name=\"textAlign\">',\r\n\t\t\t\t'<option value=\"\">' + lang.alignDefault + '</option>',\r\n\t\t\t\t'<option value=\"left\">' + lang.alignLeft + '</option>',\r\n\t\t\t\t'<option value=\"center\">' + lang.alignCenter + '</option>',\r\n\t\t\t\t'<option value=\"right\">' + lang.alignRight + '</option>',\r\n\t\t\t\t'</select> ',\r\n\t\t\t\tlang.verticalAlign + ' <select name=\"verticalAlign\">',\r\n\t\t\t\t'<option value=\"\">' + lang.alignDefault + '</option>',\r\n\t\t\t\t'<option value=\"top\">' + lang.alignTop + '</option>',\r\n\t\t\t\t'<option value=\"middle\">' + lang.alignMiddle + '</option>',\r\n\t\t\t\t'<option value=\"bottom\">' + lang.alignBottom + '</option>',\r\n\t\t\t\t'<option value=\"baseline\">' + lang.alignBaseline + '</option>',\r\n\t\t\t\t'</select>',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t\t'<label for=\"keBorder\" style=\"width:90px;\">' + lang.border + '</label>',\r\n\t\t\t\tlang.borderWidth + ' <input type=\"text\" id=\"keBorder\" class=\"ke-input-text ke-input-number\" name=\"border\" value=\"\" maxlength=\"4\" /> &nbsp; ',\r\n\t\t\t\tlang.borderColor + ' <span class=\"ke-inline-block ke-input-color\"></span>',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"ke-dialog-row\">',\r\n\t\t\t\t'<label for=\"keBgColor\" style=\"width:90px;\">' + lang.backgroundColor + '</label>',\r\n\t\t\t\t'<span class=\"ke-inline-block ke-input-color\"></span>',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'</div>'\r\n\t\t\t].join('');\r\n\t\t\tvar bookmark = self.cmd.range.createBookmark();\r\n\t\t\tvar dialog = self.createDialog({\r\n\t\t\t\tname : name,\r\n\t\t\t\twidth : 500,\r\n\t\t\t\ttitle : self.lang('tablecell'),\r\n\t\t\t\tbody : html,\r\n\t\t\t\tbeforeRemove : function() {\r\n\t\t\t\t\tcolorBox.unbind();\r\n\t\t\t\t},\r\n\t\t\t\tyesBtn : {\r\n\t\t\t\t\tname : self.lang('yes'),\r\n\t\t\t\t\tclick : function(e) {\r\n\t\t\t\t\t\tvar width = widthBox.val(),\r\n\t\t\t\t\t\t\theight = heightBox.val(),\r\n\t\t\t\t\t\t\twidthType = widthTypeBox.val(),\r\n\t\t\t\t\t\t\theightType = heightTypeBox.val(),\r\n\t\t\t\t\t\t\tpadding = paddingBox.val(),\r\n\t\t\t\t\t\t\tspacing = spacingBox.val(),\r\n\t\t\t\t\t\t\ttextAlign = textAlignBox.val(),\r\n\t\t\t\t\t\t\tverticalAlign = verticalAlignBox.val(),\r\n\t\t\t\t\t\t\tborder = borderBox.val(),\r\n\t\t\t\t\t\t\tborderColor = K(colorBox[0]).html() || '',\r\n\t\t\t\t\t\t\tbgColor = K(colorBox[1]).html() || '';\r\n\t\t\t\t\t\tif (!/^\\d*$/.test(width)) {\r\n\t\t\t\t\t\t\talert(self.lang('invalidWidth'));\r\n\t\t\t\t\t\t\twidthBox[0].focus();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!/^\\d*$/.test(height)) {\r\n\t\t\t\t\t\t\talert(self.lang('invalidHeight'));\r\n\t\t\t\t\t\t\theightBox[0].focus();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!/^\\d*$/.test(border)) {\r\n\t\t\t\t\t\t\talert(self.lang('invalidBorder'));\r\n\t\t\t\t\t\t\tborderBox[0].focus();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcell.css({\r\n\t\t\t\t\t\t\twidth : width !== '' ? (width + widthType) : '',\r\n\t\t\t\t\t\t\theight : height !== '' ? (height + heightType) : '',\r\n\t\t\t\t\t\t\t'background-color' : bgColor,\r\n\t\t\t\t\t\t\t'text-align' : textAlign,\r\n\t\t\t\t\t\t\t'vertical-align' : verticalAlign,\r\n\t\t\t\t\t\t\t'border-width' : border,\r\n\t\t\t\t\t\t\t'border-style' : border !== '' ? 'solid' : '',\r\n\t\t\t\t\t\t\t'border-color' : borderColor\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tself.hideDialog().focus();\r\n\t\t\t\t\t\tself.cmd.range.moveToBookmark(bookmark);\r\n\t\t\t\t\t\tself.cmd.select();\r\n\t\t\t\t\t\tself.addBookmark();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tdiv = dialog.div,\r\n\t\t\twidthBox = K('[name=\"width\"]', div).val(100),\r\n\t\t\theightBox = K('[name=\"height\"]', div),\r\n\t\t\twidthTypeBox = K('[name=\"widthType\"]', div),\r\n\t\t\theightTypeBox = K('[name=\"heightType\"]', div),\r\n\t\t\tpaddingBox = K('[name=\"padding\"]', div).val(2),\r\n\t\t\tspacingBox = K('[name=\"spacing\"]', div).val(0),\r\n\t\t\ttextAlignBox = K('[name=\"textAlign\"]', div),\r\n\t\t\tverticalAlignBox = K('[name=\"verticalAlign\"]', div),\r\n\t\t\tborderBox = K('[name=\"border\"]', div).val(1),\r\n\t\t\tcolorBox = K('.ke-input-color', div);\r\n\t\t\t_initColorPicker(div, colorBox.eq(0));\r\n\t\t\t_initColorPicker(div, colorBox.eq(1));\r\n\t\t\t_setColor(colorBox.eq(0), '#000000');\r\n\t\t\t_setColor(colorBox.eq(1), '');\r\n\t\t\twidthBox[0].focus();\r\n\t\t\twidthBox[0].select();\r\n\t\t\tvar cell = self.plugin.getSelectedCell();\r\n\t\t\tvar match,\r\n\t\t\t\tcellWidth = cell[0].style.width || cell[0].width || '',\r\n\t\t\t\tcellHeight = cell[0].style.height || cell[0].height || '';\r\n\t\t\tif ((match = /^(\\d+)((?:px|%)*)$/.exec(cellWidth))) {\r\n\t\t\t\twidthBox.val(match[1]);\r\n\t\t\t\twidthTypeBox.val(match[2]);\r\n\t\t\t} else {\r\n\t\t\t\twidthBox.val('');\r\n\t\t\t}\r\n\t\t\tif ((match = /^(\\d+)((?:px|%)*)$/.exec(cellHeight))) {\r\n\t\t\t\theightBox.val(match[1]);\r\n\t\t\t\theightTypeBox.val(match[2]);\r\n\t\t\t}\r\n\t\t\ttextAlignBox.val(cell[0].style.textAlign || '');\r\n\t\t\tverticalAlignBox.val(cell[0].style.verticalAlign || '');\r\n\t\t\tvar border = cell[0].style.borderWidth || '';\r\n\t\t\tif (border) {\r\n\t\t\t\tborder = parseInt(border);\r\n\t\t\t}\r\n\t\t\tborderBox.val(border);\r\n\t\t\t_setColor(colorBox.eq(0), K.toHex(cell[0].style.borderColor || ''));\r\n\t\t\t_setColor(colorBox.eq(1), K.toHex(cell[0].style.backgroundColor || ''));\r\n\t\t\twidthBox[0].focus();\r\n\t\t\twidthBox[0].select();\r\n\t\t},\r\n\t\tinsert : function() {\r\n\t\t\tthis.prop(true);\r\n\t\t},\r\n\t\t'delete' : function() {\r\n\t\t\tvar table = self.plugin.getSelectedTable();\r\n\t\t\tself.cmd.range.setStartBefore(table[0]).collapse(true);\r\n\t\t\tself.cmd.select();\r\n\t\t\ttable.remove();\r\n\t\t\tself.addBookmark();\r\n\t\t},\r\n\t\tcolinsert : function(offset) {\r\n\t\t\tvar table = self.plugin.getSelectedTable()[0],\r\n\t\t\t\trow = self.plugin.getSelectedRow()[0],\r\n\t\t\t\tcell = self.plugin.getSelectedCell()[0],\r\n\t\t\t\tindex = cell.cellIndex + offset;\r\n\t\t\tindex += table.rows[0].cells.length - row.cells.length;\r\n\t\t\tfor (var i = 0, len = table.rows.length; i < len; i++) {\r\n\t\t\t\tvar newRow = table.rows[i],\r\n\t\t\t\t\tnewCell = newRow.insertCell(index);\r\n\t\t\t\tnewCell.innerHTML = K.IE ? '' : '<br />';\r\n\t\t\t\tindex = _getCellIndex(table, newRow, newCell);\r\n\t\t\t}\r\n\t\t\tself.cmd.range.selectNodeContents(cell).collapse(true);\r\n\t\t\tself.cmd.select();\r\n\t\t\tself.addBookmark();\r\n\t\t},\r\n\t\tcolinsertleft : function() {\r\n\t\t\tthis.colinsert(0);\r\n\t\t},\r\n\t\tcolinsertright : function() {\r\n\t\t\tthis.colinsert(1);\r\n\t\t},\r\n\t\trowinsert : function(offset) {\r\n\t\t\tvar table = self.plugin.getSelectedTable()[0],\r\n\t\t\t\trow = self.plugin.getSelectedRow()[0],\r\n\t\t\t\tcell = self.plugin.getSelectedCell()[0];\r\n\t\t\tvar rowIndex = row.rowIndex;\r\n\t\t\tif (offset === 1) {\r\n\t\t\t\trowIndex = row.rowIndex + (cell.rowSpan - 1) + offset;\r\n\t\t\t}\r\n\t\t\tvar newRow = table.insertRow(rowIndex);\r\n\t\t\tfor (var i = 0, len = row.cells.length; i < len; i++) {\r\n\t\t\t\tif (row.cells[i].rowSpan > 1) {\r\n\t\t\t\t\tlen -= row.cells[i].rowSpan - 1;\r\n\t\t\t\t}\r\n\t\t\t\tvar newCell = newRow.insertCell(i);\r\n\t\t\t\tif (offset === 1 && row.cells[i].colSpan > 1) {\r\n\t\t\t\t\tnewCell.colSpan = row.cells[i].colSpan;\r\n\t\t\t\t}\r\n\t\t\t\tnewCell.innerHTML = K.IE ? '' : '<br />';\r\n\t\t\t}\r\n\t\t\tfor (var j = rowIndex; j >= 0; j--) {\r\n\t\t\t\tvar cells = table.rows[j].cells;\r\n\t\t\t\tif (cells.length > i) {\r\n\t\t\t\t\tfor (var k = cell.cellIndex; k >= 0; k--) {\r\n\t\t\t\t\t\tif (cells[k].rowSpan > 1) {\r\n\t\t\t\t\t\t\tcells[k].rowSpan += 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tself.cmd.range.selectNodeContents(cell).collapse(true);\r\n\t\t\tself.cmd.select();\r\n\t\t\tself.addBookmark();\r\n\t\t},\r\n\t\trowinsertabove : function() {\r\n\t\t\tthis.rowinsert(0);\r\n\t\t},\r\n\t\trowinsertbelow : function() {\r\n\t\t\tthis.rowinsert(1);\r\n\t\t},\r\n\t\trowmerge : function() {\r\n\t\t\tvar table = self.plugin.getSelectedTable()[0],\r\n\t\t\t\trow = self.plugin.getSelectedRow()[0],\r\n\t\t\t\tcell = self.plugin.getSelectedCell()[0],\r\n\t\t\t\trowIndex = row.rowIndex,\r\n\t\t\t\tnextRowIndex = rowIndex + cell.rowSpan,\r\n\t\t\t\tnextRow = table.rows[nextRowIndex];\r\n\t\t\tif (table.rows.length <= nextRowIndex) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar cellIndex = cell.cellIndex;\r\n\t\t\tif (nextRow.cells.length <= cellIndex) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar nextCell = nextRow.cells[cellIndex];\r\n\t\t\tif (cell.colSpan !== nextCell.colSpan) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tcell.rowSpan += nextCell.rowSpan;\r\n\t\t\tnextRow.deleteCell(cellIndex);\r\n\t\t\tself.cmd.range.selectNodeContents(cell).collapse(true);\r\n\t\t\tself.cmd.select();\r\n\t\t\tself.addBookmark();\r\n\t\t},\r\n\t\tcolmerge : function() {\r\n\t\t\tvar table = self.plugin.getSelectedTable()[0],\r\n\t\t\t\trow = self.plugin.getSelectedRow()[0],\r\n\t\t\t\tcell = self.plugin.getSelectedCell()[0],\r\n\t\t\t\trowIndex = row.rowIndex,\r\n\t\t\t\tcellIndex = cell.cellIndex,\r\n\t\t\t\tnextCellIndex = cellIndex + 1;\r\n\t\t\tif (row.cells.length <= nextCellIndex) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar nextCell = row.cells[nextCellIndex];\r\n\t\t\tif (cell.rowSpan !== nextCell.rowSpan) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tcell.colSpan += nextCell.colSpan;\r\n\t\t\trow.deleteCell(nextCellIndex);\r\n\t\t\tself.cmd.range.selectNodeContents(cell).collapse(true);\r\n\t\t\tself.cmd.select();\r\n\t\t\tself.addBookmark();\r\n\t\t},\r\n\t\trowsplit : function() {\r\n\t\t\tvar table = self.plugin.getSelectedTable()[0],\r\n\t\t\t\trow = self.plugin.getSelectedRow()[0],\r\n\t\t\t\tcell = self.plugin.getSelectedCell()[0],\r\n\t\t\t\trowIndex = row.rowIndex;\r\n\t\t\tif (cell.rowSpan === 1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar cellIndex = _getCellIndex(table, row, cell);\r\n\t\t\tfor (var i = 1, len = cell.rowSpan; i < len; i++) {\r\n\t\t\t\tvar newRow = table.rows[rowIndex + i],\r\n\t\t\t\t\tnewCell = newRow.insertCell(cellIndex);\r\n\t\t\t\tif (cell.colSpan > 1) {\r\n\t\t\t\t\tnewCell.colSpan = cell.colSpan;\r\n\t\t\t\t}\r\n\t\t\t\tnewCell.innerHTML = K.IE ? '' : '<br />';\r\n\t\t\t\tcellIndex = _getCellIndex(table, newRow, newCell);\r\n\t\t\t}\r\n\t\t\tK(cell).removeAttr('rowSpan');\r\n\t\t\tself.cmd.range.selectNodeContents(cell).collapse(true);\r\n\t\t\tself.cmd.select();\r\n\t\t\tself.addBookmark();\r\n\t\t},\r\n\t\tcolsplit : function() {\r\n\t\t\tvar table = self.plugin.getSelectedTable()[0],\r\n\t\t\t\trow = self.plugin.getSelectedRow()[0],\r\n\t\t\t\tcell = self.plugin.getSelectedCell()[0],\r\n\t\t\t\tcellIndex = cell.cellIndex;\r\n\t\t\tif (cell.colSpan === 1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tfor (var i = 1, len = cell.colSpan; i < len; i++) {\r\n\t\t\t\tvar newCell = row.insertCell(cellIndex + i);\r\n\t\t\t\tif (cell.rowSpan > 1) {\r\n\t\t\t\t\tnewCell.rowSpan = cell.rowSpan;\r\n\t\t\t\t}\r\n\t\t\t\tnewCell.innerHTML = K.IE ? '' : '<br />';\r\n\t\t\t}\r\n\t\t\tK(cell).removeAttr('colSpan');\r\n\t\t\tself.cmd.range.selectNodeContents(cell).collapse(true);\r\n\t\t\tself.cmd.select();\r\n\t\t\tself.addBookmark();\r\n\t\t},\r\n\t\tcoldelete : function() {\r\n\t\t\tvar table = self.plugin.getSelectedTable()[0],\r\n\t\t\t\trow = self.plugin.getSelectedRow()[0],\r\n\t\t\t\tcell = self.plugin.getSelectedCell()[0],\r\n\t\t\t\tindex = cell.cellIndex;\r\n\t\t\tfor (var i = 0, len = table.rows.length; i < len; i++) {\r\n\t\t\t\tvar newRow = table.rows[i],\r\n\t\t\t\t\tnewCell = newRow.cells[index];\r\n\t\t\t\tif (newCell.colSpan > 1) {\r\n\t\t\t\t\tnewCell.colSpan -= 1;\r\n\t\t\t\t\tif (newCell.colSpan === 1) {\r\n\t\t\t\t\t\tK(newCell).removeAttr('colSpan');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnewRow.deleteCell(index);\r\n\t\t\t\t}\r\n\t\t\t\tif (newCell.rowSpan > 1) {\r\n\t\t\t\t\ti += newCell.rowSpan - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (row.cells.length === 0) {\r\n\t\t\t\tself.cmd.range.setStartBefore(table).collapse(true);\r\n\t\t\t\tself.cmd.select();\r\n\t\t\t\tK(table).remove();\r\n\t\t\t} else {\r\n\t\t\t\tself.cmd.selection(true);\r\n\t\t\t}\r\n\t\t\tself.addBookmark();\r\n\t\t},\r\n\t\trowdelete : function() {\r\n\t\t\tvar table = self.plugin.getSelectedTable()[0],\r\n\t\t\t\trow = self.plugin.getSelectedRow()[0],\r\n\t\t\t\tcell = self.plugin.getSelectedCell()[0],\r\n\t\t\t\trowIndex = row.rowIndex;\r\n\t\t\tfor (var i = cell.rowSpan - 1; i >= 0; i--) {\r\n\t\t\t\ttable.deleteRow(rowIndex + i);\r\n\t\t\t}\r\n\t\t\tif (table.rows.length === 0) {\r\n\t\t\t\tself.cmd.range.setStartBefore(table).collapse(true);\r\n\t\t\t\tself.cmd.select();\r\n\t\t\t\tK(table).remove();\r\n\t\t\t} else {\r\n\t\t\t\tself.cmd.selection(true);\r\n\t\t\t}\r\n\t\t\tself.addBookmark();\r\n\t\t}\r\n\t};\r\n\tself.clickToolbar(name, self.plugin.table.prop);\r\n});\r\n\n/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2011 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @site http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n*******************************************************************************/\r\nKindEditor.plugin('template', function(K) {\r\n\tvar self = this, name = 'template', lang = self.lang(name + '.'),\r\n\t\thtmlPath = self.pluginsPath + name + '/html/';\r\n\tfunction getFilePath(fileName) {\r\n\t\treturn htmlPath + fileName + '?ver=' + encodeURIComponent(K.DEBUG ? K.TIME : K.VERSION);\r\n\t}\r\n\tself.clickToolbar(name, function() {\r\n\t\tvar lang = self.lang(name + '.'),\r\n\t\t\tarr = ['<div style=\"padding:10px 20px;\">',\r\n\t\t\t\t'<div class=\"ke-header\">',\r\n\t\t\t\t'<div class=\"ke-left\">',\r\n\t\t\t\tlang. selectTemplate + ' <select>'];\r\n\t\t\tK.each(lang.fileList, function(key, val) {\r\n\t\t\t\tarr.push('<option value=\"' + key + '\">' + val + '</option>');\r\n\t\t\t});\r\n\t\t\thtml = [arr.join(''),\r\n\t\t\t\t'</select></div>',\r\n\t\t\t\t'<div class=\"ke-right\">',\r\n\t\t\t\t'<input type=\"checkbox\" id=\"keReplaceFlag\" name=\"replaceFlag\" value=\"1\" /> <label for=\"keReplaceFlag\">' + lang.replaceContent + '</label>',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<div class=\"ke-clearfix\"></div>',\r\n\t\t\t\t'</div>',\r\n\t\t\t\t'<iframe class=\"ke-textarea\" frameborder=\"0\" style=\"width:458px;height:260px;background-color:#FFF;\"></iframe>',\r\n\t\t\t\t'</div>'].join('');\r\n\t\tvar dialog = self.createDialog({\r\n\t\t\tname : name,\r\n\t\t\twidth : 500,\r\n\t\t\ttitle : self.lang(name),\r\n\t\t\tbody : html,\r\n\t\t\tyesBtn : {\r\n\t\t\t\tname : self.lang('yes'),\r\n\t\t\t\tclick : function(e) {\r\n\t\t\t\t\tvar doc = K.iframeDoc(iframe);\r\n\t\t\t\t\tself[checkbox[0].checked ? 'html' : 'insertHtml'](doc.body.innerHTML).hideDialog().focus();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tvar selectBox = K('select', dialog.div),\r\n\t\t\tcheckbox = K('[name=\"replaceFlag\"]', dialog.div),\r\n\t\t\tiframe = K('iframe', dialog.div);\r\n\t\tcheckbox[0].checked = true;\r\n\t\tiframe.attr('src', getFilePath(selectBox.val()));\r\n\t\tselectBox.change(function() {\r\n\t\t\tiframe.attr('src', getFilePath(this.value));\r\n\t\t});\r\n\t});\r\n});\r\n\n/*******************************************************************************\r\n* KindEditor - WYSIWYG HTML Editor for Internet\r\n* Copyright (C) 2006-2011 kindsoft.net\r\n*\r\n* @author Roddy <luolonghao@gmail.com>\r\n* @site http://www.kindsoft.net/\r\n* @licence http://www.kindsoft.net/license.php\r\n*******************************************************************************/\r\nKindEditor.plugin('wordpaste', function(K) {\r\n\tvar self = this, name = 'wordpaste';\r\n\tself.clickToolbar(name, function() {\r\n\t\tvar lang = self.lang(name + '.'),\r\n\t\t\thtml = '<div style=\"padding:10px 20px;\">' +\r\n\t\t\t\t'<div style=\"margin-bottom:10px;\">' + lang.comment + '</div>' +\r\n\t\t\t\t'<iframe class=\"ke-textarea\" frameborder=\"0\" style=\"width:408px;height:260px;\"></iframe>' +\r\n\t\t\t\t'</div>',\r\n\t\t\tdialog = self.createDialog({\r\n\t\t\t\tname : name,\r\n\t\t\t\twidth : 450,\r\n\t\t\t\ttitle : self.lang(name),\r\n\t\t\t\tbody : html,\r\n\t\t\t\tyesBtn : {\r\n\t\t\t\t\tname : self.lang('yes'),\r\n\t\t\t\t\tclick : function(e) {\r\n\t\t\t\t\t\tvar str = doc.body.innerHTML;\r\n\t\t\t\t\t\tstr = K.clearMsWord(str, self.filterMode ? self.htmlTags : K.options.htmlTags);\r\n\t\t\t\t\t\tself.insertHtml(str).hideDialog().focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tdiv = dialog.div,\r\n\t\t\tiframe = K('iframe', div),\r\n\t\t\tdoc = K.iframeDoc(iframe);\r\n\t\tif (!K.IE) {\r\n\t\t\tdoc.designMode = 'on';\r\n\t\t}\r\n\t\tdoc.open();\r\n\t\tdoc.write('<!doctype html><html><head><title>WordPaste</title></head>');\r\n\t\tdoc.write('<body style=\"background-color:#FFF;font-size:12px;margin:2px;\">');\r\n\t\tif (!K.IE) {\r\n\t\t\tdoc.write('<br />');\r\n\t\t}\r\n\t\tdoc.write('</body></html>');\r\n\t\tdoc.close();\r\n\t\tif (K.IE) {\r\n\t\t\tdoc.body.contentEditable = 'true';\r\n\t\t}\r\n\t\tiframe[0].contentWindow.focus();\r\n\t});\r\n});\r\n\n\nKindEditor.plugin('fixtoolbar', function (K) {\n    var self = this;\n    if (!self.fixToolBar) {\n        return;\n    }\n    function init() {\n        var toolbar = K('.ke-toolbar');\n        var originY = toolbar.pos().y;\n        K(window).bind('scroll', function () {\n            if (toolbar.css('position') == 'fixed') {\n                if(document.body.scrollTop - originY < 0){\n                    toolbar.css('position', 'static');\n                    toolbar.css('top', 'auto');\n                }\n            } else {\n                if (toolbar.pos().y - document.body.scrollTop < 0) {\n                    toolbar.css('position', 'fixed');\n                    toolbar.css('top', 0);\n                }\n            }\n        });\n    }\n    if (self.isCreated) {\n        init();\n    } else {\n        self.afterCreate(init);\n    }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/kindeditor/kindeditor-all.js\n// module id = dlod\n// module chunks = 4 7","<template>\n  <div class=\"editArticle\">\n    <!--<div class=\"dsds\" v-html=\"form.desc\"></div>-->\n    <el-row :gutter=\"20\" class=\"mg-top-15\">\n      <el-col :span=\"22\" :offset=\"1\">\n        <div class=\"grid-content bg-purple editArticle-content\">\n          <el-form ref=\"form\" :model=\"form\">\n            <el-form-item>\n              <el-input type=\"text\" placeholder=\"\" v-model=\"form.title\" maxlength=\"50\" show-word-limit></el-input>\n            </el-form-item>\n            <el-form-item>\n              <el-input type=\"textarea\" v-model=\"form.content\" id=\"editor_id\" name=\"content\"></el-input>\n            </el-form-item>\n            <el-form-item>\n              <el-select class=\"mg-top-15 choosePlate\" v-model=\"form.plate\" placeholder=\"\">\n                <el-option v-for=\"item in allPlates\" :key=\"item.id\" :label=\"item.plateName\" :value=\"item.id\"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item>\n              <el-button type=\"primary\" @click=\"onSubmit\"></el-button>\n            </el-form-item>\n          </el-form>\n        </div>\n      </el-col>\n    </el-row>\n\n  </div>\n</template>\n\n<script>\n  import '../../../static/kindeditor/kindeditor-all'\n  import '../../../static/kindeditor/lang/zh-CN'\n  import {reqArticleDetail,reqEditArticle} from '../../api/index'\n  import {mapState} from 'vuex'\n  export default {\n    data () {\n      return {\n        form: {\n          articleid:\"\",\n          title:\"\",\n          content:\"\",\n          plateName:\"\",\n            id:0\n\n        },\n        editor:\"\",\n        content:\"2323\"\n      }\n    },\n    computed:{\n      ...mapState(['loginUserId','allPlates'])\n    },\n    methods: {\n      kind(K){\n         this.editor =  KindEditor.create(K,{\n            items : ['source', '|', 'undo', 'redo', '|', 'preview', 'template', 'cut', 'copy', 'paste',\n              'plainpaste', 'wordpaste', '|', 'justifyleft', 'justifycenter', 'justifyright',\n              'justifyfull', 'insertorderedlist', 'insertunorderedlist', 'indent', 'outdent', 'subscript',\n              'superscript', 'clearhtml', 'quickformat', 'selectall', '|', 'fullscreen', '/',\n              'formatblock', 'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold',\n              'italic', 'underline', 'strikethrough', 'lineheight', 'removeformat', '|', 'image','multiimage',\n              'flash', 'media', 'insertfile', 'table', 'hr', 'baidumap', 'pagebreak',\n              'anchor', 'link', 'unlink']\n          }\n        )\n        console.log(K)\n      },\n      onSubmit(){\n        this.editor.sync();\n        this.form.content = document.getElementById('editor_id').value;\n        this.editor.html(this.form.content);\n        this.edit()\n      },\n      async edit(){\n        if(!this.form.title||!this.form.content||!this.form.plateName){\n          this.$message({\n            message: '',\n            duration: 2000,\n            type: 'error'\n          })\n          return\n        }\n        this.form.id = this.loginUserId\n        let result = await reqEditArticle(this.form)\n        if(result.status===1){\n          this.$message({\n            message: '',\n            type: 'success'\n          });\n          this.$router.push('/personalcenter/'+this.loginUserId)\n        }else{\n          this.$message({\n            message: '',\n            type: 'error'\n          });\n        }\n      },\n      async reqArticle(){\n        let result  = await reqArticleDetail(this.form.articleid)\n        this.form.content = result.content\n        this.form.title = result.title\n        this.form.plateName = result.plateName\n        this.editor.html(result.content);\n      }\n    },\n    watch: {\n\n    },\n    mounted(){\n      this.form.articleid = this.$route.params.articleid\n      this.reqArticle()\n      this.kind('#editor_id')\n        this.$store.dispatch('getAllPlates')\n    }\n  }\n</script>\n\n<style>\n  .editArticle{\n    padding: 10px;\n  }\n  .editArticle .editArticle-content{\n    background-color: white;\n  }\n  .mg-top-15{\n    margin-top: 15px;\n  }\n  .editArticle-content{\n    padding: 20px 40px;\n    padding-bottom: 60px;\n  }\n  .ke-container-default{\n    width: 100%!important;\n  }\n  .ke-container {\n    display: block;\n    border: 1px solid #F0F2F2;\n  }\n  .ke-toolbar {\n    border-bottom: 1px solid #F5F6F7;\n    background-color: #F5F6F7;\n  }\n  .ke-statusbar {\n    background-color: #F5F6F7;\n    border-top: 1px solid #F5F6F7;\n  }\n  .ke-edit-iframe{\n    min-height: 600px;\n  }\n  .choosePlate{\n    width: 30%;\n  }\n\n  .ke-edit{\n    height: auto!important;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/EditArticle/EditArticle.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"editArticle\"},[_c('el-row',{staticClass:\"mg-top-15\",attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":22,\"offset\":1}},[_c('div',{staticClass:\"grid-content bg-purple editArticle-content\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form}},[_c('el-form-item',[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"\",\"maxlength\":\"50\",\"show-word-limit\":\"\"},model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-input',{attrs:{\"type\":\"textarea\",\"id\":\"editor_id\",\"name\":\"content\"},model:{value:(_vm.form.content),callback:function ($$v) {_vm.$set(_vm.form, \"content\", $$v)},expression:\"form.content\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-select',{staticClass:\"mg-top-15 choosePlate\",attrs:{\"placeholder\":\"\"},model:{value:(_vm.form.plate),callback:function ($$v) {_vm.$set(_vm.form, \"plate\", $$v)},expression:\"form.plate\"}},_vm._l((_vm.allPlates),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.plateName,\"value\":item.id}})}),1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"\")])],1)],1)],1)])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-7b7df3ce\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/EditArticle/EditArticle.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7b7df3ce\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./EditArticle.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./EditArticle.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./EditArticle.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7b7df3ce\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./EditArticle.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/EditArticle/EditArticle.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}