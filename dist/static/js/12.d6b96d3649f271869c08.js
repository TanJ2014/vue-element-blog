webpackJsonp([12],{BW4r:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("lC5x"),a=i.n(s),o=i("J0Oq"),r=i.n(o),l=i("4YfN"),n=i.n(l),c=i("gyMJ"),u=i("b8UZ"),d={data:function(){return{form:{},userinfo:"",edituserinfo:{nickName:"",sex:"",email:"",signatrue:""},dialogFormToux:!1,dialogFormVisible:!1,formLabelWidth:"80px",imageUrl:""}},computed:n()({},Object(u.b)(["loginUserId"])),methods:{init:function(){var e=this;return r()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.m)(e.loginUserId);case 2:e.userinfo=t.sent,e.edituserinfo.nickName=e.userinfo.nickName,e.edituserinfo.sex=e.userinfo.sex,e.edituserinfo.email=e.userinfo.email,e.edituserinfo.signatrue=e.userinfo.signatrue;case 7:case"end":return t.stop()}},t,e)}))()},handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,i=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),i||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&i},submitEdit:function(){var e=this;return r()(a.a.mark(function t(){var i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.edituserinfo),t.next=3,Object(c.j)(e.edituserinfo);case 3:1===(i=t.sent).status?(e.$message({message:i.message,type:"success"}),e.dialogFormVisible=!1):(e.$message({message:i.message,type:"error"}),e.dialogFormVisible=!0);case 5:case"end":return t.stop()}},t,e)}))()}},mounted:function(){this.init()}},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"userinfo"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:3}},[s("div",{staticClass:"grid-content bg-purple userTou"},[s("img",{staticClass:"userlogo",attrs:{src:i("jv0K"),alt:""}}),e._v(" "),s("el-button",{staticClass:"link",attrs:{type:"text"},on:{click:function(t){e.dialogFormToux=!0}}},[e._v("修改头像")])],1)]),e._v(" "),s("el-col",{attrs:{span:21}},[s("div",{staticClass:"grid-content bg-purple"},[s("div",{staticClass:"clearfix"},[s("p",{staticClass:"fl"},[s("i",{staticClass:"el-icon-postcard",staticStyle:{color:"#67C23A"}},[e._v(" ")]),e._v("ID:"+e._s(e.userinfo.id))]),e._v(" "),s("p",{staticClass:"fr link",on:{click:function(t){return e.$router.push("/personalcenter/"+e.userinfo.id)}}},[e._v("个人主页 "),s("i",{staticClass:"el-icon-d-arrow-right"})])]),e._v(" "),s("div",[s("p",[s("span",[s("i",{staticClass:"el-icon-trophy",staticStyle:{color:"#E6A23C"}},[e._v(" ")]),e._v("积分："+e._s(e.userinfo.integral))]),e._v(" "),s("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),s("span",[s("i",{staticClass:"el-icon-s-custom",staticStyle:{color:"#409EFF"}},[e._v(" ")]),e._v("身份："+e._s(e.userinfo.roleName))])],1)]),e._v(" "),s("el-divider"),e._v(" "),s("div",{staticClass:"userinfo-list"},[s("ul",[s("li",{staticClass:"userinfo-item clearfix"},[s("p",{staticClass:"fl"},[s("span",[e._v("用户名：")]),s("span",[e._v(e._s(e.userinfo.nickName))])]),e._v(" "),s("el-button",{staticClass:"fr link",attrs:{type:"text"},on:{click:function(t){e.dialogFormVisible=!0}}},[s("i",{staticClass:"el-icon-edit"},[e._v(" ")]),e._v("修改个人资料")])],1),e._v(" "),s("li",{staticClass:"userinfo-item"},[s("p",[s("span",[e._v("性别：")]),s("span",[e._v(e._s(e.userinfo.sex))])])]),e._v(" "),s("li",{staticClass:"userinfo-item"},[s("p",[s("span",[e._v("邮箱：")]),s("span",[e._v(e._s(e.userinfo.email))])])]),e._v(" "),s("li",{staticClass:"userinfo-item"},[s("p",[s("span",[e._v("个性签名：")]),s("span",[e._v(e._s(e.userinfo.signatrue))])])])])])],1)])],1),e._v(" "),s("el-dialog",{attrs:{title:"修改个人信息",visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{attrs:{model:e.edituserinfo}},[s("el-form-item",{attrs:{label:"用户昵称","label-width":e.formLabelWidth}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.edituserinfo.nickName,callback:function(t){e.$set(e.edituserinfo,"nickName",t)},expression:"edituserinfo.nickName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"性别","label-width":e.formLabelWidth}},[s("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.edituserinfo.sex,callback:function(t){e.$set(e.edituserinfo,"sex",t)},expression:"edituserinfo.sex"}},[s("el-option",{attrs:{label:"男",value:"男"}}),e._v(" "),s("el-option",{attrs:{label:"女",value:"女"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"邮箱","label-width":e.formLabelWidth}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.edituserinfo.email,callback:function(t){e.$set(e.edituserinfo,"email",t)},expression:"edituserinfo.email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"个性签名","label-width":e.formLabelWidth}},[s("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",maxlength:"100","show-word-limit":""},model:{value:e.edituserinfo.signatrue,callback:function(t){e.$set(e.edituserinfo,"signatrue",t)},expression:"edituserinfo.signatrue"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitEdit()}}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"修改头像",width:"400px",visible:e.dialogFormToux},on:{"update:visible":function(t){e.dialogFormToux=t}}},[s("el-form",{attrs:{model:e.form}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"auto-upload":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?s("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg文件，且不超过2MB")])])],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormToux=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.upload()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var m=i("C7Lr")(d,f,!1,function(e){i("eLua")},null,null);t.default=m.exports},eLua:function(e,t){}});
//# sourceMappingURL=12.d6b96d3649f271869c08.js.map